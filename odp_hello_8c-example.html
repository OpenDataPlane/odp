<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>API Reference Manual: odp_hello.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="odpdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="ODP-Logo-HQ.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">API Reference Manual
   &#160;<span id="projectnumber">1.49.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('odp_hello_8c-example.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">odp_hello.c</div>  </div>
</div><!--header-->
<div class="contents">
<p>This is a minimal application which demonstrates the startup and shutdown steps of an ODP application. It can be also used to debug API related build problems, etc. It does not use helpers to minimize dependency to anything else than the ODP API header file.</p>
<div class="fragment"><div class="line"><span class="comment">/* SPDX-License-Identifier: BSD-3-Clause</span></div>
<div class="line"><span class="comment"> * Copyright (c) 2016-2018 Linaro Limited</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="odp__api_8h.html">odp_api.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>{</div>
<div class="line">    <span class="keywordtype">int</span> num;</div>
<div class="line">} options_t;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> parse_args(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[], options_t *opt)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> * <span class="keyword">const</span> args[] = {<span class="stringliteral">&quot;-n&quot;</span>};</div>
<div class="line">    <span class="keywordtype">int</span> i, tmp;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 1; i &lt; argc; i++) {</div>
<div class="line">        <span class="keywordflow">if</span> ((strcmp(argv[i], args[0]) == 0) &amp;&amp; argv[i + 1] &amp;&amp;</div>
<div class="line">            (sscanf(argv[i + 1], <span class="stringliteral">&quot;%i&quot;</span>, &amp;tmp) == 1)) {</div>
<div class="line">            opt-&gt;num = tmp;</div>
<div class="line">            i++;</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            printf(<span class="stringliteral">&quot;\nUsage:\n&quot;</span></div>
<div class="line">                   <span class="stringliteral">&quot;  [%s  Number of iterations]\n\n&quot;</span>,</div>
<div class="line">                   args[0]);</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="group__odp__initialization.html#ga8d362bd3c7c87ab5892ca63b15c375c0">odp_instance_t</a> inst;</div>
<div class="line">    options_t opt;</div>
<div class="line">    <span class="keywordtype">int</span> i;</div>
<div class="line"> </div>
<div class="line">    memset(&amp;opt, 0, <span class="keyword">sizeof</span>(opt));</div>
<div class="line">    opt.num = 1;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (parse_args(argc, argv, &amp;opt))</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a name="a0"></a><a class="code" href="group__odp__initialization.html#ga68d81088e65ef66180fb51076905e34d">odp_init_global</a>(&amp;inst, NULL, NULL)) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Global init failed.\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a name="a1"></a><a class="code" href="group__odp__initialization.html#ga265470ea614bfeca9d8901e81ddefca9">odp_init_local</a>(inst, <a name="a2"></a><a class="code" href="group__odp__thread.html#ggafc7a7c180de9811d71b7cb050713bf53a9aab3fdb10eb2000a864bff81f23c00a">ODP_THREAD_CONTROL</a>)) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Local init failed.\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; opt.num; i++) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Hello world from CPU %i!\n&quot;</span>, <a name="a3"></a><a class="code" href="group__odp__cpu.html#ga29ed8c7764aa102f385e150dab1d27f3">odp_cpu_id</a>());</div>
<div class="line">        <a name="a4"></a><a class="code" href="group__odp__time.html#ga506b0234dfdd7c0dc98d6acd27d57f8a">odp_time_wait_ns</a>(<a name="a5"></a><a class="code" href="group__odp__time.html#ga49ab6f8fe6c0aa5b820717fd91f16ab5">ODP_TIME_SEC_IN_NS</a>);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a name="a6"></a><a class="code" href="group__odp__initialization.html#ga6d15f0e1718da9477948dedb06a2f01a">odp_term_local</a>()) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Local term failed.\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a name="a7"></a><a class="code" href="group__odp__initialization.html#ga87e9c66ad92201c9e0a710294eab1569">odp_term_global</a>(inst)) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Global term failed.\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="agroup__odp__cpu_html_ga29ed8c7764aa102f385e150dab1d27f3"><div class="ttname"><a href="group__odp__cpu.html#ga29ed8c7764aa102f385e150dab1d27f3">odp_cpu_id</a></div><div class="ttdeci">int odp_cpu_id(void)</div><div class="ttdoc">CPU identifier.</div></div>
<div class="ttc" id="agroup__odp__initialization_html_ga265470ea614bfeca9d8901e81ddefca9"><div class="ttname"><a href="group__odp__initialization.html#ga265470ea614bfeca9d8901e81ddefca9">odp_init_local</a></div><div class="ttdeci">int odp_init_local(odp_instance_t instance, odp_thread_type_t thr_type)</div><div class="ttdoc">Thread local ODP initialization.</div></div>
<div class="ttc" id="agroup__odp__initialization_html_ga68d81088e65ef66180fb51076905e34d"><div class="ttname"><a href="group__odp__initialization.html#ga68d81088e65ef66180fb51076905e34d">odp_init_global</a></div><div class="ttdeci">int odp_init_global(odp_instance_t *instance, const odp_init_t *params, const odp_platform_init_t *platform_params)</div><div class="ttdoc">Global ODP initialization.</div></div>
<div class="ttc" id="agroup__odp__initialization_html_ga6d15f0e1718da9477948dedb06a2f01a"><div class="ttname"><a href="group__odp__initialization.html#ga6d15f0e1718da9477948dedb06a2f01a">odp_term_local</a></div><div class="ttdeci">int odp_term_local(void)</div><div class="ttdoc">Thread local ODP termination.</div></div>
<div class="ttc" id="agroup__odp__initialization_html_ga87e9c66ad92201c9e0a710294eab1569"><div class="ttname"><a href="group__odp__initialization.html#ga87e9c66ad92201c9e0a710294eab1569">odp_term_global</a></div><div class="ttdeci">int odp_term_global(odp_instance_t instance)</div><div class="ttdoc">Global ODP termination.</div></div>
<div class="ttc" id="agroup__odp__initialization_html_ga8d362bd3c7c87ab5892ca63b15c375c0"><div class="ttname"><a href="group__odp__initialization.html#ga8d362bd3c7c87ab5892ca63b15c375c0">odp_instance_t</a></div><div class="ttdeci">uint64_t odp_instance_t</div><div class="ttdoc">ODP instance ID.</div><div class="ttdef"><b>Definition:</b> <a href="api_2abi-default_2init_8h_source.html#l00031">api/abi-default/init.h:31</a></div></div>
<div class="ttc" id="agroup__odp__thread_html_ggafc7a7c180de9811d71b7cb050713bf53a9aab3fdb10eb2000a864bff81f23c00a"><div class="ttname"><a href="group__odp__thread.html#ggafc7a7c180de9811d71b7cb050713bf53a9aab3fdb10eb2000a864bff81f23c00a">ODP_THREAD_CONTROL</a></div><div class="ttdeci">@ ODP_THREAD_CONTROL</div><div class="ttdoc">Control thread.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2thread__types_8h_source.html#l00054">api/spec/thread_types.h:53</a></div></div>
<div class="ttc" id="agroup__odp__time_html_ga49ab6f8fe6c0aa5b820717fd91f16ab5"><div class="ttname"><a href="group__odp__time.html#ga49ab6f8fe6c0aa5b820717fd91f16ab5">ODP_TIME_SEC_IN_NS</a></div><div class="ttdeci">#define ODP_TIME_SEC_IN_NS</div><div class="ttdoc">A second in nanoseconds.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2time__types_8h_source.html#l00031">api/spec/time_types.h:31</a></div></div>
<div class="ttc" id="agroup__odp__time_html_ga506b0234dfdd7c0dc98d6acd27d57f8a"><div class="ttname"><a href="group__odp__time.html#ga506b0234dfdd7c0dc98d6acd27d57f8a">odp_time_wait_ns</a></div><div class="ttdeci">void odp_time_wait_ns(uint64_t ns)</div><div class="ttdoc">Wait the specified number of nanoseconds.</div></div>
<div class="ttc" id="aodp__api_8h_html"><div class="ttname"><a href="odp__api_8h.html">odp_api.h</a></div><div class="ttdoc">The OpenDataPlane API.</div></div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
