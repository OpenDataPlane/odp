<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>API Reference Manual: odp_sched_pktio.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="odpdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="ODP-Logo-HQ.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">API Reference Manual
   &#160;<span id="projectnumber">1.48.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('odp_sched_pktio_8c-example.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">odp_sched_pktio.c</div>  </div>
</div><!--header-->
<div class="contents">
<p>Test application for scheduled packet IO</p>
<div class="fragment"><div class="line"><span class="comment">/* SPDX-License-Identifier: BSD-3-Clause</span></div>
<div class="line"><span class="comment"> * Copyright (c) 2018 Linaro Limited</span></div>
<div class="line"><span class="comment"> * Copyright (c) 2025 Nokia</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;signal.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdint.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;inttypes.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="odp__api_8h.html">odp_api.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;odp/helper/odph_api.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;pktio_common.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define DEBUG_PRINT       0</span></div>
<div class="line"><span class="preprocessor">#define MAX_WORKERS       64</span></div>
<div class="line"><span class="preprocessor">#define MAX_PKTIOS        (ODP_PKTIO_MAX_INDEX + 1)</span></div>
<div class="line"><span class="preprocessor">#define MAX_PKTIO_NAME    31</span></div>
<div class="line"><span class="preprocessor">#define MAX_PKTIO_QUEUES  MAX_WORKERS</span></div>
<div class="line"><span class="preprocessor">#define MAX_PIPE_STAGES   64</span></div>
<div class="line"><span class="preprocessor">#define MAX_PIPE_QUEUES   1024</span></div>
<div class="line"><span class="preprocessor">#define MAX_PKT_LEN       1514</span></div>
<div class="line"><span class="preprocessor">#define MAX_PKT_NUM       (128 * 1024)</span></div>
<div class="line"><span class="preprocessor">#define MIN_PKT_SEG_LEN   64</span></div>
<div class="line"><span class="preprocessor">#define CHECK_PERIOD      10000</span></div>
<div class="line"><span class="preprocessor">#define TEST_PASSED_LIMIT 5000</span></div>
<div class="line"><span class="preprocessor">#define SCHED_MODE_PARAL  1</span></div>
<div class="line"><span class="preprocessor">#define SCHED_MODE_ATOMIC 2</span></div>
<div class="line"><span class="preprocessor">#define SCHED_MODE_ORDER  3</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>test_options_t {</div>
<div class="line">    <span class="keywordtype">long</span> <span class="keywordtype">int</span> timeout_us;</div>
<div class="line">    <span class="keywordtype">int</span> sched_mode;</div>
<div class="line">    <span class="keywordtype">int</span> num_worker;</div>
<div class="line">    <span class="keywordtype">int</span> num_pktio;</div>
<div class="line">    <span class="keywordtype">int</span> num_pktio_queue;</div>
<div class="line">    <span class="keywordtype">int</span> burst_size;</div>
<div class="line">    <span class="keywordtype">int</span> pipe_stages;</div>
<div class="line">    <span class="keywordtype">int</span> pipe_queues;</div>
<div class="line">    uint32_t pipe_queue_size;</div>
<div class="line">    uint8_t collect_stat;</div>
<div class="line">    uint32_t wait_sec;</div>
<div class="line">    <span class="keywordtype">char</span> pktio_name[MAX_PKTIOS][MAX_PKTIO_NAME + 1];</div>
<div class="line"> </div>
<div class="line">} test_options_t;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>{</div>
<div class="line">    <span class="keywordtype">int</span>  worker_id;</div>
<div class="line">    <span class="keywordtype">void</span> *test_global_ptr;</div>
<div class="line">} worker_arg_t;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span><a name="a0"></a><a class="code" href="group__odp__compiler__optim.html#ga205a8257879c02657e7c39ee7ad5e40a">ODP_ALIGNED_CACHE</a> {</div>
<div class="line">    uint64_t rx_pkt;</div>
<div class="line">    uint64_t tx_pkt;</div>
<div class="line">    uint64_t pipe_pkt;</div>
<div class="line">    uint64_t tx_drop;</div>
<div class="line">    uint64_t pipe_drop;</div>
<div class="line">    uint64_t tmo;</div>
<div class="line">} worker_stat_t;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>pktin_queue_context_t {</div>
<div class="line">    <span class="comment">/* Queue context must start with stage and idx */</span></div>
<div class="line">    uint16_t stage;</div>
<div class="line">    uint16_t queue_idx;</div>
<div class="line"> </div>
<div class="line">    uint8_t  dst_pktio;</div>
<div class="line">    uint8_t  dst_queue;</div>
<div class="line">    uint8_t  src_pktio;</div>
<div class="line">    uint8_t  src_queue;</div>
<div class="line">    <a name="_a1"></a><a class="code" href="structodp__pktout__queue__s.html">odp_pktout_queue_t</a> dst_pktout;</div>
<div class="line">} pktin_queue_context_t;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>pipe_queue_context_t {</div>
<div class="line">    <span class="comment">/* Queue context must start with stage and idx. */</span></div>
<div class="line">    uint16_t stage;</div>
<div class="line">    uint16_t queue_idx;</div>
<div class="line">} pipe_queue_context_t;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>{</div>
<div class="line">    <span class="keyword">volatile</span> <span class="keywordtype">int</span>  stop_workers;</div>
<div class="line">    <a name="_a2"></a><a class="code" href="structodp__barrier__s.html">odp_barrier_t</a> worker_start;</div>
<div class="line"> </div>
<div class="line">    test_options_t opt;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">int</span> max_workers;</div>
<div class="line">    <a name="_a3"></a><a class="code" href="structodp__cpumask__s.html">odp_cpumask_t</a> cpumask;</div>
<div class="line">    <a class="code" href="group__odp__initialization.html#ga8d362bd3c7c87ab5892ca63b15c375c0">odp_instance_t</a> instance;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">int</span> worker_cpu[MAX_WORKERS];</div>
<div class="line"> </div>
<div class="line">    <a name="_a4"></a><a class="code" href="struct__odp__abi__pool__t.html">odp_pool_t</a> pool;</div>
<div class="line">    uint32_t   pkt_len;</div>
<div class="line">    uint32_t   pkt_num;</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">struct </span>{</div>
<div class="line">        <a name="_a5"></a><a class="code" href="struct__odp__abi__pktio__t.html">odp_pktio_t</a> pktio;</div>
<div class="line">        <span class="keywordtype">int</span> pktio_index;</div>
<div class="line">        <span class="keywordtype">int</span> started;</div>
<div class="line">        odph_ethaddr_t my_addr;</div>
<div class="line">        <a name="_a6"></a><a class="code" href="struct__odp__abi__queue__t.html">odp_queue_t</a> input_queue[MAX_PKTIO_QUEUES];</div>
<div class="line">        <a class="code" href="structodp__pktout__queue__s.html">odp_pktout_queue_t</a> pktout[MAX_PKTIO_QUEUES];</div>
<div class="line">        pktin_queue_context_t queue_context[MAX_PKTIO_QUEUES];</div>
<div class="line"> </div>
<div class="line">    } pktio[MAX_PKTIOS];</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">struct </span>{</div>
<div class="line">        <a name="_a7"></a><a class="code" href="struct__odp__abi__timer__pool__t.html">odp_timer_pool_t</a> timer_pool;</div>
<div class="line">        <a class="code" href="struct__odp__abi__pool__t.html">odp_pool_t</a>       timeout_pool;</div>
<div class="line">        uint64_t         timeout_tick;</div>
<div class="line">        <a name="_a8"></a><a class="code" href="struct__odp__abi__timer__t.html">odp_timer_t</a>      timer[MAX_PKTIOS][MAX_PKTIO_QUEUES];</div>
<div class="line"> </div>
<div class="line">    } timer;</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">struct </span>{</div>
<div class="line">        <a class="code" href="struct__odp__abi__queue__t.html">odp_queue_t</a> queue[MAX_PIPE_QUEUES];</div>
<div class="line">    } pipe_queue[MAX_PKTIOS][MAX_PIPE_STAGES];</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">struct </span>{</div>
<div class="line">        pipe_queue_context_t ctx;</div>
<div class="line">    } pipe_queue_ctx[MAX_PIPE_STAGES][MAX_PIPE_QUEUES];</div>
<div class="line"> </div>
<div class="line">    worker_arg_t worker_arg[MAX_WORKERS];</div>
<div class="line"> </div>
<div class="line">    worker_stat_t worker_stat[MAX_WORKERS];</div>
<div class="line">    uint64_t rx_pkt_sum;</div>
<div class="line">    uint64_t tx_pkt_sum;</div>
<div class="line"> </div>
<div class="line">    <a name="_a9"></a><a class="code" href="structodp__schedule__config__t.html">odp_schedule_config_t</a> schedule_config;</div>
<div class="line"> </div>
<div class="line">} test_global_t;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">enum</span> longopt_only {</div>
<div class="line">    OPT_WAIT_LINK = 256</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> test_global_t *test_global;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> set_dst_eth_addr(odph_ethaddr_t *eth_addr, <span class="keywordtype">int</span> index)</div>
<div class="line">{</div>
<div class="line">    eth_addr-&gt;addr[0] = 0x02;</div>
<div class="line">    eth_addr-&gt;addr[1] = 0;</div>
<div class="line">    eth_addr-&gt;addr[2] = 0;</div>
<div class="line">    eth_addr-&gt;addr[3] = 0;</div>
<div class="line">    eth_addr-&gt;addr[4] = 0;</div>
<div class="line">    eth_addr-&gt;addr[5] = index;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> fill_eth_addr(<a name="_a10"></a><a class="code" href="struct__odp__abi__packet__t.html">odp_packet_t</a> pkt[], <span class="keywordtype">int</span> num,</div>
<div class="line">                 test_global_t *test_global, <span class="keywordtype">int</span> out)</div>
<div class="line">{</div>
<div class="line">    odph_ethhdr_t *eth;</div>
<div class="line">    <span class="keywordtype">int</span> i;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; num; ++i) {</div>
<div class="line">        eth = <a name="a11"></a><a class="code" href="group__odp__packet.html#ga433ba21e3c83c6d4d9831c9e732b63de">odp_packet_data</a>(pkt[i]);</div>
<div class="line"> </div>
<div class="line">        eth-&gt;src = test_global-&gt;pktio[out].my_addr;</div>
<div class="line">        set_dst_eth_addr(&amp;eth-&gt;dst, out);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> send_packets(test_global_t *test_global,</div>
<div class="line">                <a class="code" href="struct__odp__abi__packet__t.html">odp_packet_t</a> pkt[], <span class="keywordtype">int</span> num_pkt,</div>
<div class="line">                <span class="keywordtype">int</span> output, <a class="code" href="structodp__pktout__queue__s.html">odp_pktout_queue_t</a> pktout,</div>
<div class="line">                <span class="keywordtype">int</span> worker_id)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> sent, drop;</div>
<div class="line"> </div>
<div class="line">    fill_eth_addr(pkt, num_pkt, test_global, output);</div>
<div class="line"> </div>
<div class="line">    sent = <a name="a12"></a><a class="code" href="group__odp__packet__io.html#gacb5db3a908775522e316c8b8ccb36498">odp_pktout_send</a>(pktout, pkt, num_pkt);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a name="a13"></a><a class="code" href="group__odp__compiler__optim.html#ga2b29f27f12b751250b471aa9c14c57c8">odp_unlikely</a>(sent &lt; 0))</div>
<div class="line">        sent = 0;</div>
<div class="line"> </div>
<div class="line">    drop = num_pkt - sent;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group__odp__compiler__optim.html#ga2b29f27f12b751250b471aa9c14c57c8">odp_unlikely</a>(drop &gt; 0))</div>
<div class="line">        <a name="a14"></a><a class="code" href="group__odp__packet.html#gad190c5b094a0406b9d86da03f10c15cb">odp_packet_free_multi</a>(&amp;pkt[sent], drop);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group__odp__compiler__optim.html#ga2b29f27f12b751250b471aa9c14c57c8">odp_unlikely</a>(test_global-&gt;opt.collect_stat)) {</div>
<div class="line">        test_global-&gt;worker_stat[worker_id].tx_pkt += sent;</div>
<div class="line">        test_global-&gt;worker_stat[worker_id].tx_drop += drop;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> worker_thread_direct(<span class="keywordtype">void</span> *arg)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> num_pkt, out;</div>
<div class="line">    <a class="code" href="structodp__pktout__queue__s.html">odp_pktout_queue_t</a> pktout;</div>
<div class="line">    <a class="code" href="struct__odp__abi__queue__t.html">odp_queue_t</a> queue;</div>
<div class="line">    pktin_queue_context_t *queue_context;</div>
<div class="line">    worker_arg_t *worker_arg = arg;</div>
<div class="line">    test_global_t *test_global = worker_arg-&gt;test_global_ptr;</div>
<div class="line">    <span class="keywordtype">int</span> worker_id = worker_arg-&gt;worker_id;</div>
<div class="line">    uint32_t polls = 0;</div>
<div class="line">    <span class="keywordtype">int</span> burst_size = test_global-&gt;opt.burst_size;</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;Worker %i started\n&quot;</span>, worker_id);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Wait for other workers to start */</span></div>
<div class="line">    <a name="a15"></a><a class="code" href="group__odp__barrier.html#ga97c8f84490e816330f96155acf0b4b77">odp_barrier_wait</a>(&amp;test_global-&gt;worker_start);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span> (1) {</div>
<div class="line">        <a name="_a16"></a><a class="code" href="struct__odp__abi__event__t.html">odp_event_t</a> ev[burst_size];</div>
<div class="line">        <a class="code" href="struct__odp__abi__packet__t.html">odp_packet_t</a> pkt[burst_size];</div>
<div class="line"> </div>
<div class="line">        polls++;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (polls == CHECK_PERIOD) {</div>
<div class="line">            polls = 0;</div>
<div class="line">            <span class="keywordflow">if</span> (test_global-&gt;stop_workers)</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        num_pkt = <a name="a17"></a><a class="code" href="group__odp__scheduler.html#ga34f1bae924466cc2b57563f8fe2dc0d1">odp_schedule_multi</a>(&amp;queue, <a name="a18"></a><a class="code" href="group__odp__scheduler.html#ga9116776b8262a74af7dac7ef46fc7ace">ODP_SCHED_NO_WAIT</a>,</div>
<div class="line">                         ev, burst_size);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (num_pkt &lt;= 0)</div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line"> </div>
<div class="line">        queue_context = <a name="a19"></a><a class="code" href="group__odp__queue.html#ga96ab88617101283b30ba784c9c9e7367">odp_queue_context</a>(queue);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (DEBUG_PRINT)</div>
<div class="line">            printf(<span class="stringliteral">&quot;worker %i: [%i/%i] -&gt; [%i/%i], %i packets\n&quot;</span>,</div>
<div class="line">                   worker_id,</div>
<div class="line">                   queue_context-&gt;src_pktio,</div>
<div class="line">                   queue_context-&gt;src_queue,</div>
<div class="line">                   queue_context-&gt;dst_pktio,</div>
<div class="line">                   queue_context-&gt;dst_queue, num_pkt);</div>
<div class="line"> </div>
<div class="line">        <a name="a20"></a><a class="code" href="group__odp__packet.html#ga0924634e5431e0ae31bb0cfd7bf8d262">odp_packet_from_event_multi</a>(pkt, ev, num_pkt);</div>
<div class="line"> </div>
<div class="line">        pktout = queue_context-&gt;dst_pktout;</div>
<div class="line">        out    = queue_context-&gt;dst_pktio;</div>
<div class="line"> </div>
<div class="line">        send_packets(test_global, pkt, num_pkt, out, pktout, worker_id);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group__odp__compiler__optim.html#ga2b29f27f12b751250b471aa9c14c57c8">odp_unlikely</a>(test_global-&gt;opt.collect_stat))</div>
<div class="line">            test_global-&gt;worker_stat[worker_id].rx_pkt += num_pkt;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Free prefetched packets before exiting worker thread as</span></div>
<div class="line"><span class="comment">     * such packets can block main thread event cleanup or</span></div>
<div class="line"><span class="comment">     * cause buffer leak.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <a name="a21"></a><a class="code" href="group__odp__scheduler.html#ga9868ccb25b6631ef29cc921ee2e522b0">odp_schedule_pause</a>();</div>
<div class="line">    <span class="keywordflow">while</span> (1) {</div>
<div class="line">        <a class="code" href="struct__odp__abi__event__t.html">odp_event_t</a>  ev;</div>
<div class="line"> </div>
<div class="line">        ev = <a name="a22"></a><a class="code" href="group__odp__scheduler.html#gae4ca1012ebb16ff8b9752b958dc45ce6">odp_schedule</a>(NULL, <a class="code" href="group__odp__scheduler.html#ga9116776b8262a74af7dac7ef46fc7ace">ODP_SCHED_NO_WAIT</a>);</div>
<div class="line">        <span class="keywordflow">if</span> (ev == <a name="a23"></a><a class="code" href="group__odp__event.html#gae1a3732a534ba7a892fca38b824591b0">ODP_EVENT_INVALID</a>)</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <a name="a24"></a><a class="code" href="group__odp__event.html#ga1622f73356c325f625db747cb3badf8d">odp_event_free</a>(ev);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Non-prefetched events in scheduler are cleaned up by main thread */</span></div>
<div class="line">    printf(<span class="stringliteral">&quot;Worker %i stopped\n&quot;</span>, worker_id);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> enqueue_events(<a class="code" href="struct__odp__abi__queue__t.html">odp_queue_t</a> dst_queue, <a class="code" href="struct__odp__abi__event__t.html">odp_event_t</a> ev[],</div>
<div class="line">                  <span class="keywordtype">int</span> num, <span class="keywordtype">int</span> worker_id)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> sent, drop;</div>
<div class="line"> </div>
<div class="line">    sent = <a name="a25"></a><a class="code" href="group__odp__queue.html#ga6b3ef7c0d52f9dd31e534b9cf17eb218">odp_queue_enq_multi</a>(dst_queue, ev, num);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group__odp__compiler__optim.html#ga2b29f27f12b751250b471aa9c14c57c8">odp_unlikely</a>(sent &lt; 0))</div>
<div class="line">        sent = 0;</div>
<div class="line"> </div>
<div class="line">    drop = num - sent;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group__odp__compiler__optim.html#ga2b29f27f12b751250b471aa9c14c57c8">odp_unlikely</a>(drop))</div>
<div class="line">        <a name="a26"></a><a class="code" href="group__odp__event.html#ga0c1fddf7c1f6ca33b7a28aa0690f7cc0">odp_event_free_multi</a>(&amp;ev[sent], drop);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group__odp__compiler__optim.html#ga2b29f27f12b751250b471aa9c14c57c8">odp_unlikely</a>(test_global-&gt;opt.collect_stat))</div>
<div class="line">        test_global-&gt;worker_stat[worker_id].pipe_drop += drop;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="struct__odp__abi__queue__t.html">odp_queue_t</a> next_queue(test_global_t *test_global, <span class="keywordtype">int</span> input,</div>
<div class="line">                     uint16_t stage, uint16_t queue_idx)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> test_global-&gt;pipe_queue[input][stage].queue[queue_idx];</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> worker_thread_pipeline(<span class="keywordtype">void</span> *arg)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> i, num_pkt, input, output, output_queue;</div>
<div class="line">    <a class="code" href="struct__odp__abi__queue__t.html">odp_queue_t</a> queue, dst_queue;</div>
<div class="line">    <a class="code" href="structodp__pktout__queue__s.html">odp_pktout_queue_t</a> pktout;</div>
<div class="line">    pipe_queue_context_t *pipe_context;</div>
<div class="line">    uint16_t stage, queue_idx;</div>
<div class="line">    worker_arg_t *worker_arg = arg;</div>
<div class="line">    test_global_t *test_global = worker_arg-&gt;test_global_ptr;</div>
<div class="line">    <span class="keywordtype">int</span> worker_id = worker_arg-&gt;worker_id;</div>
<div class="line">    <span class="keywordtype">int</span> pipe_stages = test_global-&gt;opt.pipe_stages;</div>
<div class="line">    <span class="keywordtype">int</span> pipe_queues = test_global-&gt;opt.pipe_queues;</div>
<div class="line">    <span class="keywordtype">int</span> num_pktio = test_global-&gt;opt.num_pktio;</div>
<div class="line">    <span class="keywordtype">int</span> num_pktio_queue = test_global-&gt;opt.num_pktio_queue;</div>
<div class="line">    uint32_t polls = 0;</div>
<div class="line">    <span class="keywordtype">int</span> burst_size = test_global-&gt;opt.burst_size;</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;Worker %i started\n&quot;</span>, worker_id);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Wait for other workers to start */</span></div>
<div class="line">    <a class="code" href="group__odp__barrier.html#ga97c8f84490e816330f96155acf0b4b77">odp_barrier_wait</a>(&amp;test_global-&gt;worker_start);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span> (1) {</div>
<div class="line">        <a class="code" href="struct__odp__abi__event__t.html">odp_event_t</a> ev[burst_size];</div>
<div class="line">        <a class="code" href="struct__odp__abi__packet__t.html">odp_packet_t</a> pkt[burst_size];</div>
<div class="line"> </div>
<div class="line">        num_pkt = <a class="code" href="group__odp__scheduler.html#ga34f1bae924466cc2b57563f8fe2dc0d1">odp_schedule_multi</a>(&amp;queue, <a class="code" href="group__odp__scheduler.html#ga9116776b8262a74af7dac7ef46fc7ace">ODP_SCHED_NO_WAIT</a>,</div>
<div class="line">                         ev, burst_size);</div>
<div class="line"> </div>
<div class="line">        polls++;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (polls == CHECK_PERIOD) {</div>
<div class="line">            polls = 0;</div>
<div class="line">            <span class="keywordflow">if</span> (test_global-&gt;stop_workers)</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (num_pkt &lt;= 0)</div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line"> </div>
<div class="line">        pipe_context = <a class="code" href="group__odp__queue.html#ga96ab88617101283b30ba784c9c9e7367">odp_queue_context</a>(queue);</div>
<div class="line">        stage = pipe_context-&gt;stage;</div>
<div class="line">        queue_idx = pipe_context-&gt;queue_idx;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* A queue is connected to a single input interface. All</span></div>
<div class="line"><span class="comment">         * packets from a queue are from the same interface. */</span></div>
<div class="line">        input = <a name="a27"></a><a class="code" href="group__odp__packet.html#ga1c03b0fec815617168cf29a013442d58">odp_packet_input_index</a>(<a name="a28"></a><a class="code" href="group__odp__packet.html#ga8605e7d4629a479f7b1a59da121c601c">odp_packet_from_event</a>(ev[0]));</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (DEBUG_PRINT)</div>
<div class="line">            printf(<span class="stringliteral">&quot;worker %i: stage %u, idx %u, %i packets\n&quot;</span>,</div>
<div class="line">                   worker_id, stage, queue_idx, num_pkt);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (stage == 0) {</div>
<div class="line">            <span class="keywordflow">if</span> (<a class="code" href="group__odp__compiler__optim.html#ga2b29f27f12b751250b471aa9c14c57c8">odp_unlikely</a>(test_global-&gt;opt.collect_stat))</div>
<div class="line">                test_global-&gt;worker_stat[worker_id].rx_pkt +=</div>
<div class="line">                    num_pkt;</div>
<div class="line"> </div>
<div class="line">            <span class="comment">/* The first stage (packet input). Forward packet flows</span></div>
<div class="line"><span class="comment">             * into first pipeline queues. */</span></div>
<div class="line">            <span class="keywordflow">if</span> (pipe_queues &gt; num_pktio_queue) {</div>
<div class="line">                <span class="comment">/* More pipeline queues than input queues.</span></div>
<div class="line"><span class="comment">                 * Use flow hash to spread flows into pipeline</span></div>
<div class="line"><span class="comment">                 * queues. */</span></div>
<div class="line">                <a class="code" href="struct__odp__abi__packet__t.html">odp_packet_t</a> p;</div>
<div class="line">                worker_stat_t *stat;</div>
<div class="line">                uint32_t hash;</div>
<div class="line">                uint16_t idx;</div>
<div class="line">                <span class="keywordtype">int</span> drop = 0;</div>
<div class="line"> </div>
<div class="line">                stat = &amp;test_global-&gt;worker_stat[worker_id];</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">for</span> (i = 0; i &lt; num_pkt; i++) {</div>
<div class="line">                    p = <a class="code" href="group__odp__packet.html#ga8605e7d4629a479f7b1a59da121c601c">odp_packet_from_event</a>(ev[i]);</div>
<div class="line">                    hash = <a name="a29"></a><a class="code" href="group__odp__packet.html#ga0f4d215e25b1091a6e1fc5e4794a7f7a">odp_packet_flow_hash</a>(p);</div>
<div class="line">                    idx = queue_idx;</div>
<div class="line"> </div>
<div class="line">                    <span class="keywordflow">if</span> (<a name="a30"></a><a class="code" href="group__odp__packet.html#ga7b17fb171e242b31d1089d349c9ba356">odp_packet_has_flow_hash</a>(p))</div>
<div class="line">                        idx = hash % pipe_queues;</div>
<div class="line"> </div>
<div class="line">                    dst_queue = next_queue(test_global,</div>
<div class="line">                                   input, stage,</div>
<div class="line">                                   idx);</div>
<div class="line"> </div>
<div class="line">                    <span class="keywordflow">if</span> (<a name="a31"></a><a class="code" href="group__odp__queue.html#ga985c2e5219f65c270b50578c16ec9d61">odp_queue_enq</a>(dst_queue, ev[i])) {</div>
<div class="line">                        <a class="code" href="group__odp__event.html#ga1622f73356c325f625db747cb3badf8d">odp_event_free</a>(ev[i]);</div>
<div class="line">                        drop++;</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">if</span> (<a class="code" href="group__odp__compiler__optim.html#ga2b29f27f12b751250b471aa9c14c57c8">odp_unlikely</a>(test_global-&gt;opt.collect_stat))</div>
<div class="line">                    stat-&gt;pipe_drop += drop;</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                queue_idx = queue_idx % pipe_queues;</div>
<div class="line">                dst_queue = next_queue(test_global, input,</div>
<div class="line">                               stage, queue_idx);</div>
<div class="line"> </div>
<div class="line">                enqueue_events(dst_queue, ev, num_pkt,</div>
<div class="line">                           worker_id);</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (stage &lt; pipe_stages) {</div>
<div class="line">            <span class="comment">/* Middle stages */</span></div>
<div class="line">            dst_queue = next_queue(test_global, input, stage,</div>
<div class="line">                           queue_idx);</div>
<div class="line">            enqueue_events(dst_queue, ev, num_pkt, worker_id);</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (<a class="code" href="group__odp__compiler__optim.html#ga2b29f27f12b751250b471aa9c14c57c8">odp_unlikely</a>(test_global-&gt;opt.collect_stat))</div>
<div class="line">                test_global-&gt;worker_stat[worker_id].pipe_pkt +=</div>
<div class="line">                    num_pkt;</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* The last stage, send packets out */</span></div>
<div class="line">        <a class="code" href="group__odp__packet.html#ga0924634e5431e0ae31bb0cfd7bf8d262">odp_packet_from_event_multi</a>(pkt, ev, num_pkt);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* If single interface loopback, otherwise forward to the next</span></div>
<div class="line"><span class="comment">         * interface. */</span></div>
<div class="line">        output = (input + 1) % num_pktio;</div>
<div class="line">        output_queue = queue_idx % num_pktio_queue;</div>
<div class="line">        pktout = test_global-&gt;<a name="a32"></a><a class="code" href="structodp__pktout__queue__s.html#ac54f5c2d64c17fbc782b2f7df600f9fe">pktio</a>[output].pktout[output_queue];</div>
<div class="line"> </div>
<div class="line">        send_packets(test_global, pkt, num_pkt, output, pktout,</div>
<div class="line">                 worker_id);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;Worker %i stopped\n&quot;</span>, worker_id);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> worker_thread_timers(<span class="keywordtype">void</span> *arg)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> num, num_pkt, out, tmos, i, src_pktio, src_queue;</div>
<div class="line">    <a class="code" href="structodp__pktout__queue__s.html">odp_pktout_queue_t</a> pktout;</div>
<div class="line">    <a class="code" href="struct__odp__abi__queue__t.html">odp_queue_t</a> queue;</div>
<div class="line">    pktin_queue_context_t *queue_context;</div>
<div class="line">    <a class="code" href="struct__odp__abi__timer__t.html">odp_timer_t</a> timer;</div>
<div class="line">    <a class="code" href="group__odp__timer.html#gabd0fe407d8c3d7370b2bff479ae1d78c">odp_timer_retval_t</a> ret;</div>
<div class="line">    <a name="_a33"></a><a class="code" href="structodp__timer__start__t.html">odp_timer_start_t</a> start_param;</div>
<div class="line">    worker_arg_t *worker_arg = arg;</div>
<div class="line">    test_global_t *test_global = worker_arg-&gt;test_global_ptr;</div>
<div class="line">    <span class="keywordtype">int</span> worker_id = worker_arg-&gt;worker_id;</div>
<div class="line">    uint32_t polls = 0;</div>
<div class="line">    <span class="keywordtype">int</span> burst_size = test_global-&gt;opt.burst_size;</div>
<div class="line">    uint64_t tick = test_global-&gt;timer.timeout_tick;</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;Worker (timers) %i started\n&quot;</span>, worker_id);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Wait for other workers to start */</span></div>
<div class="line">    <a class="code" href="group__odp__barrier.html#ga97c8f84490e816330f96155acf0b4b77">odp_barrier_wait</a>(&amp;test_global-&gt;worker_start);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span> (1) {</div>
<div class="line">        <a class="code" href="struct__odp__abi__event__t.html">odp_event_t</a> ev[burst_size];</div>
<div class="line">        <a class="code" href="struct__odp__abi__packet__t.html">odp_packet_t</a> pkt[burst_size];</div>
<div class="line"> </div>
<div class="line">        num = <a class="code" href="group__odp__scheduler.html#ga34f1bae924466cc2b57563f8fe2dc0d1">odp_schedule_multi</a>(&amp;queue, <a class="code" href="group__odp__scheduler.html#ga9116776b8262a74af7dac7ef46fc7ace">ODP_SCHED_NO_WAIT</a>,</div>
<div class="line">                     ev, burst_size);</div>
<div class="line"> </div>
<div class="line">        polls++;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (polls == CHECK_PERIOD) {</div>
<div class="line">            polls = 0;</div>
<div class="line">            <span class="keywordflow">if</span> (test_global-&gt;stop_workers)</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (num &lt;= 0)</div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line"> </div>
<div class="line">        tmos = 0;</div>
<div class="line">        queue_context = <a class="code" href="group__odp__queue.html#ga96ab88617101283b30ba784c9c9e7367">odp_queue_context</a>(queue);</div>
<div class="line">        src_pktio = queue_context-&gt;src_pktio;</div>
<div class="line">        src_queue = queue_context-&gt;src_queue;</div>
<div class="line">        timer = test_global-&gt;timer.timer[src_pktio][src_queue];</div>
<div class="line">        start_param.<a name="a34"></a><a class="code" href="structodp__timer__start__t.html#adff5d0b4bfbce079f01ec86642a387fe">tick_type</a> = <a name="a35"></a><a class="code" href="group__odp__timer.html#ggafe9103bdca21be1c7f14c83fedbf9b29a46ef02de17dc80bca0684f0f8087dd57">ODP_TIMER_TICK_REL</a>;</div>
<div class="line">        start_param.<a name="a36"></a><a class="code" href="structodp__timer__start__t.html#a00d0c90df7accbbed0f22273365b6c56">tick</a> = tick;</div>
<div class="line">        start_param.<a name="a37"></a><a class="code" href="structodp__timer__start__t.html#a8c7915d1a2cfa0bb13f8cbf280ee7a97">tmo_ev</a> = <a class="code" href="group__odp__event.html#gae1a3732a534ba7a892fca38b824591b0">ODP_EVENT_INVALID</a>;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span> (i = 0; i &lt; num; i++) {</div>
<div class="line">            <span class="keywordflow">if</span> (<a class="code" href="group__odp__compiler__optim.html#ga2b29f27f12b751250b471aa9c14c57c8">odp_unlikely</a>(<a name="a38"></a><a class="code" href="group__odp__event.html#ga4bd59cdf228fe0c36b8e04fe122e047a">odp_event_type</a>(ev[i]) ==</div>
<div class="line">                     ODP_EVENT_TIMEOUT)) {</div>
<div class="line">                tmos++;</div>
<div class="line"> </div>
<div class="line">                start_param.<a class="code" href="structodp__timer__start__t.html#a8c7915d1a2cfa0bb13f8cbf280ee7a97">tmo_ev</a> = ev[i];</div>
<div class="line">                ret = <a name="a39"></a><a class="code" href="group__odp__timer.html#gaa31f657dcc4d9e31e379b4f07ff9f83a">odp_timer_start</a>(timer, &amp;start_param);</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">if</span> (<a class="code" href="group__odp__compiler__optim.html#ga2b29f27f12b751250b471aa9c14c57c8">odp_unlikely</a>(ret != <a name="a40"></a><a class="code" href="group__odp__timer.html#ggabd0fe407d8c3d7370b2bff479ae1d78ca6cf6bb923bdf13cede58a481443be93c">ODP_TIMER_SUCCESS</a>)) {</div>
<div class="line">                    <span class="comment">/* Should never happen. Timeout event</span></div>
<div class="line"><span class="comment">                     * has been received, timer should be</span></div>
<div class="line"><span class="comment">                     * ready to be set again. */</span></div>
<div class="line">                    printf(<span class="stringliteral">&quot;Expired timer reset failed &quot;</span></div>
<div class="line">                           <span class="stringliteral">&quot;%i\n&quot;</span>, ret);</div>
<div class="line">                    <a class="code" href="group__odp__event.html#ga1622f73356c325f625db747cb3badf8d">odp_event_free</a>(ev[i]);</div>
<div class="line">                }</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">if</span> (<a class="code" href="group__odp__compiler__optim.html#ga2b29f27f12b751250b471aa9c14c57c8">odp_unlikely</a>(tmos &gt; 1)) {</div>
<div class="line">                    <span class="comment">/* Should never happen */</span></div>
<div class="line">                    printf(<span class="stringliteral">&quot;Too many timeouts\n&quot;</span>);</div>
<div class="line">                }</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                pkt[i - tmos] = <a class="code" href="group__odp__packet.html#ga8605e7d4629a479f7b1a59da121c601c">odp_packet_from_event</a>(ev[i]);</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (tmos == 0) {</div>
<div class="line">            <span class="comment">/* Reset timer with existing timeout event */</span></div>
<div class="line">            ret = <a name="a41"></a><a class="code" href="group__odp__timer.html#ga447bdef8a57404cc1d594d31c5aa153f">odp_timer_restart</a>(timer, &amp;start_param);</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (<a class="code" href="group__odp__compiler__optim.html#ga2b29f27f12b751250b471aa9c14c57c8">odp_unlikely</a>(ret != <a class="code" href="group__odp__timer.html#ggabd0fe407d8c3d7370b2bff479ae1d78ca6cf6bb923bdf13cede58a481443be93c">ODP_TIMER_SUCCESS</a> &amp;&amp;</div>
<div class="line">                     ret != <a name="a42"></a><a class="code" href="group__odp__timer.html#ggabd0fe407d8c3d7370b2bff479ae1d78cafcabd0f01c3d19d8c9063ccd861edd6e">ODP_TIMER_FAIL</a>)) {</div>
<div class="line">                <span class="comment">/* Tick period is too short or long. Normally,</span></div>
<div class="line"><span class="comment">                 * reset either succeeds or fails due to timer</span></div>
<div class="line"><span class="comment">                 * expiration, in which case timeout event will</span></div>
<div class="line"><span class="comment">                 * be received soon and reset will be done</span></div>
<div class="line"><span class="comment">                 * then. */</span></div>
<div class="line">                printf(<span class="stringliteral">&quot;Timer reset failed %i\n&quot;</span>, ret);</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        num_pkt = num - tmos;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (DEBUG_PRINT)</div>
<div class="line">            printf(<span class="stringliteral">&quot;worker %i: [%i/%i] -&gt; [%i/%i], %i packets &quot;</span></div>
<div class="line">                   <span class="stringliteral">&quot;%i timeouts\n&quot;</span>,</div>
<div class="line">                   worker_id,</div>
<div class="line">                   queue_context-&gt;src_pktio,</div>
<div class="line">                   queue_context-&gt;src_queue,</div>
<div class="line">                   queue_context-&gt;dst_pktio,</div>
<div class="line">                   queue_context-&gt;dst_queue, num_pkt, tmos);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group__odp__compiler__optim.html#ga2b29f27f12b751250b471aa9c14c57c8">odp_unlikely</a>(test_global-&gt;opt.collect_stat &amp;&amp; tmos))</div>
<div class="line">            test_global-&gt;worker_stat[worker_id].tmo += tmos;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group__odp__compiler__optim.html#ga2b29f27f12b751250b471aa9c14c57c8">odp_unlikely</a>(num_pkt == 0))</div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line"> </div>
<div class="line">        pktout = queue_context-&gt;dst_pktout;</div>
<div class="line">        out    = queue_context-&gt;dst_pktio;</div>
<div class="line"> </div>
<div class="line">        send_packets(test_global, pkt, num_pkt, out, pktout, worker_id);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group__odp__compiler__optim.html#ga2b29f27f12b751250b471aa9c14c57c8">odp_unlikely</a>(test_global-&gt;opt.collect_stat))</div>
<div class="line">            test_global-&gt;worker_stat[worker_id].rx_pkt += num_pkt;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;Worker %i stopped\n&quot;</span>, worker_id);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> sig_handler(<span class="keywordtype">int</span> signo)</div>
<div class="line">{</div>
<div class="line">    (void)signo;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (test_global) {</div>
<div class="line">        test_global-&gt;stop_workers = 1;</div>
<div class="line">        <a name="a43"></a><a class="code" href="group__odp__barrier.html#ga3a641c164c73f0ac06a2d6386e12dcc0">odp_mb_full</a>();</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Get rid of path in filename - only for unix-type paths using &#39;/&#39; */</span></div>
<div class="line"><span class="preprocessor">#define NO_PATH(x) (strrchr((x), &#39;/&#39;) ? strrchr((x), &#39;/&#39;) + 1 : (x))</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> print_usage(<span class="keyword">const</span> <span class="keywordtype">char</span> *progname)</div>
<div class="line">{</div>
<div class="line">    printf(<span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;Scheduler with packet IO test application.\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;Usage: %s [options]\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;OPTIONS:\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  -i, --interface &lt;name&gt;    Packet IO interfaces (comma-separated, no spaces)\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  -c, --num_cpu &lt;number&gt;    Worker thread count. Default: 1\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  -q, --num_queue &lt;number&gt;  Number of pktio queues. Default: Worker thread count\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  -b, --burst &lt;number&gt;      Maximum number of events requested from scheduler. Default: 32\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  -t, --timeout &lt;number&gt;    Flow inactivity timeout (in usec) per packet. Default: 0 (don&#39;t use timers)\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  --pipe-stages &lt;number&gt;    Number of pipeline stages per interface\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  --pipe-queues &lt;number&gt;    Number of queues per pipeline stage\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  --pipe-queue-size &lt;num&gt;   Number of events a pipeline queue must be able to store. Default 256.\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  -m, --sched_mode &lt;mode&gt;   Scheduler synchronization mode for all queues. 1: parallel, 2: atomic, 3: ordered. Default: 2\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  --wait_link &lt;sec&gt;         Wait up to &lt;sec&gt; seconds for network links to be up.\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;                            Default: 0 (don&#39;t check link status)\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  -s, --stat                Collect statistics.\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  -h, --help                Display help and exit.\n\n&quot;</span>,</div>
<div class="line">           NO_PATH(progname));</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> parse_options(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[], test_options_t *test_options)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> i, opt;</div>
<div class="line">    <span class="keywordtype">char</span> *name, *str;</div>
<div class="line">    <span class="keywordtype">int</span> len, str_len, sched_mode;</div>
<div class="line">    <span class="keyword">const</span> <span class="keyword">struct </span>option longopts[] = {</div>
<div class="line">        {<span class="stringliteral">&quot;interface&quot;</span>,   required_argument, NULL, <span class="charliteral">&#39;i&#39;</span>},</div>
<div class="line">        {<span class="stringliteral">&quot;num_cpu&quot;</span>,     required_argument, NULL, <span class="charliteral">&#39;c&#39;</span>},</div>
<div class="line">        {<span class="stringliteral">&quot;num_queue&quot;</span>,   required_argument, NULL, <span class="charliteral">&#39;q&#39;</span>},</div>
<div class="line">        {<span class="stringliteral">&quot;burst&quot;</span>,       required_argument, NULL, <span class="charliteral">&#39;b&#39;</span>},</div>
<div class="line">        {<span class="stringliteral">&quot;timeout&quot;</span>,     required_argument, NULL, <span class="charliteral">&#39;t&#39;</span>},</div>
<div class="line">        {<span class="stringliteral">&quot;sched_mode&quot;</span>,  required_argument, NULL, <span class="charliteral">&#39;m&#39;</span>},</div>
<div class="line">        {<span class="stringliteral">&quot;wait_link&quot;</span>,   required_argument, NULL, OPT_WAIT_LINK},</div>
<div class="line">        {<span class="stringliteral">&quot;pipe-stages&quot;</span>, required_argument, NULL,  0},</div>
<div class="line">        {<span class="stringliteral">&quot;pipe-queues&quot;</span>, required_argument, NULL,  1},</div>
<div class="line">        {<span class="stringliteral">&quot;pipe-queue-size&quot;</span>, required_argument, NULL,  2},</div>
<div class="line">        {<span class="stringliteral">&quot;stat&quot;</span>,        no_argument,       NULL, <span class="charliteral">&#39;s&#39;</span>},</div>
<div class="line">        {<span class="stringliteral">&quot;help&quot;</span>,        no_argument,       NULL, <span class="charliteral">&#39;h&#39;</span>},</div>
<div class="line">        {NULL, 0, NULL, 0}</div>
<div class="line">    };</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span> *shortopts =  <span class="stringliteral">&quot;+i:c:q:b:t:m:sh&quot;</span>;</div>
<div class="line">    <span class="keywordtype">int</span> ret = 0;</div>
<div class="line"> </div>
<div class="line">    memset(test_options, 0, <span class="keyword">sizeof</span>(test_options_t));</div>
<div class="line"> </div>
<div class="line">    test_options-&gt;sched_mode = SCHED_MODE_ATOMIC;</div>
<div class="line">    test_options-&gt;num_worker = 1;</div>
<div class="line">    test_options-&gt;burst_size = 32;</div>
<div class="line">    test_options-&gt;pipe_queue_size = 256;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span> (1) {</div>
<div class="line">        opt = getopt_long(argc, argv, shortopts, longopts, NULL);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (opt == -1)</div>
<div class="line">            <span class="keywordflow">break</span>;  <span class="comment">/* No more options */</span></div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">switch</span> (opt) {</div>
<div class="line">        <span class="keywordflow">case</span> 0:</div>
<div class="line">            test_options-&gt;pipe_stages = atoi(optarg);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> 1:</div>
<div class="line">            test_options-&gt;pipe_queues = atoi(optarg);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> 2:</div>
<div class="line">            test_options-&gt;pipe_queue_size = atoi(optarg);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;i&#39;</span>:</div>
<div class="line">            i = 0;</div>
<div class="line">            str = optarg;</div>
<div class="line">            str_len = strlen(str);</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">while</span> (str_len &gt; 0) {</div>
<div class="line">                len = strcspn(str, <span class="stringliteral">&quot;,&quot;</span>);</div>
<div class="line">                str_len -= len + 1;</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">if</span> (i == MAX_PKTIOS) {</div>
<div class="line">                    printf(<span class="stringliteral">&quot;Error: Too many interfaces\n&quot;</span>);</div>
<div class="line">                    ret = -1;</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                }</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">if</span> (len &gt; MAX_PKTIO_NAME) {</div>
<div class="line">                    printf(<span class="stringliteral">&quot;Error: Too long interface name %s\n&quot;</span>,</div>
<div class="line">                           str);</div>
<div class="line">                    ret = -1;</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                }</div>
<div class="line"> </div>
<div class="line">                name = test_options-&gt;pktio_name[i];</div>
<div class="line">                memcpy(name, str, len);</div>
<div class="line">                str += len + 1;</div>
<div class="line">                i++;</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            test_options-&gt;num_pktio = i;</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;c&#39;</span>:</div>
<div class="line">            test_options-&gt;num_worker = atoi(optarg);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;q&#39;</span>:</div>
<div class="line">            test_options-&gt;num_pktio_queue = atoi(optarg);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;b&#39;</span>:</div>
<div class="line">            test_options-&gt;burst_size = atoi(optarg);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;t&#39;</span>:</div>
<div class="line">            test_options-&gt;timeout_us = atol(optarg);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;m&#39;</span>:</div>
<div class="line">            test_options-&gt;sched_mode = atoi(optarg);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> OPT_WAIT_LINK:</div>
<div class="line">            test_options-&gt;wait_sec = atoi(optarg);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;s&#39;</span>:</div>
<div class="line">            test_options-&gt;collect_stat = 1;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;h&#39;</span>:</div>
<div class="line">            print_usage(argv[0]);</div>
<div class="line">            ret = -1;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">default</span>:</div>
<div class="line">            ret = -1;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (test_options-&gt;timeout_us &amp;&amp; test_options-&gt;pipe_stages) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Error: Cannot run timeout and pipeline tests simultaneously\n&quot;</span>);</div>
<div class="line">        ret = -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (test_options-&gt;pipe_stages &gt; MAX_PIPE_STAGES) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Error: Too many pipeline stages\n&quot;</span>);</div>
<div class="line">        ret = -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (test_options-&gt;pipe_queues &gt; MAX_PIPE_QUEUES) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Error: Too many queues per pipeline stage\n&quot;</span>);</div>
<div class="line">        ret = -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (test_options-&gt;num_pktio == 0) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Error: At least one pktio interface needed.\n&quot;</span>);</div>
<div class="line">        ret = -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    sched_mode = test_options-&gt;sched_mode;</div>
<div class="line">    <span class="keywordflow">if</span> (sched_mode != SCHED_MODE_PARAL &amp;&amp;</div>
<div class="line">        sched_mode != SCHED_MODE_ATOMIC &amp;&amp;</div>
<div class="line">        sched_mode != SCHED_MODE_ORDER) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Error: Bad scheduler mode: %i\n&quot;</span>, sched_mode);</div>
<div class="line">        ret = -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (test_options-&gt;num_pktio_queue == 0)</div>
<div class="line">        test_options-&gt;num_pktio_queue = test_options-&gt;num_worker;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> ret;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <a class="code" href="group__odp__scheduler.html#ga05c15f8076326b98fe2fc534dcc6b319">odp_schedule_sync_t</a> sched_sync_mode(test_global_t *test_global)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">switch</span> (test_global-&gt;opt.sched_mode) {</div>
<div class="line">    <span class="keywordflow">case</span> SCHED_MODE_PARAL:</div>
<div class="line">        <span class="keywordflow">return</span> <a name="a44"></a><a class="code" href="group__odp__scheduler.html#ga2ba135fc660e1c050aa25ec6744ec584">ODP_SCHED_SYNC_PARALLEL</a>;</div>
<div class="line">    <span class="keywordflow">case</span> SCHED_MODE_ATOMIC:</div>
<div class="line">        <span class="keywordflow">return</span> <a name="a45"></a><a class="code" href="group__odp__scheduler.html#ga4b7efc5cfc27ef416312f5adb8bdc392">ODP_SCHED_SYNC_ATOMIC</a>;</div>
<div class="line">    <span class="keywordflow">case</span> SCHED_MODE_ORDER:</div>
<div class="line">        <span class="keywordflow">return</span> <a name="a46"></a><a class="code" href="group__odp__scheduler.html#ga4df3696ebf4528ecc6e69ae3fff040fd">ODP_SCHED_SYNC_ORDERED</a>;</div>
<div class="line">    <span class="keywordflow">default</span>:</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> config_setup(test_global_t *test_global)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> i, cpu;</div>
<div class="line">    <a name="_a47"></a><a class="code" href="structodp__pool__capability__t.html">odp_pool_capability_t</a> pool_capa;</div>
<div class="line">    uint32_t pkt_len, pkt_num;</div>
<div class="line">    <a class="code" href="structodp__cpumask__s.html">odp_cpumask_t</a> *cpumask = &amp;test_global-&gt;cpumask;</div>
<div class="line"> </div>
<div class="line">    test_global-&gt;max_workers = <a name="a48"></a><a class="code" href="group__odp__cpumask.html#ga4ff2d29f52775b12c7df1995754b524d">odp_cpumask_default_worker</a>(cpumask, 0);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (test_global-&gt;opt.num_worker &gt; test_global-&gt;max_workers ||</div>
<div class="line">        test_global-&gt;opt.num_worker &gt; MAX_WORKERS) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Error: Too many workers %i.\n&quot;</span>,</div>
<div class="line">               test_global-&gt;opt.num_worker);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    cpu = <a name="a49"></a><a class="code" href="group__odp__cpumask.html#ga5c9dfaf2a18b336a537f552e122ac41d">odp_cpumask_first</a>(cpumask);</div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; test_global-&gt;opt.num_worker; ++i) {</div>
<div class="line">        test_global-&gt;worker_cpu[i] = cpu;</div>
<div class="line">        cpu = <a name="a50"></a><a class="code" href="group__odp__cpumask.html#ga643e71985a781cdd43bac218df03304b">odp_cpumask_next</a>(cpumask, cpu);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <a name="a51"></a><a class="code" href="group__odp__scheduler.html#ga3f3af33a2a42b3a9d6e5e3f74bfcb03d">odp_schedule_config_init</a>(&amp;test_global-&gt;schedule_config);</div>
<div class="line">    <a name="a52"></a><a class="code" href="group__odp__scheduler.html#gaa1b51ebd46adeb6aa7805fccb00144df">odp_schedule_config</a>(&amp;test_global-&gt;schedule_config);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a name="a53"></a><a class="code" href="group__odp__pool.html#ga2c6f42e9611904eac84872bf8f913b75">odp_pool_capability</a>(&amp;pool_capa)) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Error: Pool capability failed.\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    pkt_len = MAX_PKT_LEN;</div>
<div class="line">    pkt_num = MAX_PKT_NUM;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (pool_capa.<a name="a54"></a><a class="code" href="structodp__pool__capability__t.html#a11c2f0606b3bb00a72220d2352f43806">pkt</a>.<a name="a55"></a><a class="code" href="structodp__pool__capability__t.html#affefe3b2c3a473c37d08fcd2929e84c2">max_len</a> &amp;&amp; pkt_len &gt; pool_capa.<a class="code" href="structodp__pool__capability__t.html#a11c2f0606b3bb00a72220d2352f43806">pkt</a>.<a class="code" href="structodp__pool__capability__t.html#affefe3b2c3a473c37d08fcd2929e84c2">max_len</a>)</div>
<div class="line">        pkt_len = pool_capa.<a class="code" href="structodp__pool__capability__t.html#a11c2f0606b3bb00a72220d2352f43806">pkt</a>.<a class="code" href="structodp__pool__capability__t.html#affefe3b2c3a473c37d08fcd2929e84c2">max_len</a>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (pool_capa.<a class="code" href="structodp__pool__capability__t.html#a11c2f0606b3bb00a72220d2352f43806">pkt</a>.<a name="a56"></a><a class="code" href="structodp__pool__capability__t.html#a2b468c5617515bbd5d50a57a7d65e1e0">max_num</a> &amp;&amp; pkt_num &gt; pool_capa.<a class="code" href="structodp__pool__capability__t.html#a11c2f0606b3bb00a72220d2352f43806">pkt</a>.<a class="code" href="structodp__pool__capability__t.html#a2b468c5617515bbd5d50a57a7d65e1e0">max_num</a>) {</div>
<div class="line">        pkt_num = pool_capa.<a class="code" href="structodp__pool__capability__t.html#a11c2f0606b3bb00a72220d2352f43806">pkt</a>.<a class="code" href="structodp__pool__capability__t.html#a2b468c5617515bbd5d50a57a7d65e1e0">max_num</a>;</div>
<div class="line">        printf(<span class="stringliteral">&quot;Warning: Pool size rounded down to %u\n&quot;</span>, pkt_num);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    test_global-&gt;pkt_len = pkt_len;</div>
<div class="line">    test_global-&gt;pkt_num = pkt_num;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> print_config(test_global_t *test_global)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">char</span> cpumask_str[<a name="a57"></a><a class="code" href="group__odp__cpumask.html#gad1ca7686341a94f62ca32b87c269cf17">ODP_CPUMASK_STR_SIZE</a>];</div>
<div class="line">    <span class="keywordtype">int</span> i;</div>
<div class="line"> </div>
<div class="line">    <a name="a58"></a><a class="code" href="group__odp__cpumask.html#gaac673804169b678e278704de7306a79f">odp_cpumask_to_str</a>(&amp;test_global-&gt;cpumask, cpumask_str,</div>
<div class="line">               <a class="code" href="group__odp__cpumask.html#gad1ca7686341a94f62ca32b87c269cf17">ODP_CPUMASK_STR_SIZE</a>);</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;Test configuration:\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  max workers:           %i\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  available worker cpus: %s\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  num workers:           %i\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  worker cpus:          &quot;</span>,</div>
<div class="line">           test_global-&gt;max_workers,</div>
<div class="line">           cpumask_str,</div>
<div class="line">           test_global-&gt;opt.num_worker);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; test_global-&gt;opt.num_worker; i++)</div>
<div class="line">        printf(<span class="stringliteral">&quot; %i&quot;</span>, test_global-&gt;worker_cpu[i]);</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  num interfaces:        %i\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  interface names:      &quot;</span>, test_global-&gt;opt.num_pktio);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; test_global-&gt;opt.num_pktio; i++)</div>
<div class="line">        printf(<span class="stringliteral">&quot; %s&quot;</span>, test_global-&gt;opt.pktio_name[i]);</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  queues per interface:  %i\n&quot;</span>,</div>
<div class="line">           test_global-&gt;opt.num_pktio_queue);</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;  burst size:            %u\n&quot;</span>, test_global-&gt;opt.burst_size);</div>
<div class="line">    printf(<span class="stringliteral">&quot;  collect statistics:    %u\n&quot;</span>, test_global-&gt;opt.collect_stat);</div>
<div class="line">    printf(<span class="stringliteral">&quot;  timeout usec:          %li\n&quot;</span>, test_global-&gt;opt.timeout_us);</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> print_stat(test_global_t *test_global, uint64_t nsec)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> i;</div>
<div class="line">    uint64_t rx, tx, pipe, drop, tmo;</div>
<div class="line">    uint64_t rx_sum = 0;</div>
<div class="line">    uint64_t tx_sum = 0;</div>
<div class="line">    uint64_t pipe_sum = 0;</div>
<div class="line">    uint64_t tmo_sum = 0;</div>
<div class="line">    <span class="keywordtype">double</span> sec = 0.0;</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;\nTest statistics\n&quot;</span>);</div>
<div class="line">    printf(<span class="stringliteral">&quot;  worker           rx_pkt           tx_pkt             pipe          dropped              tmo\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; test_global-&gt;opt.num_worker; i++) {</div>
<div class="line">        rx = test_global-&gt;worker_stat[i].rx_pkt;</div>
<div class="line">        tx = test_global-&gt;worker_stat[i].tx_pkt;</div>
<div class="line">        pipe = test_global-&gt;worker_stat[i].pipe_pkt;</div>
<div class="line">        tmo = test_global-&gt;worker_stat[i].tmo;</div>
<div class="line">        rx_sum += rx;</div>
<div class="line">        tx_sum += tx;</div>
<div class="line">        pipe_sum += pipe;</div>
<div class="line">        tmo_sum += tmo;</div>
<div class="line">        drop = test_global-&gt;worker_stat[i].tx_drop +</div>
<div class="line">               test_global-&gt;worker_stat[i].pipe_drop;</div>
<div class="line"> </div>
<div class="line">        printf(<span class="stringliteral">&quot;  %6i %16&quot;</span> PRIu64 <span class="stringliteral">&quot; %16&quot;</span> PRIu64 <span class="stringliteral">&quot; %16&quot;</span> PRIu64 <span class="stringliteral">&quot; %16&quot;</span></div>
<div class="line">               PRIu64 <span class="stringliteral">&quot; %16&quot;</span> PRIu64 <span class="stringliteral">&quot;\n&quot;</span>, i, rx, tx, pipe, drop, tmo);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    test_global-&gt;rx_pkt_sum = rx_sum;</div>
<div class="line">    test_global-&gt;tx_pkt_sum = tx_sum;</div>
<div class="line">    drop = rx_sum - tx_sum;</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;         ------------------------------------------------------------------------------------\n&quot;</span>);</div>
<div class="line">    printf(<span class="stringliteral">&quot;  total  %16&quot;</span> PRIu64 <span class="stringliteral">&quot; %16&quot;</span> PRIu64 <span class="stringliteral">&quot; %16&quot;</span> PRIu64 <span class="stringliteral">&quot; %16&quot;</span></div>
<div class="line">           PRIu64 <span class="stringliteral">&quot; %16&quot;</span> PRIu64 <span class="stringliteral">&quot;\n\n&quot;</span>, rx_sum, tx_sum, pipe_sum, drop,</div>
<div class="line">           tmo_sum);</div>
<div class="line"> </div>
<div class="line">    sec = nsec / 1000000000.0;</div>
<div class="line">    printf(<span class="stringliteral">&quot;  Total test time: %.2f sec\n&quot;</span>, sec);</div>
<div class="line">    printf(<span class="stringliteral">&quot;  Rx packet rate:  %.2f pps\n&quot;</span>, rx_sum / sec);</div>
<div class="line">    printf(<span class="stringliteral">&quot;  Tx packet rate:  %.2f pps\n&quot;</span>, tx_sum / sec);</div>
<div class="line">    printf(<span class="stringliteral">&quot;  Drop rate:       %.2f pps\n&quot;</span>, drop / sec);</div>
<div class="line">    printf(<span class="stringliteral">&quot;  Timeout rate:    %.2f per sec\n\n&quot;</span>, tmo_sum / sec);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> open_pktios(test_global_t *test_global)</div>
<div class="line">{</div>
<div class="line">    <a name="_a59"></a><a class="code" href="structodp__pool__param__t.html">odp_pool_param_t</a>  pool_param;</div>
<div class="line">    <a name="_a60"></a><a class="code" href="structodp__pktio__param__t.html">odp_pktio_param_t</a> pktio_param;</div>
<div class="line">    <a class="code" href="struct__odp__abi__pool__t.html">odp_pool_t</a> pool;</div>
<div class="line">    <a class="code" href="struct__odp__abi__pktio__t.html">odp_pktio_t</a> pktio;</div>
<div class="line">    <a name="_a61"></a><a class="code" href="structodp__pktio__capability__t.html">odp_pktio_capability_t</a> pktio_capa;</div>
<div class="line">    <a name="_a62"></a><a class="code" href="structodp__pktio__config__t.html">odp_pktio_config_t</a> pktio_config;</div>
<div class="line">    <a name="_a63"></a><a class="code" href="structodp__pktin__queue__param__t.html">odp_pktin_queue_param_t</a> pktin_param;</div>
<div class="line">    <a name="_a64"></a><a class="code" href="structodp__pktout__queue__param__t.html">odp_pktout_queue_param_t</a> pktout_param;</div>
<div class="line">    <a class="code" href="group__odp__scheduler.html#ga05c15f8076326b98fe2fc534dcc6b319">odp_schedule_sync_t</a> sched_sync;</div>
<div class="line">    uint32_t num_queue, j;</div>
<div class="line">    <span class="keywordtype">char</span> *name;</div>
<div class="line">    <span class="keywordtype">int</span> i, num_pktio, ret;</div>
<div class="line"> </div>
<div class="line">    num_pktio = test_global-&gt;opt.num_pktio;</div>
<div class="line">    num_queue = test_global-&gt;opt.num_pktio_queue;</div>
<div class="line"> </div>
<div class="line">    <a name="a65"></a><a class="code" href="group__odp__pool.html#ga3dd8bcfb920f81142e9fe27cfba24073">odp_pool_param_init</a>(&amp;pool_param);</div>
<div class="line">    pool_param.<a name="a66"></a><a class="code" href="structodp__pool__param__t.html#a7f9ca49dc21d48da0d80860c03faec1d">pkt</a>.<a name="a67"></a><a class="code" href="structodp__pool__param__t.html#ad400db5955445ee3d1fbb36df456e7f1">seg_len</a> = MIN_PKT_SEG_LEN;</div>
<div class="line">    pool_param.<a class="code" href="structodp__pool__param__t.html#a7f9ca49dc21d48da0d80860c03faec1d">pkt</a>.<a name="a68"></a><a class="code" href="structodp__pool__param__t.html#ac1ccfa50466f4afa9a9ab72f0bd315bf">len</a>     = test_global-&gt;pkt_len;</div>
<div class="line">    pool_param.<a class="code" href="structodp__pool__param__t.html#a7f9ca49dc21d48da0d80860c03faec1d">pkt</a>.<a name="a69"></a><a class="code" href="structodp__pool__param__t.html#a3598b3a2496629cd45010c1c5e876250">num</a>     = test_global-&gt;pkt_num;</div>
<div class="line">    pool_param.<a name="a70"></a><a class="code" href="structodp__pool__param__t.html#aac72ae142dd9736a287ce63d78b71c87">type</a>        = <a name="a71"></a><a class="code" href="group__odp__pool.html#ggac47bb33bcde80614b4b358578eaa3082aa02b3a4e37094bd277b3dfe371450acd">ODP_POOL_PACKET</a>;</div>
<div class="line"> </div>
<div class="line">    pool = <a name="a72"></a><a class="code" href="group__odp__pool.html#ga256909a276600c25ce11b52ae274632f">odp_pool_create</a>(<span class="stringliteral">&quot;packet pool&quot;</span>, &amp;pool_param);</div>
<div class="line"> </div>
<div class="line">    test_global-&gt;pool = pool;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (pool == <a name="a73"></a><a class="code" href="group__odp__pool.html#gafca03b58412260da754042a92f8a5e04">ODP_POOL_INVALID</a>) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Error: Pool create.\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <a name="a74"></a><a class="code" href="group__odp__packet__io.html#ga26d165a22d659770eba0c48543860881">odp_pktio_param_init</a>(&amp;pktio_param);</div>
<div class="line">    pktio_param.<a name="a75"></a><a class="code" href="structodp__pktio__param__t.html#a819cf5e2ef7df43a729cad159c022f4d">in_mode</a>  = <a name="a76"></a><a class="code" href="group__odp__packet__io.html#ggaf5d539df6fc8af55d96357c784a54b8faa4f62db7acbe492a3b80f3f782a04dd5">ODP_PKTIN_MODE_SCHED</a>;</div>
<div class="line">    pktio_param.<a name="a77"></a><a class="code" href="structodp__pktio__param__t.html#afc226fd3904618950a0d1154ffa2fd8c">out_mode</a> = <a name="a78"></a><a class="code" href="group__odp__packet__io.html#gga4e0c26e40b1166b07142302d12e8467da9e6184e8d605ce199cfa54d6c50153ff">ODP_PKTOUT_MODE_DIRECT</a>;</div>
<div class="line"> </div>
<div class="line">    sched_sync = sched_sync_mode(test_global);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; num_pktio; i++)</div>
<div class="line">        test_global-&gt;pktio[i].pktio = <a name="a79"></a><a class="code" href="group__odp__packet__io.html#ga9c7d0fcaec232b5503633e42ea29f6f5">ODP_PKTIO_INVALID</a>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Open and configure interfaces */</span></div>
<div class="line">    for (i = 0; i &lt; num_pktio; i++) {</div>
<div class="line">        name  = test_global-&gt;opt.pktio_name[i];</div>
<div class="line">        pktio = <a name="a80"></a><a class="code" href="group__odp__packet__io.html#ga7ae4f96ab09d468fff3623d90db306f9">odp_pktio_open</a>(name, pool, &amp;pktio_param);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (pktio == <a class="code" href="group__odp__packet__io.html#ga9c7d0fcaec232b5503633e42ea29f6f5">ODP_PKTIO_INVALID</a>) {</div>
<div class="line">            printf(<span class="stringliteral">&quot;Error (%s): Pktio open failed.\n&quot;</span>, name);</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        test_global-&gt;pktio[i].pktio = pktio;</div>
<div class="line">        test_global-&gt;pktio[i].pktio_index = <a name="a81"></a><a class="code" href="group__odp__packet__io.html#gab552d0e69245ade3de47130c2b9c5203">odp_pktio_index</a>(pktio);</div>
<div class="line"> </div>
<div class="line">        ret = <a name="a82"></a><a class="code" href="group__odp__packet__io.html#ga04d67c951aff803cf718940e0783ef8f">odp_pktio_mac_addr</a>(pktio,</div>
<div class="line">                     test_global-&gt;pktio[i].my_addr.addr,</div>
<div class="line">                     ODPH_ETHADDR_LEN);</div>
<div class="line">        <span class="keywordflow">if</span> (ret != ODPH_ETHADDR_LEN) {</div>
<div class="line">            printf(<span class="stringliteral">&quot;Error (%s): Bad MAC address len.\n&quot;</span>, name);</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <a name="a83"></a><a class="code" href="group__odp__packet__io.html#ga8fdd705d18d4aeb81528e68c0294e984">odp_pktio_print</a>(pktio);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (<a name="a84"></a><a class="code" href="group__odp__packet__io.html#gaba80778db7ec138977ed9e473bd1faaa">odp_pktio_capability</a>(pktio, &amp;pktio_capa)) {</div>
<div class="line">            printf(<span class="stringliteral">&quot;Error (%s): Pktio capa failed.\n&quot;</span>, name);</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (num_queue &gt; pktio_capa.<a name="a85"></a><a class="code" href="structodp__pktio__capability__t.html#a41331b30786ec8c9a4861dfe5b220b61">max_input_queues</a>) {</div>
<div class="line">            printf(<span class="stringliteral">&quot;Error (%s): Too many input queues: %u\n&quot;</span>,</div>
<div class="line">                   name, num_queue);</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (num_queue &gt; pktio_capa.<a name="a86"></a><a class="code" href="structodp__pktio__capability__t.html#a853625a680b37aeb0839c63ba04c632c">max_output_queues</a>) {</div>
<div class="line">            printf(<span class="stringliteral">&quot;Error (%s): Too many output queues: %u\n&quot;</span>,</div>
<div class="line">                   name, num_queue);</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <a name="a87"></a><a class="code" href="group__odp__packet__io.html#ga6a1c262ef999e8a73ac107c182b67d33">odp_pktio_config_init</a>(&amp;pktio_config);</div>
<div class="line">        pktio_config.<a name="a88"></a><a class="code" href="structodp__pktio__config__t.html#ab11707ba4258066a50f0e029fcc641f5">parser</a>.<a name="a89"></a><a class="code" href="structodp__pktio__parser__config__t.html#aff1f0d93e1f3cc93006aa613287378a2">layer</a> = <a name="a90"></a><a class="code" href="group__odp__packet.html#gga428cdbec9e7bc0bc19286f9564f9828ba5404cdbbe70c105fa88e1e0c146cce54">ODP_PROTO_LAYER_NONE</a>;</div>
<div class="line"> </div>
<div class="line">        <a name="a91"></a><a class="code" href="group__odp__packet__io.html#ga7f9faaf250d3d0d87478ff9f13680bf1">odp_pktio_config</a>(pktio, &amp;pktio_config);</div>
<div class="line"> </div>
<div class="line">        <a name="a92"></a><a class="code" href="group__odp__packet__io.html#ga055eabf5622e6745afbe9a1550ad1d78">odp_pktin_queue_param_init</a>(&amp;pktin_param);</div>
<div class="line"> </div>
<div class="line">        pktin_param.<a name="a93"></a><a class="code" href="structodp__pktin__queue__param__t.html#a5a07d5e93f26a523103360c0bea4a304">queue_param</a>.<a name="a94"></a><a class="code" href="structodp__queue__param__t.html#a371701df4d20cee95978b9265c232e32">sched</a>.<a name="a95"></a><a class="code" href="structodp__schedule__param__t.html#a3f103771c3a9319c1ec998fa8724b8ac">prio</a>  = <a name="a96"></a><a class="code" href="group__odp__scheduler.html#ga94034a7f591f3f549099aebb098f7e05">odp_schedule_default_prio</a>();</div>
<div class="line">        pktin_param.<a class="code" href="structodp__pktin__queue__param__t.html#a5a07d5e93f26a523103360c0bea4a304">queue_param</a>.<a class="code" href="structodp__queue__param__t.html#a371701df4d20cee95978b9265c232e32">sched</a>.<a name="a97"></a><a class="code" href="structodp__schedule__param__t.html#ad4ca09d63edb0cec36567c26688cea14">sync</a>  = sched_sync;</div>
<div class="line">        pktin_param.<a class="code" href="structodp__pktin__queue__param__t.html#a5a07d5e93f26a523103360c0bea4a304">queue_param</a>.<a class="code" href="structodp__queue__param__t.html#a371701df4d20cee95978b9265c232e32">sched</a>.<a name="a98"></a><a class="code" href="structodp__schedule__param__t.html#a0bc7830a919f31ce295a20c51a7e2648">group</a> = <a name="a99"></a><a class="code" href="group__odp__scheduler.html#gaf463b15ad978dac0bf77c0110232b504">ODP_SCHED_GROUP_ALL</a>;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (num_queue &gt; 1) {</div>
<div class="line">            pktin_param.<a name="a100"></a><a class="code" href="structodp__pktin__queue__param__t.html#aa90bfc914603a90f7b1f7e7f0de07418">hash_enable</a> = 1;</div>
<div class="line">            pktin_param.<a name="a101"></a><a class="code" href="structodp__pktin__queue__param__t.html#a901146fbd15779b5665d3b75f3488e91">hash_proto</a>.<a name="a102"></a><a class="code" href="unionodp__pktin__hash__proto__t.html#a23793296c3a0299f69bdacc438ca3caf">proto</a>.<a name="a103"></a><a class="code" href="unionodp__pktin__hash__proto__t.html#a55c2478785f04914939ed859bdc16839">ipv4_udp</a> = 1;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        pktin_param.<a name="a104"></a><a class="code" href="structodp__pktin__queue__param__t.html#a03e94f43a2e4379d7a16adb964a55ecd">num_queues</a> = num_queue;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (<a name="a105"></a><a class="code" href="group__odp__packet__io.html#gaf9dce6b2cc13ad715e777416dce88194">odp_pktin_queue_config</a>(pktio, &amp;pktin_param)) {</div>
<div class="line">            printf(<span class="stringliteral">&quot;Error (%s): Pktin config failed.\n&quot;</span>, name);</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (<a name="a106"></a><a class="code" href="group__odp__packet__io.html#ga7a0b3f09fd55576daa9617dc29c60ace">odp_pktin_event_queue</a>(pktio,</div>
<div class="line">                      test_global-&gt;pktio[i].input_queue,</div>
<div class="line">                      num_queue) != (<span class="keywordtype">int</span>)num_queue) {</div>
<div class="line">            printf(<span class="stringliteral">&quot;Error (%s): Input queue query failed.\n&quot;</span>, name);</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span> (j = 0; j &lt; num_queue; j++) {</div>
<div class="line">            <a class="code" href="struct__odp__abi__queue__t.html">odp_queue_t</a> queue;</div>
<div class="line">            <span class="keywordtype">void</span> *ctx;</div>
<div class="line">            uint32_t len = <span class="keyword">sizeof</span>(pktin_queue_context_t);</div>
<div class="line"> </div>
<div class="line">            queue = test_global-&gt;pktio[i].input_queue[j];</div>
<div class="line">            ctx = &amp;test_global-&gt;pktio[i].queue_context[j];</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (<a name="a107"></a><a class="code" href="group__odp__queue.html#ga5c003a7027eb97f12b263d674be853ae">odp_queue_context_set</a>(queue, ctx, len)) {</div>
<div class="line">                printf(<span class="stringliteral">&quot;Error (%s): Queue ctx set failed.\n&quot;</span>,</div>
<div class="line">                       name);</div>
<div class="line">                <span class="keywordflow">return</span> -1;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <a name="a108"></a><a class="code" href="group__odp__packet__io.html#gab09475da05438a53b2d0fca96aab7515">odp_pktout_queue_param_init</a>(&amp;pktout_param);</div>
<div class="line">        pktout_param.<a name="a109"></a><a class="code" href="structodp__pktout__queue__param__t.html#acd16e77991869797adb3da1bd41a1d0c">num_queues</a>  = num_queue;</div>
<div class="line">        pktout_param.<a name="a110"></a><a class="code" href="structodp__pktout__queue__param__t.html#a066fd0a2de0efca0056cd1529d78b06e">op_mode</a>     = <a name="a111"></a><a class="code" href="group__odp__packet__io.html#ggacf2c32e76d9d0eef9106b5fdd68cedc8a1e3d825b302ee6213937172a6b54b140">ODP_PKTIO_OP_MT_UNSAFE</a>;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (test_global-&gt;opt.pipe_stages)</div>
<div class="line">            pktout_param.<a class="code" href="structodp__pktout__queue__param__t.html#a066fd0a2de0efca0056cd1529d78b06e">op_mode</a> = <a name="a112"></a><a class="code" href="group__odp__packet__io.html#ggacf2c32e76d9d0eef9106b5fdd68cedc8af3637232af55eb954ba439b2d33120d3">ODP_PKTIO_OP_MT</a>;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (<a name="a113"></a><a class="code" href="group__odp__packet__io.html#gafc2120185a8da74540feade78623f3b3">odp_pktout_queue_config</a>(pktio, &amp;pktout_param)) {</div>
<div class="line">            printf(<span class="stringliteral">&quot;Error (%s): Pktout config failed.\n&quot;</span>, name);</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (<a name="a114"></a><a class="code" href="group__odp__packet__io.html#ga41a3ebb7ac489b85a5f7560e4d4f77f5">odp_pktout_queue</a>(pktio,</div>
<div class="line">                     test_global-&gt;pktio[i].pktout,</div>
<div class="line">                     num_queue) != (<span class="keywordtype">int</span>)num_queue) {</div>
<div class="line">            printf(<span class="stringliteral">&quot;Error (%s): Output queue query failed.\n&quot;</span>,</div>
<div class="line">                   name);</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> link_pktios(test_global_t *test_global)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> i, num_pktio, input, output;</div>
<div class="line">    <span class="keywordtype">int</span> num_queue;</div>
<div class="line">    <a class="code" href="structodp__pktout__queue__s.html">odp_pktout_queue_t</a> pktout;</div>
<div class="line">    pktin_queue_context_t *ctx;</div>
<div class="line"> </div>
<div class="line">    num_pktio = test_global-&gt;opt.num_pktio;</div>
<div class="line">    num_queue = test_global-&gt;opt.num_pktio_queue;</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;Forwarding table (pktio indexes)\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* If single interface loopback, otherwise forward to the next</span></div>
<div class="line"><span class="comment">     * interface. */</span></div>
<div class="line">    <span class="keywordflow">for</span> (input = 0; input &lt; num_pktio; input++) {</div>
<div class="line">        output = (input + 1) % num_pktio;</div>
<div class="line">        printf(<span class="stringliteral">&quot;  input %i, output %i\n&quot;</span>, input, output);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span> (i = 0; i &lt; num_queue; i++) {</div>
<div class="line">            ctx = &amp;test_global-&gt;pktio[input].queue_context[i];</div>
<div class="line">            pktout = test_global-&gt;<a class="code" href="structodp__pktout__queue__s.html#ac54f5c2d64c17fbc782b2f7df600f9fe">pktio</a>[output].pktout[i];</div>
<div class="line">            ctx-&gt;stage      = 0;</div>
<div class="line">            ctx-&gt;queue_idx  = i;</div>
<div class="line">            ctx-&gt;dst_pktout = pktout;</div>
<div class="line">            ctx-&gt;dst_pktio  = output;</div>
<div class="line">            ctx-&gt;dst_queue  = i;</div>
<div class="line">            ctx-&gt;src_pktio  = input;</div>
<div class="line">            ctx-&gt;src_queue  = i;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> start_pktios(test_global_t *test_global)</div>
<div class="line">{</div>
<div class="line">    test_options_t *test_options = &amp;test_global-&gt;opt;</div>
<div class="line">    uint32_t num_pktio = test_options-&gt;num_pktio;</div>
<div class="line">    <a class="code" href="struct__odp__abi__pktio__t.html">odp_pktio_t</a> pktios[MAX_PKTIOS];</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span> *names[MAX_PKTIOS];</div>
<div class="line">    uint32_t i;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; num_pktio; i++) {</div>
<div class="line">        <span class="keywordflow">if</span> (<a name="a115"></a><a class="code" href="group__odp__packet__io.html#ga9a5746e73616297fabb8d4caaa6d0333">odp_pktio_start</a>(test_global-&gt;pktio[i].pktio)) {</div>
<div class="line">            ODPH_ERR(<span class="stringliteral">&quot;Error (%s): Pktio start failed.\n&quot;</span>, test_options-&gt;pktio_name[i]);</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        test_global-&gt;pktio[i].started = 1;</div>
<div class="line">        pktios[i] = test_global-&gt;pktio[i].pktio;</div>
<div class="line">        names[i] = test_options-&gt;pktio_name[i];</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Wait until all links are up */</span></div>
<div class="line">    <span class="keywordflow">if</span> (test_options-&gt;wait_sec &amp;&amp;</div>
<div class="line">        pktio_common_check_link_status_wait(pktios, names, num_pktio,</div>
<div class="line">                        test_options-&gt;wait_sec) == -1)</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line"> </div>
<div class="line">    pktio_common_print_link_info_multi(pktios, names, num_pktio);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> stop_pktios(test_global_t *test_global)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="struct__odp__abi__pktio__t.html">odp_pktio_t</a> pktio;</div>
<div class="line">    <span class="keywordtype">int</span> i, ret = 0;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; test_global-&gt;opt.num_pktio; i++) {</div>
<div class="line">        pktio = test_global-&gt;pktio[i].pktio;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (pktio == <a class="code" href="group__odp__packet__io.html#ga9c7d0fcaec232b5503633e42ea29f6f5">ODP_PKTIO_INVALID</a> ||</div>
<div class="line">            test_global-&gt;pktio[i].started == 0)</div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (<a name="a116"></a><a class="code" href="group__odp__packet__io.html#gab34cb9679bf99d1b3366f06a9b155c41">odp_pktio_stop</a>(pktio)) {</div>
<div class="line">            printf(<span class="stringliteral">&quot;Error (%s): Pktio stop failed.\n&quot;</span>,</div>
<div class="line">                   test_global-&gt;opt.pktio_name[i]);</div>
<div class="line">            ret = -1;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> ret;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> empty_queues(uint64_t wait_ns)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="struct__odp__abi__event__t.html">odp_event_t</a> ev;</div>
<div class="line">    uint64_t wait_time = <a name="a117"></a><a class="code" href="group__odp__scheduler.html#gab0a0d2673cc7371d5c5d782d13a485b8">odp_schedule_wait_time</a>(wait_ns);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Drop all events from all queues */</span></div>
<div class="line">    <span class="keywordflow">while</span> (1) {</div>
<div class="line">        ev = <a class="code" href="group__odp__scheduler.html#gae4ca1012ebb16ff8b9752b958dc45ce6">odp_schedule</a>(NULL, wait_time);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (ev == <a class="code" href="group__odp__event.html#gae1a3732a534ba7a892fca38b824591b0">ODP_EVENT_INVALID</a>)</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">        <a class="code" href="group__odp__event.html#ga1622f73356c325f625db747cb3badf8d">odp_event_free</a>(ev);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> close_pktios(test_global_t *test_global)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="struct__odp__abi__pktio__t.html">odp_pktio_t</a> pktio;</div>
<div class="line">    <a class="code" href="struct__odp__abi__pool__t.html">odp_pool_t</a> pool;</div>
<div class="line">    <span class="keywordtype">int</span> i, ret = 0;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; test_global-&gt;opt.num_pktio; i++) {</div>
<div class="line">        pktio = test_global-&gt;pktio[i].pktio;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (pktio == <a class="code" href="group__odp__packet__io.html#ga9c7d0fcaec232b5503633e42ea29f6f5">ODP_PKTIO_INVALID</a>)</div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (<a name="a118"></a><a class="code" href="group__odp__packet__io.html#ga2e481c9f2f073cc337aff7f4c65cba7c">odp_pktio_close</a>(pktio)) {</div>
<div class="line">            printf(<span class="stringliteral">&quot;Error (%s): Pktio close failed.\n&quot;</span>,</div>
<div class="line">                   test_global-&gt;opt.pktio_name[i]);</div>
<div class="line">            ret = -1;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    pool = test_global-&gt;pool;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (pool == <a class="code" href="group__odp__pool.html#gafca03b58412260da754042a92f8a5e04">ODP_POOL_INVALID</a>)</div>
<div class="line">        <span class="keywordflow">return</span> ret;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a name="a119"></a><a class="code" href="group__odp__pool.html#ga6ad439aaef911d82b972c915850e6924">odp_pool_destroy</a>(pool)) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Error: Pool destroy failed.\n&quot;</span>);</div>
<div class="line">        ret = -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> ret;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> create_pipeline_queues(test_global_t *test_global)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> i, j, k, num_pktio, stages, queues, ctx_size;</div>
<div class="line">    pipe_queue_context_t *ctx;</div>
<div class="line">    <a name="_a120"></a><a class="code" href="structodp__queue__param__t.html">odp_queue_param_t</a> queue_param;</div>
<div class="line">    <a class="code" href="group__odp__scheduler.html#ga05c15f8076326b98fe2fc534dcc6b319">odp_schedule_sync_t</a> sched_sync;</div>
<div class="line">    <span class="keywordtype">int</span> ret = 0;</div>
<div class="line"> </div>
<div class="line">    num_pktio = test_global-&gt;opt.num_pktio;</div>
<div class="line">    stages = test_global-&gt;opt.pipe_stages;</div>
<div class="line">    queues = test_global-&gt;opt.pipe_queues;</div>
<div class="line">    sched_sync = sched_sync_mode(test_global);</div>
<div class="line"> </div>
<div class="line">    <a name="a121"></a><a class="code" href="group__odp__queue.html#ga6fc2ea5eb86152210342f7377d1468e4">odp_queue_param_init</a>(&amp;queue_param);</div>
<div class="line">    queue_param.<a name="a122"></a><a class="code" href="structodp__queue__param__t.html#a6a7251138773a3110bdc0e8d5f5b3be9">type</a> = <a name="a123"></a><a class="code" href="group__odp__queue.html#gga89a3439d3f3be48cac1767cba721eddaa4f49ad2143a9ba8a5914573d2794e962">ODP_QUEUE_TYPE_SCHED</a>;</div>
<div class="line">    queue_param.<a class="code" href="structodp__queue__param__t.html#a371701df4d20cee95978b9265c232e32">sched</a>.<a class="code" href="structodp__schedule__param__t.html#a3f103771c3a9319c1ec998fa8724b8ac">prio</a>  = <a class="code" href="group__odp__scheduler.html#ga94034a7f591f3f549099aebb098f7e05">odp_schedule_default_prio</a>();</div>
<div class="line">    queue_param.<a class="code" href="structodp__queue__param__t.html#a371701df4d20cee95978b9265c232e32">sched</a>.<a class="code" href="structodp__schedule__param__t.html#ad4ca09d63edb0cec36567c26688cea14">sync</a>  = sched_sync;</div>
<div class="line">    queue_param.<a class="code" href="structodp__queue__param__t.html#a371701df4d20cee95978b9265c232e32">sched</a>.<a class="code" href="structodp__schedule__param__t.html#a0bc7830a919f31ce295a20c51a7e2648">group</a> = <a class="code" href="group__odp__scheduler.html#gaf463b15ad978dac0bf77c0110232b504">ODP_SCHED_GROUP_ALL</a>;</div>
<div class="line"> </div>
<div class="line">    queue_param.<a name="a124"></a><a class="code" href="structodp__queue__param__t.html#a5f045dbc199867e8ff2d23c617603b4e">size</a> = test_global-&gt;opt.pipe_queue_size;</div>
<div class="line">    <span class="keywordflow">if</span> (test_global-&gt;schedule_config.queue_size &amp;&amp;</div>
<div class="line">        queue_param.<a class="code" href="structodp__queue__param__t.html#a5f045dbc199867e8ff2d23c617603b4e">size</a> &gt; test_global-&gt;schedule_config.queue_size) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Error: Pipeline queue max size is %u\n&quot;</span>,</div>
<div class="line">               test_global-&gt;schedule_config.queue_size);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    ctx_size = <span class="keyword">sizeof</span>(pipe_queue_context_t);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; stages; i++) {</div>
<div class="line">        <span class="keywordflow">for</span> (j = 0; j &lt; queues; j++) {</div>
<div class="line">            ctx = &amp;test_global-&gt;pipe_queue_ctx[i][j].ctx;</div>
<div class="line"> </div>
<div class="line">            <span class="comment">/* packet input is stage 0 */</span></div>
<div class="line">            ctx-&gt;stage = i + 1;</div>
<div class="line">            ctx-&gt;queue_idx = j;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (k = 0; k &lt; num_pktio; k++) {</div>
<div class="line">        <span class="keywordflow">for</span> (i = 0; i &lt; stages; i++) {</div>
<div class="line">            <span class="keywordflow">for</span> (j = 0; j &lt; queues; j++) {</div>
<div class="line">                <a class="code" href="struct__odp__abi__queue__t.html">odp_queue_t</a> q;</div>
<div class="line"> </div>
<div class="line">                q = <a name="a125"></a><a class="code" href="group__odp__queue.html#gab985be8c3947fef3da257e16948bf0f0">odp_queue_create</a>(NULL, &amp;queue_param);</div>
<div class="line">                test_global-&gt;pipe_queue[k][i].queue[j] = q;</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">if</span> (q == <a name="a126"></a><a class="code" href="group__odp__queue.html#ga771259a58e71e065e0d00d2fc431b014">ODP_QUEUE_INVALID</a>) {</div>
<div class="line">                    printf(<span class="stringliteral">&quot;Error: Queue create failed [%i] %i/%i\n&quot;</span>,</div>
<div class="line">                           k, i, j);</div>
<div class="line">                    ret = -1;</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                }</div>
<div class="line"> </div>
<div class="line">                ctx = &amp;test_global-&gt;pipe_queue_ctx[i][j].ctx;</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">if</span> (<a class="code" href="group__odp__queue.html#ga5c003a7027eb97f12b263d674be853ae">odp_queue_context_set</a>(q, ctx, ctx_size)) {</div>
<div class="line">                    printf(<span class="stringliteral">&quot;Error: Queue ctx set failed [%i] %i/%i\n&quot;</span>,</div>
<div class="line">                           k, i, j);</div>
<div class="line">                    ret = -1;</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> ret;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> destroy_pipeline_queues(test_global_t *test_global)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> i, j, k, num_pktio, stages, queues;</div>
<div class="line">    <a class="code" href="struct__odp__abi__queue__t.html">odp_queue_t</a> queue;</div>
<div class="line"> </div>
<div class="line">    num_pktio = test_global-&gt;opt.num_pktio;</div>
<div class="line">    stages = test_global-&gt;opt.pipe_stages;</div>
<div class="line">    queues = test_global-&gt;opt.pipe_queues;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (k = 0; k &lt; num_pktio; k++) {</div>
<div class="line">        <span class="keywordflow">for</span> (i = 0; i &lt; stages; i++) {</div>
<div class="line">            <span class="keywordflow">for</span> (j = 0; j &lt; queues; j++) {</div>
<div class="line">                queue = test_global-&gt;pipe_queue[k][i].queue[j];</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">if</span> (queue == <a class="code" href="group__odp__queue.html#ga771259a58e71e065e0d00d2fc431b014">ODP_QUEUE_INVALID</a>) {</div>
<div class="line">                    printf(<span class="stringliteral">&quot;Error: Bad queue handle [%i] %i/%i\n&quot;</span>,</div>
<div class="line">                           k, i, j);</div>
<div class="line">                    <span class="keywordflow">return</span>;</div>
<div class="line">                }</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">if</span> (<a name="a127"></a><a class="code" href="group__odp__queue.html#gad1e1d2709808385025dd5f005f7690c4">odp_queue_destroy</a>(queue)) {</div>
<div class="line">                    printf(<span class="stringliteral">&quot;Error: Queue destroy failed [%i] %i/%i\n&quot;</span>,</div>
<div class="line">                           k, i, j);</div>
<div class="line">                    <span class="keywordflow">return</span>;</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> create_timers(test_global_t *test_global)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> num_timer, num_pktio, num_queue, i, j;</div>
<div class="line">    <a class="code" href="struct__odp__abi__pool__t.html">odp_pool_t</a> pool;</div>
<div class="line">    <a class="code" href="structodp__pool__param__t.html">odp_pool_param_t</a> pool_param;</div>
<div class="line">    <a class="code" href="struct__odp__abi__timer__pool__t.html">odp_timer_pool_t</a> timer_pool;</div>
<div class="line">    <a name="_a128"></a><a class="code" href="structodp__timer__pool__param__t.html">odp_timer_pool_param_t</a> timer_param;</div>
<div class="line">    <a name="_a129"></a><a class="code" href="structodp__timer__capability__t.html">odp_timer_capability_t</a> timer_capa;</div>
<div class="line">    <a class="code" href="struct__odp__abi__timer__t.html">odp_timer_t</a> timer;</div>
<div class="line">    <a class="code" href="struct__odp__abi__queue__t.html">odp_queue_t</a> queue;</div>
<div class="line">    uint64_t res_ns, tick;</div>
<div class="line">    uint64_t timeout_ns = 1000 * test_global-&gt;opt.timeout_us;</div>
<div class="line"> </div>
<div class="line">    num_pktio = test_global-&gt;opt.num_pktio;</div>
<div class="line">    num_queue = test_global-&gt;opt.num_pktio_queue;</div>
<div class="line">    num_timer = num_pktio * num_queue;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Always init globals for destroy calls */</span></div>
<div class="line">    test_global-&gt;timer.timer_pool = <a name="a130"></a><a class="code" href="group__odp__timer.html#ga4ad1abeaffbe94d9bbc66a0d8bab76c3">ODP_TIMER_POOL_INVALID</a>;</div>
<div class="line">    test_global-&gt;timer.timeout_pool = <a class="code" href="group__odp__pool.html#gafca03b58412260da754042a92f8a5e04">ODP_POOL_INVALID</a>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; num_pktio; i++)</div>
<div class="line">        <span class="keywordflow">for</span> (j = 0; j &lt; num_queue; j++)</div>
<div class="line">            test_global-&gt;timer.timer[i][j] = <a name="a131"></a><a class="code" href="group__odp__timer.html#gaea51c621bb26b7a8bdab46d8a08f247a">ODP_TIMER_INVALID</a>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Timers not used */</span></div>
<div class="line">    if (test_global-&gt;opt.timeout_us == 0)</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a name="a132"></a><a class="code" href="group__odp__timer.html#ga7064c7d4e9f014ffd322222178d208b3">odp_timer_capability</a>(<a name="a133"></a><a class="code" href="group__odp__timer.html#gadb0936032a6640db772dd99cf4eb9159">ODP_CLOCK_DEFAULT</a>, &amp;timer_capa)) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Timer capa failed\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    res_ns = timeout_ns / 10;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (timer_capa.<a name="a134"></a><a class="code" href="structodp__timer__capability__t.html#af0616eb9ff6667d142bb0e6febef7135">highest_res_ns</a> &gt; res_ns) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Timeout too short. Min timeout %&quot;</span> PRIu64 <span class="stringliteral">&quot; usec\n&quot;</span>,</div>
<div class="line">               timer_capa.<a class="code" href="structodp__timer__capability__t.html#af0616eb9ff6667d142bb0e6febef7135">highest_res_ns</a> / 100);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <a name="a135"></a><a class="code" href="group__odp__timer.html#gaf680f0ddeb5270d8a8947e2445b22dff">odp_timer_pool_param_init</a>(&amp;timer_param);</div>
<div class="line">    timer_param.<a name="a136"></a><a class="code" href="structodp__timer__pool__param__t.html#a0c9d28e284d142c3fe6ee5f8cc66171e">res_ns</a>     = res_ns;</div>
<div class="line">    timer_param.<a name="a137"></a><a class="code" href="structodp__timer__pool__param__t.html#a8c358d197ea76dc7295025c23159e890">min_tmo</a>    = timeout_ns;</div>
<div class="line">    timer_param.<a name="a138"></a><a class="code" href="structodp__timer__pool__param__t.html#af54f6e42c3f0fc4e2514c2d0df3023c2">max_tmo</a>    = timeout_ns;</div>
<div class="line">    timer_param.<a name="a139"></a><a class="code" href="structodp__timer__pool__param__t.html#abe013f91043de4d7fa0003bce6701a3f">num_timers</a> = num_timer;</div>
<div class="line">    timer_param.<a name="a140"></a><a class="code" href="structodp__timer__pool__param__t.html#af491eee5937cbb0b8e18a85a9712c07c">clk_src</a>    = <a class="code" href="group__odp__timer.html#gadb0936032a6640db772dd99cf4eb9159">ODP_CLOCK_DEFAULT</a>;</div>
<div class="line"> </div>
<div class="line">    timer_pool = <a name="a141"></a><a class="code" href="group__odp__timer.html#ga5119deda378994a468934aef41993965">odp_timer_pool_create</a>(<span class="stringliteral">&quot;sched_pktio_timer&quot;</span>, &amp;timer_param);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (timer_pool == <a class="code" href="group__odp__timer.html#ga4ad1abeaffbe94d9bbc66a0d8bab76c3">ODP_TIMER_POOL_INVALID</a>) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Timer pool create failed\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a name="a142"></a><a class="code" href="group__odp__timer.html#ga0d106b4ca2047a5a5dda17ce6b6bc0b1">odp_timer_pool_start_multi</a>(&amp;timer_pool, 1) != 1) {</div>
<div class="line">        ODPH_ERR(<span class="stringliteral">&quot;Timer pool start failed\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    test_global-&gt;timer.timer_pool = timer_pool;</div>
<div class="line">    tick = <a name="a143"></a><a class="code" href="group__odp__timer.html#ga7fb23a28aa1db3c919aa49c90b2316fb">odp_timer_ns_to_tick</a>(timer_pool, timeout_ns);</div>
<div class="line">    test_global-&gt;timer.timeout_tick = tick;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; num_pktio; i++) {</div>
<div class="line">        <span class="keywordflow">for</span> (j = 0; j &lt; num_queue; j++) {</div>
<div class="line">            queue = test_global-&gt;pktio[i].input_queue[j];</div>
<div class="line">            timer = <a name="a144"></a><a class="code" href="group__odp__timer.html#gad3e1c9b326fe7ec85b635d6f02998a86">odp_timer_alloc</a>(timer_pool, queue, NULL);</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (timer == <a class="code" href="group__odp__timer.html#gaea51c621bb26b7a8bdab46d8a08f247a">ODP_TIMER_INVALID</a>) {</div>
<div class="line">                printf(<span class="stringliteral">&quot;Timer alloc failed.\n&quot;</span>);</div>
<div class="line">                <span class="keywordflow">return</span> -1;</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            test_global-&gt;timer.timer[i][j] = timer;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="group__odp__pool.html#ga3dd8bcfb920f81142e9fe27cfba24073">odp_pool_param_init</a>(&amp;pool_param);</div>
<div class="line">    pool_param.<a class="code" href="structodp__pool__param__t.html#aac72ae142dd9736a287ce63d78b71c87">type</a>    = <a name="a145"></a><a class="code" href="group__odp__pool.html#ggac47bb33bcde80614b4b358578eaa3082a10dd6445d9d9a88a989de99edf0c9010">ODP_POOL_TIMEOUT</a>;</div>
<div class="line">    pool_param.<a name="a146"></a><a class="code" href="structodp__pool__param__t.html#a2847f65ffe1be16a0026608991c08a68">tmo</a>.<a class="code" href="structodp__pool__param__t.html#a3598b3a2496629cd45010c1c5e876250">num</a> = num_timer;</div>
<div class="line"> </div>
<div class="line">    pool = <a class="code" href="group__odp__pool.html#ga256909a276600c25ce11b52ae274632f">odp_pool_create</a>(<span class="stringliteral">&quot;timeout pool&quot;</span>, &amp;pool_param);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (pool == <a class="code" href="group__odp__pool.html#gafca03b58412260da754042a92f8a5e04">ODP_POOL_INVALID</a>) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Timeout pool create failed.\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    test_global-&gt;timer.timeout_pool = pool;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> start_timers(test_global_t *test_global)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> i, j;</div>
<div class="line">    <a name="_a147"></a><a class="code" href="struct__odp__abi__timeout__t.html">odp_timeout_t</a> timeout;</div>
<div class="line">    <a class="code" href="struct__odp__abi__timer__t.html">odp_timer_t</a> timer;</div>
<div class="line">    <a class="code" href="group__odp__timer.html#gabd0fe407d8c3d7370b2bff479ae1d78c">odp_timer_retval_t</a> ret;</div>
<div class="line">    <a class="code" href="structodp__timer__start__t.html">odp_timer_start_t</a> start_param;</div>
<div class="line">    uint64_t timeout_tick = test_global-&gt;timer.timeout_tick;</div>
<div class="line">    <span class="keywordtype">int</span> num_pktio = test_global-&gt;opt.num_pktio;</div>
<div class="line">    <span class="keywordtype">int</span> num_queue = test_global-&gt;opt.num_pktio_queue;</div>
<div class="line">    <a class="code" href="struct__odp__abi__pool__t.html">odp_pool_t</a> pool = test_global-&gt;timer.timeout_pool;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Timers not used */</span></div>
<div class="line">    <span class="keywordflow">if</span> (test_global-&gt;opt.timeout_us == 0)</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line"> </div>
<div class="line">    start_param.<a class="code" href="structodp__timer__start__t.html#adff5d0b4bfbce079f01ec86642a387fe">tick_type</a> = <a class="code" href="group__odp__timer.html#ggafe9103bdca21be1c7f14c83fedbf9b29a46ef02de17dc80bca0684f0f8087dd57">ODP_TIMER_TICK_REL</a>;</div>
<div class="line">    start_param.<a class="code" href="structodp__timer__start__t.html#a00d0c90df7accbbed0f22273365b6c56">tick</a> = timeout_tick;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; num_pktio; i++) {</div>
<div class="line">        <span class="keywordflow">for</span> (j = 0; j &lt; num_queue; j++) {</div>
<div class="line">            timer = test_global-&gt;timer.timer[i][j];</div>
<div class="line"> </div>
<div class="line">            timeout = <a name="a148"></a><a class="code" href="group__odp__timer.html#ga1d1006d0da428f8afd5527b673f777a9">odp_timeout_alloc</a>(pool);</div>
<div class="line">            <span class="keywordflow">if</span> (timeout == <a name="a149"></a><a class="code" href="group__odp__timer.html#gac72c1c2f923ee0d53b0a7d4109da34a5">ODP_TIMEOUT_INVALID</a>) {</div>
<div class="line">                printf(<span class="stringliteral">&quot;Timeout alloc failed\n&quot;</span>);</div>
<div class="line">                <span class="keywordflow">return</span> -1;</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            start_param.<a class="code" href="structodp__timer__start__t.html#a8c7915d1a2cfa0bb13f8cbf280ee7a97">tmo_ev</a> = <a name="a150"></a><a class="code" href="group__odp__timer.html#gac65e47ba9fdfd9ea73cb799e8e957d21">odp_timeout_to_event</a>(timeout);</div>
<div class="line"> </div>
<div class="line">            ret = <a class="code" href="group__odp__timer.html#gaa31f657dcc4d9e31e379b4f07ff9f83a">odp_timer_start</a>(timer, &amp;start_param);</div>
<div class="line">            <span class="keywordflow">if</span> (ret != <a class="code" href="group__odp__timer.html#ggabd0fe407d8c3d7370b2bff479ae1d78ca6cf6bb923bdf13cede58a481443be93c">ODP_TIMER_SUCCESS</a>) {</div>
<div class="line">                printf(<span class="stringliteral">&quot;Timer set failed\n&quot;</span>);</div>
<div class="line">                <span class="keywordflow">return</span> -1;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> destroy_timers(test_global_t *test_global)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> i, j;</div>
<div class="line">    <a class="code" href="struct__odp__abi__timer__t.html">odp_timer_t</a> timer;</div>
<div class="line">    <span class="keywordtype">int</span> num_pktio = test_global-&gt;opt.num_pktio;</div>
<div class="line">    <span class="keywordtype">int</span> num_queue = test_global-&gt;opt.num_pktio_queue;</div>
<div class="line">    <a class="code" href="struct__odp__abi__timer__pool__t.html">odp_timer_pool_t</a> timer_pool = test_global-&gt;timer.timer_pool;</div>
<div class="line">    <a class="code" href="struct__odp__abi__pool__t.html">odp_pool_t</a> pool = test_global-&gt;timer.timeout_pool;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (timer_pool == <a class="code" href="group__odp__timer.html#ga4ad1abeaffbe94d9bbc66a0d8bab76c3">ODP_TIMER_POOL_INVALID</a>)</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Wait any remaining timers to expire */</span></div>
<div class="line">    empty_queues(2000 * test_global-&gt;opt.timeout_us);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; num_pktio; i++) {</div>
<div class="line">        <span class="keywordflow">for</span> (j = 0; j &lt; num_queue; j++) {</div>
<div class="line">            timer = test_global-&gt;timer.timer[i][j];</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (timer == <a class="code" href="group__odp__timer.html#gaea51c621bb26b7a8bdab46d8a08f247a">ODP_TIMER_INVALID</a>)</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (<a name="a151"></a><a class="code" href="group__odp__timer.html#ga373923bac02ccf5db59a1fe19c2b3220">odp_timer_free</a>(timer))</div>
<div class="line">                printf(<span class="stringliteral">&quot;Timer free failed: %i, %i\n&quot;</span>, i, j);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (pool != <a class="code" href="group__odp__pool.html#gafca03b58412260da754042a92f8a5e04">ODP_POOL_INVALID</a>) {</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group__odp__pool.html#ga6ad439aaef911d82b972c915850e6924">odp_pool_destroy</a>(pool))</div>
<div class="line">            printf(<span class="stringliteral">&quot;Timeout pool destroy failed\n&quot;</span>);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <a name="a152"></a><a class="code" href="group__odp__timer.html#gafb56c5aff06be798de32d878266febc0">odp_timer_pool_destroy</a>(timer_pool);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> start_workers(odph_thread_t thread[],</div>
<div class="line">              test_global_t *test_global)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> i;</div>
<div class="line">    <a class="code" href="structodp__cpumask__s.html">odp_cpumask_t</a> cpumask;</div>
<div class="line">    odph_thread_common_param_t thr_common;</div>
<div class="line">    odph_thread_param_t thr_param[MAX_WORKERS];</div>
<div class="line">    <span class="keywordtype">int</span> num = test_global-&gt;opt.num_worker;</div>
<div class="line"> </div>
<div class="line">    <a name="a153"></a><a class="code" href="group__odp__cpumask.html#ga6b12769c4dc0729aa057d88a450eb727">odp_cpumask_zero</a>(&amp;cpumask);</div>
<div class="line"> </div>
<div class="line">    odph_thread_common_param_init(&amp;thr_common);</div>
<div class="line">    thr_common.instance = test_global-&gt;instance;</div>
<div class="line">    thr_common.cpumask = &amp;cpumask;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; num; i++) {</div>
<div class="line">        <a name="a154"></a><a class="code" href="group__odp__cpumask.html#ga42b4df58e6727850aa8d1eca3aa252e5">odp_cpumask_set</a>(&amp;cpumask, test_global-&gt;worker_cpu[i]);</div>
<div class="line">        test_global-&gt;worker_arg[i].worker_id = i;</div>
<div class="line">        test_global-&gt;worker_arg[i].test_global_ptr = test_global;</div>
<div class="line"> </div>
<div class="line">        odph_thread_param_init(&amp;thr_param[i]);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (!i) {</div>
<div class="line">            <span class="keywordflow">if</span> (test_global-&gt;opt.timeout_us)</div>
<div class="line">                thr_param[0].start = worker_thread_timers;</div>
<div class="line">            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (test_global-&gt;opt.pipe_stages)</div>
<div class="line">                thr_param[0].start = worker_thread_pipeline;</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">                thr_param[0].start = worker_thread_direct;</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            thr_param[i].start = thr_param[0].start;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        thr_param[i].arg = &amp;test_global-&gt;worker_arg[i];</div>
<div class="line">        thr_param[i].thr_type = <a name="a155"></a><a class="code" href="group__odp__thread.html#ggafc7a7c180de9811d71b7cb050713bf53a2182066d714db5f2a4e994ad92f25b2a">ODP_THREAD_WORKER</a>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    memset(thread, 0, num * <span class="keyword">sizeof</span>(odph_thread_t));</div>
<div class="line">    odph_thread_create(thread, &amp;thr_common, thr_param, num);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> wait_workers(odph_thread_t thread[], test_global_t *test_global)</div>
<div class="line">{</div>
<div class="line">    odph_thread_join(thread, test_global-&gt;opt.num_worker);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="group__odp__initialization.html#ga8d362bd3c7c87ab5892ca63b15c375c0">odp_instance_t</a> instance;</div>
<div class="line">    <a name="_a156"></a><a class="code" href="structodp__init__t.html">odp_init_t</a> init;</div>
<div class="line">    <a name="_a157"></a><a class="code" href="struct__odp__abi__shm__t.html">odp_shm_t</a> shm;</div>
<div class="line">    <a name="_a158"></a><a class="code" href="structodp__time__s.html">odp_time_t</a> t1 = <a name="a159"></a><a class="code" href="group__odp__time.html#ga67ec3be80e3d1b2b1294ae551f4def86">ODP_TIME_NULL</a>, t2 = <a class="code" href="group__odp__time.html#ga67ec3be80e3d1b2b1294ae551f4def86">ODP_TIME_NULL</a>;</div>
<div class="line">    odph_helper_options_t helper_options;</div>
<div class="line">    odph_thread_t thread[MAX_WORKERS];</div>
<div class="line">    test_options_t test_options;</div>
<div class="line">    <span class="keywordtype">int</span> ret = 0;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Let helper collect its own arguments (e.g. --odph_proc) */</span></div>
<div class="line">    argc = odph_parse_options(argc, argv);</div>
<div class="line">    <span class="keywordflow">if</span> (odph_options(&amp;helper_options)) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Error: reading ODP helper options failed.\n&quot;</span>);</div>
<div class="line">        exit(EXIT_FAILURE);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    signal(SIGINT, sig_handler);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (parse_options(argc, argv, &amp;test_options))</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* List features not to be used (may optimize performance) */</span></div>
<div class="line">    <a name="a160"></a><a class="code" href="group__odp__initialization.html#ga145c4fc4417c8f58efd0852b34e25ba9">odp_init_param_init</a>(&amp;init);</div>
<div class="line">    init.<a name="a161"></a><a class="code" href="structodp__init__t.html#aa359196a1801c0ca15a88af32de71d46">not_used</a>.<a name="a162"></a><a class="code" href="unionodp__feature__t.html#ab93b01045d0d66b55e50722e699e3c3c">feat</a>.<a name="a163"></a><a class="code" href="unionodp__feature__t.html#a88403beab239078f0b99ced6a9e55a8b">cls</a>      = 1;</div>
<div class="line">    init.<a class="code" href="structodp__init__t.html#aa359196a1801c0ca15a88af32de71d46">not_used</a>.<a class="code" href="unionodp__feature__t.html#ab93b01045d0d66b55e50722e699e3c3c">feat</a>.<a name="a164"></a><a class="code" href="unionodp__feature__t.html#afa5de6ea31695f0c1fd33773612aefcc">compress</a> = 1;</div>
<div class="line">    init.<a class="code" href="structodp__init__t.html#aa359196a1801c0ca15a88af32de71d46">not_used</a>.<a class="code" href="unionodp__feature__t.html#ab93b01045d0d66b55e50722e699e3c3c">feat</a>.<a name="a165"></a><a class="code" href="unionodp__feature__t.html#a1bdda287098ded64503078051a83f926">crypto</a>   = 1;</div>
<div class="line">    init.<a class="code" href="structodp__init__t.html#aa359196a1801c0ca15a88af32de71d46">not_used</a>.<a class="code" href="unionodp__feature__t.html#ab93b01045d0d66b55e50722e699e3c3c">feat</a>.<a name="a166"></a><a class="code" href="unionodp__feature__t.html#a2c1ba6ec10b80be331770a6d1343c022">ipsec</a>    = 1;</div>
<div class="line">    init.<a class="code" href="structodp__init__t.html#aa359196a1801c0ca15a88af32de71d46">not_used</a>.<a class="code" href="unionodp__feature__t.html#ab93b01045d0d66b55e50722e699e3c3c">feat</a>.<a name="a167"></a><a class="code" href="unionodp__feature__t.html#a1314788ea1f1ed5880993df313efa537">tm</a>       = 1;</div>
<div class="line">    init.<a class="code" href="structodp__init__t.html#aa359196a1801c0ca15a88af32de71d46">not_used</a>.<a class="code" href="unionodp__feature__t.html#ab93b01045d0d66b55e50722e699e3c3c">feat</a>.<a name="a168"></a><a class="code" href="unionodp__feature__t.html#a8385b58720b831b5c74ed0caf2e81ce0">timer</a>    = 1;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (test_options.timeout_us)</div>
<div class="line">        init.<a class="code" href="structodp__init__t.html#aa359196a1801c0ca15a88af32de71d46">not_used</a>.<a class="code" href="unionodp__feature__t.html#ab93b01045d0d66b55e50722e699e3c3c">feat</a>.<a class="code" href="unionodp__feature__t.html#a8385b58720b831b5c74ed0caf2e81ce0">timer</a> = 0;</div>
<div class="line"> </div>
<div class="line">    init.<a name="a169"></a><a class="code" href="structodp__init__t.html#a7d368c740146170ebeb1651ce049919e">mem_model</a> = helper_options.mem_model;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Init ODP before calling anything else */</span></div>
<div class="line">    <span class="keywordflow">if</span> (<a name="a170"></a><a class="code" href="group__odp__initialization.html#ga68d81088e65ef66180fb51076905e34d">odp_init_global</a>(&amp;instance, &amp;init, NULL)) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Error: Global init failed.\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Init this thread */</span></div>
<div class="line">    <span class="keywordflow">if</span> (<a name="a171"></a><a class="code" href="group__odp__initialization.html#ga265470ea614bfeca9d8901e81ddefca9">odp_init_local</a>(instance, <a name="a172"></a><a class="code" href="group__odp__thread.html#ggafc7a7c180de9811d71b7cb050713bf53a9aab3fdb10eb2000a864bff81f23c00a">ODP_THREAD_CONTROL</a>)) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Error: Local init failed.\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Reserve memory for args from shared mem */</span></div>
<div class="line">    shm = <a name="a173"></a><a class="code" href="group__odp__shared__memory.html#gacc441b0e100ec1c54e21f1745939a2d8">odp_shm_reserve</a>(<span class="stringliteral">&quot;test_global&quot;</span>, <span class="keyword">sizeof</span>(test_global_t),</div>
<div class="line">                  ODP_CACHE_LINE_SIZE, 0);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (shm == <a name="a174"></a><a class="code" href="group__odp__shared__memory.html#ga6e4289975efc279bb9f31880613a9d60">ODP_SHM_INVALID</a>) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Error: shm reserve failed.\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    test_global = <a name="a175"></a><a class="code" href="group__odp__shared__memory.html#gac94c4232f7cd64039bbaef601ff2c05e">odp_shm_addr</a>(shm);</div>
<div class="line">    memset(test_global, 0, <span class="keyword">sizeof</span>(test_global_t));</div>
<div class="line"> </div>
<div class="line">    test_global-&gt;instance = instance;</div>
<div class="line">    test_global-&gt;pool     = <a class="code" href="group__odp__pool.html#gafca03b58412260da754042a92f8a5e04">ODP_POOL_INVALID</a>;</div>
<div class="line"> </div>
<div class="line">    memcpy(&amp;test_global-&gt;opt, &amp;test_options, <span class="keyword">sizeof</span>(test_options_t));</div>
<div class="line"> </div>
<div class="line">    <a name="a176"></a><a class="code" href="group__odp__system.html#gab0a1cd5e503d5ec067e8d17d228b937d">odp_sys_info_print</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (config_setup(test_global))</div>
<div class="line">        <span class="keywordflow">goto</span> quit;</div>
<div class="line"> </div>
<div class="line">    print_config(test_global);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (open_pktios(test_global))</div>
<div class="line">        <span class="keywordflow">goto</span> quit;</div>
<div class="line"> </div>
<div class="line">    link_pktios(test_global);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (create_pipeline_queues(test_global))</div>
<div class="line">        <span class="keywordflow">goto</span> quit;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (create_timers(test_global))</div>
<div class="line">        <span class="keywordflow">goto</span> quit;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (start_pktios(test_global))</div>
<div class="line">        <span class="keywordflow">goto</span> quit;</div>
<div class="line"> </div>
<div class="line">    <a name="a177"></a><a class="code" href="group__odp__barrier.html#ga1416b47755c2af6267074959ac0d4840">odp_barrier_init</a>(&amp;test_global-&gt;worker_start,</div>
<div class="line">             test_global-&gt;opt.num_worker + 1);</div>
<div class="line"> </div>
<div class="line">    start_workers(thread, test_global);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (start_timers(test_global)) {</div>
<div class="line">        test_global-&gt;stop_workers = 1;</div>
<div class="line">        <a class="code" href="group__odp__barrier.html#ga3a641c164c73f0ac06a2d6386e12dcc0">odp_mb_full</a>();</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Synchronize pktio configuration with workers. Worker are now ready</span></div>
<div class="line"><span class="comment">     * to process packets. */</span></div>
<div class="line">    <a class="code" href="group__odp__barrier.html#ga97c8f84490e816330f96155acf0b4b77">odp_barrier_wait</a>(&amp;test_global-&gt;worker_start);</div>
<div class="line"> </div>
<div class="line">    t1 = <a name="a178"></a><a class="code" href="group__odp__time.html#ga5d0b24d7dae739bac7585ed515bd60a8">odp_time_local</a>();</div>
<div class="line"> </div>
<div class="line">    wait_workers(thread, test_global);</div>
<div class="line"> </div>
<div class="line">    t2 = <a class="code" href="group__odp__time.html#ga5d0b24d7dae739bac7585ed515bd60a8">odp_time_local</a>();</div>
<div class="line"> </div>
<div class="line">quit:</div>
<div class="line">    stop_pktios(test_global);</div>
<div class="line">    empty_queues(<a name="a179"></a><a class="code" href="group__odp__time.html#ga49ab6f8fe6c0aa5b820717fd91f16ab5">ODP_TIME_SEC_IN_NS</a> / 2);</div>
<div class="line">    close_pktios(test_global);</div>
<div class="line">    destroy_pipeline_queues(test_global);</div>
<div class="line">    destroy_timers(test_global);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (test_global-&gt;opt.collect_stat) {</div>
<div class="line">        print_stat(test_global, <a name="a180"></a><a class="code" href="group__odp__time.html#gada453827b812a8fae651e9d93308e959">odp_time_diff_ns</a>(t2, t1));</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Encode return value for validation test usage. */</span></div>
<div class="line">        <span class="keywordflow">if</span> (test_global-&gt;rx_pkt_sum &gt; TEST_PASSED_LIMIT)</div>
<div class="line">            ret += 1;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (test_global-&gt;tx_pkt_sum &gt; TEST_PASSED_LIMIT)</div>
<div class="line">            ret += 2;</div>
<div class="line">    }</div>
<div class="line">    test_global = NULL;</div>
<div class="line">    <a class="code" href="group__odp__barrier.html#ga3a641c164c73f0ac06a2d6386e12dcc0">odp_mb_full</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a name="a181"></a><a class="code" href="group__odp__shared__memory.html#ga0b02991b512acc119206b44c95a86ed6">odp_shm_free</a>(shm)) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Error: shm free failed.\n&quot;</span>);</div>
<div class="line">        ret = -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a name="a182"></a><a class="code" href="group__odp__initialization.html#ga6d15f0e1718da9477948dedb06a2f01a">odp_term_local</a>()) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Error: term local failed.\n&quot;</span>);</div>
<div class="line">        ret = -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a name="a183"></a><a class="code" href="group__odp__initialization.html#ga87e9c66ad92201c9e0a710294eab1569">odp_term_global</a>(instance)) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Error: term global failed.\n&quot;</span>);</div>
<div class="line">        ret = -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> ret;</div>
<div class="line">}</div>
<div class="ttc" id="agroup__odp__barrier_html_ga1416b47755c2af6267074959ac0d4840"><div class="ttname"><a href="group__odp__barrier.html#ga1416b47755c2af6267074959ac0d4840">odp_barrier_init</a></div><div class="ttdeci">void odp_barrier_init(odp_barrier_t *barr, int count)</div><div class="ttdoc">Initialize barrier with thread count.</div></div>
<div class="ttc" id="agroup__odp__barrier_html_ga3a641c164c73f0ac06a2d6386e12dcc0"><div class="ttname"><a href="group__odp__barrier.html#ga3a641c164c73f0ac06a2d6386e12dcc0">odp_mb_full</a></div><div class="ttdeci">void odp_mb_full(void)</div><div class="ttdoc">Full memory barrier.</div></div>
<div class="ttc" id="agroup__odp__barrier_html_ga97c8f84490e816330f96155acf0b4b77"><div class="ttname"><a href="group__odp__barrier.html#ga97c8f84490e816330f96155acf0b4b77">odp_barrier_wait</a></div><div class="ttdeci">void odp_barrier_wait(odp_barrier_t *barr)</div><div class="ttdoc">Synchronize thread execution on barrier.</div></div>
<div class="ttc" id="agroup__odp__compiler__optim_html_ga205a8257879c02657e7c39ee7ad5e40a"><div class="ttname"><a href="group__odp__compiler__optim.html#ga205a8257879c02657e7c39ee7ad5e40a">ODP_ALIGNED_CACHE</a></div><div class="ttdeci">#define ODP_ALIGNED_CACHE</div><div class="ttdoc">Defines type/struct/variable to be cache line size aligned.</div></div>
<div class="ttc" id="agroup__odp__compiler__optim_html_ga2b29f27f12b751250b471aa9c14c57c8"><div class="ttname"><a href="group__odp__compiler__optim.html#ga2b29f27f12b751250b471aa9c14c57c8">odp_unlikely</a></div><div class="ttdeci">#define odp_unlikely(x)</div><div class="ttdoc">Branch unlikely taken.</div><div class="ttdef"><b>Definition:</b> <a href="spec_2hints_8h_source.html#l00064">spec/hints.h:64</a></div></div>
<div class="ttc" id="agroup__odp__cpumask_html_ga42b4df58e6727850aa8d1eca3aa252e5"><div class="ttname"><a href="group__odp__cpumask.html#ga42b4df58e6727850aa8d1eca3aa252e5">odp_cpumask_set</a></div><div class="ttdeci">void odp_cpumask_set(odp_cpumask_t *mask, int cpu)</div><div class="ttdoc">Add CPU to mask.</div></div>
<div class="ttc" id="agroup__odp__cpumask_html_ga4ff2d29f52775b12c7df1995754b524d"><div class="ttname"><a href="group__odp__cpumask.html#ga4ff2d29f52775b12c7df1995754b524d">odp_cpumask_default_worker</a></div><div class="ttdeci">int odp_cpumask_default_worker(odp_cpumask_t *mask, int num)</div><div class="ttdoc">Default CPU mask for worker threads.</div></div>
<div class="ttc" id="agroup__odp__cpumask_html_ga5c9dfaf2a18b336a537f552e122ac41d"><div class="ttname"><a href="group__odp__cpumask.html#ga5c9dfaf2a18b336a537f552e122ac41d">odp_cpumask_first</a></div><div class="ttdeci">int odp_cpumask_first(const odp_cpumask_t *mask)</div><div class="ttdoc">Find first set CPU in mask.</div></div>
<div class="ttc" id="agroup__odp__cpumask_html_ga643e71985a781cdd43bac218df03304b"><div class="ttname"><a href="group__odp__cpumask.html#ga643e71985a781cdd43bac218df03304b">odp_cpumask_next</a></div><div class="ttdeci">int odp_cpumask_next(const odp_cpumask_t *mask, int cpu)</div><div class="ttdoc">Find next set CPU in mask.</div></div>
<div class="ttc" id="agroup__odp__cpumask_html_ga6b12769c4dc0729aa057d88a450eb727"><div class="ttname"><a href="group__odp__cpumask.html#ga6b12769c4dc0729aa057d88a450eb727">odp_cpumask_zero</a></div><div class="ttdeci">void odp_cpumask_zero(odp_cpumask_t *mask)</div><div class="ttdoc">Clear entire CPU mask.</div></div>
<div class="ttc" id="agroup__odp__cpumask_html_gaac673804169b678e278704de7306a79f"><div class="ttname"><a href="group__odp__cpumask.html#gaac673804169b678e278704de7306a79f">odp_cpumask_to_str</a></div><div class="ttdeci">int32_t odp_cpumask_to_str(const odp_cpumask_t *mask, char *str, int32_t size)</div><div class="ttdoc">Format a string from CPU mask.</div></div>
<div class="ttc" id="agroup__odp__cpumask_html_gad1ca7686341a94f62ca32b87c269cf17"><div class="ttname"><a href="group__odp__cpumask.html#gad1ca7686341a94f62ca32b87c269cf17">ODP_CPUMASK_STR_SIZE</a></div><div class="ttdeci">#define ODP_CPUMASK_STR_SIZE</div><div class="ttdoc">The maximum number of characters needed to record any CPU mask as a string (output of odp_cpumask_to_...</div></div>
<div class="ttc" id="agroup__odp__event_html_ga0c1fddf7c1f6ca33b7a28aa0690f7cc0"><div class="ttname"><a href="group__odp__event.html#ga0c1fddf7c1f6ca33b7a28aa0690f7cc0">odp_event_free_multi</a></div><div class="ttdeci">void odp_event_free_multi(const odp_event_t event[], int num)</div><div class="ttdoc">Free multiple events.</div></div>
<div class="ttc" id="agroup__odp__event_html_ga1622f73356c325f625db747cb3badf8d"><div class="ttname"><a href="group__odp__event.html#ga1622f73356c325f625db747cb3badf8d">odp_event_free</a></div><div class="ttdeci">void odp_event_free(odp_event_t event)</div><div class="ttdoc">Free event.</div></div>
<div class="ttc" id="agroup__odp__event_html_ga4bd59cdf228fe0c36b8e04fe122e047a"><div class="ttname"><a href="group__odp__event.html#ga4bd59cdf228fe0c36b8e04fe122e047a">odp_event_type</a></div><div class="ttdeci">odp_event_type_t odp_event_type(odp_event_t event)</div><div class="ttdoc">Event type of an event.</div></div>
<div class="ttc" id="agroup__odp__event_html_gae1a3732a534ba7a892fca38b824591b0"><div class="ttname"><a href="group__odp__event.html#gae1a3732a534ba7a892fca38b824591b0">ODP_EVENT_INVALID</a></div><div class="ttdeci">#define ODP_EVENT_INVALID</div><div class="ttdoc">Invalid event.</div></div>
<div class="ttc" id="agroup__odp__initialization_html_ga145c4fc4417c8f58efd0852b34e25ba9"><div class="ttname"><a href="group__odp__initialization.html#ga145c4fc4417c8f58efd0852b34e25ba9">odp_init_param_init</a></div><div class="ttdeci">void odp_init_param_init(odp_init_t *param)</div><div class="ttdoc">Initialize the odp_init_t to default values for all fields.</div></div>
<div class="ttc" id="agroup__odp__initialization_html_ga265470ea614bfeca9d8901e81ddefca9"><div class="ttname"><a href="group__odp__initialization.html#ga265470ea614bfeca9d8901e81ddefca9">odp_init_local</a></div><div class="ttdeci">int odp_init_local(odp_instance_t instance, odp_thread_type_t thr_type)</div><div class="ttdoc">Thread local ODP initialization.</div></div>
<div class="ttc" id="agroup__odp__initialization_html_ga68d81088e65ef66180fb51076905e34d"><div class="ttname"><a href="group__odp__initialization.html#ga68d81088e65ef66180fb51076905e34d">odp_init_global</a></div><div class="ttdeci">int odp_init_global(odp_instance_t *instance, const odp_init_t *params, const odp_platform_init_t *platform_params)</div><div class="ttdoc">Global ODP initialization.</div></div>
<div class="ttc" id="agroup__odp__initialization_html_ga6d15f0e1718da9477948dedb06a2f01a"><div class="ttname"><a href="group__odp__initialization.html#ga6d15f0e1718da9477948dedb06a2f01a">odp_term_local</a></div><div class="ttdeci">int odp_term_local(void)</div><div class="ttdoc">Thread local ODP termination.</div></div>
<div class="ttc" id="agroup__odp__initialization_html_ga87e9c66ad92201c9e0a710294eab1569"><div class="ttname"><a href="group__odp__initialization.html#ga87e9c66ad92201c9e0a710294eab1569">odp_term_global</a></div><div class="ttdeci">int odp_term_global(odp_instance_t instance)</div><div class="ttdoc">Global ODP termination.</div></div>
<div class="ttc" id="agroup__odp__initialization_html_ga8d362bd3c7c87ab5892ca63b15c375c0"><div class="ttname"><a href="group__odp__initialization.html#ga8d362bd3c7c87ab5892ca63b15c375c0">odp_instance_t</a></div><div class="ttdeci">uint64_t odp_instance_t</div><div class="ttdoc">ODP instance ID.</div><div class="ttdef"><b>Definition:</b> <a href="api_2abi-default_2init_8h_source.html#l00031">api/abi-default/init.h:31</a></div></div>
<div class="ttc" id="agroup__odp__packet__io_html_ga04d67c951aff803cf718940e0783ef8f"><div class="ttname"><a href="group__odp__packet__io.html#ga04d67c951aff803cf718940e0783ef8f">odp_pktio_mac_addr</a></div><div class="ttdeci">int odp_pktio_mac_addr(odp_pktio_t pktio, void *mac_addr, int size)</div><div class="ttdoc">Get the default MAC address of a packet IO interface.</div></div>
<div class="ttc" id="agroup__odp__packet__io_html_ga055eabf5622e6745afbe9a1550ad1d78"><div class="ttname"><a href="group__odp__packet__io.html#ga055eabf5622e6745afbe9a1550ad1d78">odp_pktin_queue_param_init</a></div><div class="ttdeci">void odp_pktin_queue_param_init(odp_pktin_queue_param_t *param)</div><div class="ttdoc">Initialize packet input queue parameters.</div></div>
<div class="ttc" id="agroup__odp__packet__io_html_ga26d165a22d659770eba0c48543860881"><div class="ttname"><a href="group__odp__packet__io.html#ga26d165a22d659770eba0c48543860881">odp_pktio_param_init</a></div><div class="ttdeci">void odp_pktio_param_init(odp_pktio_param_t *param)</div><div class="ttdoc">Initialize pktio params.</div></div>
<div class="ttc" id="agroup__odp__packet__io_html_ga2e481c9f2f073cc337aff7f4c65cba7c"><div class="ttname"><a href="group__odp__packet__io.html#ga2e481c9f2f073cc337aff7f4c65cba7c">odp_pktio_close</a></div><div class="ttdeci">int odp_pktio_close(odp_pktio_t pktio)</div><div class="ttdoc">Close a packet IO interface.</div></div>
<div class="ttc" id="agroup__odp__packet__io_html_ga41a3ebb7ac489b85a5f7560e4d4f77f5"><div class="ttname"><a href="group__odp__packet__io.html#ga41a3ebb7ac489b85a5f7560e4d4f77f5">odp_pktout_queue</a></div><div class="ttdeci">int odp_pktout_queue(odp_pktio_t pktio, odp_pktout_queue_t queues[], int num)</div><div class="ttdoc">Direct packet output queues.</div></div>
<div class="ttc" id="agroup__odp__packet__io_html_ga6a1c262ef999e8a73ac107c182b67d33"><div class="ttname"><a href="group__odp__packet__io.html#ga6a1c262ef999e8a73ac107c182b67d33">odp_pktio_config_init</a></div><div class="ttdeci">void odp_pktio_config_init(odp_pktio_config_t *config)</div><div class="ttdoc">Initialize packet IO configuration options.</div></div>
<div class="ttc" id="agroup__odp__packet__io_html_ga7a0b3f09fd55576daa9617dc29c60ace"><div class="ttname"><a href="group__odp__packet__io.html#ga7a0b3f09fd55576daa9617dc29c60ace">odp_pktin_event_queue</a></div><div class="ttdeci">int odp_pktin_event_queue(odp_pktio_t pktio, odp_queue_t queues[], int num)</div><div class="ttdoc">Event queues for packet input.</div></div>
<div class="ttc" id="agroup__odp__packet__io_html_ga7ae4f96ab09d468fff3623d90db306f9"><div class="ttname"><a href="group__odp__packet__io.html#ga7ae4f96ab09d468fff3623d90db306f9">odp_pktio_open</a></div><div class="ttdeci">odp_pktio_t odp_pktio_open(const char *name, odp_pool_t pool, const odp_pktio_param_t *param)</div><div class="ttdoc">Open a packet IO interface.</div></div>
<div class="ttc" id="agroup__odp__packet__io_html_ga7f9faaf250d3d0d87478ff9f13680bf1"><div class="ttname"><a href="group__odp__packet__io.html#ga7f9faaf250d3d0d87478ff9f13680bf1">odp_pktio_config</a></div><div class="ttdeci">int odp_pktio_config(odp_pktio_t pktio, const odp_pktio_config_t *config)</div><div class="ttdoc">Configure packet IO interface options.</div></div>
<div class="ttc" id="agroup__odp__packet__io_html_ga8fdd705d18d4aeb81528e68c0294e984"><div class="ttname"><a href="group__odp__packet__io.html#ga8fdd705d18d4aeb81528e68c0294e984">odp_pktio_print</a></div><div class="ttdeci">void odp_pktio_print(odp_pktio_t pktio)</div><div class="ttdoc">Print pktio info to the console.</div></div>
<div class="ttc" id="agroup__odp__packet__io_html_ga9a5746e73616297fabb8d4caaa6d0333"><div class="ttname"><a href="group__odp__packet__io.html#ga9a5746e73616297fabb8d4caaa6d0333">odp_pktio_start</a></div><div class="ttdeci">int odp_pktio_start(odp_pktio_t pktio)</div><div class="ttdoc">Start packet receive and transmit.</div></div>
<div class="ttc" id="agroup__odp__packet__io_html_ga9c7d0fcaec232b5503633e42ea29f6f5"><div class="ttname"><a href="group__odp__packet__io.html#ga9c7d0fcaec232b5503633e42ea29f6f5">ODP_PKTIO_INVALID</a></div><div class="ttdeci">#define ODP_PKTIO_INVALID</div><div class="ttdoc">Invalid packet IO handle.</div></div>
<div class="ttc" id="agroup__odp__packet__io_html_gab09475da05438a53b2d0fca96aab7515"><div class="ttname"><a href="group__odp__packet__io.html#gab09475da05438a53b2d0fca96aab7515">odp_pktout_queue_param_init</a></div><div class="ttdeci">void odp_pktout_queue_param_init(odp_pktout_queue_param_t *param)</div><div class="ttdoc">Initialize packet output queue parameters.</div></div>
<div class="ttc" id="agroup__odp__packet__io_html_gab34cb9679bf99d1b3366f06a9b155c41"><div class="ttname"><a href="group__odp__packet__io.html#gab34cb9679bf99d1b3366f06a9b155c41">odp_pktio_stop</a></div><div class="ttdeci">int odp_pktio_stop(odp_pktio_t pktio)</div><div class="ttdoc">Stop packet receive and transmit.</div></div>
<div class="ttc" id="agroup__odp__packet__io_html_gab552d0e69245ade3de47130c2b9c5203"><div class="ttname"><a href="group__odp__packet__io.html#gab552d0e69245ade3de47130c2b9c5203">odp_pktio_index</a></div><div class="ttdeci">int odp_pktio_index(odp_pktio_t pktio)</div><div class="ttdoc">Get pktio interface index.</div></div>
<div class="ttc" id="agroup__odp__packet__io_html_gaba80778db7ec138977ed9e473bd1faaa"><div class="ttname"><a href="group__odp__packet__io.html#gaba80778db7ec138977ed9e473bd1faaa">odp_pktio_capability</a></div><div class="ttdeci">int odp_pktio_capability(odp_pktio_t pktio, odp_pktio_capability_t *capa)</div><div class="ttdoc">Query packet IO interface capabilities.</div></div>
<div class="ttc" id="agroup__odp__packet__io_html_gacb5db3a908775522e316c8b8ccb36498"><div class="ttname"><a href="group__odp__packet__io.html#gacb5db3a908775522e316c8b8ccb36498">odp_pktout_send</a></div><div class="ttdeci">int odp_pktout_send(odp_pktout_queue_t queue, const odp_packet_t packets[], int num)</div><div class="ttdoc">Send packets directly to an interface output queue.</div></div>
<div class="ttc" id="agroup__odp__packet__io_html_gaf9dce6b2cc13ad715e777416dce88194"><div class="ttname"><a href="group__odp__packet__io.html#gaf9dce6b2cc13ad715e777416dce88194">odp_pktin_queue_config</a></div><div class="ttdeci">int odp_pktin_queue_config(odp_pktio_t pktio, const odp_pktin_queue_param_t *param)</div><div class="ttdoc">Configure packet input queues.</div></div>
<div class="ttc" id="agroup__odp__packet__io_html_gafc2120185a8da74540feade78623f3b3"><div class="ttname"><a href="group__odp__packet__io.html#gafc2120185a8da74540feade78623f3b3">odp_pktout_queue_config</a></div><div class="ttdeci">int odp_pktout_queue_config(odp_pktio_t pktio, const odp_pktout_queue_param_t *param)</div><div class="ttdoc">Configure packet output queues.</div></div>
<div class="ttc" id="agroup__odp__packet__io_html_gga4e0c26e40b1166b07142302d12e8467da9e6184e8d605ce199cfa54d6c50153ff"><div class="ttname"><a href="group__odp__packet__io.html#gga4e0c26e40b1166b07142302d12e8467da9e6184e8d605ce199cfa54d6c50153ff">ODP_PKTOUT_MODE_DIRECT</a></div><div class="ttdeci">@ ODP_PKTOUT_MODE_DIRECT</div><div class="ttdoc">Direct packet output on the interface.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__io__types_8h_source.html#l00110">api/spec/packet_io_types.h:110</a></div></div>
<div class="ttc" id="agroup__odp__packet__io_html_ggacf2c32e76d9d0eef9106b5fdd68cedc8a1e3d825b302ee6213937172a6b54b140"><div class="ttname"><a href="group__odp__packet__io.html#ggacf2c32e76d9d0eef9106b5fdd68cedc8a1e3d825b302ee6213937172a6b54b140">ODP_PKTIO_OP_MT_UNSAFE</a></div><div class="ttdeci">@ ODP_PKTIO_OP_MT_UNSAFE</div><div class="ttdoc">Not multithread safe operation.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__io__types_8h_source.html#l00168">api/spec/packet_io_types.h:166</a></div></div>
<div class="ttc" id="agroup__odp__packet__io_html_ggacf2c32e76d9d0eef9106b5fdd68cedc8af3637232af55eb954ba439b2d33120d3"><div class="ttname"><a href="group__odp__packet__io.html#ggacf2c32e76d9d0eef9106b5fdd68cedc8af3637232af55eb954ba439b2d33120d3">ODP_PKTIO_OP_MT</a></div><div class="ttdeci">@ ODP_PKTIO_OP_MT</div><div class="ttdoc">Multithread safe operation.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__io__types_8h_source.html#l00158">api/spec/packet_io_types.h:158</a></div></div>
<div class="ttc" id="agroup__odp__packet__io_html_ggaf5d539df6fc8af55d96357c784a54b8faa4f62db7acbe492a3b80f3f782a04dd5"><div class="ttname"><a href="group__odp__packet__io.html#ggaf5d539df6fc8af55d96357c784a54b8faa4f62db7acbe492a3b80f3f782a04dd5">ODP_PKTIN_MODE_SCHED</a></div><div class="ttdeci">@ ODP_PKTIN_MODE_SCHED</div><div class="ttdoc">Packet input through scheduler and scheduled event queues.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__io__types_8h_source.html#l00098">api/spec/packet_io_types.h:98</a></div></div>
<div class="ttc" id="agroup__odp__packet_html_ga0924634e5431e0ae31bb0cfd7bf8d262"><div class="ttname"><a href="group__odp__packet.html#ga0924634e5431e0ae31bb0cfd7bf8d262">odp_packet_from_event_multi</a></div><div class="ttdeci">void odp_packet_from_event_multi(odp_packet_t pkt[], const odp_event_t ev[], int num)</div><div class="ttdoc">Convert multiple packet events to packet handles.</div></div>
<div class="ttc" id="agroup__odp__packet_html_ga0f4d215e25b1091a6e1fc5e4794a7f7a"><div class="ttname"><a href="group__odp__packet.html#ga0f4d215e25b1091a6e1fc5e4794a7f7a">odp_packet_flow_hash</a></div><div class="ttdeci">uint32_t odp_packet_flow_hash(odp_packet_t pkt)</div><div class="ttdoc">Packet flow hash value.</div></div>
<div class="ttc" id="agroup__odp__packet_html_ga1c03b0fec815617168cf29a013442d58"><div class="ttname"><a href="group__odp__packet.html#ga1c03b0fec815617168cf29a013442d58">odp_packet_input_index</a></div><div class="ttdeci">int odp_packet_input_index(odp_packet_t pkt)</div><div class="ttdoc">Packet input interface index.</div></div>
<div class="ttc" id="agroup__odp__packet_html_ga433ba21e3c83c6d4d9831c9e732b63de"><div class="ttname"><a href="group__odp__packet.html#ga433ba21e3c83c6d4d9831c9e732b63de">odp_packet_data</a></div><div class="ttdeci">void * odp_packet_data(odp_packet_t pkt)</div><div class="ttdoc">Packet data pointer.</div></div>
<div class="ttc" id="agroup__odp__packet_html_ga7b17fb171e242b31d1089d349c9ba356"><div class="ttname"><a href="group__odp__packet.html#ga7b17fb171e242b31d1089d349c9ba356">odp_packet_has_flow_hash</a></div><div class="ttdeci">int odp_packet_has_flow_hash(odp_packet_t pkt)</div><div class="ttdoc">Check for packet flow hash.</div></div>
<div class="ttc" id="agroup__odp__packet_html_ga8605e7d4629a479f7b1a59da121c601c"><div class="ttname"><a href="group__odp__packet.html#ga8605e7d4629a479f7b1a59da121c601c">odp_packet_from_event</a></div><div class="ttdeci">odp_packet_t odp_packet_from_event(odp_event_t ev)</div><div class="ttdoc">Get packet handle from event.</div></div>
<div class="ttc" id="agroup__odp__packet_html_gad190c5b094a0406b9d86da03f10c15cb"><div class="ttname"><a href="group__odp__packet.html#gad190c5b094a0406b9d86da03f10c15cb">odp_packet_free_multi</a></div><div class="ttdeci">void odp_packet_free_multi(const odp_packet_t pkt[], int num)</div><div class="ttdoc">Free multiple packets.</div></div>
<div class="ttc" id="agroup__odp__packet_html_gga428cdbec9e7bc0bc19286f9564f9828ba5404cdbbe70c105fa88e1e0c146cce54"><div class="ttname"><a href="group__odp__packet.html#gga428cdbec9e7bc0bc19286f9564f9828ba5404cdbbe70c105fa88e1e0c146cce54">ODP_PROTO_LAYER_NONE</a></div><div class="ttdeci">@ ODP_PROTO_LAYER_NONE</div><div class="ttdoc">No layers.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__types_8h_source.html#l00236">api/spec/packet_types.h:236</a></div></div>
<div class="ttc" id="agroup__odp__pool_html_ga256909a276600c25ce11b52ae274632f"><div class="ttname"><a href="group__odp__pool.html#ga256909a276600c25ce11b52ae274632f">odp_pool_create</a></div><div class="ttdeci">odp_pool_t odp_pool_create(const char *name, const odp_pool_param_t *param)</div><div class="ttdoc">Create a pool.</div></div>
<div class="ttc" id="agroup__odp__pool_html_ga2c6f42e9611904eac84872bf8f913b75"><div class="ttname"><a href="group__odp__pool.html#ga2c6f42e9611904eac84872bf8f913b75">odp_pool_capability</a></div><div class="ttdeci">int odp_pool_capability(odp_pool_capability_t *capa)</div><div class="ttdoc">Query pool capabilities.</div></div>
<div class="ttc" id="agroup__odp__pool_html_ga3dd8bcfb920f81142e9fe27cfba24073"><div class="ttname"><a href="group__odp__pool.html#ga3dd8bcfb920f81142e9fe27cfba24073">odp_pool_param_init</a></div><div class="ttdeci">void odp_pool_param_init(odp_pool_param_t *param)</div><div class="ttdoc">Initialize pool params.</div></div>
<div class="ttc" id="agroup__odp__pool_html_ga6ad439aaef911d82b972c915850e6924"><div class="ttname"><a href="group__odp__pool.html#ga6ad439aaef911d82b972c915850e6924">odp_pool_destroy</a></div><div class="ttdeci">int odp_pool_destroy(odp_pool_t pool)</div><div class="ttdoc">Destroy a pool previously created by odp_pool_create()</div></div>
<div class="ttc" id="agroup__odp__pool_html_gafca03b58412260da754042a92f8a5e04"><div class="ttname"><a href="group__odp__pool.html#gafca03b58412260da754042a92f8a5e04">ODP_POOL_INVALID</a></div><div class="ttdeci">#define ODP_POOL_INVALID</div><div class="ttdoc">Invalid pool.</div></div>
<div class="ttc" id="agroup__odp__pool_html_ggac47bb33bcde80614b4b358578eaa3082a10dd6445d9d9a88a989de99edf0c9010"><div class="ttname"><a href="group__odp__pool.html#ggac47bb33bcde80614b4b358578eaa3082a10dd6445d9d9a88a989de99edf0c9010">ODP_POOL_TIMEOUT</a></div><div class="ttdeci">@ ODP_POOL_TIMEOUT</div><div class="ttdoc">Timeout pool.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2pool__types_8h_source.html#l00442">api/spec/pool_types.h:442</a></div></div>
<div class="ttc" id="agroup__odp__pool_html_ggac47bb33bcde80614b4b358578eaa3082aa02b3a4e37094bd277b3dfe371450acd"><div class="ttname"><a href="group__odp__pool.html#ggac47bb33bcde80614b4b358578eaa3082aa02b3a4e37094bd277b3dfe371450acd">ODP_POOL_PACKET</a></div><div class="ttdeci">@ ODP_POOL_PACKET</div><div class="ttdoc">Packet pool.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2pool__types_8h_source.html#l00436">api/spec/pool_types.h:436</a></div></div>
<div class="ttc" id="agroup__odp__queue_html_ga5c003a7027eb97f12b263d674be853ae"><div class="ttname"><a href="group__odp__queue.html#ga5c003a7027eb97f12b263d674be853ae">odp_queue_context_set</a></div><div class="ttdeci">int odp_queue_context_set(odp_queue_t queue, void *context, uint32_t len)</div><div class="ttdoc">Set queue context.</div></div>
<div class="ttc" id="agroup__odp__queue_html_ga6b3ef7c0d52f9dd31e534b9cf17eb218"><div class="ttname"><a href="group__odp__queue.html#ga6b3ef7c0d52f9dd31e534b9cf17eb218">odp_queue_enq_multi</a></div><div class="ttdeci">int odp_queue_enq_multi(odp_queue_t queue, const odp_event_t events[], int num)</div><div class="ttdoc">Enqueue multiple events to a queue.</div></div>
<div class="ttc" id="agroup__odp__queue_html_ga6fc2ea5eb86152210342f7377d1468e4"><div class="ttname"><a href="group__odp__queue.html#ga6fc2ea5eb86152210342f7377d1468e4">odp_queue_param_init</a></div><div class="ttdeci">void odp_queue_param_init(odp_queue_param_t *param)</div><div class="ttdoc">Initialize queue params.</div></div>
<div class="ttc" id="agroup__odp__queue_html_ga771259a58e71e065e0d00d2fc431b014"><div class="ttname"><a href="group__odp__queue.html#ga771259a58e71e065e0d00d2fc431b014">ODP_QUEUE_INVALID</a></div><div class="ttdeci">#define ODP_QUEUE_INVALID</div><div class="ttdoc">Invalid queue.</div></div>
<div class="ttc" id="agroup__odp__queue_html_ga96ab88617101283b30ba784c9c9e7367"><div class="ttname"><a href="group__odp__queue.html#ga96ab88617101283b30ba784c9c9e7367">odp_queue_context</a></div><div class="ttdeci">void * odp_queue_context(odp_queue_t queue)</div><div class="ttdoc">Get queue context.</div></div>
<div class="ttc" id="agroup__odp__queue_html_ga985c2e5219f65c270b50578c16ec9d61"><div class="ttname"><a href="group__odp__queue.html#ga985c2e5219f65c270b50578c16ec9d61">odp_queue_enq</a></div><div class="ttdeci">int odp_queue_enq(odp_queue_t queue, odp_event_t ev)</div><div class="ttdoc">Enqueue an event to a queue.</div></div>
<div class="ttc" id="agroup__odp__queue_html_gab985be8c3947fef3da257e16948bf0f0"><div class="ttname"><a href="group__odp__queue.html#gab985be8c3947fef3da257e16948bf0f0">odp_queue_create</a></div><div class="ttdeci">odp_queue_t odp_queue_create(const char *name, const odp_queue_param_t *param)</div><div class="ttdoc">Queue create.</div></div>
<div class="ttc" id="agroup__odp__queue_html_gad1e1d2709808385025dd5f005f7690c4"><div class="ttname"><a href="group__odp__queue.html#gad1e1d2709808385025dd5f005f7690c4">odp_queue_destroy</a></div><div class="ttdeci">int odp_queue_destroy(odp_queue_t queue)</div><div class="ttdoc">Destroy ODP queue.</div></div>
<div class="ttc" id="agroup__odp__queue_html_gga89a3439d3f3be48cac1767cba721eddaa4f49ad2143a9ba8a5914573d2794e962"><div class="ttname"><a href="group__odp__queue.html#gga89a3439d3f3be48cac1767cba721eddaa4f49ad2143a9ba8a5914573d2794e962">ODP_QUEUE_TYPE_SCHED</a></div><div class="ttdeci">@ ODP_QUEUE_TYPE_SCHED</div><div class="ttdoc">Scheduled queue.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2queue__types_8h_source.html#l00057">api/spec/queue_types.h:57</a></div></div>
<div class="ttc" id="agroup__odp__scheduler_html_ga05c15f8076326b98fe2fc534dcc6b319"><div class="ttname"><a href="group__odp__scheduler.html#ga05c15f8076326b98fe2fc534dcc6b319">odp_schedule_sync_t</a></div><div class="ttdeci">int odp_schedule_sync_t</div><div class="ttdoc">Scheduler synchronization method.</div><div class="ttdef"><b>Definition:</b> <a href="api_2abi-default_2schedule__types_8h_source.html#l00029">api/abi-default/schedule_types.h:29</a></div></div>
<div class="ttc" id="agroup__odp__scheduler_html_ga2ba135fc660e1c050aa25ec6744ec584"><div class="ttname"><a href="group__odp__scheduler.html#ga2ba135fc660e1c050aa25ec6744ec584">ODP_SCHED_SYNC_PARALLEL</a></div><div class="ttdeci">#define ODP_SCHED_SYNC_PARALLEL</div><div class="ttdoc">Parallel scheduled queues.</div></div>
<div class="ttc" id="agroup__odp__scheduler_html_ga34f1bae924466cc2b57563f8fe2dc0d1"><div class="ttname"><a href="group__odp__scheduler.html#ga34f1bae924466cc2b57563f8fe2dc0d1">odp_schedule_multi</a></div><div class="ttdeci">int odp_schedule_multi(odp_queue_t *from, uint64_t wait, odp_event_t events[], int num)</div><div class="ttdoc">Schedule multiple events.</div></div>
<div class="ttc" id="agroup__odp__scheduler_html_ga3f3af33a2a42b3a9d6e5e3f74bfcb03d"><div class="ttname"><a href="group__odp__scheduler.html#ga3f3af33a2a42b3a9d6e5e3f74bfcb03d">odp_schedule_config_init</a></div><div class="ttdeci">void odp_schedule_config_init(odp_schedule_config_t *config)</div><div class="ttdoc">Initialize schedule configuration options.</div></div>
<div class="ttc" id="agroup__odp__scheduler_html_ga4b7efc5cfc27ef416312f5adb8bdc392"><div class="ttname"><a href="group__odp__scheduler.html#ga4b7efc5cfc27ef416312f5adb8bdc392">ODP_SCHED_SYNC_ATOMIC</a></div><div class="ttdeci">#define ODP_SCHED_SYNC_ATOMIC</div><div class="ttdoc">Atomic queue synchronization.</div></div>
<div class="ttc" id="agroup__odp__scheduler_html_ga4df3696ebf4528ecc6e69ae3fff040fd"><div class="ttname"><a href="group__odp__scheduler.html#ga4df3696ebf4528ecc6e69ae3fff040fd">ODP_SCHED_SYNC_ORDERED</a></div><div class="ttdeci">#define ODP_SCHED_SYNC_ORDERED</div><div class="ttdoc">Ordered queue synchronization.</div></div>
<div class="ttc" id="agroup__odp__scheduler_html_ga9116776b8262a74af7dac7ef46fc7ace"><div class="ttname"><a href="group__odp__scheduler.html#ga9116776b8262a74af7dac7ef46fc7ace">ODP_SCHED_NO_WAIT</a></div><div class="ttdeci">#define ODP_SCHED_NO_WAIT</div><div class="ttdoc">Do not wait.</div></div>
<div class="ttc" id="agroup__odp__scheduler_html_ga94034a7f591f3f549099aebb098f7e05"><div class="ttname"><a href="group__odp__scheduler.html#ga94034a7f591f3f549099aebb098f7e05">odp_schedule_default_prio</a></div><div class="ttdeci">int odp_schedule_default_prio(void)</div><div class="ttdoc">Default scheduling priority level.</div></div>
<div class="ttc" id="agroup__odp__scheduler_html_ga9868ccb25b6631ef29cc921ee2e522b0"><div class="ttname"><a href="group__odp__scheduler.html#ga9868ccb25b6631ef29cc921ee2e522b0">odp_schedule_pause</a></div><div class="ttdeci">void odp_schedule_pause(void)</div><div class="ttdoc">Pause scheduling.</div></div>
<div class="ttc" id="agroup__odp__scheduler_html_gaa1b51ebd46adeb6aa7805fccb00144df"><div class="ttname"><a href="group__odp__scheduler.html#gaa1b51ebd46adeb6aa7805fccb00144df">odp_schedule_config</a></div><div class="ttdeci">int odp_schedule_config(const odp_schedule_config_t *config)</div><div class="ttdoc">Global schedule configuration.</div></div>
<div class="ttc" id="agroup__odp__scheduler_html_gab0a0d2673cc7371d5c5d782d13a485b8"><div class="ttname"><a href="group__odp__scheduler.html#gab0a0d2673cc7371d5c5d782d13a485b8">odp_schedule_wait_time</a></div><div class="ttdeci">uint64_t odp_schedule_wait_time(uint64_t ns)</div><div class="ttdoc">Schedule wait time.</div></div>
<div class="ttc" id="agroup__odp__scheduler_html_gae4ca1012ebb16ff8b9752b958dc45ce6"><div class="ttname"><a href="group__odp__scheduler.html#gae4ca1012ebb16ff8b9752b958dc45ce6">odp_schedule</a></div><div class="ttdeci">odp_event_t odp_schedule(odp_queue_t *from, uint64_t wait)</div><div class="ttdoc">Schedule an event.</div></div>
<div class="ttc" id="agroup__odp__scheduler_html_gaf463b15ad978dac0bf77c0110232b504"><div class="ttname"><a href="group__odp__scheduler.html#gaf463b15ad978dac0bf77c0110232b504">ODP_SCHED_GROUP_ALL</a></div><div class="ttdeci">#define ODP_SCHED_GROUP_ALL</div><div class="ttdoc">Group of all threads.</div></div>
<div class="ttc" id="agroup__odp__shared__memory_html_ga0b02991b512acc119206b44c95a86ed6"><div class="ttname"><a href="group__odp__shared__memory.html#ga0b02991b512acc119206b44c95a86ed6">odp_shm_free</a></div><div class="ttdeci">int odp_shm_free(odp_shm_t shm)</div><div class="ttdoc">Free a contiguous block of shared memory.</div></div>
<div class="ttc" id="agroup__odp__shared__memory_html_ga6e4289975efc279bb9f31880613a9d60"><div class="ttname"><a href="group__odp__shared__memory.html#ga6e4289975efc279bb9f31880613a9d60">ODP_SHM_INVALID</a></div><div class="ttdeci">#define ODP_SHM_INVALID</div><div class="ttdoc">Invalid shared memory block.</div></div>
<div class="ttc" id="agroup__odp__shared__memory_html_gac94c4232f7cd64039bbaef601ff2c05e"><div class="ttname"><a href="group__odp__shared__memory.html#gac94c4232f7cd64039bbaef601ff2c05e">odp_shm_addr</a></div><div class="ttdeci">void * odp_shm_addr(odp_shm_t shm)</div><div class="ttdoc">Shared memory block address.</div></div>
<div class="ttc" id="agroup__odp__shared__memory_html_gacc441b0e100ec1c54e21f1745939a2d8"><div class="ttname"><a href="group__odp__shared__memory.html#gacc441b0e100ec1c54e21f1745939a2d8">odp_shm_reserve</a></div><div class="ttdeci">odp_shm_t odp_shm_reserve(const char *name, uint64_t size, uint64_t align, uint32_t flags)</div><div class="ttdoc">Reserve a contiguous block of shared memory.</div></div>
<div class="ttc" id="agroup__odp__system_html_gab0a1cd5e503d5ec067e8d17d228b937d"><div class="ttname"><a href="group__odp__system.html#gab0a1cd5e503d5ec067e8d17d228b937d">odp_sys_info_print</a></div><div class="ttdeci">void odp_sys_info_print(void)</div><div class="ttdoc">Print system info.</div></div>
<div class="ttc" id="agroup__odp__thread_html_ggafc7a7c180de9811d71b7cb050713bf53a2182066d714db5f2a4e994ad92f25b2a"><div class="ttname"><a href="group__odp__thread.html#ggafc7a7c180de9811d71b7cb050713bf53a2182066d714db5f2a4e994ad92f25b2a">ODP_THREAD_WORKER</a></div><div class="ttdeci">@ ODP_THREAD_WORKER</div><div class="ttdoc">Worker thread.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2thread__types_8h_source.html#l00042">api/spec/thread_types.h:42</a></div></div>
<div class="ttc" id="agroup__odp__thread_html_ggafc7a7c180de9811d71b7cb050713bf53a9aab3fdb10eb2000a864bff81f23c00a"><div class="ttname"><a href="group__odp__thread.html#ggafc7a7c180de9811d71b7cb050713bf53a9aab3fdb10eb2000a864bff81f23c00a">ODP_THREAD_CONTROL</a></div><div class="ttdeci">@ ODP_THREAD_CONTROL</div><div class="ttdoc">Control thread.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2thread__types_8h_source.html#l00054">api/spec/thread_types.h:53</a></div></div>
<div class="ttc" id="agroup__odp__time_html_ga49ab6f8fe6c0aa5b820717fd91f16ab5"><div class="ttname"><a href="group__odp__time.html#ga49ab6f8fe6c0aa5b820717fd91f16ab5">ODP_TIME_SEC_IN_NS</a></div><div class="ttdeci">#define ODP_TIME_SEC_IN_NS</div><div class="ttdoc">A second in nanoseconds.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2time__types_8h_source.html#l00031">api/spec/time_types.h:31</a></div></div>
<div class="ttc" id="agroup__odp__time_html_ga5d0b24d7dae739bac7585ed515bd60a8"><div class="ttname"><a href="group__odp__time.html#ga5d0b24d7dae739bac7585ed515bd60a8">odp_time_local</a></div><div class="ttdeci">odp_time_t odp_time_local(void)</div><div class="ttdoc">Current local time.</div></div>
<div class="ttc" id="agroup__odp__time_html_ga67ec3be80e3d1b2b1294ae551f4def86"><div class="ttname"><a href="group__odp__time.html#ga67ec3be80e3d1b2b1294ae551f4def86">ODP_TIME_NULL</a></div><div class="ttdeci">#define ODP_TIME_NULL</div><div class="ttdoc">Zero time stamp.</div></div>
<div class="ttc" id="agroup__odp__time_html_gada453827b812a8fae651e9d93308e959"><div class="ttname"><a href="group__odp__time.html#gada453827b812a8fae651e9d93308e959">odp_time_diff_ns</a></div><div class="ttdeci">uint64_t odp_time_diff_ns(odp_time_t t2, odp_time_t t1)</div><div class="ttdoc">Time difference in nanoseconds.</div></div>
<div class="ttc" id="agroup__odp__timer_html_ga0d106b4ca2047a5a5dda17ce6b6bc0b1"><div class="ttname"><a href="group__odp__timer.html#ga0d106b4ca2047a5a5dda17ce6b6bc0b1">odp_timer_pool_start_multi</a></div><div class="ttdeci">int odp_timer_pool_start_multi(odp_timer_pool_t timer_pool[], int num)</div><div class="ttdoc">Start timer pools.</div></div>
<div class="ttc" id="agroup__odp__timer_html_ga1d1006d0da428f8afd5527b673f777a9"><div class="ttname"><a href="group__odp__timer.html#ga1d1006d0da428f8afd5527b673f777a9">odp_timeout_alloc</a></div><div class="ttdeci">odp_timeout_t odp_timeout_alloc(odp_pool_t pool)</div><div class="ttdoc">Timeout alloc.</div></div>
<div class="ttc" id="agroup__odp__timer_html_ga373923bac02ccf5db59a1fe19c2b3220"><div class="ttname"><a href="group__odp__timer.html#ga373923bac02ccf5db59a1fe19c2b3220">odp_timer_free</a></div><div class="ttdeci">int odp_timer_free(odp_timer_t timer)</div><div class="ttdoc">Free a timer.</div></div>
<div class="ttc" id="agroup__odp__timer_html_ga447bdef8a57404cc1d594d31c5aa153f"><div class="ttname"><a href="group__odp__timer.html#ga447bdef8a57404cc1d594d31c5aa153f">odp_timer_restart</a></div><div class="ttdeci">int odp_timer_restart(odp_timer_t timer, const odp_timer_start_t *start_param)</div><div class="ttdoc">Restart a timer.</div></div>
<div class="ttc" id="agroup__odp__timer_html_ga4ad1abeaffbe94d9bbc66a0d8bab76c3"><div class="ttname"><a href="group__odp__timer.html#ga4ad1abeaffbe94d9bbc66a0d8bab76c3">ODP_TIMER_POOL_INVALID</a></div><div class="ttdeci">#define ODP_TIMER_POOL_INVALID</div><div class="ttdoc">Invalid timer pool handle.</div></div>
<div class="ttc" id="agroup__odp__timer_html_ga5119deda378994a468934aef41993965"><div class="ttname"><a href="group__odp__timer.html#ga5119deda378994a468934aef41993965">odp_timer_pool_create</a></div><div class="ttdeci">odp_timer_pool_t odp_timer_pool_create(const char *name, const odp_timer_pool_param_t *params)</div><div class="ttdoc">Create a timer pool.</div></div>
<div class="ttc" id="agroup__odp__timer_html_ga7064c7d4e9f014ffd322222178d208b3"><div class="ttname"><a href="group__odp__timer.html#ga7064c7d4e9f014ffd322222178d208b3">odp_timer_capability</a></div><div class="ttdeci">int odp_timer_capability(odp_timer_clk_src_t clk_src, odp_timer_capability_t *capa)</div><div class="ttdoc">Query timer capabilities per clock source.</div></div>
<div class="ttc" id="agroup__odp__timer_html_ga7fb23a28aa1db3c919aa49c90b2316fb"><div class="ttname"><a href="group__odp__timer.html#ga7fb23a28aa1db3c919aa49c90b2316fb">odp_timer_ns_to_tick</a></div><div class="ttdeci">uint64_t odp_timer_ns_to_tick(odp_timer_pool_t timer_pool, uint64_t ns)</div><div class="ttdoc">Convert nanoseconds to timer ticks.</div></div>
<div class="ttc" id="agroup__odp__timer_html_gaa31f657dcc4d9e31e379b4f07ff9f83a"><div class="ttname"><a href="group__odp__timer.html#gaa31f657dcc4d9e31e379b4f07ff9f83a">odp_timer_start</a></div><div class="ttdeci">int odp_timer_start(odp_timer_t timer, const odp_timer_start_t *start_param)</div><div class="ttdoc">Start a timer.</div></div>
<div class="ttc" id="agroup__odp__timer_html_gabd0fe407d8c3d7370b2bff479ae1d78c"><div class="ttname"><a href="group__odp__timer.html#gabd0fe407d8c3d7370b2bff479ae1d78c">odp_timer_retval_t</a></div><div class="ttdeci">odp_timer_retval_t</div><div class="ttdoc">Return values for timer start, restart and cancel calls.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2timer__types_8h_source.html#l00515">api/spec/timer_types.h:515</a></div></div>
<div class="ttc" id="agroup__odp__timer_html_gac65e47ba9fdfd9ea73cb799e8e957d21"><div class="ttname"><a href="group__odp__timer.html#gac65e47ba9fdfd9ea73cb799e8e957d21">odp_timeout_to_event</a></div><div class="ttdeci">odp_event_t odp_timeout_to_event(odp_timeout_t tmo)</div><div class="ttdoc">Convert timeout handle to event handle.</div></div>
<div class="ttc" id="agroup__odp__timer_html_gac72c1c2f923ee0d53b0a7d4109da34a5"><div class="ttname"><a href="group__odp__timer.html#gac72c1c2f923ee0d53b0a7d4109da34a5">ODP_TIMEOUT_INVALID</a></div><div class="ttdeci">#define ODP_TIMEOUT_INVALID</div><div class="ttdoc">Invalid timeout handle.</div></div>
<div class="ttc" id="agroup__odp__timer_html_gad3e1c9b326fe7ec85b635d6f02998a86"><div class="ttname"><a href="group__odp__timer.html#gad3e1c9b326fe7ec85b635d6f02998a86">odp_timer_alloc</a></div><div class="ttdeci">odp_timer_t odp_timer_alloc(odp_timer_pool_t timer_pool, odp_queue_t queue, const void *user_ptr)</div><div class="ttdoc">Allocate a timer.</div></div>
<div class="ttc" id="agroup__odp__timer_html_gadb0936032a6640db772dd99cf4eb9159"><div class="ttname"><a href="group__odp__timer.html#gadb0936032a6640db772dd99cf4eb9159">ODP_CLOCK_DEFAULT</a></div><div class="ttdeci">#define ODP_CLOCK_DEFAULT</div><div class="ttdoc">The default clock source.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2timer__types_8h_source.html#l00257">api/spec/timer_types.h:257</a></div></div>
<div class="ttc" id="agroup__odp__timer_html_gaea51c621bb26b7a8bdab46d8a08f247a"><div class="ttname"><a href="group__odp__timer.html#gaea51c621bb26b7a8bdab46d8a08f247a">ODP_TIMER_INVALID</a></div><div class="ttdeci">#define ODP_TIMER_INVALID</div><div class="ttdoc">Invalid timer handle.</div></div>
<div class="ttc" id="agroup__odp__timer_html_gaf680f0ddeb5270d8a8947e2445b22dff"><div class="ttname"><a href="group__odp__timer.html#gaf680f0ddeb5270d8a8947e2445b22dff">odp_timer_pool_param_init</a></div><div class="ttdeci">void odp_timer_pool_param_init(odp_timer_pool_param_t *param)</div><div class="ttdoc">Initialize timer pool parameters.</div></div>
<div class="ttc" id="agroup__odp__timer_html_gafb56c5aff06be798de32d878266febc0"><div class="ttname"><a href="group__odp__timer.html#gafb56c5aff06be798de32d878266febc0">odp_timer_pool_destroy</a></div><div class="ttdeci">void odp_timer_pool_destroy(odp_timer_pool_t timer_pool)</div><div class="ttdoc">Destroy a timer pool.</div></div>
<div class="ttc" id="agroup__odp__timer_html_ggabd0fe407d8c3d7370b2bff479ae1d78ca6cf6bb923bdf13cede58a481443be93c"><div class="ttname"><a href="group__odp__timer.html#ggabd0fe407d8c3d7370b2bff479ae1d78ca6cf6bb923bdf13cede58a481443be93c">ODP_TIMER_SUCCESS</a></div><div class="ttdeci">@ ODP_TIMER_SUCCESS</div><div class="ttdoc">Timer operation succeeded.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2timer__types_8h_source.html#l00521">api/spec/timer_types.h:521</a></div></div>
<div class="ttc" id="agroup__odp__timer_html_ggabd0fe407d8c3d7370b2bff479ae1d78cafcabd0f01c3d19d8c9063ccd861edd6e"><div class="ttname"><a href="group__odp__timer.html#ggabd0fe407d8c3d7370b2bff479ae1d78cafcabd0f01c3d19d8c9063ccd861edd6e">ODP_TIMER_FAIL</a></div><div class="ttdeci">@ ODP_TIMER_FAIL</div><div class="ttdoc">Timer operation failed.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2timer__types_8h_source.html#l00548">api/spec/timer_types.h:546</a></div></div>
<div class="ttc" id="agroup__odp__timer_html_ggafe9103bdca21be1c7f14c83fedbf9b29a46ef02de17dc80bca0684f0f8087dd57"><div class="ttname"><a href="group__odp__timer.html#ggafe9103bdca21be1c7f14c83fedbf9b29a46ef02de17dc80bca0684f0f8087dd57">ODP_TIMER_TICK_REL</a></div><div class="ttdeci">@ ODP_TIMER_TICK_REL</div><div class="ttdoc">Relative ticks.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2timer__types_8h_source.html#l00407">api/spec/timer_types.h:407</a></div></div>
<div class="ttc" id="aodp__api_8h_html"><div class="ttname"><a href="odp__api_8h.html">odp_api.h</a></div><div class="ttdoc">The OpenDataPlane API.</div></div>
<div class="ttc" id="astruct__odp__abi__event__t_html"><div class="ttname"><a href="struct__odp__abi__event__t.html">_odp_abi_event_t</a></div><div class="ttdef"><b>Definition:</b> <a href="api_2abi-default_2event__types_8h_source.html#l00016">api/abi-default/event_types.h:16</a></div></div>
<div class="ttc" id="astruct__odp__abi__packet__t_html"><div class="ttname"><a href="struct__odp__abi__packet__t.html">_odp_abi_packet_t</a></div><div class="ttdef"><b>Definition:</b> <a href="api_2abi-default_2packet__types_8h_source.html#l00016">api/abi-default/packet_types.h:16</a></div></div>
<div class="ttc" id="astruct__odp__abi__pktio__t_html"><div class="ttname"><a href="struct__odp__abi__pktio__t.html">_odp_abi_pktio_t</a></div><div class="ttdef"><b>Definition:</b> <a href="api_2abi-default_2packet__io__types_8h_source.html#l00022">api/abi-default/packet_io_types.h:22</a></div></div>
<div class="ttc" id="astruct__odp__abi__pool__t_html"><div class="ttname"><a href="struct__odp__abi__pool__t.html">_odp_abi_pool_t</a></div><div class="ttdef"><b>Definition:</b> <a href="api_2abi-default_2pool__types_8h_source.html#l00014">api/abi-default/pool_types.h:14</a></div></div>
<div class="ttc" id="astruct__odp__abi__queue__t_html"><div class="ttname"><a href="struct__odp__abi__queue__t.html">_odp_abi_queue_t</a></div><div class="ttdef"><b>Definition:</b> <a href="api_2abi-default_2queue__types_8h_source.html#l00014">api/abi-default/queue_types.h:14</a></div></div>
<div class="ttc" id="astruct__odp__abi__shm__t_html"><div class="ttname"><a href="struct__odp__abi__shm__t.html">_odp_abi_shm_t</a></div><div class="ttdef"><b>Definition:</b> <a href="api_2abi-default_2shared__memory_8h_source.html#l00013">api/abi-default/shared_memory.h:13</a></div></div>
<div class="ttc" id="astruct__odp__abi__timeout__t_html"><div class="ttname"><a href="struct__odp__abi__timeout__t.html">_odp_abi_timeout_t</a></div><div class="ttdef"><b>Definition:</b> <a href="api_2abi-default_2timer__types_8h_source.html#l00022">api/abi-default/timer_types.h:22</a></div></div>
<div class="ttc" id="astruct__odp__abi__timer__pool__t_html"><div class="ttname"><a href="struct__odp__abi__timer__pool__t.html">_odp_abi_timer_pool_t</a></div><div class="ttdef"><b>Definition:</b> <a href="api_2abi-default_2timer__types_8h_source.html#l00025">api/abi-default/timer_types.h:25</a></div></div>
<div class="ttc" id="astruct__odp__abi__timer__t_html"><div class="ttname"><a href="struct__odp__abi__timer__t.html">_odp_abi_timer_t</a></div><div class="ttdef"><b>Definition:</b> <a href="api_2abi-default_2timer__types_8h_source.html#l00019">api/abi-default/timer_types.h:19</a></div></div>
<div class="ttc" id="astructodp__barrier__s_html"><div class="ttname"><a href="structodp__barrier__s.html">odp_barrier_s</a></div><div class="ttdef"><b>Definition:</b> <a href="api_2abi-default_2barrier_8h_source.html#l00025">api/abi-default/barrier.h:25</a></div></div>
<div class="ttc" id="astructodp__cpumask__s_html"><div class="ttname"><a href="structodp__cpumask__s.html">odp_cpumask_s</a></div><div class="ttdef"><b>Definition:</b> <a href="api_2abi-default_2cpumask_8h_source.html#l00038">api/abi-default/cpumask.h:38</a></div></div>
<div class="ttc" id="astructodp__init__t_html"><div class="ttname"><a href="structodp__init__t.html">odp_init_t</a></div><div class="ttdoc">Global initialization parameters.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2init_8h_source.html#l00161">api/spec/init.h:161</a></div></div>
<div class="ttc" id="astructodp__init__t_html_a7d368c740146170ebeb1651ce049919e"><div class="ttname"><a href="structodp__init__t.html#a7d368c740146170ebeb1651ce049919e">odp_init_t::mem_model</a></div><div class="ttdeci">odp_mem_model_t mem_model</div><div class="ttdoc">Application memory model.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2init_8h_source.html#l00218">api/spec/init.h:218</a></div></div>
<div class="ttc" id="astructodp__init__t_html_aa359196a1801c0ca15a88af32de71d46"><div class="ttname"><a href="structodp__init__t.html#aa359196a1801c0ca15a88af32de71d46">odp_init_t::not_used</a></div><div class="ttdeci">odp_feature_t not_used</div><div class="ttdoc">Unused features.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2init_8h_source.html#l00212">api/spec/init.h:212</a></div></div>
<div class="ttc" id="astructodp__pktin__queue__param__t_html"><div class="ttname"><a href="structodp__pktin__queue__param__t.html">odp_pktin_queue_param_t</a></div><div class="ttdoc">Packet input queue parameters.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__io__types_8h_source.html#l00230">api/spec/packet_io_types.h:230</a></div></div>
<div class="ttc" id="astructodp__pktin__queue__param__t_html_a03e94f43a2e4379d7a16adb964a55ecd"><div class="ttname"><a href="structodp__pktin__queue__param__t.html#a03e94f43a2e4379d7a16adb964a55ecd">odp_pktin_queue_param_t::num_queues</a></div><div class="ttdeci">uint32_t num_queues</div><div class="ttdoc">Number of input queues to be created.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__io__types_8h_source.html#l00270">api/spec/packet_io_types.h:270</a></div></div>
<div class="ttc" id="astructodp__pktin__queue__param__t_html_a5a07d5e93f26a523103360c0bea4a304"><div class="ttname"><a href="structodp__pktin__queue__param__t.html#a5a07d5e93f26a523103360c0bea4a304">odp_pktin_queue_param_t::queue_param</a></div><div class="ttdeci">odp_queue_param_t queue_param</div><div class="ttdoc">Queue parameters.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__io__types_8h_source.html#l00291">api/spec/packet_io_types.h:291</a></div></div>
<div class="ttc" id="astructodp__pktin__queue__param__t_html_a901146fbd15779b5665d3b75f3488e91"><div class="ttname"><a href="structodp__pktin__queue__param__t.html#a901146fbd15779b5665d3b75f3488e91">odp_pktin_queue_param_t::hash_proto</a></div><div class="ttdeci">odp_pktin_hash_proto_t hash_proto</div><div class="ttdoc">Protocol field selection for hashing.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__io__types_8h_source.html#l00261">api/spec/packet_io_types.h:261</a></div></div>
<div class="ttc" id="astructodp__pktin__queue__param__t_html_aa90bfc914603a90f7b1f7e7f0de07418"><div class="ttname"><a href="structodp__pktin__queue__param__t.html#aa90bfc914603a90f7b1f7e7f0de07418">odp_pktin_queue_param_t::hash_enable</a></div><div class="ttdeci">odp_bool_t hash_enable</div><div class="ttdoc">Enable flow hashing.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__io__types_8h_source.html#l00255">api/spec/packet_io_types.h:255</a></div></div>
<div class="ttc" id="astructodp__pktio__capability__t_html"><div class="ttname"><a href="structodp__pktio__capability__t.html">odp_pktio_capability_t</a></div><div class="ttdoc">Packet IO capabilities.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__io__types_8h_source.html#l01025">api/spec/packet_io_types.h:1025</a></div></div>
<div class="ttc" id="astructodp__pktio__capability__t_html_a41331b30786ec8c9a4861dfe5b220b61"><div class="ttname"><a href="structodp__pktio__capability__t.html#a41331b30786ec8c9a4861dfe5b220b61">odp_pktio_capability_t::max_input_queues</a></div><div class="ttdeci">uint32_t max_input_queues</div><div class="ttdoc">Maximum number of input queues.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__io__types_8h_source.html#l01029">api/spec/packet_io_types.h:1029</a></div></div>
<div class="ttc" id="astructodp__pktio__capability__t_html_a853625a680b37aeb0839c63ba04c632c"><div class="ttname"><a href="structodp__pktio__capability__t.html#a853625a680b37aeb0839c63ba04c632c">odp_pktio_capability_t::max_output_queues</a></div><div class="ttdeci">uint32_t max_output_queues</div><div class="ttdoc">Maximum number of output queues.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__io__types_8h_source.html#l01044">api/spec/packet_io_types.h:1044</a></div></div>
<div class="ttc" id="astructodp__pktio__config__t_html"><div class="ttname"><a href="structodp__pktio__config__t.html">odp_pktio_config_t</a></div><div class="ttdoc">Packet IO configuration options.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__io__types_8h_source.html#l00594">api/spec/packet_io_types.h:594</a></div></div>
<div class="ttc" id="astructodp__pktio__config__t_html_ab11707ba4258066a50f0e029fcc641f5"><div class="ttname"><a href="structodp__pktio__config__t.html#ab11707ba4258066a50f0e029fcc641f5">odp_pktio_config_t::parser</a></div><div class="ttdeci">odp_pktio_parser_config_t parser</div><div class="ttdoc">Packet input parser configuration.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__io__types_8h_source.html#l00606">api/spec/packet_io_types.h:606</a></div></div>
<div class="ttc" id="astructodp__pktio__param__t_html"><div class="ttname"><a href="structodp__pktio__param__t.html">odp_pktio_param_t</a></div><div class="ttdoc">Packet IO parameters.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__io__types_8h_source.html#l00353">api/spec/packet_io_types.h:353</a></div></div>
<div class="ttc" id="astructodp__pktio__param__t_html_a819cf5e2ef7df43a729cad159c022f4d"><div class="ttname"><a href="structodp__pktio__param__t.html#a819cf5e2ef7df43a729cad159c022f4d">odp_pktio_param_t::in_mode</a></div><div class="ttdeci">odp_pktin_mode_t in_mode</div><div class="ttdoc">Packet input mode.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__io__types_8h_source.html#l00357">api/spec/packet_io_types.h:357</a></div></div>
<div class="ttc" id="astructodp__pktio__param__t_html_afc226fd3904618950a0d1154ffa2fd8c"><div class="ttname"><a href="structodp__pktio__param__t.html#afc226fd3904618950a0d1154ffa2fd8c">odp_pktio_param_t::out_mode</a></div><div class="ttdeci">odp_pktout_mode_t out_mode</div><div class="ttdoc">Packet output mode.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__io__types_8h_source.html#l00362">api/spec/packet_io_types.h:362</a></div></div>
<div class="ttc" id="astructodp__pktio__parser__config__t_html_aff1f0d93e1f3cc93006aa613287378a2"><div class="ttname"><a href="structodp__pktio__parser__config__t.html#aff1f0d93e1f3cc93006aa613287378a2">odp_pktio_parser_config_t::layer</a></div><div class="ttdeci">odp_proto_layer_t layer</div><div class="ttdoc">Protocol parsing level in packet input.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__io__types_8h_source.html#l00570">api/spec/packet_io_types.h:570</a></div></div>
<div class="ttc" id="astructodp__pktout__queue__param__t_html"><div class="ttname"><a href="structodp__pktout__queue__param__t.html">odp_pktout_queue_param_t</a></div><div class="ttdoc">Packet output queue parameters.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__io__types_8h_source.html#l00323">api/spec/packet_io_types.h:323</a></div></div>
<div class="ttc" id="astructodp__pktout__queue__param__t_html_a066fd0a2de0efca0056cd1529d78b06e"><div class="ttname"><a href="structodp__pktout__queue__param__t.html#a066fd0a2de0efca0056cd1529d78b06e">odp_pktout_queue_param_t::op_mode</a></div><div class="ttdeci">odp_pktio_op_mode_t op_mode</div><div class="ttdoc">Operation mode.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__io__types_8h_source.html#l00329">api/spec/packet_io_types.h:329</a></div></div>
<div class="ttc" id="astructodp__pktout__queue__param__t_html_acd16e77991869797adb3da1bd41a1d0c"><div class="ttname"><a href="structodp__pktout__queue__param__t.html#acd16e77991869797adb3da1bd41a1d0c">odp_pktout_queue_param_t::num_queues</a></div><div class="ttdeci">uint32_t num_queues</div><div class="ttdoc">Number of output queues to be created.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__io__types_8h_source.html#l00333">api/spec/packet_io_types.h:333</a></div></div>
<div class="ttc" id="astructodp__pktout__queue__s_html"><div class="ttname"><a href="structodp__pktout__queue__s.html">odp_pktout_queue_s</a></div><div class="ttdef"><b>Definition:</b> <a href="api_2abi-default_2packet__io__types_8h_source.html#l00063">api/abi-default/packet_io_types.h:63</a></div></div>
<div class="ttc" id="astructodp__pktout__queue__s_html_ac54f5c2d64c17fbc782b2f7df600f9fe"><div class="ttname"><a href="structodp__pktout__queue__s.html#ac54f5c2d64c17fbc782b2f7df600f9fe">odp_pktout_queue_s::pktio</a></div><div class="ttdeci">odp_pktio_t pktio</div><div class="ttdef"><b>Definition:</b> <a href="api_2abi-default_2packet__io__types_8h_source.html#l00064">api/abi-default/packet_io_types.h:64</a></div></div>
<div class="ttc" id="astructodp__pool__capability__t_html"><div class="ttname"><a href="structodp__pool__capability__t.html">odp_pool_capability_t</a></div><div class="ttdoc">Pool capabilities.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2pool__types_8h_source.html#l00184">api/spec/pool_types.h:184</a></div></div>
<div class="ttc" id="astructodp__pool__capability__t_html_a11c2f0606b3bb00a72220d2352f43806"><div class="ttname"><a href="structodp__pool__capability__t.html#a11c2f0606b3bb00a72220d2352f43806">odp_pool_capability_t::pkt</a></div><div class="ttdeci">struct odp_pool_capability_t::@133 pkt</div><div class="ttdoc">Packet pool capabilities</div></div>
<div class="ttc" id="astructodp__pool__capability__t_html_a2b468c5617515bbd5d50a57a7d65e1e0"><div class="ttname"><a href="structodp__pool__capability__t.html#a2b468c5617515bbd5d50a57a7d65e1e0">odp_pool_capability_t::max_num</a></div><div class="ttdeci">uint32_t max_num</div><div class="ttdoc">Maximum number of buffers of any size.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2pool__types_8h_source.html#l00206">api/spec/pool_types.h:206</a></div></div>
<div class="ttc" id="astructodp__pool__capability__t_html_affefe3b2c3a473c37d08fcd2929e84c2"><div class="ttname"><a href="structodp__pool__capability__t.html#affefe3b2c3a473c37d08fcd2929e84c2">odp_pool_capability_t::max_len</a></div><div class="ttdeci">uint32_t max_len</div><div class="ttdoc">Maximum packet data length in bytes.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2pool__types_8h_source.html#l00247">api/spec/pool_types.h:247</a></div></div>
<div class="ttc" id="astructodp__pool__param__t_html"><div class="ttname"><a href="structodp__pool__param__t.html">odp_pool_param_t</a></div><div class="ttdoc">Pool parameters.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2pool__types_8h_source.html#l00466">api/spec/pool_types.h:466</a></div></div>
<div class="ttc" id="astructodp__pool__param__t_html_a2847f65ffe1be16a0026608991c08a68"><div class="ttname"><a href="structodp__pool__param__t.html#a2847f65ffe1be16a0026608991c08a68">odp_pool_param_t::tmo</a></div><div class="ttdeci">struct odp_pool_param_t::@139 tmo</div><div class="ttdoc">Parameters for timeout pools.</div></div>
<div class="ttc" id="astructodp__pool__param__t_html_a3598b3a2496629cd45010c1c5e876250"><div class="ttname"><a href="structodp__pool__param__t.html#a3598b3a2496629cd45010c1c5e876250">odp_pool_param_t::num</a></div><div class="ttdeci">uint32_t num</div><div class="ttdoc">Number of buffers in the pool.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2pool__types_8h_source.html#l00473">api/spec/pool_types.h:473</a></div></div>
<div class="ttc" id="astructodp__pool__param__t_html_a7f9ca49dc21d48da0d80860c03faec1d"><div class="ttname"><a href="structodp__pool__param__t.html#a7f9ca49dc21d48da0d80860c03faec1d">odp_pool_param_t::pkt</a></div><div class="ttdeci">struct odp_pool_param_t::@138 pkt</div><div class="ttdoc">Parameters for packet pools.</div></div>
<div class="ttc" id="astructodp__pool__param__t_html_aac72ae142dd9736a287ce63d78b71c87"><div class="ttname"><a href="structodp__pool__param__t.html#aac72ae142dd9736a287ce63d78b71c87">odp_pool_param_t::type</a></div><div class="ttdeci">odp_pool_type_t type</div><div class="ttdoc">Pool type.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2pool__types_8h_source.html#l00468">api/spec/pool_types.h:468</a></div></div>
<div class="ttc" id="astructodp__pool__param__t_html_ac1ccfa50466f4afa9a9ab72f0bd315bf"><div class="ttname"><a href="structodp__pool__param__t.html#ac1ccfa50466f4afa9a9ab72f0bd315bf">odp_pool_param_t::len</a></div><div class="ttdeci">uint32_t len</div><div class="ttdoc">Minimum length of 'num' packets.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2pool__types_8h_source.html#l00540">api/spec/pool_types.h:540</a></div></div>
<div class="ttc" id="astructodp__pool__param__t_html_ad400db5955445ee3d1fbb36df456e7f1"><div class="ttname"><a href="structodp__pool__param__t.html#ad400db5955445ee3d1fbb36df456e7f1">odp_pool_param_t::seg_len</a></div><div class="ttdeci">uint32_t seg_len</div><div class="ttdoc">Minimum number of packet data bytes that can be stored in the first segment of a newly allocated pack...</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2pool__types_8h_source.html#l00566">api/spec/pool_types.h:566</a></div></div>
<div class="ttc" id="astructodp__queue__param__t_html"><div class="ttname"><a href="structodp__queue__param__t.html">odp_queue_param_t</a></div><div class="ttdoc">ODP Queue parameters.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2queue__types_8h_source.html#l00239">api/spec/queue_types.h:239</a></div></div>
<div class="ttc" id="astructodp__queue__param__t_html_a371701df4d20cee95978b9265c232e32"><div class="ttname"><a href="structodp__queue__param__t.html#a371701df4d20cee95978b9265c232e32">odp_queue_param_t::sched</a></div><div class="ttdeci">odp_schedule_param_t sched</div><div class="ttdoc">Scheduler parameters.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2queue__types_8h_source.html#l00270">api/spec/queue_types.h:270</a></div></div>
<div class="ttc" id="astructodp__queue__param__t_html_a5f045dbc199867e8ff2d23c617603b4e"><div class="ttname"><a href="structodp__queue__param__t.html#a5f045dbc199867e8ff2d23c617603b4e">odp_queue_param_t::size</a></div><div class="ttdeci">uint32_t size</div><div class="ttdoc">Queue size.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2queue__types_8h_source.html#l00307">api/spec/queue_types.h:307</a></div></div>
<div class="ttc" id="astructodp__queue__param__t_html_a6a7251138773a3110bdc0e8d5f5b3be9"><div class="ttname"><a href="structodp__queue__param__t.html#a6a7251138773a3110bdc0e8d5f5b3be9">odp_queue_param_t::type</a></div><div class="ttdeci">odp_queue_type_t type</div><div class="ttdoc">Queue type.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2queue__types_8h_source.html#l00244">api/spec/queue_types.h:244</a></div></div>
<div class="ttc" id="astructodp__schedule__config__t_html"><div class="ttname"><a href="structodp__schedule__config__t.html">odp_schedule_config_t</a></div><div class="ttdoc">Schedule configuration.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2schedule__types_8h_source.html#l00543">api/spec/schedule_types.h:543</a></div></div>
<div class="ttc" id="astructodp__schedule__param__t_html_a0bc7830a919f31ce295a20c51a7e2648"><div class="ttname"><a href="structodp__schedule__param__t.html#a0bc7830a919f31ce295a20c51a7e2648">odp_schedule_param_t::group</a></div><div class="ttdeci">odp_schedule_group_t group</div><div class="ttdoc">Thread group.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2schedule__types_8h_source.html#l00204">api/spec/schedule_types.h:204</a></div></div>
<div class="ttc" id="astructodp__schedule__param__t_html_a3f103771c3a9319c1ec998fa8724b8ac"><div class="ttname"><a href="structodp__schedule__param__t.html#a3f103771c3a9319c1ec998fa8724b8ac">odp_schedule_param_t::prio</a></div><div class="ttdeci">odp_schedule_prio_t prio</div><div class="ttdoc">Priority level.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2schedule__types_8h_source.html#l00194">api/spec/schedule_types.h:194</a></div></div>
<div class="ttc" id="astructodp__schedule__param__t_html_ad4ca09d63edb0cec36567c26688cea14"><div class="ttname"><a href="structodp__schedule__param__t.html#ad4ca09d63edb0cec36567c26688cea14">odp_schedule_param_t::sync</a></div><div class="ttdeci">odp_schedule_sync_t sync</div><div class="ttdoc">Synchronization method.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2schedule__types_8h_source.html#l00199">api/spec/schedule_types.h:199</a></div></div>
<div class="ttc" id="astructodp__time__s_html"><div class="ttname"><a href="structodp__time__s.html">odp_time_s</a></div><div class="ttdef"><b>Definition:</b> <a href="api_2abi-default_2time__types_8h_source.html#l00018">api/abi-default/time_types.h:18</a></div></div>
<div class="ttc" id="astructodp__timer__capability__t_html"><div class="ttname"><a href="structodp__timer__capability__t.html">odp_timer_capability_t</a></div><div class="ttdoc">Timer capability.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2timer__types_8h_source.html#l00123">api/spec/timer_types.h:123</a></div></div>
<div class="ttc" id="astructodp__timer__capability__t_html_af0616eb9ff6667d142bb0e6febef7135"><div class="ttname"><a href="structodp__timer__capability__t.html#af0616eb9ff6667d142bb0e6febef7135">odp_timer_capability_t::highest_res_ns</a></div><div class="ttdeci">uint64_t highest_res_ns</div><div class="ttdoc">Highest timer resolution in nanoseconds.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2timer__types_8h_source.html#l00151">api/spec/timer_types.h:151</a></div></div>
<div class="ttc" id="astructodp__timer__pool__param__t_html"><div class="ttname"><a href="structodp__timer__pool__param__t.html">odp_timer_pool_param_t</a></div><div class="ttdoc">Timer pool parameters.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2timer__types_8h_source.html#l00289">api/spec/timer_types.h:289</a></div></div>
<div class="ttc" id="astructodp__timer__pool__param__t_html_a0c9d28e284d142c3fe6ee5f8cc66171e"><div class="ttname"><a href="structodp__timer__pool__param__t.html#a0c9d28e284d142c3fe6ee5f8cc66171e">odp_timer_pool_param_t::res_ns</a></div><div class="ttdeci">uint64_t res_ns</div><div class="ttdoc">Timeout resolution in nanoseconds.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2timer__types_8h_source.html#l00314">api/spec/timer_types.h:314</a></div></div>
<div class="ttc" id="astructodp__timer__pool__param__t_html_a8c358d197ea76dc7295025c23159e890"><div class="ttname"><a href="structodp__timer__pool__param__t.html#a8c358d197ea76dc7295025c23159e890">odp_timer_pool_param_t::min_tmo</a></div><div class="ttdeci">uint64_t min_tmo</div><div class="ttdoc">Minimum relative timeout in nanoseconds.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2timer__types_8h_source.html#l00329">api/spec/timer_types.h:329</a></div></div>
<div class="ttc" id="astructodp__timer__pool__param__t_html_abe013f91043de4d7fa0003bce6701a3f"><div class="ttname"><a href="structodp__timer__pool__param__t.html#abe013f91043de4d7fa0003bce6701a3f">odp_timer_pool_param_t::num_timers</a></div><div class="ttdeci">uint32_t num_timers</div><div class="ttdoc">Number of timers in the pool.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2timer__types_8h_source.html#l00379">api/spec/timer_types.h:379</a></div></div>
<div class="ttc" id="astructodp__timer__pool__param__t_html_af491eee5937cbb0b8e18a85a9712c07c"><div class="ttname"><a href="structodp__timer__pool__param__t.html#af491eee5937cbb0b8e18a85a9712c07c">odp_timer_pool_param_t::clk_src</a></div><div class="ttdeci">odp_timer_clk_src_t clk_src</div><div class="ttdoc">Clock source for timers.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2timer__types_8h_source.html#l00303">api/spec/timer_types.h:303</a></div></div>
<div class="ttc" id="astructodp__timer__pool__param__t_html_af54f6e42c3f0fc4e2514c2d0df3023c2"><div class="ttname"><a href="structodp__timer__pool__param__t.html#af54f6e42c3f0fc4e2514c2d0df3023c2">odp_timer_pool_param_t::max_tmo</a></div><div class="ttdeci">uint64_t max_tmo</div><div class="ttdoc">Maximum relative timeout in nanoseconds.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2timer__types_8h_source.html#l00339">api/spec/timer_types.h:339</a></div></div>
<div class="ttc" id="astructodp__timer__start__t_html"><div class="ttname"><a href="structodp__timer__start__t.html">odp_timer_start_t</a></div><div class="ttdoc">Timer start parameters.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2timer__types_8h_source.html#l00420">api/spec/timer_types.h:420</a></div></div>
<div class="ttc" id="astructodp__timer__start__t_html_a00d0c90df7accbbed0f22273365b6c56"><div class="ttname"><a href="structodp__timer__start__t.html#a00d0c90df7accbbed0f22273365b6c56">odp_timer_start_t::tick</a></div><div class="ttdeci">uint64_t tick</div><div class="ttdoc">Expiration time in ticks.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2timer__types_8h_source.html#l00431">api/spec/timer_types.h:431</a></div></div>
<div class="ttc" id="astructodp__timer__start__t_html_a8c7915d1a2cfa0bb13f8cbf280ee7a97"><div class="ttname"><a href="structodp__timer__start__t.html#a8c7915d1a2cfa0bb13f8cbf280ee7a97">odp_timer_start_t::tmo_ev</a></div><div class="ttdeci">odp_event_t tmo_ev</div><div class="ttdoc">Timeout event.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2timer__types_8h_source.html#l00442">api/spec/timer_types.h:442</a></div></div>
<div class="ttc" id="astructodp__timer__start__t_html_adff5d0b4bfbce079f01ec86642a387fe"><div class="ttname"><a href="structodp__timer__start__t.html#adff5d0b4bfbce079f01ec86642a387fe">odp_timer_start_t::tick_type</a></div><div class="ttdeci">odp_timer_tick_type_t tick_type</div><div class="ttdoc">Tick type.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2timer__types_8h_source.html#l00425">api/spec/timer_types.h:425</a></div></div>
<div class="ttc" id="aunionodp__feature__t_html_a1314788ea1f1ed5880993df313efa537"><div class="ttname"><a href="unionodp__feature__t.html#a1314788ea1f1ed5880993df313efa537">odp_feature_t::tm</a></div><div class="ttdeci">uint32_t tm</div><div class="ttdoc">Traffic Manager APIs, e.g., odp_tm_xxx()</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2std__types_8h_source.html#l00165">api/spec/std_types.h:165</a></div></div>
<div class="ttc" id="aunionodp__feature__t_html_a1bdda287098ded64503078051a83f926"><div class="ttname"><a href="unionodp__feature__t.html#a1bdda287098ded64503078051a83f926">odp_feature_t::crypto</a></div><div class="ttdeci">uint32_t crypto</div><div class="ttdoc">Crypto APIs, e.g., odp_crypto_xxx()</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2std__types_8h_source.html#l00141">api/spec/std_types.h:141</a></div></div>
<div class="ttc" id="aunionodp__feature__t_html_a2c1ba6ec10b80be331770a6d1343c022"><div class="ttname"><a href="unionodp__feature__t.html#a2c1ba6ec10b80be331770a6d1343c022">odp_feature_t::ipsec</a></div><div class="ttdeci">uint32_t ipsec</div><div class="ttdoc">IPsec APIs, e.g., odp_ipsec_xxx()</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2std__types_8h_source.html#l00147">api/spec/std_types.h:147</a></div></div>
<div class="ttc" id="aunionodp__feature__t_html_a8385b58720b831b5c74ed0caf2e81ce0"><div class="ttname"><a href="unionodp__feature__t.html#a8385b58720b831b5c74ed0caf2e81ce0">odp_feature_t::timer</a></div><div class="ttdeci">uint32_t timer</div><div class="ttdoc">Timer APIs, e.g., odp_timer_xxx(), odp_timeout_xxx()</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2std__types_8h_source.html#l00162">api/spec/std_types.h:162</a></div></div>
<div class="ttc" id="aunionodp__feature__t_html_a88403beab239078f0b99ced6a9e55a8b"><div class="ttname"><a href="unionodp__feature__t.html#a88403beab239078f0b99ced6a9e55a8b">odp_feature_t::cls</a></div><div class="ttdeci">uint32_t cls</div><div class="ttdoc">Classifier APIs, e.g., odp_cls_xxx(), odp_cos_xxx()</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2std__types_8h_source.html#l00135">api/spec/std_types.h:135</a></div></div>
<div class="ttc" id="aunionodp__feature__t_html_ab93b01045d0d66b55e50722e699e3c3c"><div class="ttname"><a href="unionodp__feature__t.html#ab93b01045d0d66b55e50722e699e3c3c">odp_feature_t::feat</a></div><div class="ttdeci">struct odp_feature_t::@172 feat</div><div class="ttdoc">Individual feature bits.</div></div>
<div class="ttc" id="aunionodp__feature__t_html_afa5de6ea31695f0c1fd33773612aefcc"><div class="ttname"><a href="unionodp__feature__t.html#afa5de6ea31695f0c1fd33773612aefcc">odp_feature_t::compress</a></div><div class="ttdeci">uint32_t compress</div><div class="ttdoc">Compression APIs, e.g., odp_comp_xxx()</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2std__types_8h_source.html#l00138">api/spec/std_types.h:138</a></div></div>
<div class="ttc" id="aunionodp__pktin__hash__proto__t_html_a23793296c3a0299f69bdacc438ca3caf"><div class="ttname"><a href="unionodp__pktin__hash__proto__t.html#a23793296c3a0299f69bdacc438ca3caf">odp_pktin_hash_proto_t::proto</a></div><div class="ttdeci">struct odp_pktin_hash_proto_t::@106 proto</div><div class="ttdoc">Protocol header fields for hashing.</div></div>
<div class="ttc" id="aunionodp__pktin__hash__proto__t_html_a55c2478785f04914939ed859bdc16839"><div class="ttname"><a href="unionodp__pktin__hash__proto__t.html#a55c2478785f04914939ed859bdc16839">odp_pktin_hash_proto_t::ipv4_udp</a></div><div class="ttdeci">uint32_t ipv4_udp</div><div class="ttdoc">IPv4 addresses and UDP port numbers.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__io__types_8h_source.html#l00129">api/spec/packet_io_types.h:129</a></div></div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
