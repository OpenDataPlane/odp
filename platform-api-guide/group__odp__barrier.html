<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>API Reference Manual for linux-generic: ODP BARRIER</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="odpdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="ODP-Logo-HQ.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">API Reference Manual for linux-generic
   &#160;<span id="projectnumber">1.48.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__odp__barrier.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">ODP BARRIER</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">API Description</h2>
<p>Thread execution and memory ordering barriers. </p>
<p><b> Thread execution barrier (odp_barrier_t) </b></p>
<p>Thread execution barrier synchronizes a group of threads to wait on the barrier until the entire group has reached the barrier.</p>
<p><b> Memory barriers </b></p>
<p>A memory barrier enforces the order between memory accesses (loads and/or stores) specified (in program order) before the barrier with those specified after the barrier. A barrier may affect both compiler optimizations and CPU out-of-order execution. Depending on the used HW platform and barrier types, heavy usage of barriers may cause significant performance degradation.</p>
<p>An application may use these memory barrier functions e.g. to build a synchronization mechanism between its threads in shared memory, or when it accesses memory mapped registers of a device.</p>
<p>An application does not need to use these memory barriers when using other ODP APIs for thread synchronization (execution barriers, spinlocks, etc.), or when exchanging data through ODP API mechanisms (queues, stashes, etc.). Those ODP calls include necessary (acquire and release) memory barriers to maintain coherency between data producers and consumers.</p>
<p>Some ODP atomic operations include a memory barrier - see for example <a class="el" href="group__odp__atomic.html#ga8004b5dd78f809deff4670cd32cb20cf" title="Load value of atomic uint32 variable using ACQUIRE memory ordering.">odp_atomic_load_acq_u32()</a> or <a class="el" href="group__odp__atomic.html#gafe98c0b4481c9ecdb57834113dbde02c" title="Store value to atomic uint32 variable using RELEASE memory ordering.">odp_atomic_store_rel_u32()</a>. Application may use also those (non-relaxed) atomic operations to enforce memory ordering while using atomic variables. </p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gafada4124b8e7661a65ba3ff291cdc488"><td class="memItemLeft" align="right" valign="top"><a id="gafada4124b8e7661a65ba3ff291cdc488"></a>
typedef struct <a class="el" href="structodp__barrier__s.html">odp_barrier_s</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odp__barrier.html#gafada4124b8e7661a65ba3ff291cdc488">odp_barrier_t</a></td></tr>
<tr class="memdesc:gafada4124b8e7661a65ba3ff291cdc488"><td class="mdescLeft">&#160;</td><td class="mdescRight">ODP thread synchronization barrier. <br /></td></tr>
<tr class="separator:gafada4124b8e7661a65ba3ff291cdc488"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga1416b47755c2af6267074959ac0d4840"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odp__barrier.html#ga1416b47755c2af6267074959ac0d4840">odp_barrier_init</a> (<a class="el" href="group__odp__barrier.html#gafada4124b8e7661a65ba3ff291cdc488">odp_barrier_t</a> *barr, int count)</td></tr>
<tr class="memdesc:ga1416b47755c2af6267074959ac0d4840"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize barrier with thread count.  <a href="group__odp__barrier.html#ga1416b47755c2af6267074959ac0d4840">More...</a><br /></td></tr>
<tr class="separator:ga1416b47755c2af6267074959ac0d4840"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga97c8f84490e816330f96155acf0b4b77"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odp__barrier.html#ga97c8f84490e816330f96155acf0b4b77">odp_barrier_wait</a> (<a class="el" href="group__odp__barrier.html#gafada4124b8e7661a65ba3ff291cdc488">odp_barrier_t</a> *barr)</td></tr>
<tr class="memdesc:ga97c8f84490e816330f96155acf0b4b77"><td class="mdescLeft">&#160;</td><td class="mdescRight">Synchronize thread execution on barrier.  <a href="group__odp__barrier.html#ga97c8f84490e816330f96155acf0b4b77">More...</a><br /></td></tr>
<tr class="separator:ga97c8f84490e816330f96155acf0b4b77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga763dfb959804a7154928c9adfc6bde44"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odp__barrier.html#ga763dfb959804a7154928c9adfc6bde44">odp_mb_release</a> (void)</td></tr>
<tr class="memdesc:ga763dfb959804a7154928c9adfc6bde44"><td class="mdescLeft">&#160;</td><td class="mdescRight">Memory barrier for release operations.  <a href="group__odp__barrier.html#ga763dfb959804a7154928c9adfc6bde44">More...</a><br /></td></tr>
<tr class="separator:ga763dfb959804a7154928c9adfc6bde44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga60d74a4c760e2de4e86ba2162bfe5de0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odp__barrier.html#ga60d74a4c760e2de4e86ba2162bfe5de0">odp_mb_acquire</a> (void)</td></tr>
<tr class="memdesc:ga60d74a4c760e2de4e86ba2162bfe5de0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Memory barrier for acquire operations.  <a href="group__odp__barrier.html#ga60d74a4c760e2de4e86ba2162bfe5de0">More...</a><br /></td></tr>
<tr class="separator:ga60d74a4c760e2de4e86ba2162bfe5de0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3a641c164c73f0ac06a2d6386e12dcc0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odp__barrier.html#ga3a641c164c73f0ac06a2d6386e12dcc0">odp_mb_full</a> (void)</td></tr>
<tr class="memdesc:ga3a641c164c73f0ac06a2d6386e12dcc0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Full memory barrier.  <a href="group__odp__barrier.html#ga3a641c164c73f0ac06a2d6386e12dcc0">More...</a><br /></td></tr>
<tr class="separator:ga3a641c164c73f0ac06a2d6386e12dcc0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1efb1de71e8c47d0a2c928dc02a47dc7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odp__barrier.html#ga1efb1de71e8c47d0a2c928dc02a47dc7">odp_mb_sync</a> (void)</td></tr>
<tr class="memdesc:ga1efb1de71e8c47d0a2c928dc02a47dc7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Memory barrier for load and store synchronization.  <a href="group__odp__barrier.html#ga1efb1de71e8c47d0a2c928dc02a47dc7">More...</a><br /></td></tr>
<tr class="separator:ga1efb1de71e8c47d0a2c928dc02a47dc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga82ed7368c43243f842714dacd784a66f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odp__barrier.html#ga82ed7368c43243f842714dacd784a66f">odp_mb_sync_load</a> (void)</td></tr>
<tr class="memdesc:ga82ed7368c43243f842714dacd784a66f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Memory barrier for load synchronization.  <a href="group__odp__barrier.html#ga82ed7368c43243f842714dacd784a66f">More...</a><br /></td></tr>
<tr class="separator:ga82ed7368c43243f842714dacd784a66f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab7baf4869300365ad1c7a3ff21db64c8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__odp__barrier.html#gab7baf4869300365ad1c7a3ff21db64c8">odp_mb_sync_store</a> (void)</td></tr>
<tr class="memdesc:gab7baf4869300365ad1c7a3ff21db64c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Memory synchronization barrier for stores.  <a href="group__odp__barrier.html#gab7baf4869300365ad1c7a3ff21db64c8">More...</a><br /></td></tr>
<tr class="separator:gab7baf4869300365ad1c7a3ff21db64c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga1416b47755c2af6267074959ac0d4840"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1416b47755c2af6267074959ac0d4840">&#9670;&nbsp;</a></span>odp_barrier_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void odp_barrier_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__odp__barrier.html#gafada4124b8e7661a65ba3ff291cdc488">odp_barrier_t</a> *&#160;</td>
          <td class="paramname"><em>barr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize barrier with thread count. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">barr</td><td>Pointer to a barrier variable </td></tr>
    <tr><td class="paramname">count</td><td>Thread count </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga97c8f84490e816330f96155acf0b4b77"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga97c8f84490e816330f96155acf0b4b77">&#9670;&nbsp;</a></span>odp_barrier_wait()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void odp_barrier_wait </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__odp__barrier.html#gafada4124b8e7661a65ba3ff291cdc488">odp_barrier_t</a> *&#160;</td>
          <td class="paramname"><em>barr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Synchronize thread execution on barrier. </p>
<p>Wait for all threads to arrive at the barrier until they are let loose again. Threads will block (spin) until the last thread has arrived at the barrier. All memory operations before the <a class="el" href="group__odp__barrier.html#ga97c8f84490e816330f96155acf0b4b77" title="Synchronize thread execution on barrier.">odp_barrier_wait()</a> call will be visible to all threads when they leave the barrier.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">barr</td><td>Pointer to a barrier variable </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga763dfb959804a7154928c9adfc6bde44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga763dfb959804a7154928c9adfc6bde44">&#9670;&nbsp;</a></span>odp_mb_release()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void odp_mb_release </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Memory barrier for release operations. </p>
<p>This memory barrier has release semantics. It synchronizes with a pairing barrier for acquire operations. The releasing and acquiring threads synchronize through shared memory. The releasing thread must call this barrier before signaling the acquiring thread. After the acquiring thread receives the signal, it must call <a class="el" href="group__odp__barrier.html#ga60d74a4c760e2de4e86ba2162bfe5de0" title="Memory barrier for acquire operations.">odp_mb_acquire()</a> before it reads the memory written by the releasing thread.</p>
<p>This call is not needed when using ODP defined synchronization mechanisms.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__odp__barrier.html#ga60d74a4c760e2de4e86ba2162bfe5de0" title="Memory barrier for acquire operations.">odp_mb_acquire()</a> </dd></dl>

</div>
</div>
<a id="ga60d74a4c760e2de4e86ba2162bfe5de0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga60d74a4c760e2de4e86ba2162bfe5de0">&#9670;&nbsp;</a></span>odp_mb_acquire()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void odp_mb_acquire </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Memory barrier for acquire operations. </p>
<p>This memory barrier has acquire semantics. It synchronizes with a pairing barrier for release operations. The releasing and acquiring threads synchronize through shared memory. The releasing thread must call <a class="el" href="group__odp__barrier.html#ga763dfb959804a7154928c9adfc6bde44" title="Memory barrier for release operations.">odp_mb_release()</a> before signaling the acquiring thread. After the acquiring thread receives the signal, it must call this barrier before it reads the memory written by the releasing thread.</p>
<p>This call is not needed when using ODP defined synchronization mechanisms.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__odp__barrier.html#ga763dfb959804a7154928c9adfc6bde44" title="Memory barrier for release operations.">odp_mb_release()</a> </dd></dl>

</div>
</div>
<a id="ga3a641c164c73f0ac06a2d6386e12dcc0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3a641c164c73f0ac06a2d6386e12dcc0">&#9670;&nbsp;</a></span>odp_mb_full()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void odp_mb_full </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Full memory barrier. </p>
<p>This is a full memory barrier. It guarantees that all load and store operations specified before it are visible to other threads before all load and store operations specified after it.</p>
<p>This call is not needed when using ODP defined synchronization mechanisms. </p>

</div>
</div>
<a id="ga1efb1de71e8c47d0a2c928dc02a47dc7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1efb1de71e8c47d0a2c928dc02a47dc7">&#9670;&nbsp;</a></span>odp_mb_sync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void odp_mb_sync </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Memory barrier for load and store synchronization. </p>
<p>This memory barrier ensures that all memory accesses (loads and stores) specified before the barrier (in program order) are complete prior to any memory access specified after the barrier begins execution.</p>
<p>This is a stronger barrier than <a class="el" href="group__odp__barrier.html#ga3a641c164c73f0ac06a2d6386e12dcc0" title="Full memory barrier.">odp_mb_full()</a>, as in addition to visibility order also memory access completion is ensured. The barrier may be useful e.g. when synchronizing loads and stores into memory mapped registers of a device. </p>

</div>
</div>
<a id="ga82ed7368c43243f842714dacd784a66f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga82ed7368c43243f842714dacd784a66f">&#9670;&nbsp;</a></span>odp_mb_sync_load()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void odp_mb_sync_load </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Memory barrier for load synchronization. </p>
<p>This memory barrier ensures that all memory loads specified before the barrier (in program order) are complete prior to any memory load specified after the barrier begins execution.</p>
<p>The barrier may be useful e.g. when synchronizing loads from memory mapped registers of a device. </p>

</div>
</div>
<a id="gab7baf4869300365ad1c7a3ff21db64c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab7baf4869300365ad1c7a3ff21db64c8">&#9670;&nbsp;</a></span>odp_mb_sync_store()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void odp_mb_sync_store </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Memory synchronization barrier for stores. </p>
<p>This memory barrier ensures that all memory stores specified before the barrier (in program order) are complete prior to any memory store specified after the barrier begins execution.</p>
<p>The barrier may be useful e.g. when synchronizing stores to memory mapped registers of a device. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
