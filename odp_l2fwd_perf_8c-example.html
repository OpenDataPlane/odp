<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>API Reference Manual: odp_l2fwd_perf.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="odpdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="ODP-Logo-HQ.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">API Reference Manual
   &#160;<span id="projectnumber">1.48.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('odp_l2fwd_perf_8c-example.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">odp_l2fwd_perf.c</div>  </div>
</div><!--header-->
<div class="contents">
<p>Simple L2 forwarding benchmark. Receives packets from a set of interfaces and forwards them according to configuration. Can work in direct and scheduling modes. Existing fast path handling functions should be kept as is, new features should be handled in new separate functions in order for the tester to provide more comparable results.</p>
<div class="fragment"><div class="line"><span class="comment">/* SPDX-License-Identifier: BSD-3-Clause</span></div>
<div class="line"><span class="comment"> * Copyright (c) 2024-2025 Nokia</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifndef _GNU_SOURCE</span></div>
<div class="line"><span class="preprocessor">#define _GNU_SOURCE</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;inttypes.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;signal.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdint.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;unistd.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="odp__api_8h.html">odp_api.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;odp/helper/odph_api.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;pktio_common.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define PROG_NAME &quot;odp_l2fwd_perf&quot;</span></div>
<div class="line"><span class="preprocessor">#define PAIR_DELIMITER &quot;@&quot;</span></div>
<div class="line"><span class="preprocessor">#define IF_DELIMITER &quot;,&quot;</span></div>
<div class="line"><span class="preprocessor">#define MAC_COMMON 0x2</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define MAX_IFS 8U</span></div>
<div class="line"><span class="preprocessor">#define MAX_QS 32U</span></div>
<div class="line"><span class="preprocessor">#define MAX_WORKERS ((uint32_t)(ODP_THREAD_COUNT_MAX - 1))</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">enum</span> {</div>
<div class="line">    DIRECT,</div>
<div class="line">    SCHED_PARALLEL,</div>
<div class="line">    SCHED_ATOMIC,</div>
<div class="line">    SCHED_ORDERED</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define DEF_MODE DIRECT</span></div>
<div class="line"><span class="preprocessor">#define DEF_BURST 32U</span></div>
<div class="line"><span class="preprocessor">#define DEF_CNT 32768U</span></div>
<div class="line"><span class="preprocessor">#define DEF_LEN 1536U</span></div>
<div class="line"><span class="preprocessor">#define DEF_RUNTIME 0U</span></div>
<div class="line"><span class="preprocessor">#define DEF_WORKERS 1U</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define GIGAS 1000000000U</span></div>
<div class="line"><span class="preprocessor">#define MEGAS 1000000U</span></div>
<div class="line"><span class="preprocessor">#define KILOS 1000U</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>{</div>
<div class="line">    uint32_t num_pkts;</div>
<div class="line">    uint32_t pkt_len;</div>
<div class="line">} dynamic_defs_t;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">enum</span> {</div>
<div class="line">    PRS_OK,</div>
<div class="line">    PRS_NOK,</div>
<div class="line">    PRS_TERM</div>
<div class="line">} parse_result_t;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>{</div>
<div class="line">    uint64_t tm_ns;</div>
<div class="line">    uint64_t tx;</div>
<div class="line">    uint64_t tx_drops;</div>
<div class="line">} stats_t;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>pktio_s pktio_t;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>pktio_s {</div>
<div class="line">    <a name="_a0"></a><a class="code" href="structodp__pktin__queue__s.html">odp_pktin_queue_t</a> in_qs[MAX_QS];</div>
<div class="line">    <a name="_a1"></a><a class="code" href="structodp__pktout__queue__s.html">odp_pktout_queue_t</a> out_qs[MAX_QS];</div>
<div class="line">    <a name="_a2"></a><a class="code" href="struct__odp__abi__pktio__t.html">odp_pktio_t</a> handle;</div>
<div class="line">    pktio_t *dst;</div>
<div class="line">    odph_ethaddr_t src_mac;</div>
<div class="line">    odph_ethaddr_t dst_mac;</div>
<div class="line">    <span class="keywordtype">char</span> *name;</div>
<div class="line">    <span class="keywordtype">char</span> *dst_name;</div>
<div class="line">    uint8_t num_in_qs;</div>
<div class="line">    uint8_t num_out_qs;</div>
<div class="line">} pktio_t;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>{</div>
<div class="line">    pktio_t *pktio;</div>
<div class="line">    <span class="comment">/* Poll ID to determine which input queue this worker will use for this packet I/O. */</span></div>
<div class="line">    uint8_t rx_poll;</div>
<div class="line">    <span class="comment">/* Poll ID to determine which output queue this worker will use for the destination of this</span></div>
<div class="line"><span class="comment">     * packet I/O. */</span></div>
<div class="line">    uint8_t tx_poll;</div>
<div class="line">} worker_pktio_t;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>prog_config_s prog_config_t;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span><a name="a3"></a><a class="code" href="group__odp__compiler__optim.html#ga205a8257879c02657e7c39ee7ad5e40a">ODP_ALIGNED_CACHE</a> {</div>
<div class="line">    worker_pktio_t pktios[MAX_IFS];</div>
<div class="line">    stats_t stats;</div>
<div class="line">    prog_config_t *prog_config;</div>
<div class="line">    uint8_t num_ifs;</div>
<div class="line">} worker_config_t;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>prog_config_s {</div>
<div class="line">    odph_thread_t thread_tbl[MAX_WORKERS];</div>
<div class="line">    worker_config_t worker_config[MAX_WORKERS];</div>
<div class="line">    pktio_t pktios[MAX_IFS];</div>
<div class="line">    dynamic_defs_t dyn_defs;</div>
<div class="line">    <a class="code" href="group__odp__initialization.html#ga8d362bd3c7c87ab5892ca63b15c375c0">odp_instance_t</a> <a name="a4"></a><a class="code" href="group__odp__initialization.html#ga076abe89a81ffb7a7ba46a912eca2166">odp_instance</a>;</div>
<div class="line">    <a name="_a5"></a><a class="code" href="structodp__cpumask__s.html">odp_cpumask_t</a> worker_mask;</div>
<div class="line">    <a name="_a6"></a><a class="code" href="structodp__barrier__s.html">odp_barrier_t</a> init_barrier;</div>
<div class="line">    <a class="code" href="structodp__barrier__s.html">odp_barrier_t</a> term_barrier;</div>
<div class="line">    <a name="_a7"></a><a class="code" href="structodp__atomic__u32__s.html">odp_atomic_u32_t</a> is_running;</div>
<div class="line">    <a name="_a8"></a><a class="code" href="struct__odp__abi__pool__t.html">odp_pool_t</a> pool;</div>
<div class="line">    uint32_t burst_size;</div>
<div class="line">    uint32_t num_pkts;</div>
<div class="line">    uint32_t pkt_len;</div>
<div class="line">    uint32_t orig_in_mtu;</div>
<div class="line">    uint32_t orig_out_mtu;</div>
<div class="line">    uint32_t mtu;</div>
<div class="line">    uint32_t runtime;</div>
<div class="line">    uint32_t num_workers;</div>
<div class="line">    uint32_t wait_sec;</div>
<div class="line">    uint8_t num_ifs;</div>
<div class="line">    uint8_t mode;</div>
<div class="line">    uint8_t orig_is_promisc;</div>
<div class="line">    uint8_t is_promisc;</div>
<div class="line">    uint8_t is_mac_mod;</div>
<div class="line">} prog_config_t;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>{</div>
<div class="line">    <span class="keyword">struct </span>{</div>
<div class="line">        <a class="code" href="structodp__pktin__queue__s.html">odp_pktin_queue_t</a> pktin;</div>
<div class="line">        <a class="code" href="structodp__pktout__queue__s.html">odp_pktout_queue_t</a> pktout;</div>
<div class="line">        odph_ethaddr_t src_mac;</div>
<div class="line">        odph_ethaddr_t dst_mac;</div>
<div class="line">    } tbl[MAX_IFS];</div>
<div class="line">} dir_fwd_tbl_t;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>{</div>
<div class="line">    <span class="keyword">struct </span>{</div>
<div class="line">        <a class="code" href="structodp__pktout__queue__s.html">odp_pktout_queue_t</a> pktout;</div>
<div class="line">        odph_ethaddr_t src_mac;</div>
<div class="line">        odph_ethaddr_t dst_mac;</div>
<div class="line">     } tbl[<a name="a9"></a><a class="code" href="group__odp__packet__io.html#gac600157dd09955a9cee3f6618c757ee7">ODP_PKTIO_MAX_INDEX</a> + 1];</div>
<div class="line">} scd_fwd_tbl_t;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">enum</span> longopt_only {</div>
<div class="line">    OPT_WAIT_LINK = 256</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">typedef</span> int (*run_func_t)(<span class="keywordtype">void</span> *arg);</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> prog_config_t *prog_conf;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> terminate(<span class="keywordtype">int</span> signal <a name="a10"></a><a class="code" href="group__odp__compiler__optim.html#ga45a2684e38da3e71b300bc89de5d6b52">ODP_UNUSED</a>)</div>
<div class="line">{</div>
<div class="line">    <a name="a11"></a><a class="code" href="group__odp__atomic.html#gaa6d2d16a9ef9897b1442d77e41f7101e">odp_atomic_store_u32</a>(&amp;prog_conf-&gt;is_running, 0U);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> init_config(prog_config_t *config)</div>
<div class="line">{</div>
<div class="line">    <a name="_a12"></a><a class="code" href="structodp__pool__capability__t.html">odp_pool_capability_t</a> pool_capa;</div>
<div class="line">    pktio_t *pktio;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a name="a13"></a><a class="code" href="group__odp__pool.html#ga2c6f42e9611904eac84872bf8f913b75">odp_pool_capability</a>(&amp;pool_capa) == 0) {</div>
<div class="line">        config-&gt;dyn_defs.num_pkts = pool_capa.<a name="a14"></a><a class="code" href="structodp__pool__capability__t.html#a11c2f0606b3bb00a72220d2352f43806">pkt</a>.<a name="a15"></a><a class="code" href="structodp__pool__capability__t.html#a2b468c5617515bbd5d50a57a7d65e1e0">max_num</a> &gt; 0U ?</div>
<div class="line">                        ODPH_MIN(pool_capa.<a class="code" href="structodp__pool__capability__t.html#a11c2f0606b3bb00a72220d2352f43806">pkt</a>.<a class="code" href="structodp__pool__capability__t.html#a2b468c5617515bbd5d50a57a7d65e1e0">max_num</a>, DEF_CNT) : DEF_CNT;</div>
<div class="line">        config-&gt;dyn_defs.pkt_len = pool_capa.<a class="code" href="structodp__pool__capability__t.html#a11c2f0606b3bb00a72220d2352f43806">pkt</a>.<a name="a16"></a><a class="code" href="structodp__pool__capability__t.html#affefe3b2c3a473c37d08fcd2929e84c2">max_len</a> &gt; 0U ?</div>
<div class="line">                        ODPH_MIN(pool_capa.<a class="code" href="structodp__pool__capability__t.html#a11c2f0606b3bb00a72220d2352f43806">pkt</a>.<a class="code" href="structodp__pool__capability__t.html#affefe3b2c3a473c37d08fcd2929e84c2">max_len</a>, DEF_LEN) : DEF_LEN;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    config-&gt;pool = <a name="a17"></a><a class="code" href="group__odp__pool.html#gafca03b58412260da754042a92f8a5e04">ODP_POOL_INVALID</a>;</div>
<div class="line">    config-&gt;burst_size = DEF_BURST;</div>
<div class="line">    config-&gt;num_pkts = config-&gt;dyn_defs.num_pkts;</div>
<div class="line">    config-&gt;pkt_len = config-&gt;dyn_defs.pkt_len;</div>
<div class="line">    config-&gt;runtime = DEF_RUNTIME;</div>
<div class="line">    config-&gt;num_workers = DEF_WORKERS;</div>
<div class="line">    config-&gt;mode = DEF_MODE;</div>
<div class="line">    config-&gt;is_mac_mod = 1U;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (uint32_t i = 0U; i &lt; MAX_IFS; ++i) {</div>
<div class="line">        pktio = &amp;config-&gt;pktios[i];</div>
<div class="line"> </div>
<div class="line">        pktio-&gt;handle = <a name="a18"></a><a class="code" href="group__odp__packet__io.html#ga9c7d0fcaec232b5503633e42ea29f6f5">ODP_PKTIO_INVALID</a>;</div>
<div class="line">        pktio-&gt;dst = pktio;</div>
<div class="line">        pktio-&gt;dst_mac.addr[0U] = MAC_COMMON;</div>
<div class="line">        pktio-&gt;dst_mac.addr[5U] = i + 1U;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> parse_interfaces(prog_config_t *config, <span class="keyword">const</span> <span class="keywordtype">char</span> *optarg)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">char</span> *tmp_str = strdup(optarg), *tmp;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (tmp_str == NULL)</div>
<div class="line">        ODPH_ABORT(<span class="stringliteral">&quot;Out of memory\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    tmp = strtok(tmp_str, IF_DELIMITER);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span> (tmp &amp;&amp; config-&gt;num_ifs &lt; MAX_IFS) {</div>
<div class="line">        tmp = strdup(tmp);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (tmp == NULL)</div>
<div class="line">            ODPH_ABORT(<span class="stringliteral">&quot;Out of memory\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        config-&gt;pktios[config-&gt;num_ifs].name = tmp;</div>
<div class="line">        ++config-&gt;num_ifs;</div>
<div class="line">        tmp = strtok(NULL, IF_DELIMITER);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    free(tmp_str);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <a class="code" href="group__odp__std.html#ga0b2a7ca83ccc7af0346db309d8c06d6f">odp_bool_t</a> parse_mac_and_port(pktio_t *pktio, <span class="keyword">const</span> <span class="keywordtype">char</span> *pair)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span> *pos = strstr(pair, PAIR_DELIMITER);</div>
<div class="line">    uint32_t size;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (pos == NULL)</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"> </div>
<div class="line">    size = pos - pair + 1U;</div>
<div class="line">    pktio-&gt;dst_name = strdup(pair + size);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (pktio-&gt;dst_name == NULL)</div>
<div class="line">        ODPH_ABORT(<span class="stringliteral">&quot;Out of memory\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">char</span> mac[size];</div>
<div class="line"> </div>
<div class="line">    odph_strcpy(mac, pair, size);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Temporarily save to &#39;src_mac&#39; until destination binding. */</span></div>
<div class="line">    <span class="keywordflow">if</span> (odph_eth_addr_parse(&amp;pktio-&gt;src_mac, mac) &lt; 0) {</div>
<div class="line">        ODPH_ERR(<span class="stringliteral">&quot;Warning: unable to parse portmap entry (%s)\n&quot;</span>, pktio-&gt;dst_name);</div>
<div class="line">        free(pktio-&gt;dst_name);</div>
<div class="line">        pktio-&gt;dst_name = NULL;</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> parse_portmap(prog_config_t *config, <span class="keyword">const</span> <span class="keywordtype">char</span> *optarg)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">char</span> *tmp_str = strdup(optarg);</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span> *tmp;</div>
<div class="line">    uint32_t i = 0U;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (tmp_str == NULL)</div>
<div class="line">        ODPH_ABORT(<span class="stringliteral">&quot;Out of memory\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    tmp = strtok(tmp_str, IF_DELIMITER);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span> (tmp &amp;&amp; i &lt; MAX_IFS) {</div>
<div class="line">        <span class="keywordflow">if</span> (parse_mac_and_port(&amp;config-&gt;pktios[i], tmp))</div>
<div class="line">            ++i;</div>
<div class="line"> </div>
<div class="line">        tmp = strtok(NULL, IF_DELIMITER);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    free(tmp_str);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> print_usage(<span class="keyword">const</span> dynamic_defs_t *dyn_defs)</div>
<div class="line">{</div>
<div class="line">    printf(<span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;Simple L2 forwarder.\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;Usage: %s [OPTIONS]\n&quot;</span>, PROG_NAME);</div>
<div class="line">    printf(<span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  E.g. %s -i eth0\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;       %s -i eth0,eth1 -p 11:22:33:44:55:66@eth1,66:55:44:33:22:11@eth0 -b 16\n&quot;</span>,</div>
<div class="line">           PROG_NAME, PROG_NAME);</div>
<div class="line">    printf(<span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;Mandatory OPTIONS:\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  -i, --interfaces   Ethernet interfaces for packet I/O, &#39;%s&#39;-separated, no\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;                     whitespaces anywhere. By default, packets are looped back.\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;                     This can be overridden with &#39;--portmap&#39;. Maximum\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;                     interface count is %u.\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;Optional OPTIONS:\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  -m, --mode         Packet input mode. %u by default.\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;                         0: direct\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;                         1: scheduled with parallel queues\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;                         2: scheduled with atomic queues\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;                         3: scheduled with ordered queues\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;                     Queue per direction per worker is always attempted. Output\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;                     is always in direct mode.\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  -p, --portmap      List of destination MAC address and port pairs for passed\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;                     interfaces, MAC address and the port should be\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;                     &#39;%s&#39;-separated, the pairs &#39;%s&#39;-separated, no whitespaces\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;                     anywhere. Ordering follows the &#39;--interface&#39; option, e.g.\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;                     passing &#39;-i eth0%seth1&#39; and\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;                     &#39;-p 11:22:33:44:55:66%seth1%s66:55:44:33:22:11%seth0&#39; would\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;                     result in eth0 sending packets to eth1 with source MAC of\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;                     port eth0 and destination MAC of &#39;11:22:33:44:55:66&#39; and\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;                     eth1 to eth0 with source MAC of eth1 and destination MAC of\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;                     &#39;66:55:44:33:22:11&#39;.\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  -b, --burst_rx     Receive burst size. %u by default.\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  -n, --num_pkts     Number of packet buffers allocated for packet I/O pool.\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;                     %u by default.\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  -l, --pkt_len      Maximum size of packet buffers in packet I/O pool. %u by\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;                     default.\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  -M, --mtu          Interface MTU in bytes. Interface specific by default.\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  -P, --promisc_mode Enable promiscuous mode.\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  -t, --time         Time in seconds to run. 0 means infinite. %u by default.\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  -s, --no_mac_mod   Disable source and destination MAC address modification.\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  --wait_link &lt;sec&gt;  Wait up to &lt;sec&gt; seconds for network links to be up.\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;                     Default: 0 (don&#39;t check link status)\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  -c, --worker_count Number of workers. Workers are assigned to handle\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;                     interfaces in round-robin fashion. E.g. with two interfaces\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;                     eth0 and eth1 and with 5 workers, eth0 would be handled by\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;                     worker indexes 0, 2 and 4 and eth1 by worker indexes 1 and\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;                     3. Assignment may be affected by &#39;--portmap&#39;. %u workers by\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;                     default.\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  -h, --help         This help.\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;\n&quot;</span>, IF_DELIMITER, MAX_IFS, DEF_MODE, PAIR_DELIMITER, IF_DELIMITER, IF_DELIMITER,</div>
<div class="line">           PAIR_DELIMITER, IF_DELIMITER, PAIR_DELIMITER, DEF_BURST, dyn_defs-&gt;num_pkts,</div>
<div class="line">           dyn_defs-&gt;pkt_len, DEF_RUNTIME, DEF_WORKERS);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> parse_result_t check_options(prog_config_t *config)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="structodp__pool__capability__t.html">odp_pool_capability_t</a> pool_capa;</div>
<div class="line">    uint32_t max_workers;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (config-&gt;num_ifs == 0U) {</div>
<div class="line">        ODPH_ERR(<span class="stringliteral">&quot;Invalid number of interfaces: %u (min: 1, max: %u)\n&quot;</span>, config-&gt;num_ifs,</div>
<div class="line">             MAX_IFS);</div>
<div class="line">        <span class="keywordflow">return</span> PRS_NOK;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (config-&gt;mode != DIRECT &amp;&amp; config-&gt;mode != SCHED_PARALLEL &amp;&amp;</div>
<div class="line">        config-&gt;mode != SCHED_ATOMIC &amp;&amp; config-&gt;mode != SCHED_ORDERED) {</div>
<div class="line">        ODPH_ERR(<span class="stringliteral">&quot;Invalid packet input mode: %u\n&quot;</span>, config-&gt;mode);</div>
<div class="line">        <span class="keywordflow">return</span> PRS_NOK;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (config-&gt;burst_size == 0U) {</div>
<div class="line">        ODPH_ERR(<span class="stringliteral">&quot;Invalid burst size: %u (min: 1)\n&quot;</span>, config-&gt;burst_size);</div>
<div class="line">        <span class="keywordflow">return</span> PRS_NOK;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group__odp__pool.html#ga2c6f42e9611904eac84872bf8f913b75">odp_pool_capability</a>(&amp;pool_capa) &lt; 0) {</div>
<div class="line">        ODPH_ERR(<span class="stringliteral">&quot;Error querying pool capabilities\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> PRS_NOK;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (config-&gt;num_pkts == 0U ||</div>
<div class="line">        (pool_capa.<a class="code" href="structodp__pool__capability__t.html#a11c2f0606b3bb00a72220d2352f43806">pkt</a>.<a class="code" href="structodp__pool__capability__t.html#a2b468c5617515bbd5d50a57a7d65e1e0">max_num</a> &gt; 0U &amp;&amp; config-&gt;num_pkts &gt; pool_capa.<a class="code" href="structodp__pool__capability__t.html#a11c2f0606b3bb00a72220d2352f43806">pkt</a>.<a class="code" href="structodp__pool__capability__t.html#a2b468c5617515bbd5d50a57a7d65e1e0">max_num</a>)) {</div>
<div class="line">        ODPH_ERR(<span class="stringliteral">&quot;Invalid pool packet count: %u (min: 1, max: %u)\n&quot;</span>, config-&gt;num_pkts,</div>
<div class="line">             pool_capa.<a class="code" href="structodp__pool__capability__t.html#a11c2f0606b3bb00a72220d2352f43806">pkt</a>.<a class="code" href="structodp__pool__capability__t.html#a2b468c5617515bbd5d50a57a7d65e1e0">max_num</a>);</div>
<div class="line">        <span class="keywordflow">return</span> PRS_NOK;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (config-&gt;pkt_len == 0U ||</div>
<div class="line">        (pool_capa.<a class="code" href="structodp__pool__capability__t.html#a11c2f0606b3bb00a72220d2352f43806">pkt</a>.<a class="code" href="structodp__pool__capability__t.html#affefe3b2c3a473c37d08fcd2929e84c2">max_len</a> &gt; 0U &amp;&amp; config-&gt;pkt_len &gt; pool_capa.<a class="code" href="structodp__pool__capability__t.html#a11c2f0606b3bb00a72220d2352f43806">pkt</a>.<a class="code" href="structodp__pool__capability__t.html#affefe3b2c3a473c37d08fcd2929e84c2">max_len</a>)) {</div>
<div class="line">        ODPH_ERR(<span class="stringliteral">&quot;Invalid pool packet length: %u (min: 1, max: %u)\n&quot;</span>, config-&gt;pkt_len,</div>
<div class="line">             pool_capa.<a class="code" href="structodp__pool__capability__t.html#a11c2f0606b3bb00a72220d2352f43806">pkt</a>.<a class="code" href="structodp__pool__capability__t.html#affefe3b2c3a473c37d08fcd2929e84c2">max_len</a>);</div>
<div class="line">        <span class="keywordflow">return</span> PRS_NOK;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    max_workers = ODPH_MIN(MAX_WORKERS, (uint32_t)<a name="a19"></a><a class="code" href="group__odp__cpumask.html#ga4ff2d29f52775b12c7df1995754b524d">odp_cpumask_default_worker</a>(NULL, 0));</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (config-&gt;num_workers == 0U || config-&gt;num_workers &gt; max_workers) {</div>
<div class="line">        ODPH_ERR(<span class="stringliteral">&quot;Invalid worker count: %u (min: 1, max: %u)\n&quot;</span>, config-&gt;num_workers,</div>
<div class="line">             max_workers);</div>
<div class="line">        <span class="keywordflow">return</span> PRS_NOK;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    (void)<a class="code" href="group__odp__cpumask.html#ga4ff2d29f52775b12c7df1995754b524d">odp_cpumask_default_worker</a>(&amp;config-&gt;worker_mask, config-&gt;num_workers);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> PRS_OK;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> parse_result_t parse_options(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv, prog_config_t *config)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> opt;</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span>option longopts[] = {</div>
<div class="line">        { <span class="stringliteral">&quot;interfaces&quot;</span>, required_argument, NULL, <span class="charliteral">&#39;i&#39;</span> },</div>
<div class="line">        { <span class="stringliteral">&quot;mode&quot;</span>, required_argument, NULL, <span class="charliteral">&#39;m&#39;</span> },</div>
<div class="line">        { <span class="stringliteral">&quot;portmap&quot;</span>, required_argument, NULL, <span class="charliteral">&#39;p&#39;</span> },</div>
<div class="line">        { <span class="stringliteral">&quot;burst_rx&quot;</span>, required_argument, NULL, <span class="charliteral">&#39;b&#39;</span> },</div>
<div class="line">        { <span class="stringliteral">&quot;num_pkts&quot;</span>, required_argument, NULL, <span class="charliteral">&#39;n&#39;</span> },</div>
<div class="line">        { <span class="stringliteral">&quot;pkt_len&quot;</span>, required_argument, NULL, <span class="charliteral">&#39;l&#39;</span> },</div>
<div class="line">        { <span class="stringliteral">&quot;mtu&quot;</span>, required_argument, NULL, <span class="charliteral">&#39;M&#39;</span> },</div>
<div class="line">        { <span class="stringliteral">&quot;wait_link&quot;</span>,   required_argument, NULL, OPT_WAIT_LINK},</div>
<div class="line">        { <span class="stringliteral">&quot;promisc_mode&quot;</span>, no_argument, NULL, <span class="charliteral">&#39;P&#39;</span> },</div>
<div class="line">        { <span class="stringliteral">&quot;time&quot;</span>, required_argument, NULL, <span class="charliteral">&#39;t&#39;</span> },</div>
<div class="line">        { <span class="stringliteral">&quot;no_mac_mod&quot;</span>, no_argument, NULL, <span class="charliteral">&#39;s&#39;</span> },</div>
<div class="line">        { <span class="stringliteral">&quot;worker_count&quot;</span>, required_argument, NULL, <span class="charliteral">&#39;c&#39;</span> },</div>
<div class="line">        { <span class="stringliteral">&quot;help&quot;</span>, no_argument, NULL, <span class="charliteral">&#39;h&#39;</span> },</div>
<div class="line">        { NULL, 0, NULL, 0 }</div>
<div class="line">    };</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *shortopts = <span class="stringliteral">&quot;i:m:p:b:n:l:M:Pt:sc:h&quot;</span>;</div>
<div class="line"> </div>
<div class="line">    init_config(config);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span> (1) {</div>
<div class="line">        opt = getopt_long(argc, argv, shortopts, longopts, NULL);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (opt == -1)</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">switch</span> (opt) {</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;i&#39;</span>:</div>
<div class="line">            parse_interfaces(config, optarg);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;m&#39;</span>:</div>
<div class="line">            config-&gt;mode = atoi(optarg);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;p&#39;</span>:</div>
<div class="line">            parse_portmap(config, optarg);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;b&#39;</span>:</div>
<div class="line">            config-&gt;burst_size = atoi(optarg);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;n&#39;</span>:</div>
<div class="line">            config-&gt;num_pkts = atoi(optarg);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;l&#39;</span>:</div>
<div class="line">            config-&gt;pkt_len = atoi(optarg);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;M&#39;</span>:</div>
<div class="line">            config-&gt;mtu = atoi(optarg);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;P&#39;</span>:</div>
<div class="line">            config-&gt;is_promisc = 1U;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;t&#39;</span>:</div>
<div class="line">            config-&gt;runtime = atoi(optarg);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;s&#39;</span>:</div>
<div class="line">            config-&gt;is_mac_mod = <span class="keyword">false</span>;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> OPT_WAIT_LINK:</div>
<div class="line">            config-&gt;wait_sec = atoi(optarg);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;c&#39;</span>:</div>
<div class="line">            config-&gt;num_workers = atoi(optarg);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;h&#39;</span>:</div>
<div class="line">            print_usage(&amp;config-&gt;dyn_defs);</div>
<div class="line">            <span class="keywordflow">return</span> PRS_TERM;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;?&#39;</span>:</div>
<div class="line">        <span class="keywordflow">default</span>:</div>
<div class="line">            print_usage(&amp;config-&gt;dyn_defs);</div>
<div class="line">            <span class="keywordflow">return</span> PRS_NOK;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> check_options(config);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> parse_result_t setup_program(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv, prog_config_t *config)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span>sigaction action = { .sa_handler = terminate };</div>
<div class="line"> </div>
<div class="line">    <a name="a20"></a><a class="code" href="group__odp__atomic.html#ga0029015adacaadb06ee94ea67d00eece">odp_atomic_init_u32</a>(&amp;config-&gt;is_running, 1U);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (sigemptyset(&amp;action.sa_mask) == -1 || sigaddset(&amp;action.sa_mask, SIGINT) == -1 ||</div>
<div class="line">        sigaddset(&amp;action.sa_mask, SIGTERM) == -1 ||</div>
<div class="line">        sigaddset(&amp;action.sa_mask, SIGHUP) == -1 || sigaction(SIGINT, &amp;action, NULL) == -1 ||</div>
<div class="line">        sigaction(SIGTERM, &amp;action, NULL) == -1 || sigaction(SIGHUP, &amp;action, NULL) == -1) {</div>
<div class="line">        ODPH_ERR(<span class="stringliteral">&quot;Error installing signal handler\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> PRS_NOK;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> parse_options(argc, argv, config);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> bind_destinations(pktio_t *pktios, uint8_t num)</div>
<div class="line">{</div>
<div class="line">    pktio_t *pktio_src, *pktio_dst;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (uint8_t i = 0U; i &lt; num; ++i) {</div>
<div class="line">        pktio_src = &amp;pktios[i];</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span> (uint8_t j = 0U; j &lt; num; ++j) {</div>
<div class="line">            pktio_dst = &amp;pktios[j];</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (pktio_src-&gt;dst_name != NULL &amp;&amp;</div>
<div class="line">                strcmp(pktio_src-&gt;dst_name, pktio_dst-&gt;name) == 0) {</div>
<div class="line">                pktio_src-&gt;dst = pktio_dst;</div>
<div class="line">                <span class="comment">/* Copy the actual destination MAC as the &#39;dst_mac&#39; that was</span></div>
<div class="line"><span class="comment">                 * earlier saved to source&#39;s &#39;src_mac&#39;. */</span></div>
<div class="line">                pktio_dst-&gt;dst_mac = pktio_src-&gt;src_mac;</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> worker_pktio_t *get_destination(<span class="keyword">const</span> pktio_t *pktio, worker_pktio_t *pktios, uint8_t num)</div>
<div class="line">{</div>
<div class="line">    worker_pktio_t *w_pktio;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (uint8_t i = 0U; i &lt; num; ++i) {</div>
<div class="line">        w_pktio = &amp;pktios[i];</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (pktio == w_pktio-&gt;pktio-&gt;dst)</div>
<div class="line">            <span class="keywordflow">return</span> w_pktio;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> NULL;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> bind_workers(prog_config_t *config)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">const</span> uint32_t num_workers = config-&gt;num_workers, num_ifs = config-&gt;num_ifs;</div>
<div class="line">    uint32_t max, min, i = 0U, j = 0U, *work_idx_ptr, *pktio_idx_ptr;</div>
<div class="line">    worker_config_t *worker;</div>
<div class="line">    worker_pktio_t *w_pktio;</div>
<div class="line">    pktio_t *pktio;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (num_workers &gt;= num_ifs) {</div>
<div class="line">        max = num_workers;</div>
<div class="line">        min = num_ifs;</div>
<div class="line">        work_idx_ptr = &amp;i;</div>
<div class="line">        pktio_idx_ptr = &amp;j;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        max = num_ifs;</div>
<div class="line">        min = num_workers;</div>
<div class="line">        work_idx_ptr = &amp;j;</div>
<div class="line">        pktio_idx_ptr = &amp;i;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Assign workers to packet I/Os. Based on worker and packet I/O counts, the outer loop</span></div>
<div class="line"><span class="comment">     * will be looping the one with greater count and the inner with lesser count. */</span></div>
<div class="line">    <span class="keywordflow">for</span> (; i &lt; max; ++i) {</div>
<div class="line">        <span class="keywordflow">if</span> (j == min)</div>
<div class="line">            j = 0U;</div>
<div class="line"> </div>
<div class="line">        worker = &amp;config-&gt;worker_config[*work_idx_ptr];</div>
<div class="line">        worker-&gt;pktios[worker-&gt;num_ifs++].pktio = &amp;config-&gt;pktios[*pktio_idx_ptr];</div>
<div class="line">        ++j;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Check how many workers will end up polling a certain packet I/O input and increase input</span></div>
<div class="line"><span class="comment">     * queue count for that packet I/O accordingly. */</span></div>
<div class="line">    <span class="keywordflow">for</span> (i = 0U; i &lt; num_workers; ++i) {</div>
<div class="line">        worker = &amp;config-&gt;worker_config[i];</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span> (j = 0U; j &lt; worker-&gt;num_ifs; ++j) {</div>
<div class="line">            w_pktio = &amp;worker-&gt;pktios[j];</div>
<div class="line">            ++w_pktio-&gt;pktio-&gt;num_in_qs;</div>
<div class="line">            w_pktio-&gt;rx_poll = w_pktio-&gt;pktio-&gt;num_in_qs;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Check how many workers will end up outputting through a certain packet I/O and increase</span></div>
<div class="line"><span class="comment">     * output queue count for that packet I/O accordingly. */</span></div>
<div class="line">    <span class="keywordflow">for</span> (i = 0U; i &lt; num_ifs; ++i) {</div>
<div class="line">        pktio = &amp;config-&gt;pktios[i];</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span> (j = 0U; j &lt; num_workers; ++j) {</div>
<div class="line">            worker = &amp;config-&gt;worker_config[j];</div>
<div class="line">            w_pktio = get_destination(pktio, worker-&gt;pktios, worker-&gt;num_ifs);</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (w_pktio != NULL) {</div>
<div class="line">                ++pktio-&gt;num_out_qs;</div>
<div class="line">                w_pktio-&gt;tx_poll = pktio-&gt;num_out_qs;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <a class="code" href="group__odp__std.html#ga0b2a7ca83ccc7af0346db309d8c06d6f">odp_bool_t</a> setup_config(prog_config_t *config)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (config-&gt;mode != DIRECT) {</div>
<div class="line">        <span class="keywordflow">if</span> (<a name="a21"></a><a class="code" href="group__odp__scheduler.html#gaa1b51ebd46adeb6aa7805fccb00144df">odp_schedule_config</a>(NULL) &lt; 0) {</div>
<div class="line">            ODPH_ERR(<span class="stringliteral">&quot;Error initializing scheduler\n&quot;</span>);</div>
<div class="line">            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    bind_destinations(config-&gt;pktios, config-&gt;num_ifs);</div>
<div class="line">    bind_workers(config);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (uint32_t i = 0U; i &lt; config-&gt;num_workers; ++i)</div>
<div class="line">        config-&gt;worker_config[i].prog_config = config;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <a class="code" href="group__odp__scheduler.html#ga05c15f8076326b98fe2fc534dcc6b319">odp_schedule_sync_t</a> get_odp_sync(uint8_t mode)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">switch</span> (mode) {</div>
<div class="line">    <span class="keywordflow">case</span> SCHED_PARALLEL:</div>
<div class="line">        <span class="keywordflow">return</span> <a name="a22"></a><a class="code" href="group__odp__scheduler.html#ga2ba135fc660e1c050aa25ec6744ec584">ODP_SCHED_SYNC_PARALLEL</a>;</div>
<div class="line">    <span class="keywordflow">case</span> SCHED_ATOMIC:</div>
<div class="line">        <span class="keywordflow">return</span> <a name="a23"></a><a class="code" href="group__odp__scheduler.html#ga4b7efc5cfc27ef416312f5adb8bdc392">ODP_SCHED_SYNC_ATOMIC</a>;</div>
<div class="line">    <span class="keywordflow">case</span> SCHED_ORDERED:</div>
<div class="line">        <span class="keywordflow">return</span> <a name="a24"></a><a class="code" href="group__odp__scheduler.html#ga4df3696ebf4528ecc6e69ae3fff040fd">ODP_SCHED_SYNC_ORDERED</a>;</div>
<div class="line">    <span class="keywordflow">default</span>:</div>
<div class="line">        <span class="keywordflow">return</span> <a class="code" href="group__odp__scheduler.html#ga2ba135fc660e1c050aa25ec6744ec584">ODP_SCHED_SYNC_PARALLEL</a>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <a class="code" href="group__odp__std.html#ga0b2a7ca83ccc7af0346db309d8c06d6f">odp_bool_t</a> setup_pktios(prog_config_t *config)</div>
<div class="line">{</div>
<div class="line">    <a name="_a25"></a><a class="code" href="structodp__pool__param__t.html">odp_pool_param_t</a> pool_param;</div>
<div class="line">    pktio_t *pktio;</div>
<div class="line">    <a name="_a26"></a><a class="code" href="structodp__pktio__param__t.html">odp_pktio_param_t</a> pktio_param;</div>
<div class="line">    <a name="_a27"></a><a class="code" href="structodp__pktio__config__t.html">odp_pktio_config_t</a> pktio_config;</div>
<div class="line">    <a name="_a28"></a><a class="code" href="structodp__pktio__capability__t.html">odp_pktio_capability_t</a> capa;</div>
<div class="line">    uint32_t num_input_qs, num_output_qs;</div>
<div class="line">    <a name="_a29"></a><a class="code" href="structodp__pktin__queue__param__t.html">odp_pktin_queue_param_t</a> pktin_param;</div>
<div class="line">    <a name="_a30"></a><a class="code" href="structodp__pktout__queue__param__t.html">odp_pktout_queue_param_t</a> pktout_param;</div>
<div class="line">    <a class="code" href="struct__odp__abi__pktio__t.html">odp_pktio_t</a> pktios[MAX_IFS];</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span> *names[MAX_IFS];</div>
<div class="line">    <span class="keywordtype">int</span> ret;</div>
<div class="line"> </div>
<div class="line">    <a name="a31"></a><a class="code" href="group__odp__pool.html#ga3dd8bcfb920f81142e9fe27cfba24073">odp_pool_param_init</a>(&amp;pool_param);</div>
<div class="line">    pool_param.<a name="a32"></a><a class="code" href="structodp__pool__param__t.html#a7f9ca49dc21d48da0d80860c03faec1d">pkt</a>.<a name="a33"></a><a class="code" href="structodp__pool__param__t.html#ad400db5955445ee3d1fbb36df456e7f1">seg_len</a> = config-&gt;pkt_len;</div>
<div class="line">    pool_param.<a class="code" href="structodp__pool__param__t.html#a7f9ca49dc21d48da0d80860c03faec1d">pkt</a>.<a name="a34"></a><a class="code" href="structodp__pool__param__t.html#ac1ccfa50466f4afa9a9ab72f0bd315bf">len</a> = config-&gt;pkt_len;</div>
<div class="line">    pool_param.<a class="code" href="structodp__pool__param__t.html#a7f9ca49dc21d48da0d80860c03faec1d">pkt</a>.<a name="a35"></a><a class="code" href="structodp__pool__param__t.html#a3598b3a2496629cd45010c1c5e876250">num</a> = config-&gt;num_pkts;</div>
<div class="line">    pool_param.<a name="a36"></a><a class="code" href="structodp__pool__param__t.html#aac72ae142dd9736a287ce63d78b71c87">type</a> = <a name="a37"></a><a class="code" href="group__odp__pool.html#ggac47bb33bcde80614b4b358578eaa3082aa02b3a4e37094bd277b3dfe371450acd">ODP_POOL_PACKET</a>;</div>
<div class="line">    config-&gt;pool = <a name="a38"></a><a class="code" href="group__odp__pool.html#ga256909a276600c25ce11b52ae274632f">odp_pool_create</a>(PROG_NAME, &amp;pool_param);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (config-&gt;pool == <a class="code" href="group__odp__pool.html#gafca03b58412260da754042a92f8a5e04">ODP_POOL_INVALID</a>) {</div>
<div class="line">        ODPH_ERR(<span class="stringliteral">&quot;Error creating packet I/O pool\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (uint8_t i = 0U; i &lt; config-&gt;num_ifs; ++i) {</div>
<div class="line">        pktio = &amp;config-&gt;pktios[i];</div>
<div class="line">        <a name="a39"></a><a class="code" href="group__odp__packet__io.html#ga26d165a22d659770eba0c48543860881">odp_pktio_param_init</a>(&amp;pktio_param);</div>
<div class="line">        pktio_param.<a name="a40"></a><a class="code" href="structodp__pktio__param__t.html#a819cf5e2ef7df43a729cad159c022f4d">in_mode</a> = config-&gt;mode == DIRECT ?</div>
<div class="line">                    <a name="a41"></a><a class="code" href="group__odp__packet__io.html#ggaf5d539df6fc8af55d96357c784a54b8fa36f229784bc7dcef48203b02b3938357">ODP_PKTIN_MODE_DIRECT</a> : <a name="a42"></a><a class="code" href="group__odp__packet__io.html#ggaf5d539df6fc8af55d96357c784a54b8faa4f62db7acbe492a3b80f3f782a04dd5">ODP_PKTIN_MODE_SCHED</a>;</div>
<div class="line">        pktio_param.<a name="a43"></a><a class="code" href="structodp__pktio__param__t.html#afc226fd3904618950a0d1154ffa2fd8c">out_mode</a> = pktio-&gt;num_out_qs &gt; 0U ?</div>
<div class="line">                    <a name="a44"></a><a class="code" href="group__odp__packet__io.html#gga4e0c26e40b1166b07142302d12e8467da9e6184e8d605ce199cfa54d6c50153ff">ODP_PKTOUT_MODE_DIRECT</a> : <a name="a45"></a><a class="code" href="group__odp__packet__io.html#gga4e0c26e40b1166b07142302d12e8467daf34ccc9cab59f9ced90942c7810a149a">ODP_PKTOUT_MODE_DISABLED</a>;</div>
<div class="line">        pktio-&gt;handle = <a name="a46"></a><a class="code" href="group__odp__packet__io.html#ga7ae4f96ab09d468fff3623d90db306f9">odp_pktio_open</a>(pktio-&gt;name, config-&gt;pool, &amp;pktio_param);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (pktio-&gt;handle == <a class="code" href="group__odp__packet__io.html#ga9c7d0fcaec232b5503633e42ea29f6f5">ODP_PKTIO_INVALID</a>) {</div>
<div class="line">            ODPH_ERR(<span class="stringliteral">&quot;Error opening packet I/O (%s)\n&quot;</span>, pktio-&gt;name);</div>
<div class="line">            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <a name="a47"></a><a class="code" href="group__odp__packet__io.html#ga6a1c262ef999e8a73ac107c182b67d33">odp_pktio_config_init</a>(&amp;pktio_config);</div>
<div class="line">        pktio_config.<a name="a48"></a><a class="code" href="structodp__pktio__config__t.html#ab11707ba4258066a50f0e029fcc641f5">parser</a>.<a name="a49"></a><a class="code" href="structodp__pktio__parser__config__t.html#aff1f0d93e1f3cc93006aa613287378a2">layer</a> = <a name="a50"></a><a class="code" href="group__odp__packet.html#gga428cdbec9e7bc0bc19286f9564f9828ba5404cdbbe70c105fa88e1e0c146cce54">ODP_PROTO_LAYER_NONE</a>;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (<a name="a51"></a><a class="code" href="group__odp__packet__io.html#ga7f9faaf250d3d0d87478ff9f13680bf1">odp_pktio_config</a>(pktio-&gt;handle, &amp;pktio_config) &lt; 0) {</div>
<div class="line">            ODPH_ERR(<span class="stringliteral">&quot;Error configuring packet I/O (%s)\n&quot;</span>, pktio-&gt;name);</div>
<div class="line">            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (<a name="a52"></a><a class="code" href="group__odp__packet__io.html#gaba80778db7ec138977ed9e473bd1faaa">odp_pktio_capability</a>(pktio-&gt;handle, &amp;capa) &lt; 0) {</div>
<div class="line">            ODPH_ERR(<span class="stringliteral">&quot;Error querying packet I/O capabilities (%s)\n&quot;</span>, pktio-&gt;name);</div>
<div class="line">            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <a name="a53"></a><a class="code" href="group__odp__packet__io.html#ga055eabf5622e6745afbe9a1550ad1d78">odp_pktin_queue_param_init</a>(&amp;pktin_param);</div>
<div class="line">        num_input_qs = config-&gt;mode == DIRECT ? pktio-&gt;num_in_qs : config-&gt;num_workers;</div>
<div class="line">        num_input_qs = ODPH_MIN(num_input_qs, capa.<a name="a54"></a><a class="code" href="structodp__pktio__capability__t.html#a41331b30786ec8c9a4861dfe5b220b61">max_input_queues</a>);</div>
<div class="line">        num_input_qs = ODPH_MIN(num_input_qs, MAX_QS);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (num_input_qs &gt; 1) {</div>
<div class="line">            pktin_param.<a name="a55"></a><a class="code" href="structodp__pktin__queue__param__t.html#aa90bfc914603a90f7b1f7e7f0de07418">hash_enable</a> = <span class="keyword">true</span>;</div>
<div class="line">            pktin_param.<a name="a56"></a><a class="code" href="structodp__pktin__queue__param__t.html#a901146fbd15779b5665d3b75f3488e91">hash_proto</a>.<a name="a57"></a><a class="code" href="unionodp__pktin__hash__proto__t.html#a23793296c3a0299f69bdacc438ca3caf">proto</a>.<a name="a58"></a><a class="code" href="unionodp__pktin__hash__proto__t.html#a55c2478785f04914939ed859bdc16839">ipv4_udp</a> = 1U;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (config-&gt;mode == DIRECT) {</div>
<div class="line">            <span class="keywordflow">if</span> (num_input_qs == pktio-&gt;num_in_qs)</div>
<div class="line">                pktin_param.<a name="a59"></a><a class="code" href="structodp__pktin__queue__param__t.html#a1a15c51c24187f0f12e6482761ceb553">op_mode</a> = <a name="a60"></a><a class="code" href="group__odp__packet__io.html#ggacf2c32e76d9d0eef9106b5fdd68cedc8a1e3d825b302ee6213937172a6b54b140">ODP_PKTIO_OP_MT_UNSAFE</a>;</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">                ODPH_ERR(<span class="stringliteral">&quot;Warning: not enough input queues supported for MT &quot;</span></div>
<div class="line">                     <span class="stringliteral">&quot;unsafe operation (%s)\n&quot;</span>, pktio-&gt;name);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        pktin_param.<a name="a61"></a><a class="code" href="structodp__pktin__queue__param__t.html#a03e94f43a2e4379d7a16adb964a55ecd">num_queues</a> = num_input_qs;</div>
<div class="line">        pktin_param.<a name="a62"></a><a class="code" href="structodp__pktin__queue__param__t.html#a5a07d5e93f26a523103360c0bea4a304">queue_param</a>.<a name="a63"></a><a class="code" href="structodp__queue__param__t.html#a371701df4d20cee95978b9265c232e32">sched</a>.<a name="a64"></a><a class="code" href="structodp__schedule__param__t.html#a3f103771c3a9319c1ec998fa8724b8ac">prio</a> = <a name="a65"></a><a class="code" href="group__odp__scheduler.html#ga94034a7f591f3f549099aebb098f7e05">odp_schedule_default_prio</a>();</div>
<div class="line">        pktin_param.<a class="code" href="structodp__pktin__queue__param__t.html#a5a07d5e93f26a523103360c0bea4a304">queue_param</a>.<a class="code" href="structodp__queue__param__t.html#a371701df4d20cee95978b9265c232e32">sched</a>.<a name="a66"></a><a class="code" href="structodp__schedule__param__t.html#ad4ca09d63edb0cec36567c26688cea14">sync</a> = get_odp_sync(config-&gt;mode);</div>
<div class="line">        pktio-&gt;num_in_qs = num_input_qs;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (<a name="a67"></a><a class="code" href="group__odp__packet__io.html#gaf9dce6b2cc13ad715e777416dce88194">odp_pktin_queue_config</a>(pktio-&gt;handle, &amp;pktin_param) &lt; 0) {</div>
<div class="line">            ODPH_ERR(<span class="stringliteral">&quot;Error configuring packet I/O input queues (%s)\n&quot;</span>, pktio-&gt;name);</div>
<div class="line">            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (config-&gt;mode == DIRECT &amp;&amp;</div>
<div class="line">            <a name="a68"></a><a class="code" href="group__odp__packet__io.html#gaa9d5cad745c9744ce026412ccf33d019">odp_pktin_queue</a>(pktio-&gt;handle, pktio-&gt;in_qs, num_input_qs) !=</div>
<div class="line">            (<span class="keywordtype">int</span>)num_input_qs) {</div>
<div class="line">            ODPH_ERR(<span class="stringliteral">&quot;Error querying packet I/O input queues (%s)\n&quot;</span>, pktio-&gt;name);</div>
<div class="line">            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        num_output_qs = pktio-&gt;num_out_qs;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (num_output_qs &gt; 0U) {</div>
<div class="line">            <a name="a69"></a><a class="code" href="group__odp__packet__io.html#gab09475da05438a53b2d0fca96aab7515">odp_pktout_queue_param_init</a>(&amp;pktout_param);</div>
<div class="line">            num_output_qs = config-&gt;mode == DIRECT ?</div>
<div class="line">                        num_output_qs : config-&gt;num_workers;</div>
<div class="line">            num_output_qs = ODPH_MIN(num_output_qs, capa.<a name="a70"></a><a class="code" href="structodp__pktio__capability__t.html#a853625a680b37aeb0839c63ba04c632c">max_output_queues</a>);</div>
<div class="line">            num_output_qs = ODPH_MIN(num_output_qs, MAX_QS);</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (num_output_qs &gt;= pktio-&gt;num_out_qs)</div>
<div class="line">                pktout_param.<a name="a71"></a><a class="code" href="structodp__pktout__queue__param__t.html#a066fd0a2de0efca0056cd1529d78b06e">op_mode</a> = <a class="code" href="group__odp__packet__io.html#ggacf2c32e76d9d0eef9106b5fdd68cedc8a1e3d825b302ee6213937172a6b54b140">ODP_PKTIO_OP_MT_UNSAFE</a>;</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">                ODPH_ERR(<span class="stringliteral">&quot;Warning: not enough output queues supported for MT &quot;</span></div>
<div class="line">                     <span class="stringliteral">&quot;unsafe operation (%s)\n&quot;</span>, pktio-&gt;name);</div>
<div class="line"> </div>
<div class="line">            pktout_param.<a name="a72"></a><a class="code" href="structodp__pktout__queue__param__t.html#acd16e77991869797adb3da1bd41a1d0c">num_queues</a> = num_output_qs;</div>
<div class="line">            pktio-&gt;num_out_qs = num_output_qs;</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (<a name="a73"></a><a class="code" href="group__odp__packet__io.html#gafc2120185a8da74540feade78623f3b3">odp_pktout_queue_config</a>(pktio-&gt;handle, &amp;pktout_param) &lt; 0) {</div>
<div class="line">                ODPH_ERR(<span class="stringliteral">&quot;Error configuring packet I/O output queues (%s)\n&quot;</span>,</div>
<div class="line">                     pktio-&gt;name);</div>
<div class="line">                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (<a name="a74"></a><a class="code" href="group__odp__packet__io.html#ga41a3ebb7ac489b85a5f7560e4d4f77f5">odp_pktout_queue</a>(pktio-&gt;handle, pktio-&gt;out_qs, num_output_qs) !=</div>
<div class="line">            (<span class="keywordtype">int</span>)num_output_qs) {</div>
<div class="line">                ODPH_ERR(<span class="stringliteral">&quot;Error querying packet I/O output queues (%s)\n&quot;</span>,</div>
<div class="line">                     pktio-&gt;name);</div>
<div class="line">                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (config-&gt;mtu &gt; 0U) {</div>
<div class="line">            <span class="keywordflow">if</span> (capa.<a name="a75"></a><a class="code" href="structodp__pktio__capability__t.html#a2d4329604c32dda9539d9ea9831b2291">set_op</a>.<a name="a76"></a><a class="code" href="unionodp__pktio__set__op__t.html#a63dcf0f49f84a9678c00f5581e2c75cc">op</a>.<a name="a77"></a><a class="code" href="unionodp__pktio__set__op__t.html#a47fb7792a712983f7a670e24ef9cd08a">maxlen</a> == 0U) {</div>
<div class="line">                config-&gt;mtu = 0U;</div>
<div class="line">                ODPH_ERR(<span class="stringliteral">&quot;MTU setting not supported (%s)\n&quot;</span>, pktio-&gt;name);</div>
<div class="line">                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (config-&gt;mtu &lt; capa.<a name="a78"></a><a class="code" href="structodp__pktio__capability__t.html#a22b3144c61395432e265ac751a269304">maxlen</a>.<a name="a79"></a><a class="code" href="structodp__pktio__capability__t.html#aac6facf8d541758a0d336dc6e8842438">min_input</a> ||</div>
<div class="line">                config-&gt;mtu &gt; capa.<a class="code" href="structodp__pktio__capability__t.html#a22b3144c61395432e265ac751a269304">maxlen</a>.<a name="a80"></a><a class="code" href="structodp__pktio__capability__t.html#a5243a96efbd4561947e2dd6ebf00a1dc">max_input</a> ||</div>
<div class="line">                config-&gt;mtu &lt; capa.<a class="code" href="structodp__pktio__capability__t.html#a22b3144c61395432e265ac751a269304">maxlen</a>.<a name="a81"></a><a class="code" href="structodp__pktio__capability__t.html#a741be7a79f65ef773e6bb9cbf305eb4c">min_output</a> ||</div>
<div class="line">                config-&gt;mtu &gt; capa.<a class="code" href="structodp__pktio__capability__t.html#a22b3144c61395432e265ac751a269304">maxlen</a>.<a name="a82"></a><a class="code" href="structodp__pktio__capability__t.html#a2f6c0f1389d93f2da0be4a14f8a1fd5b">max_output</a>) {</div>
<div class="line">                config-&gt;mtu = 0U;</div>
<div class="line">                ODPH_ERR(<span class="stringliteral">&quot;Invalid MTU requested: %u (input min: %u, input max: %u,&quot;</span></div>
<div class="line">                     <span class="stringliteral">&quot; output min: %u, output max: %u, %s)\n&quot;</span>,</div>
<div class="line">                     config-&gt;mtu, capa.<a class="code" href="structodp__pktio__capability__t.html#a22b3144c61395432e265ac751a269304">maxlen</a>.<a class="code" href="structodp__pktio__capability__t.html#aac6facf8d541758a0d336dc6e8842438">min_input</a>, capa.<a class="code" href="structodp__pktio__capability__t.html#a22b3144c61395432e265ac751a269304">maxlen</a>.<a class="code" href="structodp__pktio__capability__t.html#a5243a96efbd4561947e2dd6ebf00a1dc">max_input</a>,</div>
<div class="line">                     capa.<a class="code" href="structodp__pktio__capability__t.html#a22b3144c61395432e265ac751a269304">maxlen</a>.<a class="code" href="structodp__pktio__capability__t.html#a741be7a79f65ef773e6bb9cbf305eb4c">min_output</a>, capa.<a class="code" href="structodp__pktio__capability__t.html#a22b3144c61395432e265ac751a269304">maxlen</a>.<a class="code" href="structodp__pktio__capability__t.html#a2f6c0f1389d93f2da0be4a14f8a1fd5b">max_output</a>,</div>
<div class="line">                     pktio-&gt;name);</div>
<div class="line">                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            config-&gt;orig_in_mtu = <a name="a83"></a><a class="code" href="group__odp__packet__io.html#ga2efe22ecde5d8c72a27ff213451e4fe3">odp_pktin_maxlen</a>(pktio-&gt;handle);</div>
<div class="line">            config-&gt;orig_out_mtu = <a name="a84"></a><a class="code" href="group__odp__packet__io.html#ga3373b50fe0531f6c58f25d51972f414e">odp_pktout_maxlen</a>(pktio-&gt;handle);</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (<a name="a85"></a><a class="code" href="group__odp__packet__io.html#ga4efd726f993e7fe99d44f04f5ebe2141">odp_pktio_maxlen_set</a>(pktio-&gt;handle, config-&gt;mtu, config-&gt;mtu) &lt; 0) {</div>
<div class="line">                config-&gt;mtu = 0U;</div>
<div class="line">                ODPH_ERR(<span class="stringliteral">&quot;Error setting MTU (%s)\n&quot;</span>, pktio-&gt;name);</div>
<div class="line">                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (config-&gt;is_promisc) {</div>
<div class="line">            <span class="keywordflow">if</span> (capa.<a class="code" href="structodp__pktio__capability__t.html#a2d4329604c32dda9539d9ea9831b2291">set_op</a>.<a class="code" href="unionodp__pktio__set__op__t.html#a63dcf0f49f84a9678c00f5581e2c75cc">op</a>.<a name="a86"></a><a class="code" href="unionodp__pktio__set__op__t.html#ae821914c6895a2cfbea766f6c70d48bc">promisc_mode</a> == 0U) {</div>
<div class="line">                config-&gt;is_promisc = 0U;</div>
<div class="line">                ODPH_ERR(<span class="stringliteral">&quot;Promiscuous mode setting not supported (%s)\n&quot;</span>,</div>
<div class="line">                     pktio-&gt;name);</div>
<div class="line">                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            ret = <a name="a87"></a><a class="code" href="group__odp__packet__io.html#ga2c232afd3b0c7afd7e9685a0957b84bd">odp_pktio_promisc_mode</a>(pktio-&gt;handle);</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (<a name="a88"></a><a class="code" href="group__odp__packet__io.html#ga506ab30c6737e9fbd815f0044396893b">odp_pktio_promisc_mode_set</a>(pktio-&gt;handle, <span class="keyword">true</span>) &lt; 0) {</div>
<div class="line">                config-&gt;is_promisc = 0U;</div>
<div class="line">                ODPH_ERR(<span class="stringliteral">&quot;Error setting promiscuous mode (%s)\n&quot;</span>, pktio-&gt;name);</div>
<div class="line">                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            config-&gt;orig_is_promisc = ret &lt; 0 ? 1U : (uint8_t)ret;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (<a name="a89"></a><a class="code" href="group__odp__packet__io.html#ga04d67c951aff803cf718940e0783ef8f">odp_pktio_mac_addr</a>(pktio-&gt;handle, pktio-&gt;src_mac.addr, ODPH_ETHADDR_LEN) &lt; 0) {</div>
<div class="line">            ODPH_ERR(<span class="stringliteral">&quot;Error querying MAC address (%s)\n&quot;</span>, pktio-&gt;name);</div>
<div class="line">            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (<a name="a90"></a><a class="code" href="group__odp__packet__io.html#ga9a5746e73616297fabb8d4caaa6d0333">odp_pktio_start</a>(pktio-&gt;handle) &lt; 0) {</div>
<div class="line">            ODPH_ERR(<span class="stringliteral">&quot;Error starting packet I/O (%s)\n&quot;</span>, pktio-&gt;name);</div>
<div class="line">            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        pktios[i] = pktio-&gt;handle;</div>
<div class="line">        names[i] = pktio-&gt;name;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Wait until all links are up */</span></div>
<div class="line">    <span class="keywordflow">if</span> (config-&gt;wait_sec &amp;&amp; pktio_common_check_link_status_wait(pktios, names, config-&gt;num_ifs,</div>
<div class="line">                                    config-&gt;wait_sec) == -1)</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"> </div>
<div class="line">    pktio_common_print_link_info_multi(pktios, names, config-&gt;num_ifs);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> print_mac(odph_ethaddr_t mac)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; ODPH_ETHADDR_LEN; ++i)</div>
<div class="line">        printf(<span class="stringliteral">&quot;%02x%s&quot;</span>, mac.addr[i], i &lt; ODPH_ETHADDR_LEN - 1 ? <span class="stringliteral">&quot;:&quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> print_rx_workers(pktio_t *pktio, prog_config_t *config)</div>
<div class="line">{</div>
<div class="line">    worker_config_t *worker;</div>
<div class="line">    <span class="keyword">const</span> uint32_t num_workers = config-&gt;num_workers;</div>
<div class="line">    uint32_t ids[num_workers], num_ids = 0U;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (config-&gt;mode != DIRECT) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;(scheduled)\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (uint32_t i = 0U; i &lt; num_workers; ++i) {</div>
<div class="line">        worker = &amp;config-&gt;worker_config[i];</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span> (uint8_t j = 0U; j &lt; worker-&gt;num_ifs; ++j) {</div>
<div class="line">            <span class="keywordflow">if</span> (pktio == worker-&gt;pktios[j].pktio) {</div>
<div class="line">                ids[num_ids++] = i;</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (uint32_t i = 0U; i &lt; num_ids; ++i)</div>
<div class="line">        printf(<span class="stringliteral">&quot;%u%s&quot;</span>, ids[i], i &lt; num_ids - 1U ? <span class="stringliteral">&quot;, &quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> print_tx_workers(pktio_t *pktio, prog_config_t *config)</div>
<div class="line">{</div>
<div class="line">    worker_config_t *worker;</div>
<div class="line">    <span class="keyword">const</span> uint32_t num_workers = config-&gt;num_workers;</div>
<div class="line">    uint32_t ids[num_workers], num_ids = 0U;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (config-&gt;mode != DIRECT) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;(scheduled)\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (uint32_t i = 0U; i &lt; num_workers; ++i) {</div>
<div class="line">        worker = &amp;config-&gt;worker_config[i];</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (get_destination(pktio, worker-&gt;pktios, worker-&gt;num_ifs) != NULL)</div>
<div class="line">            ids[num_ids++] = i;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (num_ids == 0U)</div>
<div class="line">        printf(<span class="stringliteral">&quot;-&quot;</span>);</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">        <span class="keywordflow">for</span> (uint32_t i = 0U; i &lt; num_ids; ++i)</div>
<div class="line">            printf(<span class="stringliteral">&quot;%u%s&quot;</span>, ids[i], i &lt; num_ids - 1U ? <span class="stringliteral">&quot;, &quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <a class="code" href="group__odp__std.html#ga0b2a7ca83ccc7af0346db309d8c06d6f">odp_bool_t</a> print_summary(prog_config_t *config)</div>
<div class="line">{</div>
<div class="line">    pktio_t *pktio;</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;\nprogram options:\n================\n\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  interfaces:\n\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (uint8_t i = 0U; i &lt; config-&gt;num_ifs; ++i) {</div>
<div class="line">        pktio = &amp;config-&gt;pktios[i];</div>
<div class="line">        printf(<span class="stringliteral">&quot;    %s:\n\n&quot;</span></div>
<div class="line">               <span class="stringliteral">&quot;      handle:        0x%&quot;</span> PRIx64 <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line">               <span class="stringliteral">&quot;      src MAC:       &quot;</span>, pktio-&gt;name, <a name="a91"></a><a class="code" href="group__odp__packet__io.html#gadb1dbe3dd66d31e15ec3d3e53880a446">odp_pktio_to_u64</a>(pktio-&gt;handle));</div>
<div class="line">        print_mac(pktio-&gt;src_mac);</div>
<div class="line">        printf(<span class="stringliteral">&quot;      dst MAC:       &quot;</span>);</div>
<div class="line">        print_mac(pktio-&gt;dst_mac);</div>
<div class="line">        printf(<span class="stringliteral">&quot;      dst name:      %s\n&quot;</span></div>
<div class="line">               <span class="stringliteral">&quot;      input queues:  %u\n&quot;</span></div>
<div class="line">               <span class="stringliteral">&quot;      output queues: %u\n&quot;</span>, pktio-&gt;dst-&gt;name, pktio-&gt;num_in_qs,</div>
<div class="line">               pktio-&gt;num_out_qs);</div>
<div class="line">        printf(<span class="stringliteral">&quot;      rx worker IDs: &quot;</span>);</div>
<div class="line">        print_rx_workers(pktio, config);</div>
<div class="line">        printf(<span class="stringliteral">&quot;      tx worker IDs: &quot;</span>);</div>
<div class="line">        print_tx_workers(pktio, config);</div>
<div class="line">        printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;  mode:             %s\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  burst size:       %u\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  pool size:        %u\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  packet length:    %u\n&quot;</span>, config-&gt;mode == DIRECT ?</div>
<div class="line">            <span class="stringliteral">&quot;direct&quot;</span> : config-&gt;mode == SCHED_PARALLEL ?</div>
<div class="line">            <span class="stringliteral">&quot;scheduled-parallel&quot;</span> : config-&gt;mode == SCHED_ATOMIC ?</div>
<div class="line">            <span class="stringliteral">&quot;scheduled-atomic&quot;</span> : <span class="stringliteral">&quot;scheduled-ordered&quot;</span>,</div>
<div class="line">           config-&gt;burst_size, config-&gt;num_pkts, config-&gt;pkt_len);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (config-&gt;mtu &gt; 0U)</div>
<div class="line">        printf(<span class="stringliteral">&quot;  MTU:              %u\n&quot;</span>, config-&gt;mtu);</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;  promiscuous mode: %s\n&quot;</span>, config-&gt;is_promisc ? <span class="stringliteral">&quot;enabled&quot;</span> : <span class="stringliteral">&quot;disabled&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (config-&gt;runtime &gt; 0U)</div>
<div class="line">        printf(<span class="stringliteral">&quot;  runtime:          %u sec\n&quot;</span>, config-&gt;runtime);</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">        printf(<span class="stringliteral">&quot;  runtime:          infinite\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;  MAC modification: %s\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  workers:          %u\n\n&quot;</span>, config-&gt;is_mac_mod ? <span class="stringliteral">&quot;enabled&quot;</span> : <span class="stringliteral">&quot;disabled&quot;</span>,</div>
<div class="line">           config-&gt;num_workers);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> dir_fwd_tbl_t build_dir_fwd_tbl(worker_pktio_t *pktios, uint8_t num_ifs)</div>
<div class="line">{</div>
<div class="line">    worker_pktio_t *w_pktio;</div>
<div class="line">    pktio_t *pktio;</div>
<div class="line">    dir_fwd_tbl_t tbl;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (uint8_t i = 0U; i &lt; num_ifs; ++i) {</div>
<div class="line">        w_pktio = &amp;pktios[i];</div>
<div class="line">        pktio = w_pktio-&gt;pktio;</div>
<div class="line">        tbl.tbl[i].pktin = pktio-&gt;in_qs[w_pktio-&gt;rx_poll % pktio-&gt;num_in_qs];</div>
<div class="line">        tbl.tbl[i].pktout = pktio-&gt;dst-&gt;out_qs[w_pktio-&gt;tx_poll % pktio-&gt;dst-&gt;num_out_qs];</div>
<div class="line">        tbl.tbl[i].src_mac = pktio-&gt;dst-&gt;src_mac;</div>
<div class="line">        tbl.tbl[i].dst_mac = pktio-&gt;dst-&gt;dst_mac;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> tbl;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> run_direct_single_if(<span class="keywordtype">void</span> *args)</div>
<div class="line">{</div>
<div class="line">    worker_config_t *config = args;</div>
<div class="line">    prog_config_t *prog_config = config-&gt;prog_config;</div>
<div class="line">    <span class="keyword">const</span> uint32_t burst_size = prog_config-&gt;burst_size;</div>
<div class="line">    <span class="keyword">const</span> dir_fwd_tbl_t tbl = build_dir_fwd_tbl(config-&gt;pktios, config-&gt;num_ifs);</div>
<div class="line">    <a name="_a92"></a><a class="code" href="structodp__time__s.html">odp_time_t</a> start;</div>
<div class="line">    <a class="code" href="structodp__atomic__u32__s.html">odp_atomic_u32_t</a> *is_running = &amp;prog_config-&gt;is_running;</div>
<div class="line">    <span class="keyword">const</span> <a class="code" href="structodp__pktin__queue__s.html">odp_pktin_queue_t</a> pktin = tbl.tbl[0U].pktin;</div>
<div class="line">    <a name="_a93"></a><a class="code" href="struct__odp__abi__packet__t.html">odp_packet_t</a> pkts[burst_size];</div>
<div class="line">    <span class="keywordtype">int</span> num_recv, num_sent, diff;</div>
<div class="line">    <span class="keyword">const</span> <a class="code" href="structodp__pktout__queue__s.html">odp_pktout_queue_t</a> pktout = tbl.tbl[0U].pktout;</div>
<div class="line">    uint64_t tx = 0U, tx_drops = 0U;</div>
<div class="line">    stats_t *stats = &amp;config-&gt;stats;</div>
<div class="line"> </div>
<div class="line">    <a name="a94"></a><a class="code" href="group__odp__barrier.html#ga97c8f84490e816330f96155acf0b4b77">odp_barrier_wait</a>(&amp;prog_config-&gt;init_barrier);</div>
<div class="line">    start = <a name="a95"></a><a class="code" href="group__odp__time.html#gabe857e90283c71df90130d1775ceb6c7">odp_time_local_strict</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span> (<a name="a96"></a><a class="code" href="group__odp__atomic.html#ga1ebc0fa6d690c24bd2bcc38bcb9a2276">odp_atomic_load_u32</a>(is_running)) {</div>
<div class="line">        num_recv = <a name="a97"></a><a class="code" href="group__odp__packet__io.html#gab3dd2331f6ba05e074333fd5badae340">odp_pktin_recv</a>(pktin, pkts, burst_size);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (<a name="a98"></a><a class="code" href="group__odp__compiler__optim.html#ga2b29f27f12b751250b471aa9c14c57c8">odp_unlikely</a>(num_recv &lt;= 0))</div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line"> </div>
<div class="line">        num_sent = <a name="a99"></a><a class="code" href="group__odp__packet__io.html#gacb5db3a908775522e316c8b8ccb36498">odp_pktout_send</a>(pktout, pkts, num_recv);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group__odp__compiler__optim.html#ga2b29f27f12b751250b471aa9c14c57c8">odp_unlikely</a>(num_sent &lt; num_recv)) {</div>
<div class="line">            num_sent = num_sent &lt; 0 ? 0 : num_sent;</div>
<div class="line">            diff = num_recv - num_sent;</div>
<div class="line">            <a name="a100"></a><a class="code" href="group__odp__packet.html#gad190c5b094a0406b9d86da03f10c15cb">odp_packet_free_multi</a>(&amp;pkts[num_sent], diff);</div>
<div class="line">            tx_drops += diff;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        tx += num_sent;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    stats-&gt;tm_ns = <a name="a101"></a><a class="code" href="group__odp__time.html#gada453827b812a8fae651e9d93308e959">odp_time_diff_ns</a>(<a class="code" href="group__odp__time.html#gabe857e90283c71df90130d1775ceb6c7">odp_time_local_strict</a>(), start);</div>
<div class="line">    stats-&gt;tx = tx;</div>
<div class="line">    stats-&gt;tx_drops = tx_drops;</div>
<div class="line">    <a class="code" href="group__odp__barrier.html#ga97c8f84490e816330f96155acf0b4b77">odp_barrier_wait</a>(&amp;prog_config-&gt;term_barrier);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> run_direct_single_if_mac_mod(<span class="keywordtype">void</span> *args)</div>
<div class="line">{</div>
<div class="line">    worker_config_t *config = args;</div>
<div class="line">    prog_config_t *prog_config = config-&gt;prog_config;</div>
<div class="line">    <span class="keyword">const</span> uint32_t burst_size = prog_config-&gt;burst_size;</div>
<div class="line">    <span class="keyword">const</span> dir_fwd_tbl_t tbl = build_dir_fwd_tbl(config-&gt;pktios, config-&gt;num_ifs);</div>
<div class="line">    <a class="code" href="structodp__time__s.html">odp_time_t</a> start;</div>
<div class="line">    <a class="code" href="structodp__atomic__u32__s.html">odp_atomic_u32_t</a> *is_running = &amp;prog_config-&gt;is_running;</div>
<div class="line">    <span class="keyword">const</span> <a class="code" href="structodp__pktin__queue__s.html">odp_pktin_queue_t</a> pktin = tbl.tbl[0U].pktin;</div>
<div class="line">    <a class="code" href="struct__odp__abi__packet__t.html">odp_packet_t</a> pkts[burst_size];</div>
<div class="line">    <span class="keywordtype">int</span> num_recv, num_sent, diff;</div>
<div class="line">    <span class="keyword">const</span> odph_ethaddr_t src_mac = tbl.tbl[0U].src_mac, dst_mac = tbl.tbl[0U].dst_mac;</div>
<div class="line">    odph_ethhdr_t *eth;</div>
<div class="line">    <span class="keyword">const</span> <a class="code" href="structodp__pktout__queue__s.html">odp_pktout_queue_t</a> pktout = tbl.tbl[0U].pktout;</div>
<div class="line">    uint64_t tx = 0U, tx_drops = 0U;</div>
<div class="line">    stats_t *stats = &amp;config-&gt;stats;</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="group__odp__barrier.html#ga97c8f84490e816330f96155acf0b4b77">odp_barrier_wait</a>(&amp;prog_config-&gt;init_barrier);</div>
<div class="line">    start = <a class="code" href="group__odp__time.html#gabe857e90283c71df90130d1775ceb6c7">odp_time_local_strict</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span> (<a class="code" href="group__odp__atomic.html#ga1ebc0fa6d690c24bd2bcc38bcb9a2276">odp_atomic_load_u32</a>(is_running)) {</div>
<div class="line">        num_recv = <a class="code" href="group__odp__packet__io.html#gab3dd2331f6ba05e074333fd5badae340">odp_pktin_recv</a>(pktin, pkts, burst_size);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group__odp__compiler__optim.html#ga2b29f27f12b751250b471aa9c14c57c8">odp_unlikely</a>(num_recv &lt;= 0))</div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0U; i &lt; num_recv; ++i) {</div>
<div class="line">            eth = <a name="a102"></a><a class="code" href="group__odp__packet.html#ga433ba21e3c83c6d4d9831c9e732b63de">odp_packet_data</a>(pkts[i]);</div>
<div class="line">            eth-&gt;src = src_mac;</div>
<div class="line">            eth-&gt;dst = dst_mac;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        num_sent = <a class="code" href="group__odp__packet__io.html#gacb5db3a908775522e316c8b8ccb36498">odp_pktout_send</a>(pktout, pkts, num_recv);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group__odp__compiler__optim.html#ga2b29f27f12b751250b471aa9c14c57c8">odp_unlikely</a>(num_sent &lt; num_recv)) {</div>
<div class="line">            num_sent = num_sent &lt; 0 ? 0 : num_sent;</div>
<div class="line">            diff = num_recv - num_sent;</div>
<div class="line">            <a class="code" href="group__odp__packet.html#gad190c5b094a0406b9d86da03f10c15cb">odp_packet_free_multi</a>(&amp;pkts[num_sent], diff);</div>
<div class="line">            tx_drops += diff;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        tx += num_sent;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    stats-&gt;tm_ns = <a class="code" href="group__odp__time.html#gada453827b812a8fae651e9d93308e959">odp_time_diff_ns</a>(<a class="code" href="group__odp__time.html#gabe857e90283c71df90130d1775ceb6c7">odp_time_local_strict</a>(), start);</div>
<div class="line">    stats-&gt;tx = tx;</div>
<div class="line">    stats-&gt;tx_drops = tx_drops;</div>
<div class="line">    <a class="code" href="group__odp__barrier.html#ga97c8f84490e816330f96155acf0b4b77">odp_barrier_wait</a>(&amp;prog_config-&gt;term_barrier);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> run_direct_multi_if(<span class="keywordtype">void</span> *args)</div>
<div class="line">{</div>
<div class="line">    worker_config_t *config = args;</div>
<div class="line">    prog_config_t *prog_config = config-&gt;prog_config;</div>
<div class="line">    <span class="keyword">const</span> uint8_t num_ifs = config-&gt;num_ifs;</div>
<div class="line">    <span class="keyword">const</span> uint32_t burst_size = prog_config-&gt;burst_size;</div>
<div class="line">    <span class="keyword">const</span> dir_fwd_tbl_t tbl = build_dir_fwd_tbl(config-&gt;pktios, num_ifs);</div>
<div class="line">    <a class="code" href="structodp__time__s.html">odp_time_t</a> start;</div>
<div class="line">    <a class="code" href="structodp__atomic__u32__s.html">odp_atomic_u32_t</a> *is_running = &amp;prog_config-&gt;is_running;</div>
<div class="line">    uint8_t i = 0U;</div>
<div class="line">    <a class="code" href="structodp__pktin__queue__s.html">odp_pktin_queue_t</a> pktin;</div>
<div class="line">    <a class="code" href="struct__odp__abi__packet__t.html">odp_packet_t</a> pkts[burst_size];</div>
<div class="line">    <span class="keywordtype">int</span> num_recv, num_sent, diff;</div>
<div class="line">    <a class="code" href="structodp__pktout__queue__s.html">odp_pktout_queue_t</a> pktout;</div>
<div class="line">    uint64_t tx = 0U, tx_drops = 0U;</div>
<div class="line">    stats_t *stats = &amp;config-&gt;stats;</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="group__odp__barrier.html#ga97c8f84490e816330f96155acf0b4b77">odp_barrier_wait</a>(&amp;prog_config-&gt;init_barrier);</div>
<div class="line">    start = <a class="code" href="group__odp__time.html#gabe857e90283c71df90130d1775ceb6c7">odp_time_local_strict</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span> (<a class="code" href="group__odp__atomic.html#ga1ebc0fa6d690c24bd2bcc38bcb9a2276">odp_atomic_load_u32</a>(is_running)) {</div>
<div class="line">        pktin = tbl.tbl[i].pktin;</div>
<div class="line">        pktout = tbl.tbl[i].pktout;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (++i == num_ifs)</div>
<div class="line">            i = 0U;</div>
<div class="line"> </div>
<div class="line">        num_recv = <a class="code" href="group__odp__packet__io.html#gab3dd2331f6ba05e074333fd5badae340">odp_pktin_recv</a>(pktin, pkts, burst_size);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group__odp__compiler__optim.html#ga2b29f27f12b751250b471aa9c14c57c8">odp_unlikely</a>(num_recv &lt;= 0))</div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line"> </div>
<div class="line">        num_sent = <a class="code" href="group__odp__packet__io.html#gacb5db3a908775522e316c8b8ccb36498">odp_pktout_send</a>(pktout, pkts, num_recv);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group__odp__compiler__optim.html#ga2b29f27f12b751250b471aa9c14c57c8">odp_unlikely</a>(num_sent &lt; num_recv)) {</div>
<div class="line">            num_sent = num_sent &lt; 0 ? 0 : num_sent;</div>
<div class="line">            diff = num_recv - num_sent;</div>
<div class="line">            <a class="code" href="group__odp__packet.html#gad190c5b094a0406b9d86da03f10c15cb">odp_packet_free_multi</a>(&amp;pkts[num_sent], diff);</div>
<div class="line">            tx_drops += diff;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        tx += num_sent;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    stats-&gt;tm_ns = <a class="code" href="group__odp__time.html#gada453827b812a8fae651e9d93308e959">odp_time_diff_ns</a>(<a class="code" href="group__odp__time.html#gabe857e90283c71df90130d1775ceb6c7">odp_time_local_strict</a>(), start);</div>
<div class="line">    stats-&gt;tx = tx;</div>
<div class="line">    stats-&gt;tx_drops = tx_drops;</div>
<div class="line">    <a class="code" href="group__odp__barrier.html#ga97c8f84490e816330f96155acf0b4b77">odp_barrier_wait</a>(&amp;prog_config-&gt;term_barrier);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> run_direct_multi_if_mac_mod(<span class="keywordtype">void</span> *args)</div>
<div class="line">{</div>
<div class="line">    worker_config_t *config = args;</div>
<div class="line">    prog_config_t *prog_config = config-&gt;prog_config;</div>
<div class="line">    <span class="keyword">const</span> uint8_t num_ifs = config-&gt;num_ifs;</div>
<div class="line">    <span class="keyword">const</span> uint32_t burst_size = prog_config-&gt;burst_size;</div>
<div class="line">    <span class="keyword">const</span> dir_fwd_tbl_t tbl = build_dir_fwd_tbl(config-&gt;pktios, num_ifs);</div>
<div class="line">    <a class="code" href="structodp__time__s.html">odp_time_t</a> start;</div>
<div class="line">    <a class="code" href="structodp__atomic__u32__s.html">odp_atomic_u32_t</a> *is_running = &amp;prog_config-&gt;is_running;</div>
<div class="line">    uint8_t i = 0U;</div>
<div class="line">    <a class="code" href="structodp__pktin__queue__s.html">odp_pktin_queue_t</a> pktin;</div>
<div class="line">    <a class="code" href="struct__odp__abi__packet__t.html">odp_packet_t</a> pkts[burst_size];</div>
<div class="line">    <span class="keywordtype">int</span> num_recv, num_sent, diff;</div>
<div class="line">    odph_ethaddr_t src_mac, dst_mac;</div>
<div class="line">    odph_ethhdr_t *eth;</div>
<div class="line">    <a class="code" href="structodp__pktout__queue__s.html">odp_pktout_queue_t</a> pktout;</div>
<div class="line">    uint64_t tx = 0U, tx_drops = 0U;</div>
<div class="line">    stats_t *stats = &amp;config-&gt;stats;</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="group__odp__barrier.html#ga97c8f84490e816330f96155acf0b4b77">odp_barrier_wait</a>(&amp;prog_config-&gt;init_barrier);</div>
<div class="line">    start = <a class="code" href="group__odp__time.html#gabe857e90283c71df90130d1775ceb6c7">odp_time_local_strict</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span> (<a class="code" href="group__odp__atomic.html#ga1ebc0fa6d690c24bd2bcc38bcb9a2276">odp_atomic_load_u32</a>(is_running)) {</div>
<div class="line">        pktin = tbl.tbl[i].pktin;</div>
<div class="line">        pktout = tbl.tbl[i].pktout;</div>
<div class="line">        src_mac = tbl.tbl[i].src_mac;</div>
<div class="line">        dst_mac = tbl.tbl[i].dst_mac;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (++i == num_ifs)</div>
<div class="line">            i = 0U;</div>
<div class="line"> </div>
<div class="line">        num_recv = <a class="code" href="group__odp__packet__io.html#gab3dd2331f6ba05e074333fd5badae340">odp_pktin_recv</a>(pktin, pkts, burst_size);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group__odp__compiler__optim.html#ga2b29f27f12b751250b471aa9c14c57c8">odp_unlikely</a>(num_recv &lt;= 0))</div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0U; j &lt; num_recv; ++j) {</div>
<div class="line">            eth = <a class="code" href="group__odp__packet.html#ga433ba21e3c83c6d4d9831c9e732b63de">odp_packet_data</a>(pkts[j]);</div>
<div class="line">            eth-&gt;src = src_mac;</div>
<div class="line">            eth-&gt;dst = dst_mac;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        num_sent = <a class="code" href="group__odp__packet__io.html#gacb5db3a908775522e316c8b8ccb36498">odp_pktout_send</a>(pktout, pkts, num_recv);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group__odp__compiler__optim.html#ga2b29f27f12b751250b471aa9c14c57c8">odp_unlikely</a>(num_sent &lt; num_recv)) {</div>
<div class="line">            num_sent = num_sent &lt; 0 ? 0 : num_sent;</div>
<div class="line">            diff = num_recv - num_sent;</div>
<div class="line">            <a class="code" href="group__odp__packet.html#gad190c5b094a0406b9d86da03f10c15cb">odp_packet_free_multi</a>(&amp;pkts[num_sent], diff);</div>
<div class="line">            tx_drops += diff;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        tx += num_sent;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    stats-&gt;tm_ns = <a class="code" href="group__odp__time.html#gada453827b812a8fae651e9d93308e959">odp_time_diff_ns</a>(<a class="code" href="group__odp__time.html#gabe857e90283c71df90130d1775ceb6c7">odp_time_local_strict</a>(), start);</div>
<div class="line">    stats-&gt;tx = tx;</div>
<div class="line">    stats-&gt;tx_drops = tx_drops;</div>
<div class="line">    <a class="code" href="group__odp__barrier.html#ga97c8f84490e816330f96155acf0b4b77">odp_barrier_wait</a>(&amp;prog_config-&gt;term_barrier);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> scd_fwd_tbl_t build_scd_fwd_tbl(<span class="keyword">const</span> pktio_t *pktios, uint8_t num_ifs, <span class="keywordtype">int</span> thread_idx)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">const</span> pktio_t *pktio;</div>
<div class="line">    <span class="keywordtype">int</span> idx;</div>
<div class="line">    scd_fwd_tbl_t tbl;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (uint8_t i = 0U; i &lt; num_ifs; ++i) {</div>
<div class="line">        pktio = &amp;pktios[i];</div>
<div class="line">        idx = <a name="a103"></a><a class="code" href="group__odp__packet__io.html#gab552d0e69245ade3de47130c2b9c5203">odp_pktio_index</a>(pktio-&gt;handle);</div>
<div class="line">        tbl.tbl[idx].pktout = pktio-&gt;dst-&gt;out_qs[thread_idx % pktio-&gt;dst-&gt;num_out_qs];</div>
<div class="line">        tbl.tbl[idx].src_mac = pktio-&gt;dst-&gt;src_mac;</div>
<div class="line">        tbl.tbl[idx].dst_mac = pktio-&gt;dst-&gt;dst_mac;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> tbl;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> drain_events(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line">        <a name="_a104"></a><a class="code" href="struct__odp__abi__event__t.html">odp_event_t</a>  ev;</div>
<div class="line"> </div>
<div class="line">        ev = <a name="a105"></a><a class="code" href="group__odp__scheduler.html#gae4ca1012ebb16ff8b9752b958dc45ce6">odp_schedule</a>(NULL, <a name="a106"></a><a class="code" href="group__odp__scheduler.html#ga9116776b8262a74af7dac7ef46fc7ace">ODP_SCHED_NO_WAIT</a>);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (ev == <a name="a107"></a><a class="code" href="group__odp__event.html#gae1a3732a534ba7a892fca38b824591b0">ODP_EVENT_INVALID</a>)</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">        <a name="a108"></a><a class="code" href="group__odp__event.html#ga1622f73356c325f625db747cb3badf8d">odp_event_free</a>(ev);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> run_scheduled(<span class="keywordtype">void</span> *args)</div>
<div class="line">{</div>
<div class="line">    worker_config_t *config = args;</div>
<div class="line">    prog_config_t *prog_config = config-&gt;prog_config;</div>
<div class="line">    <a class="code" href="structodp__time__s.html">odp_time_t</a> start;</div>
<div class="line">    <a class="code" href="structodp__atomic__u32__s.html">odp_atomic_u32_t</a> *is_running = &amp;prog_config-&gt;is_running;</div>
<div class="line">    <span class="keyword">const</span> uint8_t num_ifs = prog_config-&gt;num_ifs;</div>
<div class="line">    <span class="keyword">const</span> uint32_t burst_size = prog_config-&gt;burst_size;</div>
<div class="line">    <a class="code" href="struct__odp__abi__event__t.html">odp_event_t</a> evs[burst_size];</div>
<div class="line">    <span class="keywordtype">int</span> num_recv, num_sent, diff;</div>
<div class="line">    <a class="code" href="struct__odp__abi__packet__t.html">odp_packet_t</a> pkts[burst_size];</div>
<div class="line">    <span class="keyword">const</span> scd_fwd_tbl_t tbl = build_scd_fwd_tbl(prog_config-&gt;pktios, num_ifs, <a name="a109"></a><a class="code" href="group__odp__thread.html#gad6562e7320d48463715bbf15748ae360">odp_thread_id</a>());</div>
<div class="line">    <a class="code" href="structodp__pktout__queue__s.html">odp_pktout_queue_t</a> pktout;</div>
<div class="line">    uint64_t tx = 0U, tx_drops = 0U;</div>
<div class="line">    stats_t *stats = &amp;config-&gt;stats;</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="group__odp__barrier.html#ga97c8f84490e816330f96155acf0b4b77">odp_barrier_wait</a>(&amp;config-&gt;prog_config-&gt;init_barrier);</div>
<div class="line">    start = <a class="code" href="group__odp__time.html#gabe857e90283c71df90130d1775ceb6c7">odp_time_local_strict</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span> (<a class="code" href="group__odp__atomic.html#ga1ebc0fa6d690c24bd2bcc38bcb9a2276">odp_atomic_load_u32</a>(is_running)) {</div>
<div class="line">        num_recv = <a name="a110"></a><a class="code" href="group__odp__scheduler.html#ga17ae1ac2ac704684d0a7087a311c73f4">odp_schedule_multi_no_wait</a>(NULL, evs, burst_size);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group__odp__compiler__optim.html#ga2b29f27f12b751250b471aa9c14c57c8">odp_unlikely</a>(num_recv &lt;= 0))</div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line"> </div>
<div class="line">        <a name="a111"></a><a class="code" href="group__odp__packet.html#ga0924634e5431e0ae31bb0cfd7bf8d262">odp_packet_from_event_multi</a>(pkts, evs, num_recv);</div>
<div class="line">        pktout = tbl.tbl[<a name="a112"></a><a class="code" href="group__odp__packet.html#ga1c03b0fec815617168cf29a013442d58">odp_packet_input_index</a>(pkts[0U])].pktout;</div>
<div class="line">        num_sent = <a class="code" href="group__odp__packet__io.html#gacb5db3a908775522e316c8b8ccb36498">odp_pktout_send</a>(pktout, pkts, num_recv);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group__odp__compiler__optim.html#ga2b29f27f12b751250b471aa9c14c57c8">odp_unlikely</a>(num_sent &lt; num_recv)) {</div>
<div class="line">            num_sent = num_sent &lt; 0 ? 0 : num_sent;</div>
<div class="line">            diff = num_recv - num_sent;</div>
<div class="line">            <a class="code" href="group__odp__packet.html#gad190c5b094a0406b9d86da03f10c15cb">odp_packet_free_multi</a>(&amp;pkts[num_sent], diff);</div>
<div class="line">            tx_drops += diff;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        tx += num_sent;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    stats-&gt;tm_ns = <a class="code" href="group__odp__time.html#gada453827b812a8fae651e9d93308e959">odp_time_diff_ns</a>(<a class="code" href="group__odp__time.html#gabe857e90283c71df90130d1775ceb6c7">odp_time_local_strict</a>(), start);</div>
<div class="line">    stats-&gt;tx = tx;</div>
<div class="line">    stats-&gt;tx_drops = tx_drops;</div>
<div class="line">    <span class="comment">/* With certain feature combo that involves HW prefetching, the prefetched events may block</span></div>
<div class="line"><span class="comment">     * other threads from forward progress, so drain them before termination barrier and the</span></div>
<div class="line"><span class="comment">     * potential rest after the barrier. */</span></div>
<div class="line">    <a name="a113"></a><a class="code" href="group__odp__scheduler.html#ga9868ccb25b6631ef29cc921ee2e522b0">odp_schedule_pause</a>();</div>
<div class="line">    drain_events();</div>
<div class="line">    <a class="code" href="group__odp__barrier.html#ga97c8f84490e816330f96155acf0b4b77">odp_barrier_wait</a>(&amp;config-&gt;prog_config-&gt;term_barrier);</div>
<div class="line">    <a name="a114"></a><a class="code" href="group__odp__scheduler.html#gaf16f217bd1654f854a720130dbd01a49">odp_schedule_resume</a>();</div>
<div class="line">    drain_events();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> run_scheduled_mac_mod(<span class="keywordtype">void</span> *args)</div>
<div class="line">{</div>
<div class="line">    worker_config_t *config = args;</div>
<div class="line">    prog_config_t *prog_config = config-&gt;prog_config;</div>
<div class="line">    <a class="code" href="structodp__time__s.html">odp_time_t</a> start;</div>
<div class="line">    <a class="code" href="structodp__atomic__u32__s.html">odp_atomic_u32_t</a> *is_running = &amp;prog_config-&gt;is_running;</div>
<div class="line">    <span class="keyword">const</span> uint8_t num_ifs = prog_config-&gt;num_ifs;</div>
<div class="line">    <span class="keyword">const</span> uint32_t burst_size = prog_config-&gt;burst_size;</div>
<div class="line">    <a class="code" href="struct__odp__abi__event__t.html">odp_event_t</a> evs[burst_size];</div>
<div class="line">    <span class="keywordtype">int</span> num_recv, num_sent, idx, diff;</div>
<div class="line">    <a class="code" href="struct__odp__abi__packet__t.html">odp_packet_t</a> pkts[burst_size];</div>
<div class="line">    <span class="keyword">const</span> scd_fwd_tbl_t tbl = build_scd_fwd_tbl(prog_config-&gt;pktios, num_ifs, <a class="code" href="group__odp__thread.html#gad6562e7320d48463715bbf15748ae360">odp_thread_id</a>());</div>
<div class="line">    odph_ethaddr_t src_mac, dst_mac;</div>
<div class="line">    odph_ethhdr_t *eth;</div>
<div class="line">    <a class="code" href="structodp__pktout__queue__s.html">odp_pktout_queue_t</a> pktout;</div>
<div class="line">    uint64_t tx = 0U, tx_drops = 0U;</div>
<div class="line">    stats_t *stats = &amp;config-&gt;stats;</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="group__odp__barrier.html#ga97c8f84490e816330f96155acf0b4b77">odp_barrier_wait</a>(&amp;config-&gt;prog_config-&gt;init_barrier);</div>
<div class="line">    start = <a class="code" href="group__odp__time.html#gabe857e90283c71df90130d1775ceb6c7">odp_time_local_strict</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span> (<a class="code" href="group__odp__atomic.html#ga1ebc0fa6d690c24bd2bcc38bcb9a2276">odp_atomic_load_u32</a>(is_running)) {</div>
<div class="line">        num_recv = <a class="code" href="group__odp__scheduler.html#ga17ae1ac2ac704684d0a7087a311c73f4">odp_schedule_multi_no_wait</a>(NULL, evs, burst_size);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group__odp__compiler__optim.html#ga2b29f27f12b751250b471aa9c14c57c8">odp_unlikely</a>(num_recv &lt;= 0))</div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line"> </div>
<div class="line">        <a class="code" href="group__odp__packet.html#ga0924634e5431e0ae31bb0cfd7bf8d262">odp_packet_from_event_multi</a>(pkts, evs, num_recv);</div>
<div class="line">        idx = <a class="code" href="group__odp__packet.html#ga1c03b0fec815617168cf29a013442d58">odp_packet_input_index</a>(pkts[0U]);</div>
<div class="line">        src_mac = tbl.tbl[idx].src_mac;</div>
<div class="line">        dst_mac = tbl.tbl[idx].dst_mac;</div>
<div class="line">        pktout = tbl.tbl[idx].pktout;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0U; i &lt; num_recv; ++i) {</div>
<div class="line">            eth = <a class="code" href="group__odp__packet.html#ga433ba21e3c83c6d4d9831c9e732b63de">odp_packet_data</a>(pkts[i]);</div>
<div class="line">            eth-&gt;src = src_mac;</div>
<div class="line">            eth-&gt;dst = dst_mac;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        num_sent = <a class="code" href="group__odp__packet__io.html#gacb5db3a908775522e316c8b8ccb36498">odp_pktout_send</a>(pktout, pkts, num_recv);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group__odp__compiler__optim.html#ga2b29f27f12b751250b471aa9c14c57c8">odp_unlikely</a>(num_sent &lt; num_recv)) {</div>
<div class="line">            num_sent = num_sent &lt; 0 ? 0 : num_sent;</div>
<div class="line">            diff = num_recv - num_sent;</div>
<div class="line">            <a class="code" href="group__odp__packet.html#gad190c5b094a0406b9d86da03f10c15cb">odp_packet_free_multi</a>(&amp;pkts[num_sent], diff);</div>
<div class="line">            tx_drops += diff;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        tx += num_sent;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    stats-&gt;tm_ns = <a class="code" href="group__odp__time.html#gada453827b812a8fae651e9d93308e959">odp_time_diff_ns</a>(<a class="code" href="group__odp__time.html#gabe857e90283c71df90130d1775ceb6c7">odp_time_local_strict</a>(), start);</div>
<div class="line">    stats-&gt;tx = tx;</div>
<div class="line">    stats-&gt;tx_drops = tx_drops;</div>
<div class="line">    <span class="comment">/* With certain feature combo that involves HW prefetching, the prefetched events may block</span></div>
<div class="line"><span class="comment">     * other threads from forward progress, so drain them before termination barrier and the</span></div>
<div class="line"><span class="comment">     * potential rest after the barrier. */</span></div>
<div class="line">    <a class="code" href="group__odp__scheduler.html#ga9868ccb25b6631ef29cc921ee2e522b0">odp_schedule_pause</a>();</div>
<div class="line">    drain_events();</div>
<div class="line">    <a class="code" href="group__odp__barrier.html#ga97c8f84490e816330f96155acf0b4b77">odp_barrier_wait</a>(&amp;config-&gt;prog_config-&gt;term_barrier);</div>
<div class="line">    <a class="code" href="group__odp__scheduler.html#gaf16f217bd1654f854a720130dbd01a49">odp_schedule_resume</a>();</div>
<div class="line">    drain_events();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> run_func_t get_run_func(<span class="keyword">const</span> prog_config_t *config, <span class="keyword">const</span> worker_config_t *worker)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (config-&gt;mode == DIRECT) {</div>
<div class="line">        <span class="keywordflow">if</span> (config-&gt;is_mac_mod)</div>
<div class="line">            <span class="keywordflow">return</span> worker-&gt;num_ifs == 1U ?</div>
<div class="line">                run_direct_single_if_mac_mod : run_direct_multi_if_mac_mod;</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">            <span class="keywordflow">return</span> worker-&gt;num_ifs == 1U ?</div>
<div class="line">                run_direct_single_if : run_direct_multi_if;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="keywordflow">return</span> config-&gt;is_mac_mod ? run_scheduled_mac_mod : run_scheduled;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <a class="code" href="group__odp__std.html#ga0b2a7ca83ccc7af0346db309d8c06d6f">odp_bool_t</a> setup_workers(prog_config_t *config)</div>
<div class="line">{</div>
<div class="line">    odph_thread_common_param_t thr_common;</div>
<div class="line">    odph_thread_param_t thr_params[config-&gt;num_workers], *thr_param;</div>
<div class="line">    worker_config_t *worker;</div>
<div class="line"> </div>
<div class="line">    <a name="a115"></a><a class="code" href="group__odp__barrier.html#ga1416b47755c2af6267074959ac0d4840">odp_barrier_init</a>(&amp;config-&gt;init_barrier, config-&gt;num_workers + 1);</div>
<div class="line">    <a class="code" href="group__odp__barrier.html#ga1416b47755c2af6267074959ac0d4840">odp_barrier_init</a>(&amp;config-&gt;term_barrier, config-&gt;num_workers + 1);</div>
<div class="line">    odph_thread_common_param_init(&amp;thr_common);</div>
<div class="line">    thr_common.instance = config-&gt;odp_instance;</div>
<div class="line">    thr_common.cpumask = &amp;config-&gt;worker_mask;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; config-&gt;num_workers; ++i) {</div>
<div class="line">        thr_param = &amp;thr_params[i];</div>
<div class="line">        worker = &amp;config-&gt;worker_config[i];</div>
<div class="line">        odph_thread_param_init(thr_param);</div>
<div class="line">        thr_param-&gt;start = get_run_func(config, worker);</div>
<div class="line">        thr_param-&gt;thr_type = <a name="a116"></a><a class="code" href="group__odp__thread.html#ggafc7a7c180de9811d71b7cb050713bf53a2182066d714db5f2a4e994ad92f25b2a">ODP_THREAD_WORKER</a>;</div>
<div class="line">        thr_param-&gt;arg = worker;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> ((uint32_t)odph_thread_create(config-&gt;thread_tbl, &amp;thr_common, thr_params,</div>
<div class="line">                     config-&gt;num_workers) != config-&gt;num_workers) {</div>
<div class="line">        ODPH_ERR(<span class="stringliteral">&quot;Error configuring worker threads\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="group__odp__barrier.html#ga97c8f84490e816330f96155acf0b4b77">odp_barrier_wait</a>(&amp;config-&gt;init_barrier);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <a class="code" href="group__odp__std.html#ga0b2a7ca83ccc7af0346db309d8c06d6f">odp_bool_t</a> setup_test(prog_config_t *config)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> setup_config(config) &amp;&amp; setup_pktios(config) &amp;&amp; print_summary(config) &amp;&amp;</div>
<div class="line">           setup_workers(config);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> run_control(prog_config_t *config)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (config-&gt;runtime &gt; 0U) {</div>
<div class="line">        sleep(config-&gt;runtime);</div>
<div class="line">        <a class="code" href="group__odp__atomic.html#gaa6d2d16a9ef9897b1442d77e41f7101e">odp_atomic_store_u32</a>(&amp;config-&gt;is_running, 0U);</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="keywordflow">while</span> (<a class="code" href="group__odp__atomic.html#ga1ebc0fa6d690c24bd2bcc38bcb9a2276">odp_atomic_load_u32</a>(&amp;config-&gt;is_running))</div>
<div class="line">            sleep(1U);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> stop_test(prog_config_t *config)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">const</span> pktio_t *pktio;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (uint8_t i = 0U; i &lt; config-&gt;num_ifs; ++i) {</div>
<div class="line">        pktio = &amp;config-&gt;pktios[i];</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (pktio-&gt;handle != <a class="code" href="group__odp__packet__io.html#ga9c7d0fcaec232b5503633e42ea29f6f5">ODP_PKTIO_INVALID</a>)</div>
<div class="line">            (void)<a name="a117"></a><a class="code" href="group__odp__packet__io.html#gab34cb9679bf99d1b3366f06a9b155c41">odp_pktio_stop</a>(pktio-&gt;handle);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="group__odp__barrier.html#ga97c8f84490e816330f96155acf0b4b77">odp_barrier_wait</a>(&amp;config-&gt;term_barrier);</div>
<div class="line">    (void)odph_thread_join(config-&gt;thread_tbl, config-&gt;num_workers);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> print_humanised(uint64_t value)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (value &gt; GIGAS)</div>
<div class="line">        printf(<span class="stringliteral">&quot;(%.2f Gpps)&quot;</span>, (<span class="keywordtype">double</span>)value / GIGAS);</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (value &gt; MEGAS)</div>
<div class="line">        printf(<span class="stringliteral">&quot;(%.2f Mpps)&quot;</span>, (<span class="keywordtype">double</span>)value / MEGAS);</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (value &gt; KILOS)</div>
<div class="line">        printf(<span class="stringliteral">&quot;(%.2f kpps)&quot;</span>, (<span class="keywordtype">double</span>)value / KILOS);</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">        printf(<span class="stringliteral">&quot;(%&quot;</span> PRIu64 <span class="stringliteral">&quot; pps)&quot;</span>, value);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> print_stats(<span class="keyword">const</span> prog_config_t *config)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">const</span> stats_t *stats;</div>
<div class="line">    uint64_t tot_tx = 0U, tot_tx_drops = 0U, pps, tot_pps = 0U;</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;L2 forwarding done:\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;===================\n\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (uint32_t i = 0U; i &lt; config-&gt;num_workers; ++i) {</div>
<div class="line">        stats = &amp;config-&gt;worker_config[i].stats;</div>
<div class="line">        tot_tx += stats-&gt;tx;</div>
<div class="line">        tot_tx_drops += stats-&gt;tx_drops;</div>
<div class="line">        pps = stats-&gt;tx / ((double)stats-&gt;tm_ns / <a name="a118"></a><a class="code" href="group__odp__time.html#ga49ab6f8fe6c0aa5b820717fd91f16ab5">ODP_TIME_SEC_IN_NS</a>);</div>
<div class="line">        tot_pps += pps;</div>
<div class="line"> </div>
<div class="line">        printf(<span class="stringliteral">&quot;  worker %u:\n\n&quot;</span></div>
<div class="line">               <span class="stringliteral">&quot;    packets sent:       %&quot;</span> PRIu64 <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line">               <span class="stringliteral">&quot;    packets dropped:    %&quot;</span> PRIu64 <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line">               <span class="stringliteral">&quot;    packets per second: %&quot;</span> PRIu64 <span class="stringliteral">&quot; &quot;</span>, i, stats-&gt;tx, stats-&gt;tx_drops,</div>
<div class="line">               pps);</div>
<div class="line">        print_humanised(pps);</div>
<div class="line">        printf(<span class="stringliteral">&quot;\n\n&quot;</span>);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;  total packets sent:       %&quot;</span> PRIu64 <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  total packets dropped:    %&quot;</span> PRIu64 <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  total packets per second: %&quot;</span> PRIu64 <span class="stringliteral">&quot; &quot;</span>, tot_tx, tot_tx_drops, tot_pps);</div>
<div class="line">    print_humanised(tot_pps);</div>
<div class="line">    printf(<span class="stringliteral">&quot;\n\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* TODO: Results exporting can go here. */</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> teardown(<span class="keyword">const</span> prog_config_t *config)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">const</span> pktio_t *pktio;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (uint8_t i = 0U; i &lt; config-&gt;num_ifs; ++i) {</div>
<div class="line">        pktio = &amp;config-&gt;pktios[i];</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (config-&gt;pktios[i].handle != <a class="code" href="group__odp__packet__io.html#ga9c7d0fcaec232b5503633e42ea29f6f5">ODP_PKTIO_INVALID</a>) {</div>
<div class="line">            <span class="keywordflow">if</span> (config-&gt;is_promisc != config-&gt;orig_is_promisc)</div>
<div class="line">                (void)<a class="code" href="group__odp__packet__io.html#ga506ab30c6737e9fbd815f0044396893b">odp_pktio_promisc_mode_set</a>(pktio-&gt;handle,</div>
<div class="line">                                 config-&gt;orig_is_promisc);</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (config-&gt;mtu &gt; 0U &amp;&amp; config-&gt;orig_in_mtu &gt; 0U &amp;&amp;</div>
<div class="line">                config-&gt;orig_out_mtu &gt; 0U)</div>
<div class="line">                (void)<a class="code" href="group__odp__packet__io.html#ga4efd726f993e7fe99d44f04f5ebe2141">odp_pktio_maxlen_set</a>(pktio-&gt;handle, config-&gt;orig_in_mtu,</div>
<div class="line">                               config-&gt;orig_out_mtu);</div>
<div class="line"> </div>
<div class="line">            (void)<a name="a119"></a><a class="code" href="group__odp__packet__io.html#ga2e481c9f2f073cc337aff7f4c65cba7c">odp_pktio_close</a>(pktio-&gt;handle);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        free(pktio-&gt;name);</div>
<div class="line">        free(pktio-&gt;dst_name);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (config-&gt;pool != <a class="code" href="group__odp__pool.html#gafca03b58412260da754042a92f8a5e04">ODP_POOL_INVALID</a>)</div>
<div class="line">        (void)<a name="a120"></a><a class="code" href="group__odp__pool.html#ga6ad439aaef911d82b972c915850e6924">odp_pool_destroy</a>(config-&gt;pool);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)</div>
<div class="line">{</div>
<div class="line">    odph_helper_options_t odph_opts;</div>
<div class="line">    <a name="_a121"></a><a class="code" href="structodp__init__t.html">odp_init_t</a> init_param;</div>
<div class="line">    <a class="code" href="group__odp__initialization.html#ga8d362bd3c7c87ab5892ca63b15c375c0">odp_instance_t</a> <a class="code" href="group__odp__initialization.html#ga076abe89a81ffb7a7ba46a912eca2166">odp_instance</a>;</div>
<div class="line">    <a name="_a122"></a><a class="code" href="struct__odp__abi__shm__t.html">odp_shm_t</a> shm_cfg = <a name="a123"></a><a class="code" href="group__odp__shared__memory.html#ga6e4289975efc279bb9f31880613a9d60">ODP_SHM_INVALID</a>;</div>
<div class="line">    <span class="keywordtype">int</span> ret = EXIT_SUCCESS;</div>
<div class="line">    parse_result_t parse_res;</div>
<div class="line"> </div>
<div class="line">    argc = odph_parse_options(argc, argv);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (odph_options(&amp;odph_opts) == -1) {</div>
<div class="line">        ODPH_ERR(<span class="stringliteral">&quot;Error while reading ODP helper options, exiting\n&quot;</span>);</div>
<div class="line">        exit(EXIT_FAILURE);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <a name="a124"></a><a class="code" href="group__odp__initialization.html#ga145c4fc4417c8f58efd0852b34e25ba9">odp_init_param_init</a>(&amp;init_param);</div>
<div class="line">    init_param.<a name="a125"></a><a class="code" href="structodp__init__t.html#a7d368c740146170ebeb1651ce049919e">mem_model</a> = odph_opts.mem_model;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a name="a126"></a><a class="code" href="group__odp__initialization.html#ga68d81088e65ef66180fb51076905e34d">odp_init_global</a>(&amp;<a class="code" href="group__odp__initialization.html#ga076abe89a81ffb7a7ba46a912eca2166">odp_instance</a>, &amp;init_param, NULL)) {</div>
<div class="line">        ODPH_ERR(<span class="stringliteral">&quot;ODP global init failed, exiting\n&quot;</span>);</div>
<div class="line">        exit(EXIT_FAILURE);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a name="a127"></a><a class="code" href="group__odp__initialization.html#ga265470ea614bfeca9d8901e81ddefca9">odp_init_local</a>(<a class="code" href="group__odp__initialization.html#ga076abe89a81ffb7a7ba46a912eca2166">odp_instance</a>, <a name="a128"></a><a class="code" href="group__odp__thread.html#ggafc7a7c180de9811d71b7cb050713bf53a9aab3fdb10eb2000a864bff81f23c00a">ODP_THREAD_CONTROL</a>)) {</div>
<div class="line">        ODPH_ERR(<span class="stringliteral">&quot;ODP local init failed, exiting\n&quot;</span>);</div>
<div class="line">        exit(EXIT_FAILURE);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    shm_cfg = <a name="a129"></a><a class="code" href="group__odp__shared__memory.html#gacc441b0e100ec1c54e21f1745939a2d8">odp_shm_reserve</a>(PROG_NAME <span class="stringliteral">&quot;_cfg&quot;</span>, <span class="keyword">sizeof</span>(prog_config_t), ODP_CACHE_LINE_SIZE,</div>
<div class="line">                  0U);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (shm_cfg == <a class="code" href="group__odp__shared__memory.html#ga6e4289975efc279bb9f31880613a9d60">ODP_SHM_INVALID</a>) {</div>
<div class="line">        ODPH_ERR(<span class="stringliteral">&quot;Error reserving shared memory\n&quot;</span>);</div>
<div class="line">        ret = EXIT_FAILURE;</div>
<div class="line">        <span class="keywordflow">goto</span> out;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    prog_conf = <a name="a130"></a><a class="code" href="group__odp__shared__memory.html#gac94c4232f7cd64039bbaef601ff2c05e">odp_shm_addr</a>(shm_cfg);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (prog_conf == NULL) {</div>
<div class="line">        ODPH_ERR(<span class="stringliteral">&quot;Error resolving shared memory address\n&quot;</span>);</div>
<div class="line">        ret = EXIT_FAILURE;</div>
<div class="line">        <span class="keywordflow">goto</span> out;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    memset(prog_conf, 0, <span class="keyword">sizeof</span>(*prog_conf));</div>
<div class="line">    prog_conf-&gt;odp_instance = <a class="code" href="group__odp__initialization.html#ga076abe89a81ffb7a7ba46a912eca2166">odp_instance</a>;</div>
<div class="line">    parse_res = setup_program(argc, argv, prog_conf);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (parse_res == PRS_NOK) {</div>
<div class="line">        ret = EXIT_FAILURE;</div>
<div class="line">        <span class="keywordflow">goto</span> out;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (parse_res == PRS_TERM) {</div>
<div class="line">        ret = EXIT_SUCCESS;</div>
<div class="line">        <span class="keywordflow">goto</span> out;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!setup_test(prog_conf)) {</div>
<div class="line">        ret = EXIT_FAILURE;</div>
<div class="line">        <span class="keywordflow">goto</span> out;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    run_control(prog_conf);</div>
<div class="line">    stop_test(prog_conf);</div>
<div class="line">    print_stats(prog_conf);</div>
<div class="line"> </div>
<div class="line">out:</div>
<div class="line">    teardown(prog_conf);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (shm_cfg != <a class="code" href="group__odp__shared__memory.html#ga6e4289975efc279bb9f31880613a9d60">ODP_SHM_INVALID</a>)</div>
<div class="line">        (void)<a name="a131"></a><a class="code" href="group__odp__shared__memory.html#ga0b02991b512acc119206b44c95a86ed6">odp_shm_free</a>(shm_cfg);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a name="a132"></a><a class="code" href="group__odp__initialization.html#ga6d15f0e1718da9477948dedb06a2f01a">odp_term_local</a>()) {</div>
<div class="line">        ODPH_ERR(<span class="stringliteral">&quot;ODP local terminate failed, exiting\n&quot;</span>);</div>
<div class="line">        exit(EXIT_FAILURE);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a name="a133"></a><a class="code" href="group__odp__initialization.html#ga87e9c66ad92201c9e0a710294eab1569">odp_term_global</a>(<a class="code" href="group__odp__initialization.html#ga076abe89a81ffb7a7ba46a912eca2166">odp_instance</a>)) {</div>
<div class="line">        ODPH_ERR(<span class="stringliteral">&quot;ODP global terminate failed, exiting\n&quot;</span>);</div>
<div class="line">        exit(EXIT_FAILURE);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> ret;</div>
<div class="line">}</div>
<div class="ttc" id="agroup__odp__atomic_html_ga0029015adacaadb06ee94ea67d00eece"><div class="ttname"><a href="group__odp__atomic.html#ga0029015adacaadb06ee94ea67d00eece">odp_atomic_init_u32</a></div><div class="ttdeci">void odp_atomic_init_u32(odp_atomic_u32_t *atom, uint32_t val)</div><div class="ttdoc">Initialize atomic uint32 variable.</div></div>
<div class="ttc" id="agroup__odp__atomic_html_ga1ebc0fa6d690c24bd2bcc38bcb9a2276"><div class="ttname"><a href="group__odp__atomic.html#ga1ebc0fa6d690c24bd2bcc38bcb9a2276">odp_atomic_load_u32</a></div><div class="ttdeci">uint32_t odp_atomic_load_u32(odp_atomic_u32_t *atom)</div><div class="ttdoc">Load value of atomic uint32 variable.</div></div>
<div class="ttc" id="agroup__odp__atomic_html_gaa6d2d16a9ef9897b1442d77e41f7101e"><div class="ttname"><a href="group__odp__atomic.html#gaa6d2d16a9ef9897b1442d77e41f7101e">odp_atomic_store_u32</a></div><div class="ttdeci">void odp_atomic_store_u32(odp_atomic_u32_t *atom, uint32_t val)</div><div class="ttdoc">Store value to atomic uint32 variable.</div></div>
<div class="ttc" id="agroup__odp__barrier_html_ga1416b47755c2af6267074959ac0d4840"><div class="ttname"><a href="group__odp__barrier.html#ga1416b47755c2af6267074959ac0d4840">odp_barrier_init</a></div><div class="ttdeci">void odp_barrier_init(odp_barrier_t *barr, int count)</div><div class="ttdoc">Initialize barrier with thread count.</div></div>
<div class="ttc" id="agroup__odp__barrier_html_ga97c8f84490e816330f96155acf0b4b77"><div class="ttname"><a href="group__odp__barrier.html#ga97c8f84490e816330f96155acf0b4b77">odp_barrier_wait</a></div><div class="ttdeci">void odp_barrier_wait(odp_barrier_t *barr)</div><div class="ttdoc">Synchronize thread execution on barrier.</div></div>
<div class="ttc" id="agroup__odp__compiler__optim_html_ga205a8257879c02657e7c39ee7ad5e40a"><div class="ttname"><a href="group__odp__compiler__optim.html#ga205a8257879c02657e7c39ee7ad5e40a">ODP_ALIGNED_CACHE</a></div><div class="ttdeci">#define ODP_ALIGNED_CACHE</div><div class="ttdoc">Defines type/struct/variable to be cache line size aligned.</div></div>
<div class="ttc" id="agroup__odp__compiler__optim_html_ga2b29f27f12b751250b471aa9c14c57c8"><div class="ttname"><a href="group__odp__compiler__optim.html#ga2b29f27f12b751250b471aa9c14c57c8">odp_unlikely</a></div><div class="ttdeci">#define odp_unlikely(x)</div><div class="ttdoc">Branch unlikely taken.</div><div class="ttdef"><b>Definition:</b> <a href="spec_2hints_8h_source.html#l00064">spec/hints.h:64</a></div></div>
<div class="ttc" id="agroup__odp__compiler__optim_html_ga45a2684e38da3e71b300bc89de5d6b52"><div class="ttname"><a href="group__odp__compiler__optim.html#ga45a2684e38da3e71b300bc89de5d6b52">ODP_UNUSED</a></div><div class="ttdeci">#define ODP_UNUSED</div><div class="ttdoc">Intentionally unused variables of functions.</div><div class="ttdef"><b>Definition:</b> <a href="spec_2hints_8h_source.html#l00054">spec/hints.h:54</a></div></div>
<div class="ttc" id="agroup__odp__cpumask_html_ga4ff2d29f52775b12c7df1995754b524d"><div class="ttname"><a href="group__odp__cpumask.html#ga4ff2d29f52775b12c7df1995754b524d">odp_cpumask_default_worker</a></div><div class="ttdeci">int odp_cpumask_default_worker(odp_cpumask_t *mask, int num)</div><div class="ttdoc">Default CPU mask for worker threads.</div></div>
<div class="ttc" id="agroup__odp__event_html_ga1622f73356c325f625db747cb3badf8d"><div class="ttname"><a href="group__odp__event.html#ga1622f73356c325f625db747cb3badf8d">odp_event_free</a></div><div class="ttdeci">void odp_event_free(odp_event_t event)</div><div class="ttdoc">Free event.</div></div>
<div class="ttc" id="agroup__odp__event_html_gae1a3732a534ba7a892fca38b824591b0"><div class="ttname"><a href="group__odp__event.html#gae1a3732a534ba7a892fca38b824591b0">ODP_EVENT_INVALID</a></div><div class="ttdeci">#define ODP_EVENT_INVALID</div><div class="ttdoc">Invalid event.</div></div>
<div class="ttc" id="agroup__odp__initialization_html_ga076abe89a81ffb7a7ba46a912eca2166"><div class="ttname"><a href="group__odp__initialization.html#ga076abe89a81ffb7a7ba46a912eca2166">odp_instance</a></div><div class="ttdeci">int odp_instance(odp_instance_t *instance)</div><div class="ttdoc">Get instance handle.</div></div>
<div class="ttc" id="agroup__odp__initialization_html_ga145c4fc4417c8f58efd0852b34e25ba9"><div class="ttname"><a href="group__odp__initialization.html#ga145c4fc4417c8f58efd0852b34e25ba9">odp_init_param_init</a></div><div class="ttdeci">void odp_init_param_init(odp_init_t *param)</div><div class="ttdoc">Initialize the odp_init_t to default values for all fields.</div></div>
<div class="ttc" id="agroup__odp__initialization_html_ga265470ea614bfeca9d8901e81ddefca9"><div class="ttname"><a href="group__odp__initialization.html#ga265470ea614bfeca9d8901e81ddefca9">odp_init_local</a></div><div class="ttdeci">int odp_init_local(odp_instance_t instance, odp_thread_type_t thr_type)</div><div class="ttdoc">Thread local ODP initialization.</div></div>
<div class="ttc" id="agroup__odp__initialization_html_ga68d81088e65ef66180fb51076905e34d"><div class="ttname"><a href="group__odp__initialization.html#ga68d81088e65ef66180fb51076905e34d">odp_init_global</a></div><div class="ttdeci">int odp_init_global(odp_instance_t *instance, const odp_init_t *params, const odp_platform_init_t *platform_params)</div><div class="ttdoc">Global ODP initialization.</div></div>
<div class="ttc" id="agroup__odp__initialization_html_ga6d15f0e1718da9477948dedb06a2f01a"><div class="ttname"><a href="group__odp__initialization.html#ga6d15f0e1718da9477948dedb06a2f01a">odp_term_local</a></div><div class="ttdeci">int odp_term_local(void)</div><div class="ttdoc">Thread local ODP termination.</div></div>
<div class="ttc" id="agroup__odp__initialization_html_ga87e9c66ad92201c9e0a710294eab1569"><div class="ttname"><a href="group__odp__initialization.html#ga87e9c66ad92201c9e0a710294eab1569">odp_term_global</a></div><div class="ttdeci">int odp_term_global(odp_instance_t instance)</div><div class="ttdoc">Global ODP termination.</div></div>
<div class="ttc" id="agroup__odp__initialization_html_ga8d362bd3c7c87ab5892ca63b15c375c0"><div class="ttname"><a href="group__odp__initialization.html#ga8d362bd3c7c87ab5892ca63b15c375c0">odp_instance_t</a></div><div class="ttdeci">uint64_t odp_instance_t</div><div class="ttdoc">ODP instance ID.</div><div class="ttdef"><b>Definition:</b> <a href="api_2abi-default_2init_8h_source.html#l00031">api/abi-default/init.h:31</a></div></div>
<div class="ttc" id="agroup__odp__packet__io_html_ga04d67c951aff803cf718940e0783ef8f"><div class="ttname"><a href="group__odp__packet__io.html#ga04d67c951aff803cf718940e0783ef8f">odp_pktio_mac_addr</a></div><div class="ttdeci">int odp_pktio_mac_addr(odp_pktio_t pktio, void *mac_addr, int size)</div><div class="ttdoc">Get the default MAC address of a packet IO interface.</div></div>
<div class="ttc" id="agroup__odp__packet__io_html_ga055eabf5622e6745afbe9a1550ad1d78"><div class="ttname"><a href="group__odp__packet__io.html#ga055eabf5622e6745afbe9a1550ad1d78">odp_pktin_queue_param_init</a></div><div class="ttdeci">void odp_pktin_queue_param_init(odp_pktin_queue_param_t *param)</div><div class="ttdoc">Initialize packet input queue parameters.</div></div>
<div class="ttc" id="agroup__odp__packet__io_html_ga26d165a22d659770eba0c48543860881"><div class="ttname"><a href="group__odp__packet__io.html#ga26d165a22d659770eba0c48543860881">odp_pktio_param_init</a></div><div class="ttdeci">void odp_pktio_param_init(odp_pktio_param_t *param)</div><div class="ttdoc">Initialize pktio params.</div></div>
<div class="ttc" id="agroup__odp__packet__io_html_ga2c232afd3b0c7afd7e9685a0957b84bd"><div class="ttname"><a href="group__odp__packet__io.html#ga2c232afd3b0c7afd7e9685a0957b84bd">odp_pktio_promisc_mode</a></div><div class="ttdeci">int odp_pktio_promisc_mode(odp_pktio_t pktio)</div><div class="ttdoc">Determine if promiscuous mode is enabled for a packet IO interface.</div></div>
<div class="ttc" id="agroup__odp__packet__io_html_ga2e481c9f2f073cc337aff7f4c65cba7c"><div class="ttname"><a href="group__odp__packet__io.html#ga2e481c9f2f073cc337aff7f4c65cba7c">odp_pktio_close</a></div><div class="ttdeci">int odp_pktio_close(odp_pktio_t pktio)</div><div class="ttdoc">Close a packet IO interface.</div></div>
<div class="ttc" id="agroup__odp__packet__io_html_ga2efe22ecde5d8c72a27ff213451e4fe3"><div class="ttname"><a href="group__odp__packet__io.html#ga2efe22ecde5d8c72a27ff213451e4fe3">odp_pktin_maxlen</a></div><div class="ttdeci">uint32_t odp_pktin_maxlen(odp_pktio_t pktio)</div><div class="ttdoc">Maximum frame length at packet input.</div></div>
<div class="ttc" id="agroup__odp__packet__io_html_ga3373b50fe0531f6c58f25d51972f414e"><div class="ttname"><a href="group__odp__packet__io.html#ga3373b50fe0531f6c58f25d51972f414e">odp_pktout_maxlen</a></div><div class="ttdeci">uint32_t odp_pktout_maxlen(odp_pktio_t pktio)</div><div class="ttdoc">Maximum frame length at packet output.</div></div>
<div class="ttc" id="agroup__odp__packet__io_html_ga41a3ebb7ac489b85a5f7560e4d4f77f5"><div class="ttname"><a href="group__odp__packet__io.html#ga41a3ebb7ac489b85a5f7560e4d4f77f5">odp_pktout_queue</a></div><div class="ttdeci">int odp_pktout_queue(odp_pktio_t pktio, odp_pktout_queue_t queues[], int num)</div><div class="ttdoc">Direct packet output queues.</div></div>
<div class="ttc" id="agroup__odp__packet__io_html_ga4efd726f993e7fe99d44f04f5ebe2141"><div class="ttname"><a href="group__odp__packet__io.html#ga4efd726f993e7fe99d44f04f5ebe2141">odp_pktio_maxlen_set</a></div><div class="ttdeci">int odp_pktio_maxlen_set(odp_pktio_t pktio, uint32_t maxlen_input, uint32_t maxlen_output)</div><div class="ttdoc">Set maximum frame lengths.</div></div>
<div class="ttc" id="agroup__odp__packet__io_html_ga506ab30c6737e9fbd815f0044396893b"><div class="ttname"><a href="group__odp__packet__io.html#ga506ab30c6737e9fbd815f0044396893b">odp_pktio_promisc_mode_set</a></div><div class="ttdeci">int odp_pktio_promisc_mode_set(odp_pktio_t pktio, odp_bool_t enable)</div><div class="ttdoc">Set promiscuous mode.</div></div>
<div class="ttc" id="agroup__odp__packet__io_html_ga6a1c262ef999e8a73ac107c182b67d33"><div class="ttname"><a href="group__odp__packet__io.html#ga6a1c262ef999e8a73ac107c182b67d33">odp_pktio_config_init</a></div><div class="ttdeci">void odp_pktio_config_init(odp_pktio_config_t *config)</div><div class="ttdoc">Initialize packet IO configuration options.</div></div>
<div class="ttc" id="agroup__odp__packet__io_html_ga7ae4f96ab09d468fff3623d90db306f9"><div class="ttname"><a href="group__odp__packet__io.html#ga7ae4f96ab09d468fff3623d90db306f9">odp_pktio_open</a></div><div class="ttdeci">odp_pktio_t odp_pktio_open(const char *name, odp_pool_t pool, const odp_pktio_param_t *param)</div><div class="ttdoc">Open a packet IO interface.</div></div>
<div class="ttc" id="agroup__odp__packet__io_html_ga7f9faaf250d3d0d87478ff9f13680bf1"><div class="ttname"><a href="group__odp__packet__io.html#ga7f9faaf250d3d0d87478ff9f13680bf1">odp_pktio_config</a></div><div class="ttdeci">int odp_pktio_config(odp_pktio_t pktio, const odp_pktio_config_t *config)</div><div class="ttdoc">Configure packet IO interface options.</div></div>
<div class="ttc" id="agroup__odp__packet__io_html_ga9a5746e73616297fabb8d4caaa6d0333"><div class="ttname"><a href="group__odp__packet__io.html#ga9a5746e73616297fabb8d4caaa6d0333">odp_pktio_start</a></div><div class="ttdeci">int odp_pktio_start(odp_pktio_t pktio)</div><div class="ttdoc">Start packet receive and transmit.</div></div>
<div class="ttc" id="agroup__odp__packet__io_html_ga9c7d0fcaec232b5503633e42ea29f6f5"><div class="ttname"><a href="group__odp__packet__io.html#ga9c7d0fcaec232b5503633e42ea29f6f5">ODP_PKTIO_INVALID</a></div><div class="ttdeci">#define ODP_PKTIO_INVALID</div><div class="ttdoc">Invalid packet IO handle.</div></div>
<div class="ttc" id="agroup__odp__packet__io_html_gaa9d5cad745c9744ce026412ccf33d019"><div class="ttname"><a href="group__odp__packet__io.html#gaa9d5cad745c9744ce026412ccf33d019">odp_pktin_queue</a></div><div class="ttdeci">int odp_pktin_queue(odp_pktio_t pktio, odp_pktin_queue_t queues[], int num)</div><div class="ttdoc">Direct packet input queues.</div></div>
<div class="ttc" id="agroup__odp__packet__io_html_gab09475da05438a53b2d0fca96aab7515"><div class="ttname"><a href="group__odp__packet__io.html#gab09475da05438a53b2d0fca96aab7515">odp_pktout_queue_param_init</a></div><div class="ttdeci">void odp_pktout_queue_param_init(odp_pktout_queue_param_t *param)</div><div class="ttdoc">Initialize packet output queue parameters.</div></div>
<div class="ttc" id="agroup__odp__packet__io_html_gab34cb9679bf99d1b3366f06a9b155c41"><div class="ttname"><a href="group__odp__packet__io.html#gab34cb9679bf99d1b3366f06a9b155c41">odp_pktio_stop</a></div><div class="ttdeci">int odp_pktio_stop(odp_pktio_t pktio)</div><div class="ttdoc">Stop packet receive and transmit.</div></div>
<div class="ttc" id="agroup__odp__packet__io_html_gab3dd2331f6ba05e074333fd5badae340"><div class="ttname"><a href="group__odp__packet__io.html#gab3dd2331f6ba05e074333fd5badae340">odp_pktin_recv</a></div><div class="ttdeci">int odp_pktin_recv(odp_pktin_queue_t queue, odp_packet_t packets[], int num)</div><div class="ttdoc">Receive packets directly from an interface input queue.</div></div>
<div class="ttc" id="agroup__odp__packet__io_html_gab552d0e69245ade3de47130c2b9c5203"><div class="ttname"><a href="group__odp__packet__io.html#gab552d0e69245ade3de47130c2b9c5203">odp_pktio_index</a></div><div class="ttdeci">int odp_pktio_index(odp_pktio_t pktio)</div><div class="ttdoc">Get pktio interface index.</div></div>
<div class="ttc" id="agroup__odp__packet__io_html_gaba80778db7ec138977ed9e473bd1faaa"><div class="ttname"><a href="group__odp__packet__io.html#gaba80778db7ec138977ed9e473bd1faaa">odp_pktio_capability</a></div><div class="ttdeci">int odp_pktio_capability(odp_pktio_t pktio, odp_pktio_capability_t *capa)</div><div class="ttdoc">Query packet IO interface capabilities.</div></div>
<div class="ttc" id="agroup__odp__packet__io_html_gac600157dd09955a9cee3f6618c757ee7"><div class="ttname"><a href="group__odp__packet__io.html#gac600157dd09955a9cee3f6618c757ee7">ODP_PKTIO_MAX_INDEX</a></div><div class="ttdeci">#define ODP_PKTIO_MAX_INDEX</div><div class="ttdoc">Maximum packet IO interface index.</div></div>
<div class="ttc" id="agroup__odp__packet__io_html_gacb5db3a908775522e316c8b8ccb36498"><div class="ttname"><a href="group__odp__packet__io.html#gacb5db3a908775522e316c8b8ccb36498">odp_pktout_send</a></div><div class="ttdeci">int odp_pktout_send(odp_pktout_queue_t queue, const odp_packet_t packets[], int num)</div><div class="ttdoc">Send packets directly to an interface output queue.</div></div>
<div class="ttc" id="agroup__odp__packet__io_html_gadb1dbe3dd66d31e15ec3d3e53880a446"><div class="ttname"><a href="group__odp__packet__io.html#gadb1dbe3dd66d31e15ec3d3e53880a446">odp_pktio_to_u64</a></div><div class="ttdeci">uint64_t odp_pktio_to_u64(odp_pktio_t pktio)</div><div class="ttdoc">Get printable value for an odp_pktio_t.</div></div>
<div class="ttc" id="agroup__odp__packet__io_html_gaf9dce6b2cc13ad715e777416dce88194"><div class="ttname"><a href="group__odp__packet__io.html#gaf9dce6b2cc13ad715e777416dce88194">odp_pktin_queue_config</a></div><div class="ttdeci">int odp_pktin_queue_config(odp_pktio_t pktio, const odp_pktin_queue_param_t *param)</div><div class="ttdoc">Configure packet input queues.</div></div>
<div class="ttc" id="agroup__odp__packet__io_html_gafc2120185a8da74540feade78623f3b3"><div class="ttname"><a href="group__odp__packet__io.html#gafc2120185a8da74540feade78623f3b3">odp_pktout_queue_config</a></div><div class="ttdeci">int odp_pktout_queue_config(odp_pktio_t pktio, const odp_pktout_queue_param_t *param)</div><div class="ttdoc">Configure packet output queues.</div></div>
<div class="ttc" id="agroup__odp__packet__io_html_gga4e0c26e40b1166b07142302d12e8467da9e6184e8d605ce199cfa54d6c50153ff"><div class="ttname"><a href="group__odp__packet__io.html#gga4e0c26e40b1166b07142302d12e8467da9e6184e8d605ce199cfa54d6c50153ff">ODP_PKTOUT_MODE_DIRECT</a></div><div class="ttdeci">@ ODP_PKTOUT_MODE_DIRECT</div><div class="ttdoc">Direct packet output on the interface.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__io__types_8h_source.html#l00110">api/spec/packet_io_types.h:110</a></div></div>
<div class="ttc" id="agroup__odp__packet__io_html_gga4e0c26e40b1166b07142302d12e8467daf34ccc9cab59f9ced90942c7810a149a"><div class="ttname"><a href="group__odp__packet__io.html#gga4e0c26e40b1166b07142302d12e8467daf34ccc9cab59f9ced90942c7810a149a">ODP_PKTOUT_MODE_DISABLED</a></div><div class="ttdeci">@ ODP_PKTOUT_MODE_DISABLED</div><div class="ttdoc">Application will never send to this interface.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__io__types_8h_source.html#l00117">api/spec/packet_io_types.h:116</a></div></div>
<div class="ttc" id="agroup__odp__packet__io_html_ggacf2c32e76d9d0eef9106b5fdd68cedc8a1e3d825b302ee6213937172a6b54b140"><div class="ttname"><a href="group__odp__packet__io.html#ggacf2c32e76d9d0eef9106b5fdd68cedc8a1e3d825b302ee6213937172a6b54b140">ODP_PKTIO_OP_MT_UNSAFE</a></div><div class="ttdeci">@ ODP_PKTIO_OP_MT_UNSAFE</div><div class="ttdoc">Not multithread safe operation.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__io__types_8h_source.html#l00168">api/spec/packet_io_types.h:166</a></div></div>
<div class="ttc" id="agroup__odp__packet__io_html_ggaf5d539df6fc8af55d96357c784a54b8fa36f229784bc7dcef48203b02b3938357"><div class="ttname"><a href="group__odp__packet__io.html#ggaf5d539df6fc8af55d96357c784a54b8fa36f229784bc7dcef48203b02b3938357">ODP_PKTIN_MODE_DIRECT</a></div><div class="ttdeci">@ ODP_PKTIN_MODE_DIRECT</div><div class="ttdoc">Direct packet input from the interface.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__io__types_8h_source.html#l00096">api/spec/packet_io_types.h:96</a></div></div>
<div class="ttc" id="agroup__odp__packet__io_html_ggaf5d539df6fc8af55d96357c784a54b8faa4f62db7acbe492a3b80f3f782a04dd5"><div class="ttname"><a href="group__odp__packet__io.html#ggaf5d539df6fc8af55d96357c784a54b8faa4f62db7acbe492a3b80f3f782a04dd5">ODP_PKTIN_MODE_SCHED</a></div><div class="ttdeci">@ ODP_PKTIN_MODE_SCHED</div><div class="ttdoc">Packet input through scheduler and scheduled event queues.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__io__types_8h_source.html#l00098">api/spec/packet_io_types.h:98</a></div></div>
<div class="ttc" id="agroup__odp__packet_html_ga0924634e5431e0ae31bb0cfd7bf8d262"><div class="ttname"><a href="group__odp__packet.html#ga0924634e5431e0ae31bb0cfd7bf8d262">odp_packet_from_event_multi</a></div><div class="ttdeci">void odp_packet_from_event_multi(odp_packet_t pkt[], const odp_event_t ev[], int num)</div><div class="ttdoc">Convert multiple packet events to packet handles.</div></div>
<div class="ttc" id="agroup__odp__packet_html_ga1c03b0fec815617168cf29a013442d58"><div class="ttname"><a href="group__odp__packet.html#ga1c03b0fec815617168cf29a013442d58">odp_packet_input_index</a></div><div class="ttdeci">int odp_packet_input_index(odp_packet_t pkt)</div><div class="ttdoc">Packet input interface index.</div></div>
<div class="ttc" id="agroup__odp__packet_html_ga433ba21e3c83c6d4d9831c9e732b63de"><div class="ttname"><a href="group__odp__packet.html#ga433ba21e3c83c6d4d9831c9e732b63de">odp_packet_data</a></div><div class="ttdeci">void * odp_packet_data(odp_packet_t pkt)</div><div class="ttdoc">Packet data pointer.</div></div>
<div class="ttc" id="agroup__odp__packet_html_gad190c5b094a0406b9d86da03f10c15cb"><div class="ttname"><a href="group__odp__packet.html#gad190c5b094a0406b9d86da03f10c15cb">odp_packet_free_multi</a></div><div class="ttdeci">void odp_packet_free_multi(const odp_packet_t pkt[], int num)</div><div class="ttdoc">Free multiple packets.</div></div>
<div class="ttc" id="agroup__odp__packet_html_gga428cdbec9e7bc0bc19286f9564f9828ba5404cdbbe70c105fa88e1e0c146cce54"><div class="ttname"><a href="group__odp__packet.html#gga428cdbec9e7bc0bc19286f9564f9828ba5404cdbbe70c105fa88e1e0c146cce54">ODP_PROTO_LAYER_NONE</a></div><div class="ttdeci">@ ODP_PROTO_LAYER_NONE</div><div class="ttdoc">No layers.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__types_8h_source.html#l00236">api/spec/packet_types.h:236</a></div></div>
<div class="ttc" id="agroup__odp__pool_html_ga256909a276600c25ce11b52ae274632f"><div class="ttname"><a href="group__odp__pool.html#ga256909a276600c25ce11b52ae274632f">odp_pool_create</a></div><div class="ttdeci">odp_pool_t odp_pool_create(const char *name, const odp_pool_param_t *param)</div><div class="ttdoc">Create a pool.</div></div>
<div class="ttc" id="agroup__odp__pool_html_ga2c6f42e9611904eac84872bf8f913b75"><div class="ttname"><a href="group__odp__pool.html#ga2c6f42e9611904eac84872bf8f913b75">odp_pool_capability</a></div><div class="ttdeci">int odp_pool_capability(odp_pool_capability_t *capa)</div><div class="ttdoc">Query pool capabilities.</div></div>
<div class="ttc" id="agroup__odp__pool_html_ga3dd8bcfb920f81142e9fe27cfba24073"><div class="ttname"><a href="group__odp__pool.html#ga3dd8bcfb920f81142e9fe27cfba24073">odp_pool_param_init</a></div><div class="ttdeci">void odp_pool_param_init(odp_pool_param_t *param)</div><div class="ttdoc">Initialize pool params.</div></div>
<div class="ttc" id="agroup__odp__pool_html_ga6ad439aaef911d82b972c915850e6924"><div class="ttname"><a href="group__odp__pool.html#ga6ad439aaef911d82b972c915850e6924">odp_pool_destroy</a></div><div class="ttdeci">int odp_pool_destroy(odp_pool_t pool)</div><div class="ttdoc">Destroy a pool previously created by odp_pool_create()</div></div>
<div class="ttc" id="agroup__odp__pool_html_gafca03b58412260da754042a92f8a5e04"><div class="ttname"><a href="group__odp__pool.html#gafca03b58412260da754042a92f8a5e04">ODP_POOL_INVALID</a></div><div class="ttdeci">#define ODP_POOL_INVALID</div><div class="ttdoc">Invalid pool.</div></div>
<div class="ttc" id="agroup__odp__pool_html_ggac47bb33bcde80614b4b358578eaa3082aa02b3a4e37094bd277b3dfe371450acd"><div class="ttname"><a href="group__odp__pool.html#ggac47bb33bcde80614b4b358578eaa3082aa02b3a4e37094bd277b3dfe371450acd">ODP_POOL_PACKET</a></div><div class="ttdeci">@ ODP_POOL_PACKET</div><div class="ttdoc">Packet pool.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2pool__types_8h_source.html#l00436">api/spec/pool_types.h:436</a></div></div>
<div class="ttc" id="agroup__odp__scheduler_html_ga05c15f8076326b98fe2fc534dcc6b319"><div class="ttname"><a href="group__odp__scheduler.html#ga05c15f8076326b98fe2fc534dcc6b319">odp_schedule_sync_t</a></div><div class="ttdeci">int odp_schedule_sync_t</div><div class="ttdoc">Scheduler synchronization method.</div><div class="ttdef"><b>Definition:</b> <a href="api_2abi-default_2schedule__types_8h_source.html#l00029">api/abi-default/schedule_types.h:29</a></div></div>
<div class="ttc" id="agroup__odp__scheduler_html_ga17ae1ac2ac704684d0a7087a311c73f4"><div class="ttname"><a href="group__odp__scheduler.html#ga17ae1ac2ac704684d0a7087a311c73f4">odp_schedule_multi_no_wait</a></div><div class="ttdeci">int odp_schedule_multi_no_wait(odp_queue_t *from, odp_event_t events[], int num)</div><div class="ttdoc">Schedule, do not wait for events.</div></div>
<div class="ttc" id="agroup__odp__scheduler_html_ga2ba135fc660e1c050aa25ec6744ec584"><div class="ttname"><a href="group__odp__scheduler.html#ga2ba135fc660e1c050aa25ec6744ec584">ODP_SCHED_SYNC_PARALLEL</a></div><div class="ttdeci">#define ODP_SCHED_SYNC_PARALLEL</div><div class="ttdoc">Parallel scheduled queues.</div></div>
<div class="ttc" id="agroup__odp__scheduler_html_ga4b7efc5cfc27ef416312f5adb8bdc392"><div class="ttname"><a href="group__odp__scheduler.html#ga4b7efc5cfc27ef416312f5adb8bdc392">ODP_SCHED_SYNC_ATOMIC</a></div><div class="ttdeci">#define ODP_SCHED_SYNC_ATOMIC</div><div class="ttdoc">Atomic queue synchronization.</div></div>
<div class="ttc" id="agroup__odp__scheduler_html_ga4df3696ebf4528ecc6e69ae3fff040fd"><div class="ttname"><a href="group__odp__scheduler.html#ga4df3696ebf4528ecc6e69ae3fff040fd">ODP_SCHED_SYNC_ORDERED</a></div><div class="ttdeci">#define ODP_SCHED_SYNC_ORDERED</div><div class="ttdoc">Ordered queue synchronization.</div></div>
<div class="ttc" id="agroup__odp__scheduler_html_ga9116776b8262a74af7dac7ef46fc7ace"><div class="ttname"><a href="group__odp__scheduler.html#ga9116776b8262a74af7dac7ef46fc7ace">ODP_SCHED_NO_WAIT</a></div><div class="ttdeci">#define ODP_SCHED_NO_WAIT</div><div class="ttdoc">Do not wait.</div></div>
<div class="ttc" id="agroup__odp__scheduler_html_ga94034a7f591f3f549099aebb098f7e05"><div class="ttname"><a href="group__odp__scheduler.html#ga94034a7f591f3f549099aebb098f7e05">odp_schedule_default_prio</a></div><div class="ttdeci">int odp_schedule_default_prio(void)</div><div class="ttdoc">Default scheduling priority level.</div></div>
<div class="ttc" id="agroup__odp__scheduler_html_ga9868ccb25b6631ef29cc921ee2e522b0"><div class="ttname"><a href="group__odp__scheduler.html#ga9868ccb25b6631ef29cc921ee2e522b0">odp_schedule_pause</a></div><div class="ttdeci">void odp_schedule_pause(void)</div><div class="ttdoc">Pause scheduling.</div></div>
<div class="ttc" id="agroup__odp__scheduler_html_gaa1b51ebd46adeb6aa7805fccb00144df"><div class="ttname"><a href="group__odp__scheduler.html#gaa1b51ebd46adeb6aa7805fccb00144df">odp_schedule_config</a></div><div class="ttdeci">int odp_schedule_config(const odp_schedule_config_t *config)</div><div class="ttdoc">Global schedule configuration.</div></div>
<div class="ttc" id="agroup__odp__scheduler_html_gae4ca1012ebb16ff8b9752b958dc45ce6"><div class="ttname"><a href="group__odp__scheduler.html#gae4ca1012ebb16ff8b9752b958dc45ce6">odp_schedule</a></div><div class="ttdeci">odp_event_t odp_schedule(odp_queue_t *from, uint64_t wait)</div><div class="ttdoc">Schedule an event.</div></div>
<div class="ttc" id="agroup__odp__scheduler_html_gaf16f217bd1654f854a720130dbd01a49"><div class="ttname"><a href="group__odp__scheduler.html#gaf16f217bd1654f854a720130dbd01a49">odp_schedule_resume</a></div><div class="ttdeci">void odp_schedule_resume(void)</div><div class="ttdoc">Resume scheduling.</div></div>
<div class="ttc" id="agroup__odp__shared__memory_html_ga0b02991b512acc119206b44c95a86ed6"><div class="ttname"><a href="group__odp__shared__memory.html#ga0b02991b512acc119206b44c95a86ed6">odp_shm_free</a></div><div class="ttdeci">int odp_shm_free(odp_shm_t shm)</div><div class="ttdoc">Free a contiguous block of shared memory.</div></div>
<div class="ttc" id="agroup__odp__shared__memory_html_ga6e4289975efc279bb9f31880613a9d60"><div class="ttname"><a href="group__odp__shared__memory.html#ga6e4289975efc279bb9f31880613a9d60">ODP_SHM_INVALID</a></div><div class="ttdeci">#define ODP_SHM_INVALID</div><div class="ttdoc">Invalid shared memory block.</div></div>
<div class="ttc" id="agroup__odp__shared__memory_html_gac94c4232f7cd64039bbaef601ff2c05e"><div class="ttname"><a href="group__odp__shared__memory.html#gac94c4232f7cd64039bbaef601ff2c05e">odp_shm_addr</a></div><div class="ttdeci">void * odp_shm_addr(odp_shm_t shm)</div><div class="ttdoc">Shared memory block address.</div></div>
<div class="ttc" id="agroup__odp__shared__memory_html_gacc441b0e100ec1c54e21f1745939a2d8"><div class="ttname"><a href="group__odp__shared__memory.html#gacc441b0e100ec1c54e21f1745939a2d8">odp_shm_reserve</a></div><div class="ttdeci">odp_shm_t odp_shm_reserve(const char *name, uint64_t size, uint64_t align, uint32_t flags)</div><div class="ttdoc">Reserve a contiguous block of shared memory.</div></div>
<div class="ttc" id="agroup__odp__std_html_ga0b2a7ca83ccc7af0346db309d8c06d6f"><div class="ttname"><a href="group__odp__std.html#ga0b2a7ca83ccc7af0346db309d8c06d6f">odp_bool_t</a></div><div class="ttdeci">bool odp_bool_t</div><div class="ttdoc">Boolean type.</div><div class="ttdef"><b>Definition:</b> <a href="api_2abi-default_2std__types_8h_source.html#l00025">api/abi-default/std_types.h:25</a></div></div>
<div class="ttc" id="agroup__odp__thread_html_gad6562e7320d48463715bbf15748ae360"><div class="ttname"><a href="group__odp__thread.html#gad6562e7320d48463715bbf15748ae360">odp_thread_id</a></div><div class="ttdeci">int odp_thread_id(void)</div><div class="ttdoc">Get thread identifier.</div></div>
<div class="ttc" id="agroup__odp__thread_html_ggafc7a7c180de9811d71b7cb050713bf53a2182066d714db5f2a4e994ad92f25b2a"><div class="ttname"><a href="group__odp__thread.html#ggafc7a7c180de9811d71b7cb050713bf53a2182066d714db5f2a4e994ad92f25b2a">ODP_THREAD_WORKER</a></div><div class="ttdeci">@ ODP_THREAD_WORKER</div><div class="ttdoc">Worker thread.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2thread__types_8h_source.html#l00042">api/spec/thread_types.h:42</a></div></div>
<div class="ttc" id="agroup__odp__thread_html_ggafc7a7c180de9811d71b7cb050713bf53a9aab3fdb10eb2000a864bff81f23c00a"><div class="ttname"><a href="group__odp__thread.html#ggafc7a7c180de9811d71b7cb050713bf53a9aab3fdb10eb2000a864bff81f23c00a">ODP_THREAD_CONTROL</a></div><div class="ttdeci">@ ODP_THREAD_CONTROL</div><div class="ttdoc">Control thread.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2thread__types_8h_source.html#l00054">api/spec/thread_types.h:53</a></div></div>
<div class="ttc" id="agroup__odp__time_html_ga49ab6f8fe6c0aa5b820717fd91f16ab5"><div class="ttname"><a href="group__odp__time.html#ga49ab6f8fe6c0aa5b820717fd91f16ab5">ODP_TIME_SEC_IN_NS</a></div><div class="ttdeci">#define ODP_TIME_SEC_IN_NS</div><div class="ttdoc">A second in nanoseconds.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2time__types_8h_source.html#l00031">api/spec/time_types.h:31</a></div></div>
<div class="ttc" id="agroup__odp__time_html_gabe857e90283c71df90130d1775ceb6c7"><div class="ttname"><a href="group__odp__time.html#gabe857e90283c71df90130d1775ceb6c7">odp_time_local_strict</a></div><div class="ttdeci">odp_time_t odp_time_local_strict(void)</div><div class="ttdoc">Current local time (strict)</div></div>
<div class="ttc" id="agroup__odp__time_html_gada453827b812a8fae651e9d93308e959"><div class="ttname"><a href="group__odp__time.html#gada453827b812a8fae651e9d93308e959">odp_time_diff_ns</a></div><div class="ttdeci">uint64_t odp_time_diff_ns(odp_time_t t2, odp_time_t t1)</div><div class="ttdoc">Time difference in nanoseconds.</div></div>
<div class="ttc" id="aodp__api_8h_html"><div class="ttname"><a href="odp__api_8h.html">odp_api.h</a></div><div class="ttdoc">The OpenDataPlane API.</div></div>
<div class="ttc" id="astruct__odp__abi__event__t_html"><div class="ttname"><a href="struct__odp__abi__event__t.html">_odp_abi_event_t</a></div><div class="ttdef"><b>Definition:</b> <a href="api_2abi-default_2event__types_8h_source.html#l00016">api/abi-default/event_types.h:16</a></div></div>
<div class="ttc" id="astruct__odp__abi__packet__t_html"><div class="ttname"><a href="struct__odp__abi__packet__t.html">_odp_abi_packet_t</a></div><div class="ttdef"><b>Definition:</b> <a href="api_2abi-default_2packet__types_8h_source.html#l00016">api/abi-default/packet_types.h:16</a></div></div>
<div class="ttc" id="astruct__odp__abi__pktio__t_html"><div class="ttname"><a href="struct__odp__abi__pktio__t.html">_odp_abi_pktio_t</a></div><div class="ttdef"><b>Definition:</b> <a href="api_2abi-default_2packet__io__types_8h_source.html#l00022">api/abi-default/packet_io_types.h:22</a></div></div>
<div class="ttc" id="astruct__odp__abi__pool__t_html"><div class="ttname"><a href="struct__odp__abi__pool__t.html">_odp_abi_pool_t</a></div><div class="ttdef"><b>Definition:</b> <a href="api_2abi-default_2pool__types_8h_source.html#l00014">api/abi-default/pool_types.h:14</a></div></div>
<div class="ttc" id="astruct__odp__abi__shm__t_html"><div class="ttname"><a href="struct__odp__abi__shm__t.html">_odp_abi_shm_t</a></div><div class="ttdef"><b>Definition:</b> <a href="api_2abi-default_2shared__memory_8h_source.html#l00013">api/abi-default/shared_memory.h:13</a></div></div>
<div class="ttc" id="astructodp__atomic__u32__s_html"><div class="ttname"><a href="structodp__atomic__u32__s.html">odp_atomic_u32_s</a></div><div class="ttdef"><b>Definition:</b> <a href="api_2abi-default_2atomic_8h_source.html#l00026">api/abi-default/atomic.h:26</a></div></div>
<div class="ttc" id="astructodp__barrier__s_html"><div class="ttname"><a href="structodp__barrier__s.html">odp_barrier_s</a></div><div class="ttdef"><b>Definition:</b> <a href="api_2abi-default_2barrier_8h_source.html#l00025">api/abi-default/barrier.h:25</a></div></div>
<div class="ttc" id="astructodp__cpumask__s_html"><div class="ttname"><a href="structodp__cpumask__s.html">odp_cpumask_s</a></div><div class="ttdef"><b>Definition:</b> <a href="api_2abi-default_2cpumask_8h_source.html#l00038">api/abi-default/cpumask.h:38</a></div></div>
<div class="ttc" id="astructodp__init__t_html"><div class="ttname"><a href="structodp__init__t.html">odp_init_t</a></div><div class="ttdoc">Global initialization parameters.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2init_8h_source.html#l00161">api/spec/init.h:161</a></div></div>
<div class="ttc" id="astructodp__init__t_html_a7d368c740146170ebeb1651ce049919e"><div class="ttname"><a href="structodp__init__t.html#a7d368c740146170ebeb1651ce049919e">odp_init_t::mem_model</a></div><div class="ttdeci">odp_mem_model_t mem_model</div><div class="ttdoc">Application memory model.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2init_8h_source.html#l00218">api/spec/init.h:218</a></div></div>
<div class="ttc" id="astructodp__pktin__queue__param__t_html"><div class="ttname"><a href="structodp__pktin__queue__param__t.html">odp_pktin_queue_param_t</a></div><div class="ttdoc">Packet input queue parameters.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__io__types_8h_source.html#l00230">api/spec/packet_io_types.h:230</a></div></div>
<div class="ttc" id="astructodp__pktin__queue__param__t_html_a03e94f43a2e4379d7a16adb964a55ecd"><div class="ttname"><a href="structodp__pktin__queue__param__t.html#a03e94f43a2e4379d7a16adb964a55ecd">odp_pktin_queue_param_t::num_queues</a></div><div class="ttdeci">uint32_t num_queues</div><div class="ttdoc">Number of input queues to be created.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__io__types_8h_source.html#l00270">api/spec/packet_io_types.h:270</a></div></div>
<div class="ttc" id="astructodp__pktin__queue__param__t_html_a1a15c51c24187f0f12e6482761ceb553"><div class="ttname"><a href="structodp__pktin__queue__param__t.html#a1a15c51c24187f0f12e6482761ceb553">odp_pktin_queue_param_t::op_mode</a></div><div class="ttdeci">odp_pktio_op_mode_t op_mode</div><div class="ttdoc">Operation mode.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__io__types_8h_source.html#l00236">api/spec/packet_io_types.h:236</a></div></div>
<div class="ttc" id="astructodp__pktin__queue__param__t_html_a5a07d5e93f26a523103360c0bea4a304"><div class="ttname"><a href="structodp__pktin__queue__param__t.html#a5a07d5e93f26a523103360c0bea4a304">odp_pktin_queue_param_t::queue_param</a></div><div class="ttdeci">odp_queue_param_t queue_param</div><div class="ttdoc">Queue parameters.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__io__types_8h_source.html#l00291">api/spec/packet_io_types.h:291</a></div></div>
<div class="ttc" id="astructodp__pktin__queue__param__t_html_a901146fbd15779b5665d3b75f3488e91"><div class="ttname"><a href="structodp__pktin__queue__param__t.html#a901146fbd15779b5665d3b75f3488e91">odp_pktin_queue_param_t::hash_proto</a></div><div class="ttdeci">odp_pktin_hash_proto_t hash_proto</div><div class="ttdoc">Protocol field selection for hashing.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__io__types_8h_source.html#l00261">api/spec/packet_io_types.h:261</a></div></div>
<div class="ttc" id="astructodp__pktin__queue__param__t_html_aa90bfc914603a90f7b1f7e7f0de07418"><div class="ttname"><a href="structodp__pktin__queue__param__t.html#aa90bfc914603a90f7b1f7e7f0de07418">odp_pktin_queue_param_t::hash_enable</a></div><div class="ttdeci">odp_bool_t hash_enable</div><div class="ttdoc">Enable flow hashing.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__io__types_8h_source.html#l00255">api/spec/packet_io_types.h:255</a></div></div>
<div class="ttc" id="astructodp__pktin__queue__s_html"><div class="ttname"><a href="structodp__pktin__queue__s.html">odp_pktin_queue_s</a></div><div class="ttdef"><b>Definition:</b> <a href="api_2abi-default_2packet__io__types_8h_source.html#l00057">api/abi-default/packet_io_types.h:57</a></div></div>
<div class="ttc" id="astructodp__pktio__capability__t_html"><div class="ttname"><a href="structodp__pktio__capability__t.html">odp_pktio_capability_t</a></div><div class="ttdoc">Packet IO capabilities.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__io__types_8h_source.html#l01025">api/spec/packet_io_types.h:1025</a></div></div>
<div class="ttc" id="astructodp__pktio__capability__t_html_a22b3144c61395432e265ac751a269304"><div class="ttname"><a href="structodp__pktio__capability__t.html#a22b3144c61395432e265ac751a269304">odp_pktio_capability_t::maxlen</a></div><div class="ttdeci">struct odp_pktio_capability_t::@114 maxlen</div><div class="ttdoc">Supported frame lengths for odp_pktio_maxlen_set()</div></div>
<div class="ttc" id="astructodp__pktio__capability__t_html_a2d4329604c32dda9539d9ea9831b2291"><div class="ttname"><a href="structodp__pktio__capability__t.html#a2d4329604c32dda9539d9ea9831b2291">odp_pktio_capability_t::set_op</a></div><div class="ttdeci">odp_pktio_set_op_t set_op</div><div class="ttdoc">Supported set operations.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__io__types_8h_source.html#l01063">api/spec/packet_io_types.h:1063</a></div></div>
<div class="ttc" id="astructodp__pktio__capability__t_html_a2f6c0f1389d93f2da0be4a14f8a1fd5b"><div class="ttname"><a href="structodp__pktio__capability__t.html#a2f6c0f1389d93f2da0be4a14f8a1fd5b">odp_pktio_capability_t::max_output</a></div><div class="ttdeci">uint32_t max_output</div><div class="ttdoc">Maximum valid value for 'maxlen_output'.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__io__types_8h_source.html#l01087">api/spec/packet_io_types.h:1087</a></div></div>
<div class="ttc" id="astructodp__pktio__capability__t_html_a41331b30786ec8c9a4861dfe5b220b61"><div class="ttname"><a href="structodp__pktio__capability__t.html#a41331b30786ec8c9a4861dfe5b220b61">odp_pktio_capability_t::max_input_queues</a></div><div class="ttdeci">uint32_t max_input_queues</div><div class="ttdoc">Maximum number of input queues.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__io__types_8h_source.html#l01029">api/spec/packet_io_types.h:1029</a></div></div>
<div class="ttc" id="astructodp__pktio__capability__t_html_a5243a96efbd4561947e2dd6ebf00a1dc"><div class="ttname"><a href="structodp__pktio__capability__t.html#a5243a96efbd4561947e2dd6ebf00a1dc">odp_pktio_capability_t::max_input</a></div><div class="ttdeci">uint32_t max_input</div><div class="ttdoc">Maximum valid value for 'maxlen_input'.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__io__types_8h_source.html#l01083">api/spec/packet_io_types.h:1083</a></div></div>
<div class="ttc" id="astructodp__pktio__capability__t_html_a741be7a79f65ef773e6bb9cbf305eb4c"><div class="ttname"><a href="structodp__pktio__capability__t.html#a741be7a79f65ef773e6bb9cbf305eb4c">odp_pktio_capability_t::min_output</a></div><div class="ttdeci">uint32_t min_output</div><div class="ttdoc">Minimum valid value for 'maxlen_output'.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__io__types_8h_source.html#l01085">api/spec/packet_io_types.h:1085</a></div></div>
<div class="ttc" id="astructodp__pktio__capability__t_html_a853625a680b37aeb0839c63ba04c632c"><div class="ttname"><a href="structodp__pktio__capability__t.html#a853625a680b37aeb0839c63ba04c632c">odp_pktio_capability_t::max_output_queues</a></div><div class="ttdeci">uint32_t max_output_queues</div><div class="ttdoc">Maximum number of output queues.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__io__types_8h_source.html#l01044">api/spec/packet_io_types.h:1044</a></div></div>
<div class="ttc" id="astructodp__pktio__capability__t_html_aac6facf8d541758a0d336dc6e8842438"><div class="ttname"><a href="structodp__pktio__capability__t.html#aac6facf8d541758a0d336dc6e8842438">odp_pktio_capability_t::min_input</a></div><div class="ttdeci">uint32_t min_input</div><div class="ttdoc">Minimum valid value for 'maxlen_input'.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__io__types_8h_source.html#l01081">api/spec/packet_io_types.h:1081</a></div></div>
<div class="ttc" id="astructodp__pktio__config__t_html"><div class="ttname"><a href="structodp__pktio__config__t.html">odp_pktio_config_t</a></div><div class="ttdoc">Packet IO configuration options.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__io__types_8h_source.html#l00594">api/spec/packet_io_types.h:594</a></div></div>
<div class="ttc" id="astructodp__pktio__config__t_html_ab11707ba4258066a50f0e029fcc641f5"><div class="ttname"><a href="structodp__pktio__config__t.html#ab11707ba4258066a50f0e029fcc641f5">odp_pktio_config_t::parser</a></div><div class="ttdeci">odp_pktio_parser_config_t parser</div><div class="ttdoc">Packet input parser configuration.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__io__types_8h_source.html#l00606">api/spec/packet_io_types.h:606</a></div></div>
<div class="ttc" id="astructodp__pktio__param__t_html"><div class="ttname"><a href="structodp__pktio__param__t.html">odp_pktio_param_t</a></div><div class="ttdoc">Packet IO parameters.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__io__types_8h_source.html#l00353">api/spec/packet_io_types.h:353</a></div></div>
<div class="ttc" id="astructodp__pktio__param__t_html_a819cf5e2ef7df43a729cad159c022f4d"><div class="ttname"><a href="structodp__pktio__param__t.html#a819cf5e2ef7df43a729cad159c022f4d">odp_pktio_param_t::in_mode</a></div><div class="ttdeci">odp_pktin_mode_t in_mode</div><div class="ttdoc">Packet input mode.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__io__types_8h_source.html#l00357">api/spec/packet_io_types.h:357</a></div></div>
<div class="ttc" id="astructodp__pktio__param__t_html_afc226fd3904618950a0d1154ffa2fd8c"><div class="ttname"><a href="structodp__pktio__param__t.html#afc226fd3904618950a0d1154ffa2fd8c">odp_pktio_param_t::out_mode</a></div><div class="ttdeci">odp_pktout_mode_t out_mode</div><div class="ttdoc">Packet output mode.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__io__types_8h_source.html#l00362">api/spec/packet_io_types.h:362</a></div></div>
<div class="ttc" id="astructodp__pktio__parser__config__t_html_aff1f0d93e1f3cc93006aa613287378a2"><div class="ttname"><a href="structodp__pktio__parser__config__t.html#aff1f0d93e1f3cc93006aa613287378a2">odp_pktio_parser_config_t::layer</a></div><div class="ttdeci">odp_proto_layer_t layer</div><div class="ttdoc">Protocol parsing level in packet input.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__io__types_8h_source.html#l00570">api/spec/packet_io_types.h:570</a></div></div>
<div class="ttc" id="astructodp__pktout__queue__param__t_html"><div class="ttname"><a href="structodp__pktout__queue__param__t.html">odp_pktout_queue_param_t</a></div><div class="ttdoc">Packet output queue parameters.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__io__types_8h_source.html#l00323">api/spec/packet_io_types.h:323</a></div></div>
<div class="ttc" id="astructodp__pktout__queue__param__t_html_a066fd0a2de0efca0056cd1529d78b06e"><div class="ttname"><a href="structodp__pktout__queue__param__t.html#a066fd0a2de0efca0056cd1529d78b06e">odp_pktout_queue_param_t::op_mode</a></div><div class="ttdeci">odp_pktio_op_mode_t op_mode</div><div class="ttdoc">Operation mode.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__io__types_8h_source.html#l00329">api/spec/packet_io_types.h:329</a></div></div>
<div class="ttc" id="astructodp__pktout__queue__param__t_html_acd16e77991869797adb3da1bd41a1d0c"><div class="ttname"><a href="structodp__pktout__queue__param__t.html#acd16e77991869797adb3da1bd41a1d0c">odp_pktout_queue_param_t::num_queues</a></div><div class="ttdeci">uint32_t num_queues</div><div class="ttdoc">Number of output queues to be created.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__io__types_8h_source.html#l00333">api/spec/packet_io_types.h:333</a></div></div>
<div class="ttc" id="astructodp__pktout__queue__s_html"><div class="ttname"><a href="structodp__pktout__queue__s.html">odp_pktout_queue_s</a></div><div class="ttdef"><b>Definition:</b> <a href="api_2abi-default_2packet__io__types_8h_source.html#l00063">api/abi-default/packet_io_types.h:63</a></div></div>
<div class="ttc" id="astructodp__pool__capability__t_html"><div class="ttname"><a href="structodp__pool__capability__t.html">odp_pool_capability_t</a></div><div class="ttdoc">Pool capabilities.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2pool__types_8h_source.html#l00184">api/spec/pool_types.h:184</a></div></div>
<div class="ttc" id="astructodp__pool__capability__t_html_a11c2f0606b3bb00a72220d2352f43806"><div class="ttname"><a href="structodp__pool__capability__t.html#a11c2f0606b3bb00a72220d2352f43806">odp_pool_capability_t::pkt</a></div><div class="ttdeci">struct odp_pool_capability_t::@133 pkt</div><div class="ttdoc">Packet pool capabilities</div></div>
<div class="ttc" id="astructodp__pool__capability__t_html_a2b468c5617515bbd5d50a57a7d65e1e0"><div class="ttname"><a href="structodp__pool__capability__t.html#a2b468c5617515bbd5d50a57a7d65e1e0">odp_pool_capability_t::max_num</a></div><div class="ttdeci">uint32_t max_num</div><div class="ttdoc">Maximum number of buffers of any size.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2pool__types_8h_source.html#l00206">api/spec/pool_types.h:206</a></div></div>
<div class="ttc" id="astructodp__pool__capability__t_html_affefe3b2c3a473c37d08fcd2929e84c2"><div class="ttname"><a href="structodp__pool__capability__t.html#affefe3b2c3a473c37d08fcd2929e84c2">odp_pool_capability_t::max_len</a></div><div class="ttdeci">uint32_t max_len</div><div class="ttdoc">Maximum packet data length in bytes.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2pool__types_8h_source.html#l00247">api/spec/pool_types.h:247</a></div></div>
<div class="ttc" id="astructodp__pool__param__t_html"><div class="ttname"><a href="structodp__pool__param__t.html">odp_pool_param_t</a></div><div class="ttdoc">Pool parameters.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2pool__types_8h_source.html#l00466">api/spec/pool_types.h:466</a></div></div>
<div class="ttc" id="astructodp__pool__param__t_html_a3598b3a2496629cd45010c1c5e876250"><div class="ttname"><a href="structodp__pool__param__t.html#a3598b3a2496629cd45010c1c5e876250">odp_pool_param_t::num</a></div><div class="ttdeci">uint32_t num</div><div class="ttdoc">Number of buffers in the pool.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2pool__types_8h_source.html#l00473">api/spec/pool_types.h:473</a></div></div>
<div class="ttc" id="astructodp__pool__param__t_html_a7f9ca49dc21d48da0d80860c03faec1d"><div class="ttname"><a href="structodp__pool__param__t.html#a7f9ca49dc21d48da0d80860c03faec1d">odp_pool_param_t::pkt</a></div><div class="ttdeci">struct odp_pool_param_t::@138 pkt</div><div class="ttdoc">Parameters for packet pools.</div></div>
<div class="ttc" id="astructodp__pool__param__t_html_aac72ae142dd9736a287ce63d78b71c87"><div class="ttname"><a href="structodp__pool__param__t.html#aac72ae142dd9736a287ce63d78b71c87">odp_pool_param_t::type</a></div><div class="ttdeci">odp_pool_type_t type</div><div class="ttdoc">Pool type.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2pool__types_8h_source.html#l00468">api/spec/pool_types.h:468</a></div></div>
<div class="ttc" id="astructodp__pool__param__t_html_ac1ccfa50466f4afa9a9ab72f0bd315bf"><div class="ttname"><a href="structodp__pool__param__t.html#ac1ccfa50466f4afa9a9ab72f0bd315bf">odp_pool_param_t::len</a></div><div class="ttdeci">uint32_t len</div><div class="ttdoc">Minimum length of 'num' packets.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2pool__types_8h_source.html#l00540">api/spec/pool_types.h:540</a></div></div>
<div class="ttc" id="astructodp__pool__param__t_html_ad400db5955445ee3d1fbb36df456e7f1"><div class="ttname"><a href="structodp__pool__param__t.html#ad400db5955445ee3d1fbb36df456e7f1">odp_pool_param_t::seg_len</a></div><div class="ttdeci">uint32_t seg_len</div><div class="ttdoc">Minimum number of packet data bytes that can be stored in the first segment of a newly allocated pack...</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2pool__types_8h_source.html#l00566">api/spec/pool_types.h:566</a></div></div>
<div class="ttc" id="astructodp__queue__param__t_html_a371701df4d20cee95978b9265c232e32"><div class="ttname"><a href="structodp__queue__param__t.html#a371701df4d20cee95978b9265c232e32">odp_queue_param_t::sched</a></div><div class="ttdeci">odp_schedule_param_t sched</div><div class="ttdoc">Scheduler parameters.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2queue__types_8h_source.html#l00270">api/spec/queue_types.h:270</a></div></div>
<div class="ttc" id="astructodp__schedule__param__t_html_a3f103771c3a9319c1ec998fa8724b8ac"><div class="ttname"><a href="structodp__schedule__param__t.html#a3f103771c3a9319c1ec998fa8724b8ac">odp_schedule_param_t::prio</a></div><div class="ttdeci">odp_schedule_prio_t prio</div><div class="ttdoc">Priority level.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2schedule__types_8h_source.html#l00194">api/spec/schedule_types.h:194</a></div></div>
<div class="ttc" id="astructodp__schedule__param__t_html_ad4ca09d63edb0cec36567c26688cea14"><div class="ttname"><a href="structodp__schedule__param__t.html#ad4ca09d63edb0cec36567c26688cea14">odp_schedule_param_t::sync</a></div><div class="ttdeci">odp_schedule_sync_t sync</div><div class="ttdoc">Synchronization method.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2schedule__types_8h_source.html#l00199">api/spec/schedule_types.h:199</a></div></div>
<div class="ttc" id="astructodp__time__s_html"><div class="ttname"><a href="structodp__time__s.html">odp_time_s</a></div><div class="ttdef"><b>Definition:</b> <a href="api_2abi-default_2time__types_8h_source.html#l00018">api/abi-default/time_types.h:18</a></div></div>
<div class="ttc" id="aunionodp__pktin__hash__proto__t_html_a23793296c3a0299f69bdacc438ca3caf"><div class="ttname"><a href="unionodp__pktin__hash__proto__t.html#a23793296c3a0299f69bdacc438ca3caf">odp_pktin_hash_proto_t::proto</a></div><div class="ttdeci">struct odp_pktin_hash_proto_t::@106 proto</div><div class="ttdoc">Protocol header fields for hashing.</div></div>
<div class="ttc" id="aunionodp__pktin__hash__proto__t_html_a55c2478785f04914939ed859bdc16839"><div class="ttname"><a href="unionodp__pktin__hash__proto__t.html#a55c2478785f04914939ed859bdc16839">odp_pktin_hash_proto_t::ipv4_udp</a></div><div class="ttdeci">uint32_t ipv4_udp</div><div class="ttdoc">IPv4 addresses and UDP port numbers.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__io__types_8h_source.html#l00129">api/spec/packet_io_types.h:129</a></div></div>
<div class="ttc" id="aunionodp__pktio__set__op__t_html_a47fb7792a712983f7a670e24ef9cd08a"><div class="ttname"><a href="unionodp__pktio__set__op__t.html#a47fb7792a712983f7a670e24ef9cd08a">odp_pktio_set_op_t::maxlen</a></div><div class="ttdeci">uint32_t maxlen</div><div class="ttdoc">Maximum frame length.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__io__types_8h_source.html#l00767">api/spec/packet_io_types.h:767</a></div></div>
<div class="ttc" id="aunionodp__pktio__set__op__t_html_a63dcf0f49f84a9678c00f5581e2c75cc"><div class="ttname"><a href="unionodp__pktio__set__op__t.html#a63dcf0f49f84a9678c00f5581e2c75cc">odp_pktio_set_op_t::op</a></div><div class="ttdeci">struct odp_pktio_set_op_t::@111 op</div><div class="ttdoc">Operation flags.</div></div>
<div class="ttc" id="aunionodp__pktio__set__op__t_html_ae821914c6895a2cfbea766f6c70d48bc"><div class="ttname"><a href="unionodp__pktio__set__op__t.html#ae821914c6895a2cfbea766f6c70d48bc">odp_pktio_set_op_t::promisc_mode</a></div><div class="ttdeci">uint32_t promisc_mode</div><div class="ttdoc">Promiscuous mode.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2packet__io__types_8h_source.html#l00761">api/spec/packet_io_types.h:761</a></div></div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
