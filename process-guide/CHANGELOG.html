<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.24">
<title>OpenDataPlane (1.48.0.0)</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child{border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock pre>code{display:block}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active,#footnotes .footnote a:first-of-type:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_opendataplane_1_48_0_0">OpenDataPlane (1.48.0.0)</a>
<ul class="sectlevel2">
<li><a href="#_backward_incompatible_api_changes">Backward incompatible API changes</a></li>
<li><a href="#_backward_compatible_api_changes">Backward compatible API changes</a></li>
<li><a href="#_implementation">Implementation</a></li>
<li><a href="#_performance_tests">Performance Tests</a></li>
</ul>
</li>
<li><a href="#_opendataplane_1_47_0_0">OpenDataPlane (1.47.0.0)</a>
<ul class="sectlevel2">
<li><a href="#_backward_incompatible_api_changes_2">Backward incompatible API changes</a></li>
<li><a href="#_backward_compatible_api_changes_2">Backward compatible API changes</a></li>
<li><a href="#_abi_changes">ABI changes</a></li>
<li><a href="#_helper_1_7_1">Helper (1.7.1)</a></li>
<li><a href="#_implementation_2">Implementation</a></li>
<li><a href="#_performance_tests_2">Performance Tests</a></li>
</ul>
</li>
<li><a href="#_opendataplane_1_46_0_0">OpenDataPlane (1.46.0.0)</a>
<ul class="sectlevel2">
<li><a href="#_backward_incompatible_api_changes_3">Backward incompatible API changes</a></li>
<li><a href="#_backward_compatible_api_changes_3">Backward compatible API changes</a></li>
<li><a href="#_remove_deprecated_apis">Remove deprecated APIs</a></li>
<li><a href="#_helper_1_7_0">Helper (1.7.0)</a></li>
<li><a href="#_implementation_3">Implementation</a></li>
<li><a href="#_example_applications">Example Applications</a></li>
<li><a href="#_performance_tests_3">Performance Tests</a></li>
</ul>
</li>
<li><a href="#_opendataplane_1_45_1_0">OpenDataPlane (1.45.1.0)</a>
<ul class="sectlevel2">
<li><a href="#_backward_compatible_api_changes_5">Backward compatible API changes</a></li>
<li><a href="#_abi_changes_2">ABI changes</a></li>
<li><a href="#_implementation_4">Implementation</a></li>
<li><a href="#_example_applications_2">Example Applications</a></li>
<li><a href="#_performance_tests_4">Performance Tests</a></li>
</ul>
</li>
<li><a href="#_opendataplane_1_45_0_0">OpenDataPlane (1.45.0.0)</a>
<ul class="sectlevel2">
<li><a href="#_backward_incompatible_api_changes_4">Backward incompatible API changes</a></li>
<li><a href="#_backward_compatible_api_changes_6">Backward compatible API changes</a></li>
<li><a href="#_helper_1_6_0">Helper (1.6.0)</a></li>
<li><a href="#_example_applications_3">Example Applications</a></li>
<li><a href="#_miscellaneous_tests">Miscellaneous Tests</a></li>
<li><a href="#_performance_tests_5">Performance Tests</a></li>
</ul>
</li>
<li><a href="#_opendataplane_1_44_0_0">OpenDataPlane (1.44.0.0)</a>
<ul class="sectlevel2">
<li><a href="#_backward_compatible_api_changes_7">Backward compatible API changes</a></li>
<li><a href="#_implementation_5">Implementation</a></li>
<li><a href="#_example_applications_4">Example Applications</a></li>
<li><a href="#_performance_tests_6">Performance Tests</a></li>
</ul>
</li>
<li><a href="#_opendataplane_1_43_0_0">OpenDataPlane (1.43.0.0)</a>
<ul class="sectlevel2">
<li><a href="#_backward_incompatible_api_changes_5">Backward incompatible API changes</a></li>
<li><a href="#_backward_compatible_api_changes_8">Backward compatible API changes</a></li>
<li><a href="#_remove_deprecated_apis_2">Remove deprecated APIs</a></li>
<li><a href="#_helper_1_5_0">Helper (1.5.0)</a></li>
<li><a href="#_implementation_6">Implementation</a></li>
<li><a href="#_performance_tests_7">Performance Tests</a></li>
</ul>
</li>
<li><a href="#_opendataplane_1_42_1_0">OpenDataPlane (1.42.1.0)</a>
<ul class="sectlevel2">
<li><a href="#_backward_compatible_api_changes_9">Backward compatible API changes</a></li>
<li><a href="#_helper_1_4_0">Helper (1.4.0)</a></li>
<li><a href="#_implementation_7">Implementation</a></li>
<li><a href="#_example_applications_5">Example Applications</a></li>
<li><a href="#_performance_tests_8">Performance Tests</a></li>
</ul>
</li>
<li><a href="#_opendataplane_1_42_0_0">OpenDataPlane (1.42.0.0)</a>
<ul class="sectlevel2">
<li><a href="#_backward_incompatible_api_changes_6">Backward incompatible API changes</a></li>
<li><a href="#_backward_compatible_api_changes_10">Backward compatible API changes</a></li>
<li><a href="#_implementation_8">Implementation</a></li>
</ul>
</li>
<li><a href="#_opendataplane_1_41_1_0">OpenDataPlane (1.41.1.0)</a>
<ul class="sectlevel2">
<li><a href="#_backward_compatible_api_changes_11">Backward compatible API changes</a></li>
<li><a href="#_performance_tests_9">Performance Tests</a></li>
</ul>
</li>
<li><a href="#_opendataplane_1_41_0_0">OpenDataPlane (1.41.0.0)</a>
<ul class="sectlevel2">
<li><a href="#_backward_incompatible_api_changes_7">Backward incompatible API changes</a></li>
<li><a href="#_backward_compatible_api_changes_12">Backward compatible API changes</a></li>
<li><a href="#_remove_deprecated_apis_3">Remove deprecated APIs</a></li>
<li><a href="#_implementation_9">Implementation</a></li>
</ul>
</li>
<li><a href="#_opendataplane_1_40_0_0">OpenDataPlane (1.40.0.0)</a>
<ul class="sectlevel2">
<li><a href="#_backward_incompatible_api_changes_8">Backward incompatible API changes</a></li>
<li><a href="#_backward_compatible_api_changes_13">Backward compatible API changes</a></li>
<li><a href="#_remove_deprecated_apis_4">Remove deprecated APIs</a></li>
<li><a href="#_implementation_10">Implementation</a></li>
</ul>
</li>
<li><a href="#_opendataplane_1_39_0_0">OpenDataPlane (1.39.0.0)</a>
<ul class="sectlevel2">
<li><a href="#_backward_incompatible_api_changes_9">Backward incompatible API changes</a></li>
<li><a href="#_backward_compatible_api_changes_14">Backward compatible API changes</a></li>
</ul>
</li>
<li><a href="#_opendataplane_1_38_0_0">OpenDataPlane (1.38.0.0)</a>
<ul class="sectlevel2">
<li><a href="#_backward_incompatible_api_changes_10">Backward incompatible API changes</a></li>
<li><a href="#_backward_compatible_api_changes_15">Backward compatible API changes</a></li>
</ul>
</li>
<li><a href="#_opendataplane_1_37_2_0">OpenDataPlane (1.37.2.0)</a>
<ul class="sectlevel2">
<li><a href="#_backward_compatible_api_changes_16">Backward compatible API changes</a></li>
</ul>
</li>
<li><a href="#_opendataplane_1_37_1_0">OpenDataPlane (1.37.1.0)</a>
<ul class="sectlevel2">
<li><a href="#_backward_compatible_api_changes_17">Backward compatible API changes</a></li>
</ul>
</li>
<li><a href="#_opendataplane_1_37_0_0">OpenDataPlane (1.37.0.0)</a>
<ul class="sectlevel2">
<li><a href="#_backward_incompatible_api_changes_11">Backward incompatible API changes</a></li>
<li><a href="#_backward_compatible_api_changes_18">Backward compatible API changes</a></li>
<li><a href="#_implementation_11">Implementation</a></li>
</ul>
</li>
<li><a href="#_opendataplane_1_36_0_0">OpenDataPlane (1.36.0.0)</a>
<ul class="sectlevel2">
<li><a href="#_backward_incompatible_api_changes_12">Backward incompatible API changes</a></li>
<li><a href="#_backward_compatible_api_changes_19">Backward compatible API changes</a></li>
</ul>
</li>
<li><a href="#_opendataplane_1_35_0_0">OpenDataPlane (1.35.0.0)</a>
<ul class="sectlevel2">
<li><a href="#_backward_incompatible_api_changes_13">Backward incompatible API changes</a></li>
<li><a href="#_backward_compatible_api_changes_20">Backward compatible API changes</a></li>
<li><a href="#_remove_deprecated_apis_5">Remove deprecated APIs</a></li>
</ul>
</li>
<li><a href="#_opendataplane_1_34_0_0">OpenDataPlane (1.34.0.0)</a>
<ul class="sectlevel2">
<li><a href="#_backward_incompatible_api_changes_14">Backward incompatible API changes</a></li>
<li><a href="#_backward_compatible_api_changes_21">Backward compatible API changes</a></li>
<li><a href="#_abi_changes_3">ABI changes</a></li>
</ul>
</li>
<li><a href="#_opendataplane_1_33_0_0">OpenDataPlane (1.33.0.0)</a>
<ul class="sectlevel2">
<li><a href="#_backward_incompatible_api_changes_15">Backward incompatible API changes</a></li>
<li><a href="#_backward_compatible_api_changes_22">Backward compatible API changes</a></li>
<li><a href="#_pool_10">Pool</a></li>
</ul>
</li>
<li><a href="#_opendataplane_1_32_1_0">OpenDataPlane (1.32.1.0)</a>
<ul class="sectlevel2">
<li><a href="#_backward_compatible_api_changes_23">Backward compatible API changes</a></li>
<li><a href="#_helper_1_3_0">Helper (1.3.0)</a></li>
</ul>
</li>
<li><a href="#_opendataplane_1_32_0_0">OpenDataPlane (1.32.0.0)</a>
<ul class="sectlevel2">
<li><a href="#_backward_incompatible_api_changes_16">Backward incompatible API changes</a></li>
<li><a href="#_backward_compatible_api_changes_24">Backward compatible API changes</a></li>
<li><a href="#_helper_1_2_0">Helper (1.2.0)</a></li>
<li><a href="#_implementation_12">Implementation</a></li>
</ul>
</li>
<li><a href="#_opendataplane_1_31_0_0">OpenDataPlane (1.31.0.0)</a>
<ul class="sectlevel2">
<li><a href="#_backward_incompatible_api_changes_17">Backward incompatible API changes</a></li>
<li><a href="#_backward_compatible_api_changes_25">Backward compatible API changes</a></li>
<li><a href="#_helper_1_1_1">Helper (1.1.1)</a></li>
</ul>
</li>
<li><a href="#_opendataplane_1_30_1_0">OpenDataPlane (1.30.1.0)</a>
<ul class="sectlevel2">
<li><a href="#_api">API</a></li>
</ul>
</li>
<li><a href="#_opendataplane_1_30_0_0">OpenDataPlane (1.30.0.0)</a>
<ul class="sectlevel2">
<li><a href="#_api_2">API</a></li>
<li><a href="#_helper_1_1_0">Helper (1.1.0)</a></li>
</ul>
</li>
<li><a href="#_opendataplane_1_29_0_0">OpenDataPlane (1.29.0.0)</a>
<ul class="sectlevel2">
<li><a href="#_api_3">API</a></li>
<li><a href="#_implementation_13">Implementation</a></li>
</ul>
</li>
<li><a href="#_opendataplane_1_28_0_0">OpenDataPlane (1.28.0.0)</a>
<ul class="sectlevel2">
<li><a href="#_api_4">API</a></li>
</ul>
</li>
<li><a href="#_opendataplane_1_24_0_0">OpenDataPlane (1.24.0.0)</a>
<ul class="sectlevel2">
<li><a href="#_summary_of_changes">Summary of Changes</a></li>
<li><a href="#_api_5">API</a></li>
<li><a href="#_align">Align</a></li>
<li><a href="#_validation_tests">Validation Tests</a></li>
<li><a href="#_example_applications_6">Example Applications</a></li>
<li><a href="#_implementation_improvements">Implementation Improvements</a></li>
<li><a href="#_bug_fixes">Bug Fixes</a></li>
</ul>
</li>
<li><a href="#_opendataplane_1_23_0_0">OpenDataPlane (1.23.0.0)</a>
<ul class="sectlevel2">
<li><a href="#_summary_of_changes_2">Summary of Changes</a></li>
<li><a href="#_api_6">API</a></li>
<li><a href="#_helper">Helper</a></li>
<li><a href="#_validation_tests_2">Validation Tests</a></li>
<li><a href="#_example_applications_7">Example Applications</a></li>
<li><a href="#_implementation_14">Implementation</a></li>
<li><a href="#_bug_fixes_2">Bug Fixes</a></li>
</ul>
</li>
<li><a href="#_opendataplane_1_22_0_0">OpenDataPlane (1.22.0.0)</a>
<ul class="sectlevel2">
<li><a href="#_summary_of_changes_3">Summary of Changes</a></li>
<li><a href="#_api_changes">API Changes</a></li>
<li><a href="#_helper_changes">Helper Changes</a></li>
<li><a href="#_validation_test_improvements">Validation Test Improvements</a></li>
<li><a href="#_example_changes">Example Changes</a></li>
<li><a href="#_implementation_improvements_2">Implementation Improvements</a></li>
<li><a href="#_miscellaneous_2">Miscellaneous</a></li>
<li><a href="#_bug_fixes_3">Bug Fixes</a></li>
</ul>
</li>
<li><a href="#_opendataplane_1_21_0_0">OpenDataPlane (1.21.0.0)</a>
<ul class="sectlevel2">
<li><a href="#_summary_of_changes_4">Summary of Changes</a></li>
<li><a href="#_testvalidation_improvements">Test/Validation Improvements</a></li>
<li><a href="#_bug_fixes_4">Bug Fixes</a></li>
</ul>
</li>
<li><a href="#_opendataplane_1_20_0_0">OpenDataPlane (1.20.0.0)</a>
<ul class="sectlevel2">
<li><a href="#_summary_of_changes_5">Summary of Changes</a></li>
<li><a href="#_implementation_improvements_3">Implementation Improvements</a></li>
<li><a href="#_validation_test_improvements_2">Validation Test Improvements</a></li>
<li><a href="#_helper_changes_2">Helper Changes</a></li>
<li><a href="#_performance_test_improvements">Performance Test Improvements</a></li>
<li><a href="#_example_improvements">Example Improvements</a></li>
<li><a href="#_bug_fixes_5">Bug Fixes</a></li>
<li><a href="#_known_issues">Known Issues</a></li>
</ul>
</li>
<li><a href="#_opendataplane_1_19_0_2">OpenDataPlane (1.19.0.2)</a>
<ul class="sectlevel2">
<li><a href="#_summary_of_changes_6">Summary of Changes</a></li>
<li><a href="#_implementation_improvements_4">Implementation Improvements</a></li>
<li><a href="#_validation_test_improvements_3">Validation Test Improvements</a></li>
<li><a href="#_crypto_test_improvements_2">Crypto Test Improvements</a></li>
<li><a href="#_performance_test_improvements_2">Performance Test Improvements</a></li>
<li><a href="#_helper_changes_3">Helper Changes</a></li>
<li><a href="#_examples_improvements">Examples Improvements</a></li>
<li><a href="#_bug_fixes_6">Bug Fixes</a></li>
<li><a href="#_unnumbered_bug_fixes">Unnumbered Bug Fixes</a></li>
<li><a href="#_known_issues_2">Known Issues</a></li>
</ul>
</li>
<li><a href="#_opendataplane_1_19_0_1">OpenDataPlane (1.19.0.1)</a>
<ul class="sectlevel2">
<li><a href="#_summary_of_changes_7">Summary of Changes</a></li>
<li><a href="#_implementation_improvements_5">Implementation Improvements</a></li>
<li><a href="#_validation_improvements">Validation Improvements</a></li>
<li><a href="#_documentation_improvements">Documentation Improvements</a></li>
<li><a href="#_bug_fixes_7">Bug Fixes</a></li>
<li><a href="#_known_issues_3">Known Issues</a></li>
</ul>
</li>
<li><a href="#_opendataplane_1_19_0_0">OpenDataPlane (1.19.0.0)</a>
<ul class="sectlevel2">
<li><a href="#_summary_of_changes_8">Summary of Changes</a></li>
<li><a href="#_implementation_improvements_6">Implementation Improvements</a></li>
<li><a href="#_dependency_changes">Dependency Changes</a></li>
<li><a href="#_performance_tests_10">Performance Tests</a></li>
<li><a href="#_example_changes_2">Example Changes</a></li>
<li><a href="#_bug_fixes_8">Bug Fixes</a></li>
<li><a href="#_known_issues_4">Known Issues</a></li>
</ul>
</li>
<li><a href="#_opendataplane_1_18_0_1">OpenDataPlane (1.18.0.1)</a>
<ul class="sectlevel2">
<li><a href="#_summary_of_changes_9">Summary of Changes</a></li>
</ul>
</li>
<li><a href="#_opendataplane_1_18_0_0">OpenDataPlane (1.18.0.0)</a>
<ul class="sectlevel2">
<li><a href="#_new_features">New Features</a></li>
<li><a href="#_streamlined_abi_support">Streamlined ABI Support</a></li>
<li><a href="#_reference_implementation_fixes_and_improvements">Reference Implementation Fixes and Improvements</a></li>
<li><a href="#_testexample_improvements">Test/Example Improvements</a></li>
<li><a href="#_bug_fixes_9">Bug Fixes</a></li>
<li><a href="#_known_issues_5">Known Issues</a></li>
</ul>
</li>
<li><a href="#_opendataplane_1_17_0_0">OpenDataPlane (1.17.0.0)</a>
<ul class="sectlevel2">
<li><a href="#_new_features_2">New Features</a></li>
<li><a href="#_scalable_scheduler">Scalable Scheduler</a></li>
<li><a href="#_miscellaneous_fixes_and_improvements">Miscellaneous Fixes and Improvements</a></li>
<li><a href="#_testexample_improvements_2">Test/Example improvements</a></li>
<li><a href="#_l2fwd_example_2">l2fwd Example</a></li>
<li><a href="#_odp_generator">ODP generator</a></li>
<li><a href="#_bug_fixes_10">Bug Fixes</a></li>
<li><a href="#_known_issues_6">Known Issues</a></li>
</ul>
</li>
<li><a href="#_opendataplane_1_16_0_0">OpenDataPlane (1.16.0.0)</a>
<ul class="sectlevel2">
<li><a href="#_new_features_3">New Features</a></li>
<li><a href="#_miscellaneous_fixes_and_improvements_2">Miscellaneous Fixes and Improvements</a></li>
<li><a href="#_dependency_changes_2">Dependency Changes</a></li>
<li><a href="#_build_system_restructure">Build System Restructure</a></li>
<li><a href="#_arm_architecture_support_improvements">Arm Architecture Support Improvements</a></li>
<li><a href="#_documentation_improvements_2">Documentation Improvements</a></li>
<li><a href="#_bug_fixes_11">Bug Fixes</a></li>
<li><a href="#_known_issues_7">Known Issues</a></li>
</ul>
</li>
<li><a href="#_opendataplane_1_15_0_0">OpenDataPlane (1.15.0.0)</a>
<ul class="sectlevel2">
<li><a href="#_new_features_4">New Features</a></li>
<li><a href="#_helpers">Helpers</a></li>
<li><a href="#_odp_linux_performance"><code>odp-linux</code> Performance</a></li>
<li><a href="#_odp_linux_crypto_improvements"><code>odp_linux</code> Crypto Improvements</a></li>
<li><a href="#_odp_linux_packet_improvements"><code>odp-linux</code> Packet Improvements</a></li>
<li><a href="#_odp_linux_pktio_improvements"><code>odp-linux</code> PktIO Improvements</a></li>
<li><a href="#_odp_linux_time_improvements"><code>odp-linux</code> Time Improvements</a></li>
<li><a href="#_odp_linux_traffic_manager_improvements"><code>odp-linux</code> Traffic Manager Improvements</a></li>
<li><a href="#_miscellaneous_fixes_and_improvements_3">Miscellaneous Fixes and Improvements</a></li>
<li><a href="#_bug_fixes_12">Bug Fixes</a></li>
<li><a href="#_known_issues_8">Known Issues</a></li>
</ul>
</li>
<li><a href="#_opendataplane_1_14_0_0">OpenDataPlane (1.14.0.0)</a>
<ul class="sectlevel2">
<li><a href="#_new_features_5">New Features</a></li>
<li><a href="#_helpers_2">Helpers</a></li>
<li><a href="#_classifier_improvements">Classifier Improvements</a></li>
<li><a href="#_performance">Performance</a></li>
<li><a href="#_documentation">Documentation</a></li>
<li><a href="#_bug_fixes_13">Bug Fixes</a></li>
<li><a href="#_known_issues_9">Known Issues</a></li>
</ul>
</li>
<li><a href="#_opendataplane_1_13_0_0">OpenDataPlane (1.13.0.0)</a>
<ul class="sectlevel2">
<li><a href="#_new_features_6">New Features</a></li>
<li><a href="#_helpers_3">Helpers</a></li>
<li><a href="#_performance_improvements">Performance Improvements</a></li>
<li><a href="#_bug_fixes_14">Bug Fixes</a></li>
<li><a href="#_known_issues_10">Known Issues</a></li>
</ul>
</li>
<li><a href="#_opendataplane_1_12_0_0">OpenDataPlane (1.12.0.0)</a>
<ul class="sectlevel2">
<li><a href="#_new_features_7">New Features</a></li>
<li><a href="#_packaging_and_implementation_refinements">Packaging and Implementation Refinements</a></li>
<li><a href="#_performance_improvements_2">Performance Improvements</a></li>
<li><a href="#_examples">Examples</a></li>
<li><a href="#_documentation_2">Documentation</a></li>
<li><a href="#_bug_fixes_15">Bug Fixes</a></li>
<li><a href="#_known_issues_11">Known Issues</a></li>
</ul>
</li>
<li><a href="#_opendataplane_1_11_0_0">OpenDataPlane (1.11.0.0)</a>
<ul class="sectlevel2">
<li><a href="#_new_features_8">New Features</a></li>
<li><a href="#_bug_fixes_16">Bug Fixes</a></li>
<li><a href="#_packaging">Packaging</a></li>
<li><a href="#_performance_2">Performance</a></li>
<li><a href="#_general_cleanup">General Cleanup</a></li>
<li><a href="#_validation">Validation</a></li>
<li><a href="#_examples_2">Examples</a></li>
<li><a href="#_documentation_3">Documentation</a></li>
<li><a href="#_known_issues_12">Known Issues</a></li>
</ul>
</li>
<li><a href="#_opendataplane_1_10_1_0">OpenDataPlane (1.10.1.0)</a>
<ul class="sectlevel2">
<li><a href="#_new_features_9">New Features</a></li>
<li><a href="#_packaging_2">Packaging</a></li>
<li><a href="#_helpers_4">Helpers</a></li>
<li><a href="#_bug_fixes_17">Bug Fixes</a></li>
<li><a href="#_performance_3">Performance</a></li>
<li><a href="#_examples_3">Examples</a></li>
<li><a href="#_documentation_4">Documentation</a></li>
<li><a href="#_known_issues_13">Known Issues</a></li>
</ul>
</li>
<li><a href="#_opendataplane_1_10_0_0">OpenDataPlane (1.10.0.0)</a>
<ul class="sectlevel2">
<li><a href="#_new_features_10">New Features</a></li>
<li><a href="#_known_issues_14">Known Issues</a></li>
</ul>
</li>
<li><a href="#_opendataplane_1_9_0_0">OpenDataPlane (1.9.0.0)</a>
<ul class="sectlevel2">
<li><a href="#_new_features_11">New Features</a></li>
<li><a href="#_known_issues_15">Known Issues</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_opendataplane_1_48_0_0">OpenDataPlane (1.48.0.0)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_backward_incompatible_api_changes">Backward incompatible API changes</h3>
<div class="sect3">
<h4 id="_dma">DMA</h4>
<div class="ulist">
<ul>
<li>
<p>Move <code>odp_dma_seg_t</code> struct&#8217;s segment hints from an anonymous union to
<code>odp_dma_seg_t.hints</code> struct.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_event_vector">Event Vector</h4>
<div class="ulist">
<ul>
<li>
<p>Change <code>odp_event_vector_type()</code> function to not return the type of events
actually stored in the event vector, but the event type stored in event vector
metadata.</p>
</li>
<li>
<p>Change <code>odp_event_vector_tbl()</code> function specification to require that
applications use <code>odp_event_vector_type_set()</code> to update the event type of
vector after vector table modifications.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_backward_compatible_api_changes">Backward compatible API changes</h3>
<div class="sect3">
<h4 id="_classifier">Classifier</h4>
<div class="ulist">
<ul>
<li>
<p>Add configurable priority <code>odp_pmr_create_opt_t.priority</code> to PMRs, so that
when multiple PMRs match a packet, a PMR with the highest priority is selected.</p>
</li>
<li>
<p>Add <code>odp_cls_capability_t.max_pmr_priority</code> capability for the maximum
priority value.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_cpu_mask">CPU Mask</h4>
<div class="ulist">
<ul>
<li>
<p>Add missing documentation for <code>odp_cpumask_t</code> type.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_crypto">Crypto</h4>
<div class="ulist">
<ul>
<li>
<p>Add <code>odp_crypto_session_print()</code> function for printing implementation defined
information about a crypto session to the ODP log.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_dma_2">DMA</h4>
<div class="ulist">
<ul>
<li>
<p>Add possibility to configure cache stashing for destination segments
using segment hints (<code>odp_dma_seg_t.hints</code>).</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_event_vector_2">Event Vector</h4>
<div class="ulist">
<ul>
<li>
<p>Add <code>odp_event_vector_type_set()</code> function for setting the type of events
stored in an event vector.</p>
</li>
<li>
<p>Clarify that event aggregators try to set the event type according to the
event types they put in the event vector.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_ml">ML</h4>
<div class="ulist">
<ul>
<li>
<p>Change ML API to support systems with multiple ML engines:</p>
<div class="ulist">
<ul>
<li>
<p>Add <code>odp_ml_num_engines()</code> function for querying the number of supported ML
engines.</p>
</li>
<li>
<p>Add <code>odp_ml_engine_capability()</code> function for exposing engine specific
capabilities.</p>
</li>
<li>
<p>Change <code>odp_ml_config()</code> function specification to state that it must be
called once per used ML engine ID (<code>odp_ml_config_t.engine_id</code>).</p>
</li>
<li>
<p>Add <code>ODP_ML_ENGINE_ANY</code> define for letting implementation pick the used
engine (enables backward compatibility).</p>
</li>
<li>
<p>Add <code>engine_id</code> field to <code>odp_ml_config_t</code> struct.</p>
</li>
<li>
<p>Add <code>engine_id</code> field to <code>odp_ml_model_param_t</code> struct.</p>
</li>
<li>
<p>Add <code>engine_id</code> field to <code>odp_ml_model_info_t</code> struct.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_packet">Packet</h4>
<div class="ulist">
<ul>
<li>
<p>Move <code>odp_packet_parse_result_flag_t</code> struct definition from ABI to API
header to guarantee application portability between different platforms.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_scheduler">Scheduler</h4>
<div class="ulist">
<ul>
<li>
<p>Clarify that priority level <code>odp_schedule_prio_t</code> is always a non-negative
integer value.</p>
</li>
<li>
<p>Add global (<code>odp_schedule_config_t</code>) and group level
(<code>odp_schedule_group_param_t</code>) scheduler configuration options and related
capabilities to signal maximum number of groups and priorities that need to be
supported.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_thread">Thread</h4>
<div class="ulist">
<ul>
<li>
<p>Add missing documentation for <code>odp_thrmask_t</code> type.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_implementation">Implementation</h3>
<div class="ulist">
<ul>
<li>
<p>Add extra padding to implementation internal ring struct to avoid false
sharing-like effects from hardware prefetchers. These rings are used within
pool, stash, and scheduler API implementations, so their performance may be
affected. The amount of added extra padding can be adjusted with
<code>CONFIG_CACHE_PAD_LINES</code> config option.</p>
</li>
<li>
<p>Optimize single event <code>odp_queue_enq()</code> and <code>odp_queue_deq()</code> function
implementations for plain queues.</p>
</li>
<li>
<p>Optimize single event <code>odp_queue_enq()</code> function implementation for scheduled
queues.</p>
</li>
<li>
<p>Optimize queue implementation by storing pointers to events instead of
indices.</p>
</li>
<li>
<p>Add support for DPDK v24.11 packet IO and drop support for EOL DPDK v21.11.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_performance_tests">Performance Tests</h3>
<div class="sect3">
<h4 id="_bench_event_vector">bench_event_vector</h4>
<div class="ulist">
<ul>
<li>
<p>Add new microbenchmark application for event vector fast path API functions.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_bench_misc">bench_misc</h4>
<div class="ulist">
<ul>
<li>
<p>Add support for <code>odp_prefetch_x()</code> functions.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_l2fwd">l2fwd</h4>
<div class="ulist">
<ul>
<li>
<p>Add option <code>-W, --wait_ns</code> for adding extra wait time
(<code>odp_time_wait_ns()</code>) per receive burst before forwarding the packets.</p>
</li>
<li>
<p>Add option <code>-E, --memcpy</code> for performing extra memcpy per receive burst
before forwarding the packets.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_queue_perf">queue_perf</h4>
<div class="ulist">
<ul>
<li>
<p>Add option <code>-b 0</code> for testing <code>odp_queue_enq()</code> and <code>odp_queue_deq()</code>
functions.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_sched_perf">sched_perf</h4>
<div class="ulist">
<ul>
<li>
<p>Add new event forwarding mode <code>-f N</code>, where N &gt; 1, for forwarding events
within N identical queue groups.</p>
</li>
<li>
<p>Change <code>-q</code> parameter to be the number of default priority queues.</p>
</li>
<li>
<p>Add option <code>-T, --thr_type</code> for running the application with control threads
instead of worker threads.</p>
</li>
<li>
<p>Add option <code>-p 2</code> for using event vector pool.</p>
</li>
<li>
<p>Add option <code>-P, --prefetch</code> for prefetching a selected number of events.</p>
</li>
<li>
<p>Add option <code>-C, --cache-stash</code> for enabling cache stashing.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_opendataplane_1_47_0_0">OpenDataPlane (1.47.0.0)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_backward_incompatible_api_changes_2">Backward incompatible API changes</h3>
<div class="sect3">
<h4 id="_system">System</h4>
<div class="ulist">
<ul>
<li>
<p>Allow implementations to return zero in <code>odp_system_meminfo_t.total_overhead</code>
field if tracking memory usage overhead is not supported.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_backward_compatible_api_changes_2">Backward compatible API changes</h3>
<div class="sect3">
<h4 id="_general">General</h4>
<div class="ulist">
<ul>
<li>
<p>Add a paragraph in the API principles section in <code>include/README</code> to describe
parameter lifetimes of ODP API functions: Structures passed by reference
(and structures referred by them) do not need to outlive the API call,
unless otherwise noted in the API.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_classifier_2">Classifier</h4>
<div class="ulist">
<ul>
<li>
<p>Clarify the presumed intent of back pressure API by specifying how exactly the
back pressure threshold for any given pktio + pool/queue + pfc_level -tuple is
derived from the configuration.</p>
</li>
<li>
<p>Add CoS parameter <code>odp_cls_cos_param_t.aggr_enq_profile</code> for selecting
aggregator enqueuing profile (<code>odp_aggr_enq_profile_t</code>), which can generate
hints to an event aggregator. Support is advertised through
<code>odp_cls_capability_t.aggr</code> capability. The hints can affect e.g. the boundaries
of vector events generated by an event aggregator.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_cpu">CPU</h4>
<div class="ulist">
<ul>
<li>
<p>Add <code>odp_cpu_cycles_strict()</code> function for reading current CPU cycle count
value more strictly in the program order.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_dma_3">DMA</h4>
<div class="ulist">
<ul>
<li>
<p>Add necessary fields to <code>odp_dma_transfer_param_t</code> for freeing DMA source
segments of data format <code>ODP_DMA_FORMAT_PACKET</code>. Support is advertised through
<code>odp_dma_capability_t.src_seg_free</code> capability.</p>
</li>
<li>
<p>Add necessary fields to <code>odp_dma_seg_t</code>, <code>odp_dma_transfer_param_t</code>, and
<code>odp_dma_result_t</code> for allocating DMA destination segments of data format
<code>ODP_DMA_FORMAT_PACKET</code>. Support is advertised through
<code>odp_dma_capability_t.dst_seg_alloc</code> capability.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_event">Event</h4>
<div class="ulist">
<ul>
<li>
<p>Add <code>ODP_EVENT_VECTOR</code> event type.</p>
</li>
<li>
<p>Add special <code>ODP_EVENT_ANY</code> event type, which does not match to any particular
event type and can only be used when explicitly documented by the API.</p>
</li>
<li>
<p>Change <code>odp_event_free()</code> specification to state that in case of vector
events (<code>ODP_EVENT_VECTOR</code> or <code>ODP_EVENT_PACKET_VECTOR</code>) it frees the vector and
all events or packets stored inside it.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_event_vector_3">Event Vector</h4>
<div class="ulist">
<ul>
<li>
<p>Add new generic event vector APIs. Event vectors can contain events of any
type, as opposed to the existing packet vectors, which can contain only packets.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_ml_2">ML</h4>
<div class="ulist">
<ul>
<li>
<p>Add quantization parameters to input (<code>odp_ml_input_info_t.quant_info</code>) and
output (<code>odp_ml_output_info_t.quant_info</code>) info. Implementation may optionally
provide these parameters, if they are available for a given model.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_pool">Pool</h4>
<div class="ulist">
<ul>
<li>
<p>Add <code>ODP_POOL_EVENT_VECTOR</code> pool type for allocating event vectors.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_queue">Queue</h4>
<div class="ulist">
<ul>
<li>
<p>Clarify that <code>odp_queue_sched_type()</code>, <code>odp_queue_sched_prio()</code>,
<code>odp_queue_sched_group()</code>, and <code>odp_queue_lock_count()</code> functions can be used
only with queues of <code>ODP_QUEUE_TYPE_SCHED</code> type.</p>
</li>
<li>
<p>Add event aggregators that are associated with queues and have the same life
time. Event aggregators are queues which try to aggregate multiple events into
event vectors, which are then enqueued to the underlying queue. Event
aggregators are configured through queue parameters
(<code>odp_queue_param_t.num_aggr</code> and <code>odp_queue_param_t.aggr</code>) and the related
capabilities are advertised using <code>odp_event_aggr_capability_t</code> struct. Event
aggregators cannot be used simultaneously with the existing packet vector config
in the same ODP application.</p>
</li>
<li>
<p>Add <code>ODP_QUEUE_TYPE_AGGR</code> queue type.</p>
</li>
<li>
<p>Add <code>odp_queue_aggr()</code> function for getting a queue handle of an event
aggregator associated with a queue.</p>
</li>
<li>
<p>Add <code>odp_aggr_enq_param_init()</code> function for initializing event aggregator
enqueuing parameters.</p>
</li>
<li>
<p>Add <code>odp_queue_enq_aggr()</code> function that can be used for passing hints to an
event aggregator.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_scheduler_2">Scheduler</h4>
<div class="ulist">
<ul>
<li>
<p>Add <code>odp_schedule_group_param_init()</code> function for initializing schedule group
parameters.</p>
</li>
<li>
<p>Add <code>odp_schedule_group_create_2()</code> function, which is otherwise like
<code>odp_schedule_group_create()</code>, but additionally accepts a set of parameters
(<code>odp_schedule_group_param_t</code>). Parameters for predefined scheduling groups can
be configured in <code>odp_schedule_config()</code>.</p>
</li>
<li>
<p>Add possibility to configure cache stashing
(<code>odp_schedule_group_param_t.cache_stash_hints</code>) at schedule group and/or
priority levels. Stashing data of to-be-scheduled events and queues may improve
performance in some workloads.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_timer">Timer</h4>
<div class="ulist">
<ul>
<li>
<p>Add new timer pool parameter <code>odp_timer_pool_param_t.priority</code> and related
capabilities. Timers allocated from pools with a higher priority value are
served with higher priority than timers allocated from pools with a lower
priority value.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_traffic_manager">Traffic Manager</h4>
<div class="ulist">
<ul>
<li>
<p>Add <code>odp_tm_node_stats()</code> function for reading TM node specific statistics
counters. The supported counters are advertised in
<code>odp_tm_level_capabilities_t.node_stats</code> capability.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_abi_changes">ABI changes</h3>
<div class="ulist">
<ul>
<li>
<p>Increase <code>ODP_SHM_NAME_LEN</code> default value to 64.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_helper_1_7_1">Helper (1.7.1)</h3>
<div class="sect3">
<h4 id="_backward_compatible_changes">Backward compatible changes</h4>
<div class="ulist">
<ul>
<li>
<p>Add <code>ODPH_DIV_ROUNDUP()</code> macro for dividing two numbers and rounding up the
result to the closest integer.</p>
</li>
<li>
<p>Add <code>ODPH_ROUNDUP_MULTIPLE()</code> macro for rounding up a value to a multiple of
another value.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_implementation_2">Implementation</h3>
<div class="ulist">
<ul>
<li>
<p>Disable basic scheduler implementation&#8217;s ordered queue reorder stash config
file option (<code>sched_basic:order_stash_size</code>) by default.</p>
</li>
<li>
<p>Simplify <code>odp_version_impl_str()</code> output and include commit hash (if
available) in it.</p>
</li>
<li>
<p>Optimize <code>odp_packet_free_sp()</code> and <code>odp_event_free_sp()</code> implementations.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_performance_tests_2">Performance Tests</h3>
<div class="sect3">
<h4 id="_stress">stress</h4>
<div class="ulist">
<ul>
<li>
<p>Add new <code>-t</code> option for selecting timer mode (shared/private).</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_timer_accuracy">timer_accuracy</h4>
<div class="ulist">
<ul>
<li>
<p>Add a new "concurrency" mode (<code>-m 4</code>) that performs timer starts and cancels
across multiple threads. This mode aims to uncover concurrency issues in the
timer implementation, particularly with a short period, where timer expirations,
starts, and cancels frequently occur close to each other.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_timer_stress">timer_stress</h4>
<div class="ulist">
<ul>
<li>
<p>Add new tool for benchmarking timer handling performance in different
scenarios. Tester currently supports modes for single-shot (with and without
cancelling) and periodic timers.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_opendataplane_1_46_0_0">OpenDataPlane (1.46.0.0)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_backward_incompatible_api_changes_3">Backward incompatible API changes</h3>
<div class="sect3">
<h4 id="_crypto_2">Crypto</h4>
<div class="ulist">
<ul>
<li>
<p>Change the default crypto op type written by <code>odp_crypto_session_param_init()</code>
to <code>ODP_CRYPTO_OP_TYPE_BASIC</code>.</p>
</li>
<li>
<p>Deprecate old default crypto op type <code>ODP_CRYPTO_OP_TYPE_LEGACY</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_packet_io">Packet IO</h4>
<div class="ulist">
<ul>
<li>
<p>Modify certain details of IP and TCP Large Send Offload (LSO), specify missing
details, add restrictions, and clarify the API in general.</p>
</li>
<li>
<p>Deprecate <code>ODP_PACKET_TX_COMPL_ALL</code> define. Use <code>ODP_PACKET_TX_COMPL_EVENT</code>
instead.</p>
</li>
<li>
<p>Deprecate <code>odp_pktio_capability_t.tx_compl.mode_all</code> field. Use <code>mode_event</code>
instead.</p>
</li>
<li>
<p>Deprecate <code>odp_pktout_config_opt_t.bit.tx_compl_ena</code> field. Use
<code>odp_pktio_config_t.mode_event</code> instead.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_timer_2">Timer</h4>
<div class="ulist">
<ul>
<li>
<p>Deprecate <code>odp_timer_pool_start()</code> function. Use
<code>odp_timer_pool_start_multi()</code> instead.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_backward_compatible_api_changes_3">Backward compatible API changes</h3>
<div class="sect3">
<h4 id="_event_2">Event</h4>
<div class="ulist">
<ul>
<li>
<p>Clarify <code>odp_event_free()</code> documentation by stating that it frees also the
packets stored inside packet vectors.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_init">Init</h4>
<div class="ulist">
<ul>
<li>
<p>Add printf format check to <code>odp_override_log()</code> and <code>odp_log_func_t</code>
declarations.</p>
</li>
<li>
<p>Add <code>odp_log_fn_get()</code> function, which returns the current log function.</p>
</li>
<li>
<p>Add <code>odp_abort_fn_get()</code> function, which returns the abort function.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_packet_io_2">Packet IO</h4>
<div class="ulist">
<ul>
<li>
<p>Add a new custom LSO operation (<code>ODP_LSO_WRITE_BITS</code>) for setting and clearing
selected bits in first/middle/last segment when segmentation occurs.</p>
</li>
<li>
<p>Specify that all segments, except the last one, have the maximum payload
length with the custom LSO protocol (<code>ODP_LSO_PROTO_CUSTOM</code>).</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_remove_deprecated_apis">Remove deprecated APIs</h3>
<div class="sect3">
<h4 id="_timer_3">Timer</h4>
<div class="ulist">
<ul>
<li>
<p>Remove deprecated <code>odp_timeout_fresh()</code> function.</p>
</li>
<li>
<p>Remove deprecated <code>odp_timer_set_t</code> type.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_helper_1_7_0">Helper (1.7.0)</h3>
<div class="sect3">
<h4 id="_backward_incompatible_changes">Backward incompatible changes</h4>
<div class="ulist">
<ul>
<li>
<p>Deprecate <code>odph_linux_pthread_create()</code> and <code>odph_linux_pthread_join()</code>
functions which have been replaced by generic <code>odph_thread_create()</code> and
<code>odph_thread_join()</code> functions.</p>
</li>
<li>
<p>Deprecate <code>odph_linux_process_fork()</code>, <code>odph_linux_process_fork_n()</code>,
and <code>odph_linux_process_wait_n()</code> functions which have been replaced by
generic <code>odph_thread_create()</code> and <code>odph_thread_join()</code> functions.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_backward_compatible_api_changes_4">Backward compatible API changes</h4>
<div class="ulist">
<ul>
<li>
<p>Explicitly state that ODP must be initialized before calling helper functions
and document exceptions to this rule individually.</p>
</li>
<li>
<p>Improve debug macro documentation.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_implementation_3">Implementation</h3>
<div class="ulist">
<ul>
<li>
<p>Remove scalable scheduler implementation.</p>
</li>
<li>
<p>Remove <code>system:cpu_id_static</code> config file option.</p>
</li>
<li>
<p>Add support for DPDK v23.11 packet IO.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_example_applications">Example Applications</h3>
<div class="ulist">
<ul>
<li>
<p>Remove <code>odp_l2fwd_simple</code> application.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_performance_tests_3">Performance Tests</h3>
<div class="sect3">
<h4 id="_crypto_3">crypto</h4>
<div class="ulist">
<ul>
<li>
<p>Use the basic crypto operation type instead of now deprecated legacy operation
type.</p>
</li>
<li>
<p>Remove explicit encrypt in-place operation option (<code>-n</code>).</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_l2fwd_perf">l2fwd_perf</h4>
<div class="ulist">
<ul>
<li>
<p>New minimal performance optimized L2 forwarding benchmark application. Aim is
to keep the tester as simple as possible in order to provide a stable
benchmarking utility with comparable results across releases.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_ml_perf">ml_perf</h4>
<div class="ulist">
<ul>
<li>
<p>New machine learning (ML) performance test application. The application
measures nanoseconds used for various ML operations, such as creating and
destroying a model, loading and unloading a model, and inferencing.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_packet_gen">packet_gen</h4>
<div class="ulist">
<ul>
<li>
<p>Add new option (<code>-X</code>) for L4 checksum offloading.</p>
</li>
<li>
<p>Add new option (<code>-T</code>) for transmitting packets with LSO.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_queue_perf_2">queue_perf</h4>
<div class="ulist">
<ul>
<li>
<p>Add possibility to export test results into a .csv file by using
<code>--test-common-export</code> option or <code>TEST_COMMON_EXPORT</code> environment variable.</p>
</li>
<li>
<p>Add new option (<code>-p</code>) for using private queues per worker.</p>
</li>
<li>
<p>Add pair test mode (<code>-m 1</code>) where events are moved between queue pairs
connecting two or more workers.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_opendataplane_1_45_1_0">OpenDataPlane (1.45.1.0)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_backward_compatible_api_changes_5">Backward compatible API changes</h3>
<div class="sect3">
<h4 id="_atomic">Atomic</h4>
<div class="ulist">
<ul>
<li>
<p>Add new <code>odp_atomic_fetch_min_u32()</code> and <code>odp_atomic_fetch_min_u64()</code>
functions for fetching and updating minimum values of atomic <code>uint32_t</code> or
<code>uint64_t</code> variables.</p>
</li>
<li>
<p>Add new <code>odp_atomic_fetch_max_u32()</code> and <code>odp_atomic_fetch_max_u64()</code>
functions for fetching and updating maximum values of atomic <code>uint32_t</code> or
<code>uint64_t</code> variables.</p>
</li>
<li>
<p>Add functions for atomically setting and clearing bits in 32-bit atomic
variables: <code>odp_atomic_bit_set_u32()</code>, <code>odp_atomic_bit_fetch_set_u32()</code>,
<code>odp_atomic_bit_clr_u32()</code>, <code>odp_atomic_bit_fetch_clr_u32()</code>,
<code>odp_atomic_bit_set_rel_u32()</code>, <code>odp_atomic_bit_clr_rel_u32()</code></p>
</li>
<li>
<p>Add functions for atomically setting and clearing bits in 64-bit atomic
variables:  <code>odp_atomic_bit_set_u64()</code>, <code>odp_atomic_bit_fetch_set_u64()</code>,
<code>odp_atomic_bit_clr_u64()</code>, <code>odp_atomic_bit_fetch_clr_u64()</code>,
<code>odp_atomic_bit_set_rel_u64()</code>, <code>odp_atomic_bit_clr_rel_u64()</code></p>
</li>
<li>
<p>Add flags for the new atomic functions into <code>odp_atomic_op_t</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_cpu_2">CPU</h4>
<div class="ulist">
<ul>
<li>
<p>Add instruction prefetch function <code>odp_prefetch_l1i()</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_dma_4">DMA</h4>
<div class="ulist">
<ul>
<li>
<p>Add debug function <code>odp_dma_transfer_id_to_u64()</code> for getting a printable
value for a DMA transfer identifier.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_init_2">Init</h4>
<div class="ulist">
<ul>
<li>
<p>Add debug function <code>odp_instance_to_u64()</code> for getting a printable value for
an ODP instance handle.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_ml_3">ML</h4>
<div class="ulist">
<ul>
<li>
<p>Add functions for supporting quantization of <code>int16_t</code> and <code>uint16_t</code> data
types: <code>odp_ml_fp32_to_uint16()</code>, <code>odp_ml_fp32_from_uint16()</code>,
<code>odp_ml_fp32_to_int16()</code>, <code>odp_ml_fp32_from_int16()</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_packet_2">Packet</h4>
<div class="ulist">
<ul>
<li>
<p>Add debug function <code>odp_packet_tx_compl_to_u64()</code> for getting a printable
value for a Tx completion handle.</p>
</li>
<li>
<p>Clarify <code>odp_packet_reset_max_len()</code> documentation to state that the returned
length may be less than the current packet data length if data length has been
increased by utilizing head- or tailroom.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_scheduler_3">Scheduler</h4>
<div class="ulist">
<ul>
<li>
<p>Add debug function <code>odp_schedule_group_to_u64()</code> for getting a printable
value for a schedule group handle.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_std">Std</h4>
<div class="ulist">
<ul>
<li>
<p>Clarify <code>odp_bool_t</code> documentation by stating how the data type can by used
with standard C booleans and what is considered true/false.</p>
</li>
<li>
<p>Add a field of type <code>__uint128_t</code> in the union in <code>odp_u128_t</code> when the
type is available, so that users that use <code>__uint128_t</code> or a compatible type do
not need to type pun.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_abi_changes_2">ABI changes</h3>
<div class="ulist">
<ul>
<li>
<p>Change ABI type for <code>odp_bool_t</code> from <code>int</code> to <code>bool</code> to comply with the
clarified API documentation.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_implementation_4">Implementation</h3>
<div class="ulist">
<ul>
<li>
<p>Add new config file option <code>system:cpu_id_static</code> for selecting whether the
implementation reads CPU identifier value from OS during every <code>odp_cpu_id()</code>
call or only once during thread initialization (default).</p>
</li>
<li>
<p>Enable the <code>-fno-strict-aliasing</code> compiler option. Some sections of code in
ODP deliberately access the same data via pointers to different types, which is
undefined behavior in C. The <code>-fno-strict-aliasing</code> option prevents the compiler
from making assumptions about aliasing in these instances.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_example_applications_2">Example Applications</h3>
<div class="sect3">
<h4 id="_ml_run">ml_run</h4>
<div class="ulist">
<ul>
<li>
<p>Add new example application, which loads a given ML model file, runs inference
using a given input file and compares the output to a given reference file.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_performance_tests_4">Performance Tests</h3>
<div class="ulist">
<ul>
<li>
<p>Add the possibility to export test results into a .csv file by using
<code>--test-common-export</code> option or <code>TEST_COMMON_EXPORT</code> environment variable.
Exporting results is supported by the following applications: <code>atomic_perf</code>,
<code>bench_buffer</code>, <code>bench_misc</code>, <code>bench_timer</code>, <code>bench_packet</code>, <code>bench_pktio_sp</code>,
<code>dma_perf</code>, <code>lock_perf</code>, <code>pool_perf</code>, <code>sched_latency</code>, <code>sched_perf</code>,
<code>stash_perf</code>, <code>timer_accuracy</code></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_bench_packet">bench_packet</h4>
<div class="ulist">
<ul>
<li>
<p>Add tests for new <code>odp_packet_reset_meta()</code> and <code>odp_packet_reset_max_len()</code>
functions.</p>
</li>
<li>
<p>Add tests for event API fast path functions on packets.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_icache_perf">icache_perf</h4>
<div class="ulist">
<ul>
<li>
<p>Add new performance test application to measure CPU performance when
application code size exceeds L1 instruction cache size.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_packet_gen_2">packet_gen</h4>
<div class="ulist">
<ul>
<li>
<p>Add new <code>-U</code> option to define custom L3 headers.</p>
</li>
<li>
<p>Add new <code>none</code> selection to the L4 protocol -N option.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_opendataplane_1_45_0_0">OpenDataPlane (1.45.0.0)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_backward_incompatible_api_changes_4">Backward incompatible API changes</h3>
<div class="sect3">
<h4 id="_crypto_4">Crypto</h4>
<div class="ulist">
<ul>
<li>
<p>Increase size of <code>all_bits</code> fields of <code>odp_crypto_cipher_algos_t</code> and
<code>odp_crypto_auth_algos_t</code> algorithm capability unions.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_packet_3">Packet</h4>
<div class="ulist">
<ul>
<li>
<p>Change <code>odp_packet_reset()</code> specification to use new
<code>odp_packet_reset_max_len()</code> function for maximum packet data length value.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_protocol_stats">Protocol Stats</h4>
<div class="ulist">
<ul>
<li>
<p>Limit length of <code>odp_proto_stats_create()</code> object name parameter to a new
<code>ODP_PROTO_STATS_NAME_LEN</code> define.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_traffic_manager_2">Traffic Manager</h4>
<div class="ulist">
<ul>
<li>
<p>Limit lengths of traffic manager object names to a new <code>ODP_TM_NAME_LEN</code>
define.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_backward_compatible_api_changes_6">Backward compatible API changes</h3>
<div class="sect3">
<h4 id="_common">Common</h4>
<div class="ulist">
<ul>
<li>
<p>Make mentions of maximum string lengths clear and consistent and always state
that the null character is included.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_cpu_3">CPU</h4>
<div class="ulist">
<ul>
<li>
<p>Add more specific data prefetch variants: <code>odp_prefetch_l1()</code>,
<code>odp_prefetch_l2()</code>, and <code>odp_prefetch_l3()</code>.</p>
</li>
<li>
<p>Add more specific data prefetch variants for store: <code>odp_prefetch_store_l1()</code>,
<code>odp_prefetch_store_l2()</code>, and <code>odp_prefetch_store_l3()</code>.</p>
</li>
<li>
<p>Add streaming prefetch functions <code>odp_prefetch_strm_l1()</code> and
<code>odp_prefetch_store_strm_l1()</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_crypto_5">Crypto</h4>
<div class="ulist">
<ul>
<li>
<p>Add SHA-3 based cryptographic hash functions and HMACs based on them.</p>
</li>
<li>
<p>Add SNOW-V cipher algorithm and SNOW-V-GCM AEAD algorithm.</p>
</li>
<li>
<p>Add SM3 cryptographic hash function and a HMAC based on it.</p>
</li>
<li>
<p>Add SM4 cipher in ECB, CBC, CTR, GCM, CCM and GMAC modes.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_event_3">Event</h4>
<div class="ulist">
<ul>
<li>
<p>Add <code>odp_event_user_flag_set()</code> function for setting/clearing event&#8217;s user
flag value.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_packet_4">Packet</h4>
<div class="ulist">
<ul>
<li>
<p>Clarify <code>odp_packet_buf_len()</code> specification to state that total packet buffer
length includes also headroom and tailroom lengths.</p>
</li>
<li>
<p>Clarify <code>odp_packet_reset()</code> specification to state that packet data start is
adjusted according to pool parameters, user area content is maintained, and
packet data persistence is not guaranteed.</p>
</li>
<li>
<p>Add <code>odp_packet_reset_meta()</code> function for resetting only packet metadata
without modifying packet data.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_pool_2">Pool</h4>
<div class="ulist">
<ul>
<li>
<p>Clarify in <code>odp_pool_param_t.buf.size</code> specification that the actual buffer
size may be rounded up by the implementation. Also, remove the limitation that
an application will never store more than 'size' bytes in each buffer, which
conflicted with <code>odp_buffer_size()</code> API.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_helper_1_6_0">Helper (1.6.0)</h3>
<div class="sect3">
<h4 id="_backward_incompatible_changes_2">Backward incompatible changes</h4>
<div class="ulist">
<ul>
<li>
<p>Remove unused cuckoo table API.</p>
</li>
<li>
<p>Remove unused hash table API.</p>
</li>
<li>
<p>Remove unused linear table API.</p>
</li>
<li>
<p>Remove unused IP lookup table API.</p>
</li>
<li>
<p>Remove unused table interface API.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_backward_compatible_changes_2">Backward compatible changes</h4>
<div class="sect4">
<h5 id="_stress_2">Stress</h5>
<div class="ulist">
<ul>
<li>
<p>Add CPU stress functions (<code>odph_stress_pow2_u32()</code>, <code>odph_stress_log2_u32()</code>,
<code>odph_stress_sqrt_u32()</code>, <code>odph_stress_sqrt_f32()</code>) which may be used in test
applications to create dummy CPU load. Functions are not highly optimized but
try to stress various parts of CPU instruction set.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_string">String</h5>
<div class="ulist">
<ul>
<li>
<p>Add <code>odph_strcpy()</code> function, which guarantees termination of the destination
string.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_thread_2">Thread</h5>
<div class="ulist">
<ul>
<li>
<p>Add <code>odph_thread_join_result()</code> function which is similar to the existing
<code>odph_thread_join()</code> but outputs results of joined threads.</p>
</li>
<li>
<p>Clarify in <code>odph_thread_create()</code> specification that the output thread table
elements must not be modified during the lifetime of the threads if
<code>odph_thread_join()</code> is used to wait for thread exit.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_example_applications_3">Example Applications</h3>
<div class="ulist">
<ul>
<li>
<p>Remove <code>odp_generator</code> application which has been made redundant by
<code>odp_packet_gen</code>.</p>
</li>
<li>
<p>Remove <code>odp_timer_test</code> application which has been made redundant by
<code>odp_timer_accuracy</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_miscellaneous_tests">Miscellaneous Tests</h3>
<div class="sect3">
<h4 id="_dyn_workers">dyn_workers</h4>
<div class="ulist">
<ul>
<li>
<p>Add a simple dynamic worker tester that can be used to verify the ability of
an ODP implementation to dynamically add and remove workers from one ODP
application to another.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_performance_tests_5">Performance Tests</h3>
<div class="sect3">
<h4 id="_l2fwd_2">l2fwd</h4>
<div class="ulist">
<ul>
<li>
<p>Add <code>-O, --output_map</code> option for changing the default output port mappings
for interfaces.</p>
</li>
<li>
<p>Add <code>-C, --tx_compl</code> option for configuring packet transmit completion.</p>
</li>
<li>
<p>Add <code>-X, --flow_control</code> option for enabling reception and/or transmission of
Ethernet pause frames.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_packet_gen_3">packet_gen</h4>
<div class="ulist">
<ul>
<li>
<p>Enable running the application with only RX or TX threads.</p>
</li>
<li>
<p>Add support for transmitting TCP packets (<code>-N, --proto</code>). The application
doesn&#8217;t implement actual TCP protocol, but simply transmits packets with valid
TCP headers at a selected rate.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_pool_latency">pool_latency</h4>
<div class="ulist">
<ul>
<li>
<p>Enable running the application indefinitely with special round count (<code>-r</code>)
value <code>0</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_sched_perf_2">sched_perf</h4>
<div class="ulist">
<ul>
<li>
<p>Add <code>-S, --stress</code> option for selecting stress function(s) to be used on event
data. Functions add various amount of CPU load to each event to simulate
application data processing.</p>
</li>
<li>
<p>Rename <code>-a</code> option (<code>--fairness</code>) to <code>-F</code> for better match of short and long
option names.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_stress_3">stress</h4>
<div class="ulist">
<ul>
<li>
<p>Add simple memory copy loop and square root calculation test modes
(<code>-m, --mode</code>) to generate CPU load.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_opendataplane_1_44_0_0">OpenDataPlane (1.44.0.0)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_backward_compatible_api_changes_7">Backward compatible API changes</h3>
<div class="sect3">
<h4 id="_ml_4">ML</h4>
<div class="ulist">
<ul>
<li>
<p>Add new API module for Machine Learning offload.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_implementation_5">Implementation</h3>
<div class="sect3">
<h4 id="_ml_5">ML</h4>
<div class="ulist">
<ul>
<li>
<p>Implement the API using ONNX Runtime. A non-standard ONNX install path can be
passed with <code>--with-ort-path</code> configure option. See <code>DEPENDENCIES</code> for
additional information.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_example_applications_4">Example Applications</h3>
<div class="sect3">
<h4 id="_debug">debug</h4>
<div class="ulist">
<ul>
<li>
<p>Print packet IO link information.</p>
</li>
<li>
<p>Add packet IO interface name option (<code>-i</code>).</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_packet_dump">packet_dump</h4>
<div class="ulist">
<ul>
<li>
<p>Add support for measuring packet input delay.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_performance_tests_6">Performance Tests</h3>
<div class="sect3">
<h4 id="_l2fwd_3">l2fwd</h4>
<div class="ulist">
<ul>
<li>
<p>Add packet input timestamping option (<code>-T</code>).</p>
</li>
<li>
<p>Add packet data prefetch option (<code>-F</code>).</p>
</li>
<li>
<p>Add packet data read option (<code>-R</code>).</p>
</li>
<li>
<p>Add packet print option (<code>-V</code>).</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_pool_latency_2">pool_latency</h4>
<div class="ulist">
<ul>
<li>
<p>New pool latency tester application for profiling pool allocation and free
latencies under different load patterns.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_sched_perf_3">sched_perf</h4>
<div class="ulist">
<ul>
<li>
<p>Add options to read (<code>-u</code>) and modify (<code>-U</code>) event user area contents per
event reception.</p>
</li>
<li>
<p>Run application indefinitely when the number of events to schedule option
(<code>-s</code>) is set to zero.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_opendataplane_1_43_0_0">OpenDataPlane (1.43.0.0)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_backward_incompatible_api_changes_5">Backward incompatible API changes</h3>
<div class="sect3">
<h4 id="_classifier_3">Classifier</h4>
<div class="ulist">
<ul>
<li>
<p>Add new <code>odp_cls_capability_t.max_pmr</code> and
<code>odp_cls_capability_t.max_pmr_per_cos</code> packet matching rule capabilities.</p>
</li>
<li>
<p>Rename <code>odp_cls_capability_t.max_pmr_terms</code> field to
<code>odp_cls_capability_t.max_terms_per_pmr</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_time">Time</h4>
<div class="ulist">
<ul>
<li>
<p>Change local/global time specification to allow timestamp values to start from
an implementation defined value, instead of always starting from zero.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_timer_4">Timer</h4>
<div class="ulist">
<ul>
<li>
<p>Deprecate <code>odp_timer_set_t</code> type. Use <code>odp_timer_retval_t</code> instead.</p>
</li>
<li>
<p>Deprecate <code>odp_timer_pool_start()</code> function in comments. Will be properly
deprecated in an upcoming release. Use <code>odp_timer_pool_start_multi()</code> instead.</p>
</li>
<li>
<p>Deprecate <code>odp_timeout_fresh()</code> function.</p>
</li>
<li>
<p>Change <code>odp_timer_free()</code> specification to remove the possibility to free a
timer that is running.</p>
</li>
<li>
<p>Change <code>odp_timer_pool_create()</code> specification to state that timer pool
handles must not be used by other APIs, except <code>odp_timer_pool_to_u64()</code>,
 before being started.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_backward_compatible_api_changes_8">Backward compatible API changes</h3>
<div class="sect3">
<h4 id="_event_4">Event</h4>
<div class="ulist">
<ul>
<li>
<p>Add <code>odp_event_pool()</code> function, which returns a handle to the pool where the
event was allocated from.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_hints">Hints</h4>
<div class="ulist">
<ul>
<li>
<p>Fix a type conversion issue in <code>odp_unlikely()</code> implementation.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_packet_5">Packet</h4>
<div class="ulist">
<ul>
<li>
<p>Clarify that <code>ODP_PACKET_FREE_CTRL_DONT_FREE</code> option does not affect direct
packet free calls.</p>
</li>
<li>
<p>Clarify that packet IO time is specific to the packet IO interface.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_pool_3">Pool</h4>
<div class="ulist">
<ul>
<li>
<p>Clarify that disabled/unused per thread statistics counters will not
necessarily be zeroed by <code>odp_pool_stats()</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_scheduler_4">Scheduler</h4>
<div class="ulist">
<ul>
<li>
<p>Clarify event ordering in ordered scheduling contexts.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_thread_3">Thread</h4>
<div class="ulist">
<ul>
<li>
<p>Add new functions <code>odp_thread_control_count_max()</code> and
<code>odp_thread_worker_count_max()</code> for reading the maximum number of control and
worker threads.</p>
</li>
<li>
<p>Add new functions <code>odp_thread_control_count()</code> and <code>odp_thread_worker_count()</code>
for reading the current number of control and worker threads.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_time_2">Time</h4>
<div class="ulist">
<ul>
<li>
<p>Add <code>odp_time_add_ns()</code> function for adding nanoseconds into a time value.</p>
</li>
<li>
<p>Add <code>odp_time_startup()</code> function for requesting ODP instance startup time.</p>
</li>
<li>
<p>Clarify <code>odp_time_sum()</code> specification by adding a notification that resulting
timestamp may wrap around if large timestamp values are summed up.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_timer_5">Timer</h4>
<div class="ulist">
<ul>
<li>
<p>Add <code>odp_timer_pool_start_multi()</code> function for starting timer pools, which
takes the to-be-started pool handles as arguments.</p>
</li>
<li>
<p>Clarify that timer ticks and related nanosecond values are specific to a timer
pool. Also, state explicitly that those may not start from zero.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_remove_deprecated_apis_2">Remove deprecated APIs</h3>
<div class="sect3">
<h4 id="_classifier_4">Classifier</h4>
<div class="ulist">
<ul>
<li>
<p>Remove deprecated <code>odp_cls_drop_t</code> enum.</p>
</li>
<li>
<p>Remove deprecated <code>odp_cos_drop_set()</code> function.</p>
</li>
<li>
<p>Remove deprecated <code>odp_cos_drop()</code> function.</p>
</li>
<li>
<p>Remove deprecated <code>odp_cos_with_l2_priority()</code> function.</p>
</li>
<li>
<p>Remove deprecated <code>odp_cos_with_l3_qos()</code> function.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_crypto_6">Crypto</h4>
<div class="ulist">
<ul>
<li>
<p>Remove deprecated <code>ODP_CRYPTO_SES_CREATE_ERR_NONE</code>,
<code>ODP_CRYPTO_SES_CREATE_ERR_ENOMEM</code>, <code>ODP_CRYPTO_SES_CREATE_ERR_INV_CIPHER</code>, and
<code>ODP_CRYPTO_SES_CREATE_ERR_INV_AUTH</code> defines.</p>
</li>
<li>
<p>Remove deprecated <code>odp_crypto_alg_err_t.ODP_CRYPTO_ALG_ERR_KEY_SIZE</code> and
<code>odp_crypto_alg_err_t.ODP_CRYPTO_ALG_ERR_IV_INVALID</code> enums.</p>
</li>
<li>
<p>Remove deprecated <code>odp_crypto_hw_err_t</code> enum.</p>
</li>
<li>
<p>Remove deprecated <code>odp_crypto_packet_result_t.ok</code> field.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_scheduler_5">Scheduler</h4>
<div class="ulist">
<ul>
<li>
<p>Remove deprecated <code>ODP_SCHED_PRIO_HIGHEST</code>, <code>ODP_SCHED_PRIO_NORMAL</code>,
<code>ODP_SCHED_PRIO_LOWEST</code>, and <code>ODP_SCHED_PRIO_DEFAULT</code> defines.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_timer_6">Timer</h4>
<div class="ulist">
<ul>
<li>
<p>Remove deprecated <code>ODP_CLOCK_CPU</code> and <code>ODP_CLOCK_EXT</code> defines.</p>
</li>
<li>
<p>Remove deprecated <code>ODP_TIMER_TOOEARLY</code>, <code>ODP_TIMER_TOOLATE</code> and
<code>ODP_TIMER_NOEVENT</code> defines.</p>
</li>
<li>
<p>Remove deprecated <code>odp_timer_set_abs()</code> function.</p>
</li>
<li>
<p>Remove deprecated <code>odp_timer_set_rel()</code> function.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_helper_1_5_0">Helper (1.5.0)</h3>
<div class="sect3">
<h4 id="_backward_incompatible_changes_3">Backward incompatible changes</h4>
<div class="ulist">
<ul>
<li>
<p>Remove deprecated <code>odph_odpthread_t</code> and <code>odph_odpthread_params_t</code> types.</p>
</li>
<li>
<p>Remove deprecated <code>odph_thread_param_t.instance</code> field.</p>
</li>
<li>
<p>Remove deprecated <code>odph_odpthreads_create()</code> and <code>odph_odpthreads_join()</code>
functions.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_implementation_6">Implementation</h3>
<div class="sect3">
<h4 id="_ticketlock">Ticketlock</h4>
<div class="ulist">
<ul>
<li>
<p>Add WFE based aarch64 ticketlock implementation (<code>--enable-wfe-locks</code>) for
power saving.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_performance_tests_7">Performance Tests</h3>
<div class="sect3">
<h4 id="_dma_perf">dma_perf</h4>
<div class="ulist">
<ul>
<li>
<p>Add option for using software memory copy in addition to DMA transfers.</p>
</li>
<li>
<p>Add options for using sparse packets and memory as the transfer segment type.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_opendataplane_1_42_1_0">OpenDataPlane (1.42.1.0)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_backward_compatible_api_changes_9">Backward compatible API changes</h3>
<div class="sect3">
<h4 id="_classifier_5">Classifier</h4>
<div class="ulist">
<ul>
<li>
<p>Add new <code>odp_cls_pmr_create_multi()</code> function for creating multiple packet
matching rules with a single call.</p>
</li>
<li>
<p>Add new <code>odp_cls_pmr_destroy_multi()</code> function for destroying multiple PMRs
with a single call.</p>
</li>
<li>
<p>Add new <code>odp_cls_cos_create_multi()</code> function for creating multiple class-of-
services with a single call.</p>
</li>
<li>
<p>Add new <code>odp_cos_destroy_multi()</code> function for destroying multiple CoSes with
a single call.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_crypto_7">Crypto</h4>
<div class="ulist">
<ul>
<li>
<p>Clarify packet ordering of async crypto ops (<code>odp_crypto_op_enq()</code>).</p>
</li>
<li>
<p>Add <code>odp_crypto_packet_op_param_t.null_crypto</code> parameter that tells that a
packet should be processed as if the configured algorithms were null cipher and
null auth algorithm.</p>
</li>
<li>
<p>Add <code>ODP_CRYPTO_OP_TYPE_BASIC_AND_OOP</code> crypto operation type that allows both
basic and out-of-place operations in the same session.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_packet_io_3">Packet IO</h4>
<div class="ulist">
<ul>
<li>
<p>Add new API define <code>ODP_PKTIO_MAX_INDEX</code> for maximum packet IO interface
index.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_queue_2">Queue</h4>
<div class="ulist">
<ul>
<li>
<p>Add new <code>odp_queue_create_multi()</code> function for creating multiple queues with
a single call.</p>
</li>
<li>
<p>Add new <code>odp_queue_destroy_multi()</code> function for destroying multiple queues
with a single call.</p>
</li>
<li>
<p>Clarify <code>odp_queue_param_t</code> default value specification.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_system_2">System</h4>
<div class="ulist">
<ul>
<li>
<p>Add enumerations for ARM ISA versions ARMv8.8-A, ARMv8.9-A, and ARMv9.3-A.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_timer_7">Timer</h4>
<div class="ulist">
<ul>
<li>
<p>Change <code>odp_timer_pool_param_t.num_timers</code> description to allow applications
to attempt to allocate more timers than there are in a timer pool.</p>
</li>
<li>
<p>Add new <code>odp_timeout_alloc_multi()</code> function for allocating multiple timeouts
with a single call.</p>
</li>
<li>
<p>Add new <code>odp_timeout_free_multi()</code> function for freeing multiple timeouts with
a single call.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_helper_1_4_0">Helper (1.4.0)</h3>
<div class="sect3">
<h4 id="_backward_incompatible_changes_4">Backward incompatible changes</h4>
<div class="sect4">
<h5 id="_protocols">Protocols</h5>
<div class="ulist">
<ul>
<li>
<p>Rename <code>ODP_GTP_HLEN</code> define to <code>ODPH_GTP_HLEN</code>.</p>
</li>
<li>
<p>Rename <code>ODP_IGMP_HLEN</code> define to <code>ODPH_IGMP_HLEN</code>.</p>
</li>
<li>
<p>Remove unused ICMP defines and add missing <code>ODPH_</code> prefix to the remaining
ones.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_backward_compatible_changes_3">Backward compatible changes</h4>
<div class="sect4">
<h5 id="_macros">Macros</h5>
<div class="ulist">
<ul>
<li>
<p>Add new <code>ODPH_MIN()</code> and <code>ODPH_MAX()</code> helper macros for comparison operations.</p>
</li>
<li>
<p>Add new <code>ODPH_ARRAY_SIZE()</code> helper macro for calculating array size.</p>
</li>
<li>
<p>Add new <code>ODPH_ABS()</code> helper macro for calculating the absolute value of a
signed variable.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_implementation_7">Implementation</h3>
<div class="sect3">
<h4 id="_cpu_4">CPU</h4>
<div class="ulist">
<ul>
<li>
<p>Optimize <code>odp_cpu_cycles()</code> performance on aarch64 by implementing the
function using <code>cntvct_el0</code> virtual counter register.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_packet_io_4">Packet IO</h4>
<div class="ulist">
<ul>
<li>
<p>Transmitting packet vectors is not supported by the current API, so remove
the code from the implementation. This may improve performance when transmitting
packets through event queues.</p>
</li>
<li>
<p>Add support for packet transmit completion check through polling
(<code>ODP_PACKET_TX_COMPL_POLL</code>).</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_example_applications_5">Example Applications</h3>
<div class="sect3">
<h4 id="_sysinfo">sysinfo</h4>
<div class="ulist">
<ul>
<li>
<p>Add prints for various missing capabilities (e.g. pool, packet IO, timer).</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_timer_accuracy_2">timer_accuracy</h4>
<div class="ulist">
<ul>
<li>
<p>Add new (<code>-c, --count</code>) option to set the CPU count.</p>
</li>
<li>
<p>Add new (<code>-t, --queue_type</code>) option to set the queue sync type.</p>
</li>
<li>
<p>Add new (<code>-q, --num_queue</code>) option to set the number of queues.</p>
</li>
<li>
<p>Add new (<code>-G, --sched_groups</code>) option to use a dedicated schedule group for
each queue.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_performance_tests_8">Performance Tests</h3>
<div class="sect3">
<h4 id="_bench_pktio_sp">bench_pktio_sp</h4>
<div class="ulist">
<ul>
<li>
<p>Add new <code>odp_bench_pktio_sp</code> application for measuring delays of ODP packet IO
slow path functions.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_dmafwd">dmafwd</h4>
<div class="ulist">
<ul>
<li>
<p>Add new <code>odp_dmafwd</code> application for comparing packet forwarding throughput
when received packets are first copied either with software memory copy
or with DMA offload and then echoed back to sender(s).</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_packet_gen_4">packet_gen</h4>
<div class="ulist">
<ul>
<li>
<p>Add new (<code>-m, --tx_mode</code>) option for selecting how packets are transmitted.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_stash_perf">stash_perf</h4>
<div class="ulist">
<ul>
<li>
<p>Add new <code>odp_stash_perf</code> application for measuring ODP stash fast path API
performance.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_timer_perf">timer_perf</h4>
<div class="ulist">
<ul>
<li>
<p>Add new mode (<code>-m 2</code>) for measuring <code>odp_schedule()</code> overhead while
continuously restarting expiring timers.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_opendataplane_1_42_0_0">OpenDataPlane (1.42.0.0)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_backward_incompatible_api_changes_6">Backward incompatible API changes</h3>
<div class="sect3">
<h4 id="_crypto_8">Crypto</h4>
<div class="ulist">
<ul>
<li>
<p>Add <code>odp_crypto_session_param_t.cipher_range_in_bits</code> and
<code>odp_crypto_session_param_t.auth_range_in_bits</code> session parameters that control
whether cipher/auth range is given in bits or bytes.</p>
</li>
<li>
<p>Change <code>odp_crypto_cipher_capability_t.bit_mode</code> cipher/auth capability flag
to indicate whether bit mode is supported in addition to byte mode that is
always supported.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_backward_compatible_api_changes_10">Backward compatible API changes</h3>
<div class="sect3">
<h4 id="_barrier">Barrier</h4>
<div class="ulist">
<ul>
<li>
<p>Add memory barriers (<code>odp_mb_sync()</code>, <code>odp_mb_sync_load()</code>,
<code>odp_mb_sync_store()</code>) which ensure that load/store instructions started before
the barrier are complete, before load/store instructions after the barrier are
started.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_crypto_9">Crypto</h4>
<div class="ulist">
<ul>
<li>
<p>Allow non-zero-length cipher and auth ranges
(<code>odp_crypto_packet_op_param_t.cipher_range/auth_range</code>) for the null cipher and
auth algorithms in the OOP operation type.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_dma_5">DMA</h4>
<div class="ulist">
<ul>
<li>
<p>Add new <code>odp_dma_pool_capability_t.uarea_persistence</code> pool capability to
signal if implementation is able to maintain the content of pool user areas
across frees and allocations.</p>
</li>
<li>
<p>Add new <code>odp_dma_pool_param_t.uarea_init</code> pool parameters <code>init_fn</code> and
<code>args</code> that can be used to initialize event user areas of a pool at pool
creation time.</p>
</li>
<li>
<p>Move <code>odp_dma_seg_t</code> structure fields so that <code>addr/packet</code> field is directly
followed by <code>len</code> and <code>offset</code> fields. After this change all commonly used
fields are located in the first 16 bytes of the structure.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_event_5">Event</h4>
<div class="ulist">
<ul>
<li>
<p>Add new <code>odp_event_types_multi()</code> function for reading event types and
subtypes (optional) from all given events.</p>
</li>
<li>
<p>Add new <code>odp_event_user_area_and_flag()</code> function for reading both event
user area pointer and user flag value.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_init_3">Init</h4>
<div class="ulist">
<ul>
<li>
<p>Add new <code>ODP_LOG_WARN</code> log level to <code>odp_log_level_t</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_packet_6">Packet</h4>
<div class="ulist">
<ul>
<li>
<p>Change <code>odp_packet_user_flag()</code> and <code>odp_packet_vector_user_flag()</code>
documentations to specify that the return values are positive if user flag is
set.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_pool_4">Pool</h4>
<div class="ulist">
<ul>
<li>
<p>Add new <code>uarea_persistence</code> pool capability to signal if implementation is
able to maintain the content of pool user areas across frees and allocations.</p>
</li>
<li>
<p>Add new <code>uarea_init</code> pool parameters <code>init_fn</code> and <code>args</code> that can be used to
initialize event user areas of a pool at pool creation time.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_timer_8">Timer</h4>
<div class="ulist">
<ul>
<li>
<p>Add new <code>odp_timeout_from_event_multi()</code> function for converting multiple
events of type <code>ODP_EVENT_TIMEOUT</code> to timeout handles.</p>
</li>
<li>
<p>Clarify <code>odp_timer_alloc()</code> and <code>odp_timer_restart()</code> documentation.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_implementation_8">Implementation</h3>
<div class="sect3">
<h4 id="_time_3">Time</h4>
<div class="ulist">
<ul>
<li>
<p>Refactor time codebase to enable more optimized architecture specific
implementations. x86 and aarch64 architectures are assumed to always have
support for HW time and fallback to POSIX time functions has been removed for
improved performance.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_opendataplane_1_41_1_0">OpenDataPlane (1.41.1.0)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_backward_compatible_api_changes_11">Backward compatible API changes</h3>
<div class="sect3">
<h4 id="_dma_6">DMA</h4>
<div class="ulist">
<ul>
<li>
<p>Add <code>odp_dma_compl_user_area()</code> function which returns pointer to the user
area configured with DMA completion event pool parameters.</p>
</li>
<li>
<p>Clarify that DMA session names don&#8217;t need to be unique.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_event_6">Event</h4>
<div class="ulist">
<ul>
<li>
<p>Add <code>odp_event_user_area()</code> function which returns a pointer to the user area
associated with the event.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_init_4">Init</h4>
<div class="ulist">
<ul>
<li>
<p>Add <code>odp_term_abnormal()</code> function that can be used to abnormally terminate
an ODP application after a non-recoverable error. Depending on the
implementation, this function may attempt to dump stack and other memory areas,
clean up and stop HW operations and/or perform other actions helpful in
postmortem analysis.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_packet_7">Packet</h4>
<div class="ulist">
<ul>
<li>
<p>Extend packet transmit completion (<code>odp_packet_tx_compl_request()</code>) with poll
mode. When enabled, packet transmit completion status can be checked with
<code>odp_packet_tx_compl_done()</code>.</p>
</li>
<li>
<p>Add <code>odp_packet_free_ctrl_set()</code> function for controlling packet output
interface to not free a packet after transmitting it.</p>
</li>
<li>
<p>Add <code>odp_packet_free_ctrl()</code> function for reading packet&#8217;s free control
option value.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_pool_5">Pool</h4>
<div class="ulist">
<ul>
<li>
<p>Relax <code>odp_pool_stats()</code> specification to allow implementations to have some
delay until pool statistics are updated.</p>
</li>
<li>
<p>Add new function <code>odp_pool_stats_selected()</code> for reading only selected pool
statistic(s).</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_timer_9">Timer</h4>
<div class="ulist">
<ul>
<li>
<p>Split <code>odp_timer_cancel()</code> failure reason into timing related and other
failures.</p>
</li>
<li>
<p>Rename <code>odp_timer_set_t</code> to <code>odp_timer_retval_t</code> as it is used now for start,
restart, and cancel operations. <code>odp_timer_set_t</code> remains as a typedef for
backward compatibility.</p>
</li>
<li>
<p>Add <code>odp_timer_sample_ticks()</code> function that samples tick value of multiple
timer pools simultaneously.</p>
</li>
<li>
<p>Allow implementation to place the first timer as close as it can to one period
when starting a periodic timer with <code>first_tick</code> set to 0.</p>
</li>
<li>
<p>Clarify that periodic timer base frequency uses fractional numbers the same
way as timer tick info (<code>odp_timer_tick_info_t</code>). Integer part specifies full
hertz and fractional part specifies parts of a hertz.</p>
</li>
<li>
<p>Clarify that <code>odp_timer_periodic_capability()</code> call does not overwrite the
base frequency value when 1 is returned.</p>
</li>
<li>
<p>Clarify that some implementations may support only certain periodic timer base
frequencies and those depend on source clock frequency.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_performance_tests_9">Performance Tests</h3>
<div class="sect3">
<h4 id="_bench_timer">bench_timer</h4>
<div class="ulist">
<ul>
<li>
<p>Add new test application for measuring call latency of small functions in the
timer API.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_dma_perf_2">dma_perf</h4>
<div class="ulist">
<ul>
<li>
<p>Refactor DMA test application to support multiple worker threads. The number
of in-flight transfers can be configured and workers will always try to keep
that many transfers active through single or per-worker DMA session.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_ipsecfwd">ipsecfwd</h4>
<div class="ulist">
<ul>
<li>
<p>Add support for running the application in process mode.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_opendataplane_1_41_0_0">OpenDataPlane (1.41.0.0)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_backward_incompatible_api_changes_7">Backward incompatible API changes</h3>
<div class="sect3">
<h4 id="_classifier_6">Classifier</h4>
<div class="ulist">
<ul>
<li>
<p>Require that PMRs must be destroyed before the CoS they refer to is destroyed.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_crypto_10">Crypto</h4>
<div class="ulist">
<ul>
<li>
<p>Deprecate the old session creation error names
(<code>ODP_CRYPTO_SES_CREATE_ERR_NONE</code>, <code>ODP_CRYPTO_SES_CREATE_ERR_ENOMEM</code>,
<code>ODP_CRYPTO_SES_CREATE_ERR_INV_CIPHER</code>, <code>ODP_CRYPTO_SES_CREATE_ERR_INV_AUTH</code>)
that have been replaced by shorter error names.</p>
</li>
<li>
<p>Change return value of <code>odp_crypto_result()</code> to indicate crypto operation
success/failure.</p>
</li>
<li>
<p>Deprecate <code>odp_crypto_packet_result_t.ok</code> field. Replaced by
<code>odp_crypto_result()</code> return value.</p>
</li>
<li>
<p>Specify that the status fields of <code>odp_crypto_packet_result_t</code> are valid
only when the operation failed (<code>odp_crypto_result()</code> returned -1).</p>
</li>
<li>
<p>Deprecate <code>odp_crypto_hw_err_t</code> type and <code>odp_crypto_op_status_t.hw_err</code>
field. All errors are now reported through <code>alg_err</code> field.</p>
</li>
<li>
<p>Deprecate <code>ODP_CRYPTO_ALG_ERR_KEY_SIZE</code> and <code>ODP_CRYPTO_ALG_ERR_IV_INVALID</code>
error codes.</p>
</li>
<li>
<p>Require that cipher range (<code>odp_crypto_packet_op_param_t.cipher_range</code>) and
auth range (<code>odp_crypto_packet_op_param_t.auth_range</code>) have zero offset and zero
length when used with null cipher and null auth algorithm, respectively, with
the out-of-place operation type.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_errno">Errno</h4>
<div class="ulist">
<ul>
<li>
<p>Remove mention about errno values specified in the API spec. Setting errno has
been removed from all ODP APIs outside errno module.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_packet_io_5">Packet IO</h4>
<div class="ulist">
<ul>
<li>
<p>Remove legacy reference to errno from <code>odp_pktio_open()</code> function.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_stash">Stash</h4>
<div class="ulist">
<ul>
<li>
<p>Remove special meaning of <code>odp_stash_capability_t.max_num_obj</code> value zero.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_timer_10">Timer</h4>
<div class="ulist">
<ul>
<li>
<p>Remove legacy references to errno from <code>odp_timer_pool_create()</code> and
<code>odp_timer_alloc()</code> functions.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_backward_compatible_api_changes_12">Backward compatible API changes</h3>
<div class="sect3">
<h4 id="_classifier_7">Classifier</h4>
<div class="ulist">
<ul>
<li>
<p>Clarify that the CoS to be destroyed with <code>odp_cos_destroy()</code> must not be in
use.</p>
</li>
<li>
<p>Clarify that <code>odp_cos_queue()</code> returns <code>ODP_QUEUE_INVALID</code> if the queue is not
set.</p>
</li>
<li>
<p>Allow CoS pool (<code>odp_cls_cos_param_t.pool</code>) to be set to <code>ODP_POOL_INVALID</code>,
in which case the originating pktin pool is used.</p>
</li>
<li>
<p>Clarify when CoS queue may and may not be invalid.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_crypto_11">Crypto</h4>
<div class="ulist">
<ul>
<li>
<p>Change IV (<code>odp_crypto_packet_op_param_t.cipher_iv_ptr</code>,
<code>odp_crypto_packet_op_param_t.auth_iv_ptr</code>) and AAD (
<code>odp_crypto_packet_op_param_t.aad_ptr</code>) pointers to pointers to constants.</p>
</li>
<li>
<p>Clarify that algorithm order (<code>odp_crypto_session_param_t.auth_cipher_text</code>)
is ignored with null algorithms.</p>
</li>
<li>
<p>Clarify when cipher (<code>odp_crypto_packet_op_param_t.cipher_range</code>) and auth
(<code>odp_crypto_packet_op_param_t.auth_range</code>) ranges are ignored.</p>
</li>
<li>
<p>Allow the result pointer for <code>odp_crypto_result()</code> to be null, making filling
the result structure optional.</p>
</li>
<li>
<p>Clarify the description of <code>ODP_CRYPTO_ALG_ERR_DATA_SIZE</code>.</p>
</li>
<li>
<p>Add a new crypto operation error <code>ODP_CRYPTO_ALG_ERR_OTHER</code> to cover cases
for which the other errors do not fit.</p>
</li>
<li>
<p>Clarify that null cipher and auth algorithms ignore key length, IV length,
digest length, etc. session parameters.</p>
</li>
<li>
<p>Clarify that crypto operations do not affect parse flags in packet metadata
and thus <code>odp_packet_has_error()</code> cannot be used for checking operation result.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_packet_io_6">Packet IO</h4>
<div class="ulist">
<ul>
<li>
<p>Allow the default CoS to be removed by passing <code>ODP_COS_INVALID</code> to
<code>odp_pktio_default_cos_set()</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_pool_6">Pool</h4>
<div class="ulist">
<ul>
<li>
<p>Clarify that the pool to be destroyed with <code>odp_pool_destroy()</code> must not be in
use.</p>
</li>
<li>
<p>Clarify that <code>odp_pool_capability_t.max_pools</code> is used for all pool types
defined in <code>odp_pool_type_t</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_stash_2">Stash</h4>
<div class="ulist">
<ul>
<li>
<p>Add new stash create parameter <code>odp_stash_param_t.strict_size</code> for performance
optimization. The new option is disabled by default and the total object count
limitation is removed from stash put functions.</p>
</li>
<li>
<p>Add new capabilities for maximum number of object handles per stash for
each object size (<code>odp_stash_capability_t.max_num</code>).</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_timer_11">Timer</h4>
<div class="ulist">
<ul>
<li>
<p>Clarify that zero <code>odp_timer_periodic_start_t.first_tick</code> means that the first
expiration time is one period after the current time, not at the current time.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_remove_deprecated_apis_3">Remove deprecated APIs</h3>
<div class="sect3">
<h4 id="_crypto_12">Crypto</h4>
<div class="ulist">
<ul>
<li>
<p>Remove deprecated <code>odp_crypto_compl_t</code> crypto completion event.</p>
</li>
<li>
<p>Remove deprecated <code>odp_crypto_op_param_t</code> type.</p>
</li>
<li>
<p>Remove deprecated <code>odp_crypto_op_result_t</code> type.</p>
</li>
<li>
<p>Remove deprecated <code>odp_crypto_session_param_t.pref_mode</code> field.</p>
</li>
<li>
<p>Remove deprecated <code>odp_crypto_compl_from_event()</code> function.</p>
</li>
<li>
<p>Remove deprecated <code>odp_crypto_compl_to_event()</code> function.</p>
</li>
<li>
<p>Remove deprecated <code>odp_crypto_compl_free()</code> function.</p>
</li>
<li>
<p>Remove deprecated <code>odp_crypto_operation()</code> function.</p>
</li>
<li>
<p>Remove deprecated <code>odp_crypto_compl_result()</code> function.</p>
</li>
<li>
<p>Remove deprecated <code>odp_crypto_compl_to_u64()</code> function.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_event_7">Event</h4>
<div class="ulist">
<ul>
<li>
<p>Remove deprecated <code>ODP_EVENT_CRYPTO_COMPL</code> event type.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_implementation_9">Implementation</h3>
<div class="sect3">
<h4 id="_packet_io_7">Packet IO</h4>
<div class="ulist">
<ul>
<li>
<p>Remove netmap pktio device.</p>
</li>
<li>
<p>Change recommended DPDK version for DPDK pktio device to v22.11.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_stash_3">Stash</h4>
<div class="ulist">
<ul>
<li>
<p>Change implementation to use overflow safe MPMC rings by default. Previous
strict size ring-based implementation can be used by enabling
<code>odp_stash_param_t.strict_size</code> parameter.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_opendataplane_1_40_0_0">OpenDataPlane (1.40.0.0)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_backward_incompatible_api_changes_8">Backward incompatible API changes</h3>
<div class="sect3">
<h4 id="_packet_8">Packet</h4>
<div class="ulist">
<ul>
<li>
<p>Specify which packet metadata flags cannot be set simultaneously using
<code>odp_packet_has_XX_set()</code> functions.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_timer_12">Timer</h4>
<div class="ulist">
<ul>
<li>
<p>Use <code>ODP_DEPRECATE()</code> macro for <code>odp_timer_set_abs()</code> and
<code>odp_timer_set_rel()</code> functions. Previously, the deprecation was only mentioned
in the function documentation.</p>
</li>
<li>
<p>Deprecate old timer pool clock sources <code>ODP_CLOCK_CPU</code> and <code>ODP_CLOCK_EXT</code>,
which have been replaced by <code>ODP_CLOCK_DEFAULT</code> and <code>ODP_CLOCK_SRC_1</code>.</p>
</li>
<li>
<p>Deprecate old timer set return values <code>ODP_TIMER_TOOEARLY</code>,
<code>ODP_TIMER_TOOLATE</code>, and <code>ODP_TIMER_NOEVENT</code>, which have been replaced by
<code>ODP_TIMER_TOO_NEAR</code>, <code>ODP_TIMER_TOO_FAR</code>, and <code>ODP_TIMER_FAIL</code>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_backward_compatible_api_changes_13">Backward compatible API changes</h3>
<div class="sect3">
<h4 id="_crypto_13">Crypto</h4>
<div class="ulist">
<ul>
<li>
<p>Add new operation type session parameter
(<code>odp_crypto_session_param_t.op_type</code>) that controls how crypto operations
interpret their parameters and handle output packets. Defaults to backward
compatible <code>ODP_CRYPTO_OP_TYPE_LEGACY</code> mode.</p>
</li>
<li>
<p>Add <code>ODP_CRYPTO_OP_TYPE_BASIC</code> operation type with simplified interface
compared to <code>ODP_CRYPTO_OP_TYPE_LEGACY</code>.</p>
</li>
<li>
<p>Add <code>ODP_CRYPTO_OP_TYPE_OOP</code> operation type that writes the output of the
crypto operation into a caller provided output packet and does not consume the
input packet.</p>
</li>
<li>
<p>Clarify that <code>odp_crypto_op()</code> copies all packet data and metadata from the
input packet to the output packet in <code>ODP_CRYPTO_OP_TYPE_LEGACY</code> and
<code>ODP_CRYPTO_OP_TYPE_BASIC</code> modes.</p>
</li>
<li>
<p>Require that <code>odp_crypto_result()</code> is called before packet data of
asynchronously processed packets can be assumed to be valid in non-legacy modes.</p>
</li>
<li>
<p>Fix EIA2 IV length in API documentation. EIA2 uses 64-bit IV, not 128-bit as
previously mentioned in the API text.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_packet_9">Packet</h4>
<div class="ulist">
<ul>
<li>
<p>Clarify <code>odp_packet_has_vlan()</code> and <code>odp_packet_has_vlan_qinq()</code>
specifications.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_remove_deprecated_apis_4">Remove deprecated APIs</h3>
<div class="sect3">
<h4 id="_crypto_14">Crypto</h4>
<div class="ulist">
<ul>
<li>
<p>Remove deprecated per-session IV configuration.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_packet_io_8">Packet IO</h4>
<div class="ulist">
<ul>
<li>
<p>Remove deprecated <code>in_unknown_protos</code> field from <code>odp_pktio_stats_t</code>.</p>
</li>
<li>
<p>Remove deprecated <code>odp_pktin_ts_res()</code> function.</p>
</li>
<li>
<p>Remove deprecated <code>odp_pktin_ts_from_ns()</code> function.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_shared_memory">Shared Memory</h4>
<div class="ulist">
<ul>
<li>
<p>Remove deprecated <code>ODP_SHM_SW_ONLY</code> define.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_traffic_manager_3">Traffic Manager</h4>
<div class="ulist">
<ul>
<li>
<p>Remove deprecated <code>odp_tm_capabilities()</code> function.</p>
</li>
<li>
<p>Remove deprecated <code>commit_bps</code> field from <code>odp_tm_shaper_params_t</code>.</p>
</li>
<li>
<p>Remove deprecated <code>peak_bps</code> field from <code>odp_tm_shaper_params_t</code>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_implementation_10">Implementation</h3>
<div class="sect3">
<h4 id="_crypto_15">Crypto</h4>
<div class="ulist">
<ul>
<li>
<p>Add Multi-Buffer Crypto for IPsec library (Arm optimized) based crypto
implementation. See <code>DEPENDENCIES</code> for additional information.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_debug_2">Debug</h4>
<div class="ulist">
<ul>
<li>
<p>Add support for runtime event validation (buffer endmark checking). Event
validation can be enabled during configure with
<code>--enable-event-validation [warn/abort]</code> or  with <code>--enabled-debug=full</code>. See
<code>README</code> for additional information.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_opendataplane_1_39_0_0">OpenDataPlane (1.39.0.0)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_backward_incompatible_api_changes_9">Backward incompatible API changes</h3>
<div class="sect3">
<h4 id="_classifier_8">Classifier</h4>
<div class="ulist">
<ul>
<li>
<p>Deprecate <code>odp_cos_with_l2_priority()</code> function. Use <code>ODP_PMR_VLAN_PCP_0</code>
instead.</p>
</li>
<li>
<p>Deprecate packet drop policy option (<code>odp_cls_cos_param_t.drop_policy</code>) and
related functions <code>odp_cos_drop()</code> and <code>odp_cos_drop_set()</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_shared_memory_2">Shared Memory</h4>
<div class="ulist">
<ul>
<li>
<p>Change <code>odp_shm_info()</code> specification to disallow usage of invalid SHM
handles.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_backward_compatible_api_changes_14">Backward compatible API changes</h3>
<div class="sect3">
<h4 id="_buffer">Buffer</h4>
<div class="ulist">
<ul>
<li>
<p>Add multi variants of event conversion functions
(<code>odp_buffer_from_event_multi()</code> and <code>odp_buffer_to_event_multi()</code>).</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_classifier_9">Classifier</h4>
<div class="ulist">
<ul>
<li>
<p>Add PFC priority level (<code>odp_bp_param_t.pfc_level</code>) to back pressure
parameters.</p>
</li>
<li>
<p>Clarify PMR specification to state that in case of multiple PMRs matching
within a CoS, it is implementation specific which PMR is selected.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_crypto_16">Crypto</h4>
<div class="ulist">
<ul>
<li>
<p>Fix a stale reference to the renamed <code>hash_result_not_in_auth_range</code>
session parameter to use the correct name (<code>hash_result_in_auth_range</code>)
in the comment text of <code>hash_result_offset</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_packet_10">Packet</h4>
<div class="ulist">
<ul>
<li>
<p>Add support for additional L3 and L4 protocol types.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_packet_io_9">Packet IO</h4>
<div class="ulist">
<ul>
<li>
<p>Add <code>ODP_PKTIN_MAX_QUEUES</code> define for maximum number of packet input queues.</p>
</li>
<li>
<p>Add new packet input queue size configuration option
<code>odp_pktin_queue_param_t.queue_size</code> and matching capabilities
<code>odp_pktio_capability_t.min_input_queue_size</code> and
<code>odp_pktio_capability_t.max_input_queue_size</code>.</p>
</li>
<li>
<p>Add missing documentation to <code>odp_pktio_link_status_t</code>,
<code>odp_pktio_link_duplex_t</code>, and <code>odp_pktio_link_pause_t</code> enumerations.</p>
</li>
<li>
<p>Add <code>ODP_PKTIO_LINK_PFC_ON</code> enumeration for PFC flow control mode.</p>
</li>
<li>
<p>Add capabilities (<code>odp_pktio_capability_t.flow_control</code>) and configuration
parameters to control reception (<code>odp_pktio_config_t.flow_control.pause_rx</code>) and
transmission (<code>odp_pktio_config_t.flow_control.pause_tx</code>) of Ethernet pause
frames.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_shared_memory_3">Shared Memory</h4>
<div class="ulist">
<ul>
<li>
<p>Add <code>odp_shm_segment_info()</code> function for retrieving information about each
memory segment of an SHM block.</p>
</li>
<li>
<p>Clarified <code>odp_shm_reserve()</code> operation with the default options (no flags).</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_system_3">System</h4>
<div class="ulist">
<ul>
<li>
<p>Add <code>odp_system_meminfo()</code> function for retrieving information about ODP
memory usage.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_opendataplane_1_38_0_0">OpenDataPlane (1.38.0.0)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_backward_incompatible_api_changes_10">Backward incompatible API changes</h3>
<div class="sect3">
<h4 id="_pool_7">Pool</h4>
<div class="ulist">
<ul>
<li>
<p>Change <code>odp_pool_capability_t.pkt.max_uarea_size</code> specification to state
that the value of zero means user area is not supported.</p>
</li>
<li>
<p>Specify that the default value of <code>odp_pool_param_t.pkt.uarea_size</code> is zero
and implementation may round up the given value.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_backward_compatible_api_changes_15">Backward compatible API changes</h3>
<div class="sect3">
<h4 id="_buffer_2">Buffer</h4>
<div class="ulist">
<ul>
<li>
<p>Add <code>odp_buffer_user_area()</code> function which returns pointer to the user area
configured with pool create parameters.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_crypto_17">Crypto</h4>
<div class="ulist">
<ul>
<li>
<p>Add experimental ZUC-256 support.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_packet_11">Packet</h4>
<div class="ulist">
<ul>
<li>
<p>Add <code>odp_packet_vector_user_area()</code> function which returns pointer to the user
area configured with pool create parameters.</p>
</li>
<li>
<p>Add new user flag metadata to packets (<code>odp_packet_user_flag()</code>,
<code>odp_packet_user_flag_set()</code>) and packet vectors
(<code>odp_packet_vector_user_flag()</code>, <code>odp_packet_vector_user_flag_set()</code>).</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_pool_8">Pool</h4>
<div class="ulist">
<ul>
<li>
<p>Add user area size capability and parameter into buffer, timeout, and vector
event pools.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_stash_4">Stash</h4>
<div class="ulist">
<ul>
<li>
<p>Add batch variants of all put/get functions and capabilities for maximum
supported batch sizes.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_thread_4">Thread</h4>
<div class="ulist">
<ul>
<li>
<p>Clarify <code>odp_thread_id()</code> specification to state that thread IDs are assigned
sequentially starting from 0 in the order threads call <code>odp_init_local()</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_timer_13">Timer</h4>
<div class="ulist">
<ul>
<li>
<p>Add <code>odp_timeout_user_area()</code> function which returns pointer to the user area
configured with pool create parameters.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_opendataplane_1_37_2_0">OpenDataPlane (1.37.2.0)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_backward_compatible_api_changes_16">Backward compatible API changes</h3>
<div class="sect3">
<h4 id="_cpu_mask_2">CPU Mask</h4>
<div class="ulist">
<ul>
<li>
<p>Allow usage of NULL pointer with <code>odp_cpumask_default_worker()</code> and
<code>odp_cpumask_default_control()</code> calls. This enables applications to check the
number of worker/control CPUs without allocating a temporary mask.</p>
</li>
<li>
<p>Clarify <code>odp_cpumask_default_worker()</code> and <code>odp_cpumask_default_control()</code>
specifications to mention that system may allow usage of other CPUs as well.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_packet_io_10">Packet IO</h4>
<div class="ulist">
<ul>
<li>
<p>Specify that interfaces that support promiscuous mode set operation have
promiscuous mode disabled by default.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_pool_9">Pool</h4>
<div class="ulist">
<ul>
<li>
<p>Add new statistics counters (<code>odp_pool_stats_t.thread.cache_available</code>) for
reading per thread pool cache usage.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_stash_5">Stash</h4>
<div class="ulist">
<ul>
<li>
<p>Add <code>odp_stash_print()</code> function for printing implementation specific debug
information to the ODP log.</p>
</li>
<li>
<p>Add statistics counters to stash API. Counter support is defined by stash
capabilities (<code>odp_stash_capability_t.stats</code>). Supported counters can be enabled
in <code>odp_stash_create()</code> and read with <code>odp_stash_stats()</code>.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_opendataplane_1_37_1_0">OpenDataPlane (1.37.1.0)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_backward_compatible_api_changes_17">Backward compatible API changes</h3>
<div class="sect3">
<h4 id="_packet_io_11">Packet IO</h4>
<div class="ulist">
<ul>
<li>
<p>Clarify that <code>odp_pktout_send_lso()</code> can be used also for packets that have
payload less than <code>max_payload_len</code> bytes.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_stash_6">Stash</h4>
<div class="ulist">
<ul>
<li>
<p>Change 32-bit and 64-bit specific get/put functions' parameter names to avoid
name conflicts.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_traffic_manager_4">Traffic Manager</h4>
<div class="ulist">
<ul>
<li>
<p>Add option to do rate limiting instead of rate shaping in TM nodes and queues.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_opendataplane_1_37_0_0">OpenDataPlane (1.37.0.0)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_backward_incompatible_api_changes_11">Backward incompatible API changes</h3>
<div class="sect3">
<h4 id="_classifier_10">Classifier</h4>
<div class="ulist">
<ul>
<li>
<p>Deprecate <code>odp_cos_with_l3_qos()</code> function. Use new <code>ODP_PMR_IP_DSCP</code> PMR
term instead.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_backward_compatible_api_changes_18">Backward compatible API changes</h3>
<div class="sect3">
<h4 id="_classifier_11">Classifier</h4>
<div class="ulist">
<ul>
<li>
<p>Add new PMR term enumeration <code>ODP_PMR_IP_DSCP</code> for Differentiated Services
Code Point (DSCP) bits in IP header.</p>
</li>
<li>
<p>Add new PMR term enumeration <code>ODP_PMR_VLAN_PCP_0</code> for Priority Code Point
(PCP) bits in VLAN header.</p>
</li>
<li>
<p>Clarify <code>ODP_PMR_ETHTYPE_0</code>, <code>ODP_PMR_VLAN_ID_0</code>, and <code>ODP_PMR_VLAN_ID_X</code>
PMR term specifications.</p>
</li>
<li>
<p>Remove unused <code>odp_cos_hdr_flow_fields_t</code> enumeration.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_scheduler_6">Scheduler</h4>
<div class="ulist">
<ul>
<li>
<p>Add new <code>odp_schedule_order_wait()</code> function which waits until the currently
held scheduling context is the first in order.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_implementation_11">Implementation</h3>
<div class="sect3">
<h4 id="_packet_io_12">Packet IO</h4>
<div class="ulist">
<ul>
<li>
<p>Add new experimental AF_XDP socket based packet IO device.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_opendataplane_1_36_0_0">OpenDataPlane (1.36.0.0)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_backward_incompatible_api_changes_12">Backward incompatible API changes</h3>
<div class="sect3">
<h4 id="_classifier_12">Classifier</h4>
<div class="ulist">
<ul>
<li>
<p>Add an action parameter <code>odp_cos_action_t</code> to CoS parameters
(<code>odp_cls_cos_param_t</code>). Action may be to enqueue or drop the packet classified
to the CoS. The old methods of creating a drop CoS have been replaced by the
new drop action.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_crypto_18">Crypto</h4>
<div class="ulist">
<ul>
<li>
<p>Deprecate <code>odp_crypto_operation()</code>, the associated data structures, and the
completion event. Use <code>odp_crypto_op()</code> or <code>odp_crypto_op_enq()</code> instead.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_traffic_manager_5">Traffic Manager</h4>
<div class="ulist">
<ul>
<li>
<p>Split <code>odp_tm_capabilities_t.tm_queue_threshold</code> capability into byte and
packet modes.</p>
</li>
<li>
<p>Split <code>odp_tm_level_capabilities_t.tm_node_threshold</code> capability into byte and
packet modes.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_backward_compatible_api_changes_19">Backward compatible API changes</h3>
<div class="sect3">
<h4 id="_classifier_13">Classifier</h4>
<div class="ulist">
<ul>
<li>
<p>Add CoS specific statistics counters (<code>odp_cls_cos_stats_t</code>) and
matching capabilities (<code>odp_cls_stats_capability_t</code>). Statistics counters can be
read with <code>odp_cls_cos_stats()</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_common_2">Common</h4>
<div class="ulist">
<ul>
<li>
<p>Convert <code>unsigned int</code> types to <code>uint32_t</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_traffic_manager_6">Traffic Manager</h4>
<div class="ulist">
<ul>
<li>
<p>Remove unused TM shaper color enum <code>odp_tm_shaper_color_t</code> and
<code>ODP_NUM_SHAPER_COLORS</code> define.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_opendataplane_1_35_0_0">OpenDataPlane (1.35.0.0)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_backward_incompatible_api_changes_13">Backward incompatible API changes</h3>
<div class="sect3">
<h4 id="_scheduler_7">Scheduler</h4>
<div class="ulist">
<ul>
<li>
<p>Deprecate scheduling priority level defines <code>ODP_SCHED_PRIO_HIGHEST</code>,
<code>ODP_SCHED_PRIO_NORMAL</code>, <code>ODP_SCHED_PRIO_LOWEST</code>, and <code>ODP_SCHED_PRIO_DEFAULT</code>.
These defines have been replaced by matching functions.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_traffic_manager_7">Traffic Manager</h4>
<div class="ulist">
<ul>
<li>
<p>Change meaning of <code>odp_tm_enq_multi()</code> return value of zero from failure code
to part of normal operation.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_backward_compatible_api_changes_20">Backward compatible API changes</h3>
<div class="sect3">
<h4 id="_packet_12">Packet</h4>
<div class="ulist">
<ul>
<li>
<p>Remove references to deprecated <code>odp_pktin_ts_res()</code> and
<code>odp_pktin_ts_from_ns()</code> functions.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_packet_io_13">Packet IO</h4>
<div class="ulist">
<ul>
<li>
<p>Add <code>ODP_PKTOUT_MAX_QUEUES</code> define for the maximum number of packet output
queues.</p>
</li>
<li>
<p>Add new packet output queue size configuration option
<code>odp_pktout_queue_param_t.queue_size</code> and matching capabilities
<code>odp_pktio_capability_t.min_output_queue_size</code> and
<code>odp_pktio_capability_t.max_output_queue_size</code>.</p>
</li>
<li>
<p>Clarify <code>odp_pktio_config()</code> usage in the interface setup sequence.</p>
</li>
<li>
<p>Allow large send offload (LSO) usage with traffic manager
(<code>odp_pktio_config_t.enable_lso</code>).</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_timer_14">Timer</h4>
<div class="ulist">
<ul>
<li>
<p>Clarify timer tick properties and especially that it may run with a higher
frequency than the requested timer pool resolution.</p>
</li>
<li>
<p>Add new timer pool parameter (<code>odp_timer_pool_param_t.exp_mode</code>), which
application can use to select if timer expiration may happen before or only
after the specified time.</p>
</li>
<li>
<p>Add new <code>odp_timer_start()</code> and <code>odp_timer_restart()</code> functions.</p>
</li>
<li>
<p>Add support for periodic timers. New capabilities, parameters, and functions
are added to create/start/ack periodic timers.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_traffic_manager_8">Traffic Manager</h4>
<div class="ulist">
<ul>
<li>
<p>Add <code>odp_tm_enq_multi_lso()</code> function which does also LSO as part of the TM
output operation.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_remove_deprecated_apis_5">Remove deprecated APIs</h3>
<div class="sect3">
<h4 id="_classifier_14">Classifier</h4>
<div class="ulist">
<ul>
<li>
<p>Remove deprecated <code>ODP_PMR_INVAL</code> define.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_crypto_19">Crypto</h4>
<div class="ulist">
<ul>
<li>
<p>Remove deprecated old style cipher algorithm enumerations
<code>ODP_CIPHER_ALG_AES128_CBC</code> and <code>ODP_CIPHER_ALG_AES128_GCM</code>.</p>
</li>
<li>
<p>Remove deprecated old style authentication algorithm enumerations
<code>ODP_AUTH_ALG_MD5_96</code>, <code>ODP_AUTH_ALG_SHA256_128</code>, and <code>ODP_AUTH_ALG_AES128_GCM</code>.</p>
</li>
<li>
<p>Remove deprecated fields <code>aes128_cbc</code> and <code>aes128_gcm</code> from
<code>odp_crypto_cipher_algos_t</code>.</p>
</li>
<li>
<p>Remove deprecated fields <code>md5_96</code>, <code>sha256_128</code>, and <code>aes128_gcm</code> from
<code>odp_crypto_auth_algos_t</code>.</p>
</li>
<li>
<p>Remove deprecated data range specifier <code>odp_crypto_data_range_t</code>.</p>
</li>
<li>
<p>Remove deprecated <code>iv</code> field from <code>odp_crypto_session_param_t</code>.</p>
</li>
<li>
<p>Remove deprecated <code>odp_crypto_session_params_t</code> type.</p>
</li>
<li>
<p>Remove deprecated <code>override_iv_ptr</code> field from <code>odp_crypto_op_param_t</code>.</p>
</li>
<li>
<p>Remove deprecated <code>override_iv_ptr</code> field from <code>odp_crypto_packet_op_param_t</code>.</p>
</li>
<li>
<p>Remove deprecated <code>odp_crypto_op_params_t</code> type.</p>
</li>
<li>
<p>Remove deprecated <code>odp_crypto_compl_status_t</code> type.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_packet_io_14">Packet IO</h4>
<div class="ulist">
<ul>
<li>
<p>Remove deprecated parser layer defines (<code>ODP_PKTIO_PARSER_LAYER_*</code>).</p>
</li>
<li>
<p>Remove deprecated <code>odp_pktio_capability_t.loop_supported</code> capability.</p>
</li>
<li>
<p>Remove deprecated <code>odp_pktio_mtu()</code> function.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_queue_3">Queue</h4>
<div class="ulist">
<ul>
<li>
<p>Remove deprecated scheduled queue capabilities from <code>odp_queue_capability_t</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_miscellaneous">Miscellaneous</h4>
<div class="ulist">
<ul>
<li>
<p>Remove deprecated <code>odp.h</code> header file which has been replaced by <code>odp_api.h</code>.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_opendataplane_1_34_0_0">OpenDataPlane (1.34.0.0)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_backward_incompatible_api_changes_14">Backward incompatible API changes</h3>
<div class="sect3">
<h4 id="_crypto_20">Crypto</h4>
<div class="ulist">
<ul>
<li>
<p>Specify that hash result field is not cleared in hash generation in encode
sessions. Applications can do the clearing if needed if the hash result lies
within the authenticated range.</p>
</li>
<li>
<p>Specify that the hash result field is left to an undefined value after
verification.</p>
</li>
<li>
<p>Add a new session parameter
<code>odp_crypto_session_param_t.hash_result_in_auth_range</code> to indicate if the hash
result location may overlap the authenticated range. Leaving the flag unset may
enable optimizations in the implementation.</p>
</li>
<li>
<p>Define new fields for cipher and auth IV lengths in the session parameter
structure <code>odp_crypto_session_param_t</code>. Deprecated the old fields for cipher and
auth IV lengths.</p>
</li>
<li>
<p>Deprecate the mechanism of configuring initialization vectors in sessions
since reusing the same IV with the same key is almost always wrong. Require that
IV is provided for each packet in the operation parameters.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_traffic_manager_9">Traffic Manager</h4>
<div class="ulist">
<ul>
<li>
<p>Add capabilities to <code>odp_tm_level_capabilities_t</code> for platforms to express
shaper rate and burst min and max limits.</p>
</li>
<li>
<p>Remove support for min and max shaper rate via platform defined macros
<code>ODP_TM_MIN_SHAPER_BW</code> and <code>ODP_TM_MAX_SHAPER_BW</code>. Min and Max shaper bandwidths
can be read from TM per level capabilities (<code>odp_tm_level_capabilities_t</code>).</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_backward_compatible_api_changes_21">Backward compatible API changes</h3>
<div class="sect3">
<h4 id="_crypto_21">Crypto</h4>
<div class="ulist">
<ul>
<li>
<p>Clarify that in case of AEAD algorithms the <code>odp_crypto_op_param_t.auth_range</code>
parameter is not used, except with AES-GMAC.</p>
</li>
<li>
<p>Clarify <code>ODP_AUTH_ALG_AES_GMAC</code> API text to not sound as if ODP did not use
AAD as defined in the GMAC algorithm specification.</p>
</li>
<li>
<p>Make the names of session creation errors (<code>odp_crypto_ses_create_err_t</code>) a
bit shorter but retain the old names for backward compatibility.</p>
</li>
<li>
<p>Add crypto session creation error codes (<code>odp_crypto_ses_create_err_t</code>) for
cases where the requested combination of algorithms, order of algorithms or
other combination of creation parameters is not supported.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_random">Random</h4>
<div class="ulist">
<ul>
<li>
<p>Explicitly state that the same series of <code>odp_random_test_data()</code> calls is
required to generate the same data.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_traffic_manager_10">Traffic Manager</h4>
<div class="ulist">
<ul>
<li>
<p>Clarify that peak rate and peak burst are ignored when dual rate is set to
false in <code>odp_tm_shaper_params_t</code>, indicating that the single rate is commit
rate.</p>
</li>
<li>
<p>Define the default values for many parameters to be set by various init
functions.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_abi_changes_3">ABI changes</h3>
<div class="ulist">
<ul>
<li>
<p>Removed mips64 architecture support. MIPS devices may still use ODP by
utilizing the generic default architecture.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_opendataplane_1_33_0_0">OpenDataPlane (1.33.0.0)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_backward_incompatible_api_changes_15">Backward incompatible API changes</h3>
<div class="sect3">
<h4 id="_shared_memory_4">Shared Memory</h4>
<div class="ulist">
<ul>
<li>
<p>Added a bit mask capability <code>odp_shm_capability_t.flags</code> for ODP_SHM_* flags</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_timer_15">Timer</h4>
<div class="ulist">
<ul>
<li>
<p>Added initialization function <code>odp_timer_pool_param_init()</code> for timer pool
parameters. Application must use it to initialize parameters to their
default values.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_backward_compatible_api_changes_22">Backward compatible API changes</h3>
<div class="sect3">
<h4 id="_classifier_15">Classifier</h4>
<div class="ulist">
<ul>
<li>
<p>Added missing default values for <code>odp_cls_cos_param_t.num_queue</code>,
<code>odp_cls_cos_param_t.red.enable</code>, <code>odp_cls_cos_param_t.bp.enable</code>, and
<code>odp_pmr_param_t.range_term</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_crypto_22">Crypto</h4>
<div class="ulist">
<ul>
<li>
<p>Clarified that <code>odp_crypto_session_create()</code> parameters, including the key and
IV data, can be freed after session creation.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_dma_7">DMA</h4>
<div class="ulist">
<ul>
<li>
<p>Added new DMA module which enables applications to offload memory transfers
(copies) to DMA hardware. See <code>include/odp/api/spec/dma.h</code> for more information.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_ipsec">IPsec</h4>
<div class="ulist">
<ul>
<li>
<p>Added possibility to request completed packets as packet vector events
instead of packet events. Packet vector capabilities are provided by
<code>odp_ipsec_capability_t.vector</code> and the configuration is done using
<code>odp_ipsec_config_t.vector</code>.</p>
</li>
<li>
<p>Clarified that <code>odp_ipsec_sa_create()</code> parameters, including the various
memory buffers pointed to by the parameters, can be freed after SA creation.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_packet_io_15">Packet IO</h4>
<div class="ulist">
<ul>
<li>
<p>Clarified <code>odp_pktin_vector_config_t.enable</code> documentation to state that when
packet vectors are enabled, packets may be delivered both as packet vector
events and packet events. Packet vectors are disabled by default.</p>
</li>
<li>
<p>Clarified that the type of input queues (scheduled versus plain) is deduced
from the pktio input mode in <code>odp_pktin_queue_config()</code>, and that the default
queue type value and the queue type value passed in
<code>odp_pktin_queue_param_t.queue_param</code> are ignored.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_pool_10">Pool</h3>
<div class="ulist">
<ul>
<li>
<p>Added new pool type for DMA completion event pools. These pools are created
with <code>odp_dma_pool_create()</code> and pool capability is included in
<code>odp_dma_capability_t</code>. Otherwise, pool APIs are used normally for these pools.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_shared_memory_5">Shared Memory</h4>
<div class="ulist">
<ul>
<li>
<p>Added <code>ODP_SHM_NO_HP</code> flag which can be used to prevent the implementation
from allocating the shared memory block from huge pages</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_std_2">Std</h4>
<div class="ulist">
<ul>
<li>
<p>Added DMA flag to <code>odp_feature_t</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_opendataplane_1_32_1_0">OpenDataPlane (1.32.1.0)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_backward_compatible_api_changes_23">Backward compatible API changes</h3>
<div class="sect3">
<h4 id="_init_5">Init</h4>
<div class="ulist">
<ul>
<li>
<p>Added <code>odp_instance()</code> function for reading the current ODP instance handle</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_ipsec_2">IPsec</h4>
<div class="ulist">
<ul>
<li>
<p>Clarified bit field unions' <code>all</code> member intended usage</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_packet_13">Packet</h4>
<div class="ulist">
<ul>
<li>
<p>Clarified <code>odp_proto_chksums_t.all_chksum</code> intended usage</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_packet_io_16">Packet IO</h4>
<div class="ulist">
<ul>
<li>
<p>Clarified <code>odp_pktin_hash_proto_t.all_bits</code> intended usage</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_pool_11">Pool</h4>
<div class="ulist">
<ul>
<li>
<p>Added <code>odp_pool_print_all()</code> function for printing implementation defined
information about all created pools to the ODP log</p>
</li>
<li>
<p>Clarified <code>odp_pool_param_t.pkt.seg_len</code> documentation</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_stash_7">Stash</h4>
<div class="ulist">
<ul>
<li>
<p>Added 32-bit only <code>odp_stash_put_u32()</code> and <code>odp_stash_get_u32()</code> functions</p>
</li>
<li>
<p>Added 64-bit only <code>odp_stash_put_u64()</code> and <code>odp_stash_get_u64()</code> functions</p>
</li>
<li>
<p>Added pointer only <code>odp_stash_put_ptr()</code> and <code>odp_stash_get_ptr()</code> functions</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_helper_1_3_0">Helper (1.3.0)</h3>
<div class="sect3">
<h4 id="_backward_incompatible_changes_5">Backward incompatible changes</h4>
<div class="sect4">
<h5 id="_cli">CLI</h5>
<div class="ulist">
<ul>
<li>
<p>Removed unused <code>instance</code> parameter from <code>odph_cli_init()</code></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_deprecation_framework">Deprecation Framework</h5>
<div class="paragraph">
<p>Added a deprecation framework to enable controlled API deprecation.</p>
</div>
<div class="paragraph">
<p>When a helper API is deprecated, validation tests will be updated to use the
replacement API. By default, attempts to compile code with deprecated helper
APIs will fail. To make moving to a new API version easier, helper library
supports <code>--enable-helper-deprecated</code> <code>configure</code> option, which makes the
deprecated APIs visible again.</p>
</div>
</div>
<div class="sect4">
<h5 id="_linux">Linux</h5>
<div class="ulist">
<ul>
<li>
<p>Deprecated <code>odph_odpthreads_create()</code> function. Use <code>odph_thread_create()</code>
instead.</p>
</li>
<li>
<p>Deprecated <code>odph_odpthreads_join()</code> function. Use <code>odph_thread_join()</code>
instead.</p>
</li>
<li>
<p>Deprecated unused <code>odph_thread_param_t.instance</code> struct member</p>
</li>
<li>
<p>Deprecated <code>odph_odpthread_t</code> and <code>odph_odpthread_params_t</code> types</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_opendataplane_1_32_0_0">OpenDataPlane (1.32.0.0)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_backward_incompatible_api_changes_16">Backward incompatible API changes</h3>
<div class="sect3">
<h4 id="_ipsec_3">IPsec</h4>
<div class="ulist">
<ul>
<li>
<p>Added destination queue capabilities <code>odp_ipsec_capability_t.queue_type_sched</code>
and <code>odp_ipsec_capability_t.queue_type_plain</code></p>
</li>
<li>
<p>Modified specification to not promise the original packet back after all error
cases</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_backward_compatible_api_changes_24">Backward compatible API changes</h3>
<div class="sect3">
<h4 id="_ipsec_4">IPsec</h4>
<div class="ulist">
<ul>
<li>
<p>Added original ESP/AH packet length into IPsec packet result
(<code>odp_ipsec_packet_result_t.orig_ip_len</code>)</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_packet_14">Packet</h4>
<div class="ulist">
<ul>
<li>
<p>Added <code>odp_packet_reass_info()</code> function for reading completed reassembly
details</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_std_3">Std</h4>
<div class="ulist">
<ul>
<li>
<p>Moved all contents of support and feature modules into ODP Std module</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_helper_1_2_0">Helper (1.2.0)</h3>
<div class="sect3">
<h4 id="_backward_incompatible_changes_6">Backward incompatible changes</h4>
<div class="sect4">
<h5 id="_cli_2">CLI</h5>
<div class="ulist">
<ul>
<li>
<p>Replaced <code>odph_cli_start()</code> function with <code>odph_cli_run()</code>, which doesn&#8217;t
automatically create a separate thread for running the CLI server.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_linux_2">Linux</h5>
<div class="ulist">
<ul>
<li>
<p>Deprecated <code>odph_odpthread_t</code> and <code>odph_odpthread_params_t</code> types</p>
</li>
<li>
<p>Added <code>odph_thread_param_init()</code> function for initializing thread parameters</p>
</li>
<li>
<p>Added <code>odph_thread_common_param_init()</code> function for initializing thread
common parameters</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_backward_compatible_changes_4">Backward compatible changes</h4>
<div class="sect4">
<h5 id="_cli_3">CLI</h5>
<div class="ulist">
<ul>
<li>
<p>Added <code>odph_cli_param_t.hostname</code> parameter for providing a custom CLI prompt
hostname</p>
</li>
<li>
<p>Added <code>odph_cli_log_va()</code> function for user defined CLI commands</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_linux_3">Linux</h5>
<div class="ulist">
<ul>
<li>
<p>Added <code>odph_thread_param_t.stack_size</code> parameter for configuring minimum
thread stack size</p>
</li>
<li>
<p>Added <code>odph_thread_common_param_t.sync_timeout</code> parameter for configuring
synchronized thread creation timeout</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_implementation_12">Implementation</h3>
<div class="sect3">
<h4 id="_crypto_23">Crypto</h4>
<div class="ulist">
<ul>
<li>
<p>AES-EEA2 and AES-EIA2 crypto algorithms that operate in bit mode interpret the
crypto/auth offset now as bits as specified in the ODP API. This correction
requires corresponding changes in applications that have relied on the old,
incorrect behavior that interpreted the offset in bytes.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_opendataplane_1_31_0_0">OpenDataPlane (1.31.0.0)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_backward_incompatible_api_changes_17">Backward incompatible API changes</h3>
<div class="sect3">
<h4 id="_traffic_manager_11">Traffic Manager</h4>
<div class="ulist">
<ul>
<li>
<p>Added new TM feature capabilities and an egress specific capability function
<code>odp_tm_egress_capabilities()</code></p>
</li>
<li>
<p>Deprecated <code>odp_tm_capabilities()</code> function which is replaced by
<code>odp_tm_egress_capabilities()</code></p>
</li>
<li>
<p>Added <code>odp_tm_capabilities_t.max_schedulers_per_node</code> capability to express
the maximum number of schedulers per TM node</p>
</li>
<li>
<p>Added support for non-global packet priority mode</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_backward_compatible_api_changes_25">Backward compatible API changes</h3>
<div class="sect3">
<h4 id="_classifier_16">Classifier</h4>
<div class="ulist">
<ul>
<li>
<p>Added queue specific statistics counters (<code>odp_cls_queue_stats()</code>)</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_ipsec_5">IPsec</h4>
<div class="ulist">
<ul>
<li>
<p>Added ICV length into SA configuration parameters
(<code>odp_ipsec_crypto_param_t.icv_len</code>)</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_packet_15">Packet</h4>
<div class="ulist">
<ul>
<li>
<p>Moved packet type definitions into a separate <code>packet_types.h</code> header to
enable easier function inlining</p>
</li>
<li>
<p>Added <code>odp_packet_disassemble()</code>, <code>odp_packet_reassemble()</code>, and other new
functions for packets allocated from external memory pools</p>
</li>
<li>
<p>Added packet protocol statistics functions <code>odp_packet_proto_stats_request()</code>
and <code>odp_packet_proto_stats()</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_packet_io_17">Packet IO</h4>
<div class="ulist">
<ul>
<li>
<p>Added <code>odp_pktout_config_opt_t.bit.proto_stats_ena</code> option for enabling packet
protocol statistics updates</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_pool_12">Pool</h4>
<div class="ulist">
<ul>
<li>
<p>Added new concept of external memory pools, which are populated with
application provided memory</p>
</li>
<li>
<p>Added new <code>odp_pool_type_t</code> enumeration</p>
</li>
<li>
<p>Moved pool type definitions into a separate <code>pool_types.h</code> header to enable
easier function inlining</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_protocol_stats_2">Protocol Stats</h4>
<div class="ulist">
<ul>
<li>
<p>Added new generic protocol statistics framework</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_queue_4">Queue</h4>
<div class="ulist">
<ul>
<li>
<p>Moved queue type definitions into a separate <code>queue_types.h</code> header to enable
easier function inlining</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_std_4">Std</h4>
<div class="ulist">
<ul>
<li>
<p>Renamed std_clib module std and moved all generic ODP data types and functions
there</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_traffic_manager_12">Traffic Manager</h4>
<div class="ulist">
<ul>
<li>
<p>Increased scheduling weight parameter size (<code>uint8_t</code> to <code>uint32_t</code>)</p>
</li>
<li>
<p>Added queue specific statistics counters (<code>odp_tm_queue_stats()</code>)</p>
</li>
<li>
<p>Added <code>odp_tm_enq_multi()</code> function for enqueueing multiple packets at a time</p>
</li>
<li>
<p>Added <code>odp_tm_queue_params_t.ordered_enqueue</code> option which can be used to
control if ordering is enabled</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_helper_1_1_1">Helper (1.1.1)</h3>
<div class="ulist">
<ul>
<li>
<p>Added <code>odph_ipsec_auth_icv_len_default()</code> function for returning the default
ICV length of an algorithm</p>
</li>
<li>
<p>Added support for <code>AES-CMAC</code> into <code>odph_ipsec_alg_check()</code></p>
</li>
<li>
<p>Added default ICV length check into <code>odph_ipsec_alg_check()</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_opendataplane_1_30_1_0">OpenDataPlane (1.30.1.0)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_api">API</h3>
<div class="sect3">
<h4 id="_packet_io_18">Packet IO</h4>
<div class="ulist">
<ul>
<li>
<p>Modified <code>odp_pktio_stats_t.in_octets/out_octets</code> definitions to not include
CRC (4 bytes)</p>
</li>
<li>
<p>Added <code>odp_pktio_stats_capability_t</code> struct to <code>odp_pktio_capability_t</code> to
inform about supported statistics counters</p>
</li>
<li>
<p>Added new statistics counters and related capabilities for
received/transmitted multicast and broadcast Ethernet packets (<code>in_mcast_pkts</code>,
<code>in_bcast_pkts</code>, <code>out_mcast_pkts</code>, <code>out_bcast_pkts</code>)</p>
</li>
<li>
<p>Added new pktio input/output queue specific statistics counters
(<code>odp_pktin_queue_stats_t</code> and <code>odp_pktout_queue_stats_t</code>) and related
functions and capabilities</p>
</li>
<li>
<p>Added new functions for reading and printing ODP implementation specific
custom packet IO statistics counters: <code>odp_pktio_extra_stat_info()</code>,
<code>odp_pktio_extra_stats()</code>, <code>odp_pktio_extra_stats_print()</code></p>
</li>
<li>
<p>Specified that the default value of <code>odp_pktio_config_t.enable_loop</code> option is
false</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_ipsec_6">IPsec</h4>
<div class="ulist">
<ul>
<li>
<p>Specified that the default values of the IPsec specific reassembly enables
are false</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_scheduler_8">Scheduler</h4>
<div class="ulist">
<ul>
<li>
<p>Added <code>odp_schedule_print()</code> function for printing debug information about
scheduler status into the ODP log</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_standard_types">Standard Types</h4>
<div class="ulist">
<ul>
<li>
<p>Added <code>odp_fract_u64_t</code> type which can be used to define fractional numbers
accurately</p>
</li>
<li>
<p>Added <code>odp_fract_u64_to_dbl()</code> function for converting <code>odp_fract_u64_t</code>
fractional numbers into doubles</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_timer_16">Timer</h4>
<div class="ulist">
<ul>
<li>
<p>Added timer tick info as part of <code>odp_timer_pool_info_t</code>. This enables timer
implementation to specify tick frequency and duration very accurately.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_opendataplane_1_30_0_0">OpenDataPlane (1.30.0.0)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_api_2">API</h3>
<div class="sect3">
<h4 id="_ipsec_7">IPsec</h4>
<div class="ulist">
<ul>
<li>
<p>New success bytes field in stats (<code>odp_ipsec_stats_t.success_bytes</code>)</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_packet_io_19">Packet IO</h4>
<div class="ulist">
<ul>
<li>
<p>Specify explicitly that an application may enqueue to packet input side event
queues, and cannot dequeue from output side event queues</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_time_4">Time</h4>
<div class="ulist">
<ul>
<li>
<p>Added time stamp read functions which read time stamp value more strictly
in the program order: <code>odp_time_local_strict()</code>, <code>odp_time_local_strict_ns()</code>,
<code>odp_time_global_strict()</code>, <code>odp_time_global_strict_ns()</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_timer_17">Timer</h4>
<div class="ulist">
<ul>
<li>
<p>Added new default clock source enumeration <code>ODP_CLOCK_DEFAULT</code>
(=<code>ODP_CLOCK_SRC_0</code>) and support for multiple clock sources (<code>ODP_CLOCK_SRC_1</code>,
<code>ODP_CLOCK_SRC_2</code>&#8230;&#8203;). The old <code>ODP_CLOCK_CPU</code> and <code>ODP_CLOCK_EXT</code> enumerations
will be deprecated in the future.</p>
</li>
<li>
<p>Renamed set operation return codes (<code>odp_timer_set_t</code>) to better document
expiration time position to current time:
<code>ODP_TIMER_TOOEARLY</code> &#8594; <code>ODP_TIMER_TOO_NEAR</code>, <code>ODP_TIMER_TOOLATE</code> &#8594;
<code>ODP_TIMER_TOO_FAR</code></p>
</li>
<li>
<p>Renamed set operation failure code (<code>odp_timer_set_t</code>) to cover all error
cases: <code>ODP_TIMER_NOEVENT</code> &#8594; <code>ODP_TIMER_FAIL</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_traffic_manager_13">Traffic Manager</h4>
<div class="ulist">
<ul>
<li>
<p>Added option to enable packet mode shaper (packets per second as opposed to
bits per second)</p>
</li>
<li>
<p>Added new mandatory <code>odp_tm_start()</code> and <code>odp_tm_stop()</code> calls for starting and
stopping traffic manager system</p>
</li>
<li>
<p>Added capabilities (<code>odp_tm_capabilities_t</code>) for supported dynamic
configuration updates</p>
</li>
<li>
<p>Deprecated shaper commit information rate bps
(<code>odp_tm_shaper_params_t.commit_bps</code>) and peak information rate bps
(<code>odp_tm_shaper_params_t.peak_bps</code>) fields. <code>odp_tm_shaper_params_t.commit_rate</code>
and <code>odp_tm_shaper_params_t.peak_rate</code> fields should be used instead.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_helper_1_1_0">Helper (1.1.0)</h3>
<div class="ulist">
<ul>
<li>
<p>Added new mandatory <code>odph_cli_init()</code> and <code>odph_cli_term()</code> functions for
initializing and terminating the CLI helper</p>
</li>
<li>
<p>Added <code>odph_cli_register_command()</code> function for registering user defined CLI
commands</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_opendataplane_1_29_0_0">OpenDataPlane (1.29.0.0)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_api_3">API</h3>
<div class="sect3">
<h4 id="_packet_io_20">Packet IO</h4>
<div class="ulist">
<ul>
<li>
<p>Modified statistics counters (<code>odp_pktio_stats_t</code>) definitions</p>
</li>
<li>
<p>Deprecated statistics counter <code>odp_pktio_stats_t.in_unknown_protos</code></p>
</li>
<li>
<p>New <code>odp_pktio_stats_t.in_packets</code> and <code>odp_pktio_stats_t.out_packets</code>
statistics counters</p>
</li>
<li>
<p>New APIs for packet input inline IP reassembly offload</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_packet_16">Packet</h4>
<div class="ulist">
<ul>
<li>
<p>New <code>odp_packet_reass_status()</code> function added for checking packet reassembly
status</p>
</li>
<li>
<p>New <code>odp_packet_reass_partial_state()</code> function added for reading packet
partial reassembly state</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_ipsec_8">IPsec</h4>
<div class="ulist">
<ul>
<li>
<p>New APIs for inline IP reassembly offload</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_init_6">Init</h4>
<div class="ulist">
<ul>
<li>
<p>New <code>odp_log_thread_fn_set()</code> function added for setting a thread specific log
function</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_implementation_13">Implementation</h3>
<div class="ulist">
<ul>
<li>
<p>ABI compatibility default value has been changed to disabled. User can enable
ABI compatibility with <code>--enable-abi-compat</code> configure option.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_opendataplane_1_28_0_0">OpenDataPlane (1.28.0.0)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_api_4">API</h3>
<div class="sect3">
<h4 id="_crypto_24">Crypto</h4>
<div class="ulist">
<ul>
<li>
<p>New crypto capabilities for defining if a queue type (scheduled/plain) can be
used as a crypto completion event destination</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_event_8">Event</h4>
<div class="ulist">
<ul>
<li>
<p>New packet TX completion event type and related functions</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_packet_17">Packet</h4>
<div class="ulist">
<ul>
<li>
<p>New packet APIs for requesting packet TX completion events</p>
</li>
<li>
<p>New packet APIs for requesting packet TX drop based on packet age</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_classifier_17">Classifier</h4>
<div class="ulist">
<ul>
<li>
<p>New <code>odp_cls_print_all()</code> function for printing implementation specific
debug information about all classifier rules</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_system_4">System</h4>
<div class="ulist">
<ul>
<li>
<p>New enumerations for ARMv8.7-A, ARMv9.0-A, ARMv9.1-A, and ARMv9.2-A ISA
versions</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_opendataplane_1_24_0_0">OpenDataPlane (1.24.0.0)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_summary_of_changes">Summary of Changes</h3>
<div class="paragraph">
<p>This release introduces a new stash API module. The other main API additions are
pool buffer caching configuration and packet IO link information. The release
also includes several smaller API improvements and clarifications.</p>
</div>
</div>
<div class="sect2">
<h3 id="_api_5">API</h3>
<div class="sect3">
<h4 id="_common_3">Common</h4>
<div class="ulist">
<ul>
<li>
<p>Added missing const qualifiers</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Some API calls missed const qualifiers on read-only data pointers.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Improved Doxygen module descriptions</p>
</li>
<li>
<p>Use param_init functions for parameter defaults</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When available, parameter init functions must be used to initialize parameters
into their default values.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_align">Align</h3>
<div class="ulist">
<ul>
<li>
<p>Added <code>ODP_CACHE_LINE_ROUNDUP</code> macro</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Added macro for rounding up a value to the next multiple of cache line size.
This round up is needed e.g. when selecting buffer sizes so that false sharing
is avoided.</p>
</div>
<div class="sect3">
<h4 id="_cpu_5">CPU</h4>
<div class="ulist">
<ul>
<li>
<p>Make supporting CPU frequency and cycle counter optional</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>CPU frequencies or CPU cycle counter may not be available on all HW/SW
platforms. Zero is returned if those cannot be read.</p>
</div>
</div>
<div class="sect3">
<h4 id="_feature">Feature</h4>
<div class="ulist">
<ul>
<li>
<p>Added feature bits <code>stash</code> and <code>compress</code> into <code>odp_feature_t</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_packet_18">Packet</h4>
<div class="ulist">
<ul>
<li>
<p>Clarify packet length function argument definitions</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Modify documentations of functions, which decrease packet length, to clearly
state what are the allowed values for length argument. This is done to avoid
creating zero length packets which are not allowed by the packet API.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Added <code>odp_packet_input_set()</code> function</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>An application may use this for testing or other purposes, when perception of
the packet input interface need to be changed.</p>
</div>
</div>
<div class="sect3">
<h4 id="_packet_io_21">Packet I/O</h4>
<div class="ulist">
<ul>
<li>
<p>Added <code>odp_pktio_link_info()</code> function for reading link status information</p>
<div class="ulist">
<ul>
<li>
<p>Autonegotiation mode (unknown/enabled/disabled)</p>
</li>
<li>
<p>Duplex mode (unknown/half duplex/full duplex)</p>
</li>
<li>
<p>Flow control (unknown/on/off)</p>
</li>
<li>
<p>Link status (unknown/up/down)</p>
</li>
<li>
<p>Media (media type as string)</p>
</li>
<li>
<p>Speed (unknown/Mbps)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Modified <code>odp_pktio_link_status()</code> to return <code>odp_pktio_link_status_t</code> enum
(backward compatible values)</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_pool_13">Pool</h4>
<div class="ulist">
<ul>
<li>
<p>Added <code>cache_size</code> parameters to <code>odp_pool_capability_t</code> and <code>odp_pool_param_t</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Added thread local cache size parameter and capability. This allows application
to control thread local caching and prepare large enough pool when
implementation caches events per thread. The default value is implementation
specific for backwards compatibility.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Removed default value of packet <code>max_len</code> from <code>odp_pool_param_t</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The default value is implementation specific and may not be equal to the maximum
capability.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Added packet data <code>align</code> parameter to <code>odp_pool_param_t</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Added packet pool parameter to request minimum data alignment for user allocated
packets. When user allocates a new packet and fills in protocol headers, it&#8217;s
convenient that data alignment does not need to be checked (and tuned) on each
allocated packet.</p>
</div>
</div>
<div class="sect3">
<h4 id="_queue_5">Queue</h4>
<div class="ulist">
<ul>
<li>
<p>Unify <code>max_size capa</code> specification for all plain queue types</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Specify queue maximum size capability the same way for all non-blocking levels
(<code>ODP_BLOCKING</code>, <code>ODP_NONBLOCKING_LF</code> and <code>ODP_NONBLOCKING_WF</code>). Max_size value
of zero means that there is no size limit.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Clarify that queue operations include memory barriers</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Clarify that queue enqueue operations include memory barrier of release
semantics and queue dequeue operations include acquire semantics.</p>
</div>
</div>
<div class="sect3">
<h4 id="_random_2">Random</h4>
<div class="ulist">
<ul>
<li>
<p>Clarify how much data <code>odp_random_data()</code> and <code>odp_random_test_data()</code> output on success.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>It may not be possible for random generator functions to return requested number
of bytes. Clarify that implementation is not required to loop until <code>len</code> bytes
are available. Instead application should contain such logic.</p>
</div>
</div>
<div class="sect3">
<h4 id="_scheduler_9">Scheduler</h4>
<div class="ulist">
<ul>
<li>
<p>Clarify synchronization of store operations during atomic context</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Stores performed while holding an atomic scheduling context are seen correctly
by other thread when they hold the same context later on. This is guaranteed
also when queue enqueue is not used in between.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Clarify that schedule operations include memory barriers</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Clarify that event schedule operations include memory barrier of acquire
semantics.</p>
</div>
</div>
<div class="sect3">
<h4 id="_shared_memory_6">Shared Memory</h4>
<div class="ulist">
<ul>
<li>
<p>Add <code>ODP_SHM_HW_ACCESS</code> flag</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This can be used to memory allocations where both CPUs and HW accelerators
access the same memory area. These HW accelerators may be programmed outside of
ODP APIs, but the memory is reserved and shared normally inside/between ODP
applications.</p>
</div>
</div>
<div class="sect3">
<h4 id="_stash_8">Stash</h4>
<div class="ulist">
<ul>
<li>
<p>Added new stash API module</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Application needs often store object handles for later usage. From current APIs,
e.g. buffers and queues could be used to store these handles, but buffers
consume more memory than is necessary and event queues are not needed for this
simple use case. This new API maybe implemented e.g. as a ring of object handles
in memory, or with a HW buffer manager.</p>
</div>
</div>
<div class="sect3">
<h4 id="_time_5">Time</h4>
<div class="ulist">
<ul>
<li>
<p>Added <code>odp_time_local_ns()</code> and <code>odp_time_global_ns()</code> functions for acquiring
current time stamp in nanoseconds</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Added functions to get the current local/global
time stamp directly in nanoseconds. For example, <code>odp_time_local_ns()</code> is
equivalent of calling <code>odp_time_to_ns(odp_time_local())</code>. This simplifies use
cases where time will be always converted to nanoseconds. However, when time API
performance is important conversions to nanoseconds should be avoided or
minimized.</p>
</div>
</div>
<div class="sect3">
<h4 id="_timer_18">Timer</h4>
<div class="ulist">
<ul>
<li>
<p>Clarify that <code>odp_timeout_tick()</code> returns original expiration time</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Specification was open if returned expiration time is the original or actual
expiration time. HW based implementations will not likely modify timeout event
with actual expiration time. Also original expiration time is more valuable to
an application as it can be used to calculate e.g. the next period.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add resolution in hertz parameter <code>res_hz</code> into <code>odp_timer_pool_param_t</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Added option to specify timer pool resolution in hertz. High resolution values
in nanoseconds result small numbers and thus poor granularity. Hertz offers
better granularity with high resolution values. User gives resolution either in
nanoseconds or hertz, and sets the other parameter to zero.</p>
</div>
</div>
<div class="sect3">
<h4 id="_traffic_manager_14">Traffic Manager</h4>
<div class="ulist">
<ul>
<li>
<p>Add missing handle debug functions</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Traffic Manager API defines all types as platform specific, yet unit tests
expect to be able to print them. Therefore introduce u64 debug print conversion
functions for all TM types: <code>odp_tm_to_u64()</code>, <code>odp_tm_queue_to_u64()</code>,
<code>odp_tm_node_to_u64()</code>, <code>odp_tm_shaper_to_u64()</code>, <code>odp_tm_sched_to_u64()</code>,
<code>odp_tm_threshold_to_u64()</code>, <code>odp_tm_wred_to_u64()</code></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Info structures are written only on success</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Clarify that info structures (<code>odp_tm_node_info_t</code>, <code>odp_tm_node_fanin_info_t</code>,
<code>odp_tm_queue_info_t</code>, <code>odp_tm_query_info_t</code>) are written only on success.</p>
</div>
</div>
<div class="sect3">
<h4 id="_version">Version</h4>
<div class="ulist">
<ul>
<li>
<p>Added <code>ODP_VERSION_API</code> define and <code>ODP_VERSION_API_NUM</code> macro</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Added a macro and version number defines for easier comparison of API version
numbers.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_validation_tests">Validation Tests</h3>
<div class="sect3">
<h4 id="_buffer_3">Buffer</h4>
<div class="ulist">
<ul>
<li>
<p>Rewrote buffer tests for improved coverage</p>
</li>
<li>
<p>Allow allocated buffer size to be larger than requested</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_classification">Classification</h4>
<div class="ulist">
<ul>
<li>
<p>Fix duplicate global variable definition</p>
</li>
<li>
<p>Use <code>odp_schedule_wait_time()</code> correctly</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_crypto_25">Crypto</h4>
<div class="ulist">
<ul>
<li>
<p>Fix var len array scope</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_init_7">Init</h4>
<div class="ulist">
<ul>
<li>
<p>Add tests for new <code>compress</code> and <code>stash</code> feature bits</p>
</li>
<li>
<p>Improved log prints</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_ipsec_9">IPSec</h4>
<div class="ulist">
<ul>
<li>
<p>Fixed invalid allocation of zero length test packet</p>
</li>
<li>
<p>Fixed invalid test for user pointer value</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_packet_19">Packet</h4>
<div class="ulist">
<ul>
<li>
<p>Add max pools test</p>
</li>
<li>
<p>Add packet alloc align test</p>
</li>
<li>
<p>Fix max_num expectations</p>
</li>
<li>
<p>Prevent test trying to allocate zero length packets</p>
</li>
<li>
<p>Remove pools from suite init</p>
</li>
<li>
<p>Remove reset test packet from suite init</p>
</li>
<li>
<p>Rename default pool</p>
</li>
<li>
<p>Use common pool capability</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_packet_io_22">Packet I/O</h4>
<div class="ulist">
<ul>
<li>
<p>Check parser flags on receive</p>
</li>
<li>
<p>Check pktio index</p>
</li>
<li>
<p>Decrease timeout in <code>odp_pktin_recv_tmo()</code> test</p>
</li>
<li>
<p>Make <code>pktio_check_start_stop()</code> test conditional</p>
</li>
<li>
<p>Remove unnecessary test start-up input flushes</p>
</li>
<li>
<p>Test <code>odp_packet_input_set()</code></p>
</li>
<li>
<p>Test user pointer on receive</p>
</li>
<li>
<p>Do no attempt to continue with invalid queue handle</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_pool_14">Pool</h4>
<div class="ulist">
<ul>
<li>
<p>Add pool cache size tests</p>
</li>
<li>
<p>Add test for packet pool seg_len parameter</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_queue_6">Queue</h4>
<div class="ulist">
<ul>
<li>
<p>Lockfree queue max_size may be zero</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_scheduler_10">Scheduler</h4>
<div class="ulist">
<ul>
<li>
<p>Add new stress test</p>
</li>
<li>
<p>Fix plain+sched test</p>
</li>
<li>
<p>Test <code>odp_schedule_group_create()</code> with non-zero mask</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_shared_memory_7">Shared Memory</h4>
<div class="ulist">
<ul>
<li>
<p>Add reserve flag tests</p>
</li>
<li>
<p>Fix printf format types for pointers</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_stash_9">Stash</h4>
<div class="ulist">
<ul>
<li>
<p>Add tests for the new API</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_system_5">System</h4>
<div class="ulist">
<ul>
<li>
<p>Add test for <code>ODP_CACHE_LINE_ROUNDUP</code></p>
</li>
<li>
<p>Add version macro test</p>
</li>
<li>
<p>Call version string functions</p>
</li>
<li>
<p>Cpu cycle counter may not be supported</p>
</li>
<li>
<p>Make <code>odp_cpu_hz_max()</code> tests conditional</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_timer_19">Timer</h4>
<div class="ulist">
<ul>
<li>
<p>Timeout tick equals requested tick</p>
</li>
<li>
<p>Always initialize <code>odp_timer_pool_param_t</code> contents</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_traffic_manager_15">Traffic Manager</h4>
<div class="ulist">
<ul>
<li>
<p>Fix shaper profile parameter check</p>
</li>
<li>
<p>Init structs between tests</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_example_applications_6">Example Applications</h3>
<div class="sect3">
<h4 id="_bench_packet_2">Bench_packet</h4>
<div class="ulist">
<ul>
<li>
<p>Added tests for missing packet functions</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_hello">Hello</h4>
<div class="ulist">
<ul>
<li>
<p>Removed <code>-c</code> command line option</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_l2fwd_4">L2fwd</h4>
<div class="ulist">
<ul>
<li>
<p>Added number of packets option <code>-n</code></p>
</li>
<li>
<p>Added packet copy option <code>-p</code></p>
</li>
<li>
<p>Added pool per interface option <code>-y</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_packet_dump_2">Packet_dump</h4>
<div class="ulist">
<ul>
<li>
<p>Added VLAN support</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_packet_gen_5">Packet_gen</h4>
<div class="ulist">
<ul>
<li>
<p>Added new simple packet generator test application</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_sched_latency">Sched_latency</h4>
<div class="ulist">
<ul>
<li>
<p>Added option for selecting event forwarding mode <code>-f</code></p>
</li>
<li>
<p>Increased the number of warm-up and scheduling rounds</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_sched_perf_4">Sched_perf</h4>
<div class="ulist">
<ul>
<li>
<p>Added data touch options <code>-n</code> and <code>-m</code></p>
</li>
<li>
<p>Added queue context data touch options <code>-k</code> and <code>-l</code></p>
</li>
<li>
<p>Improved test reliability</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_switch">Switch</h4>
<div class="ulist">
<ul>
<li>
<p>Added 5 minute aging time to MAC table entries</p>
</li>
<li>
<p>Added signal handler for SIGINT</p>
</li>
<li>
<p>Added support for detecting invalid and broadcast ethernet addresses</p>
</li>
<li>
<p>Improved packet drop statistics printing</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_timer_accuracy_3">Timer_accuracy</h4>
<div class="ulist">
<ul>
<li>
<p>Added burst gap option <code>-g</code></p>
</li>
<li>
<p>Added mode option <code>-m</code></p>
</li>
<li>
<p>Added option <code>-e</code> to retry on too early error</p>
</li>
<li>
<p>Added output file option <code>-o</code></p>
</li>
<li>
<p>Added timer burst option <code>-b</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_implementation_improvements">Implementation Improvements</h3>
<div class="sect3">
<h4 id="_gcc_10_support">GCC 10 support</h4>
<div class="paragraph">
<p>Fixed issues reported by GCC 10. The code base builds now with GCC 10
also when LTO is enabled.</p>
</div>
</div>
<div class="sect3">
<h4 id="_add_configure_option_for_setting_path_to_the_default_config_file">Add configure option for setting path to the default config file</h4>
<div class="paragraph">
<p>Added <code>--with-config-file=FILE</code> configuration option for setting path to the
default configuration file. The default configuration file has to include  all
configuration options.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_bug_fixes">Bug Fixes</h3>
<div class="sect3">
<h4 id="_numbered_bugs_issues">Numbered Bugs / Issues</h4>
<div class="ulist">
<ul>
<li>
<p>Fixed: <a href="https://github.com/OpenDataPlane/odp/issues/796">Issue 796</a>
seg[0].data MUST return to its initial value on odp_packet_reset</p>
</li>
<li>
<p>Fixed: <a href="https://github.com/OpenDataPlane/odp/issues/826">Issue 826</a>
max_size requires clarification for ODP_NONBLOCKING_LF and ODP_NONBLOCKING_WF</p>
</li>
<li>
<p>Fixed: <a href="https://github.com/OpenDataPlane/odp/issues/915">Issue 915</a>
SIGSEGV: example/sysinfo (raspberry Pi 3B+, arm7, odp-linux, gcc 8.2.0)</p>
</li>
<li>
<p>Fixed: <a href="https://github.com/OpenDataPlane/odp/issues/930">Issue 930</a>
Build failing with GCC 9.2</p>
</li>
<li>
<p>Fixed: <a href="https://github.com/OpenDataPlane/odp/issues/959">Issue 959</a>
ODP build fails with GCC 10.1</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_unnumbered_bugs_issues">Unnumbered Bugs / Issues</h4>
<div class="ulist">
<ul>
<li>
<p>Fixed: crypto: fix session allocation when out of sessions</p>
</li>
<li>
<p>Fixed: dpdk: DPDK renamed protocol structs</p>
</li>
<li>
<p>Fixed: dpdk: fix rx/tx checksum offload</p>
</li>
<li>
<p>Fixed: fix print failures on 32-bit systems</p>
</li>
<li>
<p>Fixed: pool: fix overflow when creating a huge packet pool</p>
</li>
<li>
<p>Fixed: pool: rename pool global variable</p>
</li>
<li>
<p>Fixed: sched scalable: fix pktio ingress queue polling dead lock</p>
</li>
<li>
<p>Fixed: test: fix global variables that are defined multiple times</p>
</li>
<li>
<p>Fixed: timer: fix timer pool create sync with inline timer scan</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_opendataplane_1_23_0_0">OpenDataPlane (1.23.0.0)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_summary_of_changes_2">Summary of Changes</h3>
<div class="paragraph">
<p>The ODP API changes in this release are related to the classifier module.</p>
</div>
<div class="paragraph">
<p>The implementation changes include bug fixes (classifier, socket pktio),
configurability improvements (inline timer), new packet segmentation
implementation, and performance improvements (pool).</p>
</div>
</div>
<div class="sect2">
<h3 id="_api_6">API</h3>
<div class="sect3">
<h4 id="_classifier_18">Classifier</h4>
<div class="paragraph">
<p>The PMR term documentation was not explicit about endianness of value and mask
fields. Most terms assumed CPU endian, but terms with larger data sizes assumed
big endian (MAC, IPv6 address and custom).</p>
</div>
<div class="paragraph">
<p>Term specification was harmonized so that all terms expect value/mask data to be
in big-endian format, have fixed size, and allow free memory alignment. Packet
length term is an exception to this as it does not represent a field in a
packet.</p>
</div>
<div class="paragraph">
<p>Added new <code>ODP_PMR_CUSTOM_L3</code> term to match custom layer 3 protocol fields. PMR
offset refers to the start of layer 3 in the packet. Other PMR rules (e.g. L2
classification rules) may precede custom L3 rules.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_helper">Helper</h3>
<div class="paragraph">
<p>Duplicate <code>ODPH_UNUSED</code> macro has been removed. <code>ODP_UNUSED</code> should be used
instead.</p>
</div>
</div>
<div class="sect2">
<h3 id="_validation_tests_2">Validation Tests</h3>
<div class="sect3">
<h4 id="_common_4">Common</h4>
<div class="paragraph">
<p>Improved test result output when some tests are inactive (skipped due to missing
capability). Now inactive tests are listed by default in the test suite results.</p>
</div>
</div>
<div class="sect3">
<h4 id="_classifier_19">Classifier</h4>
<div class="paragraph">
<p>Cleaned up validation test code. Classifier implementation missed reporting some
capabilities, tests didn&#8217;t check those capabilities and they were tested. Source
IPv4 term test was missing.</p>
</div>
<div class="paragraph">
<p>Added serial PMR test, which tests series of PMR and CoS:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>From default CoS to dest IPv4 CoS</p>
</li>
<li>
<p>From dest IPv4 CoS to dest UDP CoS</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Added parallel PMR test, which test serial and parallel PMR and CoS:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>From default CoS to dest IPv4 CoS</p>
</li>
<li>
<p>From dest IPv4 CoS to a parallel UDP CoS per destination port number</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_scheduler_11">Scheduler</h4>
<div class="paragraph">
<p>Added new validation tests to verify that packet order is maintained when events
are enqueued and dequeued to/from a plain queue while maintaining atomic/ordered
scheduling context.</p>
</div>
</div>
<div class="sect3">
<h4 id="_timer_20">Timer</h4>
<div class="paragraph">
<p>Added private timer pool test, which creates a timer pool with the <code>priv</code> flag
set. The same thread calls schedule / queue_deq that created the pool.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_example_applications_7">Example Applications</h3>
<div class="sect3">
<h4 id="_timer_perf_2">timer_perf</h4>
<div class="paragraph">
<p>Added new test application to measure schedule call CPU cycle consumption with
various timer pool parameter combinations. This measurement is mostly
interesting with software-based timer implementations, where timers may be
polled from the schedule call.</p>
</div>
</div>
<div class="sect3">
<h4 id="_new_odp_ping_application">New odp_ping application</h4>
<div class="paragraph">
<p>This application replies to IPv4 ping requests. It can be used to test
connectivity with standard ping utility. ARP table needs to be setup manually on
the sender side as the application does not reply to ARP requests.</p>
</div>
</div>
<div class="sect3">
<h4 id="_odp_classifier">odp_classifier</h4>
<div class="paragraph">
<p>Added source CoS name into the parameter list of <code>-p</code> option. This enables
linking classification rules together. When a source CoS is not defined, the
default CoS is used as the source CoS.</p>
</div>
<div class="paragraph">
<p>Option <code>-p</code> parameter list format is now:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;term&gt;:&lt;xxx&gt;:&lt;yyy&gt;:&lt;src_cos&gt;:&lt;dst_cos&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Where <code>&lt;src_cos&gt;</code> is optional and number of "xxx", "yyy", etc. parameters is
term depend.</p>
</div>
<div class="paragraph">
<p>Added <code>-v</code> option which prints received packet with CoS queue
name. This can be used for debugging classification rules.</p>
</div>
<div class="paragraph">
<p>Added support for <code>ODP_PMR_VLAN_ID_0</code>, <code>ODP_PMR_ETHTYPE_0</code>, <code>ODP_PMR_CUSTOM_L3</code>,
<code>ODP_PMR_ETHTYPE_X</code>, <code>ODP_PMR_VLAN_ID_X</code>, <code>ODP_PMR_UDP_DPORT</code>,
<code>ODP_PMR_UDP_SPORT</code>, <code>ODP_PMR_TCP_DPORT</code>, and <code>ODP_PMR_TCP_SPORT</code> rules.</p>
</div>
</div>
<div class="sect3">
<h4 id="_timer_accuracy_4">timer_accuracy</h4>
<div class="paragraph">
<p>Fix bug in timer start offset calculation. Test results were offset by current
local time value.</p>
</div>
<div class="paragraph">
<p>Added delay and extra schedule calls to ensure that (software) timer
implementation has passed its initial state before setting up timers.</p>
</div>
<div class="paragraph">
<p>Added <code>-f</code> option to control offset to the first timer. This can be used e.g. to
avoid best/worst case synchronization of timers to timer tick boundaries /
resolution.</p>
</div>
</div>
<div class="sect3">
<h4 id="_packet_dump_3">packet_dump</h4>
<div class="paragraph">
<p>Added ICMP support. Print ICMP offset and ICMPv4 type/code. This helps to verify
that ping requests are received.</p>
</div>
</div>
<div class="sect3">
<h4 id="_bench_packet_3">bench_packet</h4>
<div class="paragraph">
<p>Added missing tests for the following packet functions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>odp_packet_data_seg_len()</code></p>
</li>
<li>
<p><code>odp_packet_free_sp()</code></p>
</li>
<li>
<p><code>odp_packet_from_event_multi()</code></p>
</li>
<li>
<p><code>odp_packet_to_event_multi()</code></p>
</li>
<li>
<p><code>odp_packet_subtype()</code></p>
</li>
<li>
<p><code>odp_packet_parse()</code></p>
</li>
<li>
<p><code>odp_packet_parse_multi()</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_implementation_14">Implementation</h3>
<div class="sect3">
<h4 id="_classifier_20">Classifier</h4>
<div class="paragraph">
<p>Cleaned up implementation. Fixed endianness.</p>
</div>
</div>
<div class="sect3">
<h4 id="_inline_timer">Inline Timer</h4>
<div class="paragraph">
<p>Cleaned up code. Fixed accuracy issue with high resolution (&lt;100us) timer pools.
Added configuration option <code>inline_poll_interval_nsec</code> to select default poll
interval in nsec.</p>
</div>
<div class="paragraph">
<p>Added configure file option for inline timer (<code>inline_thread_type</code>) to select if
control threads poll shared timer pools or not. Control threads still poll their
private pools. With this user can configure control and worker threads to use
separate timer pools.</p>
</div>
</div>
<div class="sect3">
<h4 id="_packet_io_23">Packet I/O</h4>
<div class="paragraph">
<p>Enable explicit pktio type definition. The pktio type is selected by adding
pktio_type prefix in front of device name separated by a colon
(&lt;pktio_type&gt;:&lt;if_name&gt;).</p>
</div>
<div class="paragraph">
<p>The socket mmsg pktio implementation has been refactored and performance has
been improved.</p>
</div>
<div class="paragraph">
<p>The IPC pktio implementation has been modified to use standard ODP internal
<code>ring_ptr_t</code> rings to implement IPC rings. This enables removing the duplicate
<code>_ring_t</code> implementation.</p>
</div>
</div>
<div class="sect3">
<h4 id="_pool_15">Pool</h4>
<div class="paragraph">
<p>Packet segmentation has been reimplemented using a linked list. The new
implementation is simpler and has the added benefit of greatly reducing
packet and buffer header sizes.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_bug_fixes_2">Bug Fixes</h3>
<div class="sect3">
<h4 id="_unnumbered_bugs_issues_2">Unnumbered Bugs / Issues</h4>
<div class="ulist">
<ul>
<li>
<p>Fixed socket mmap pktio throughput collapse under heavy traffic</p>
</li>
<li>
<p>Fixed missing config header in install directory</p>
</li>
<li>
<p>Include only ODP defines in autogenerated header files</p>
</li>
<li>
<p>Fixed GCC 9 <code>address-of-packed-member</code> warnings</p>
</li>
<li>
<p>Disable building static test applications without static ODP lib</p>
</li>
<li>
<p>Fixed a segfault in <code>odp_pktin_recv_mq_tmo()</code> implementation</p>
</li>
<li>
<p>Fixed classifier vlan match bugs and tests</p>
</li>
<li>
<p>Fixed classifier matching of parallel PMRs</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_opendataplane_1_22_0_0">OpenDataPlane (1.22.0.0)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_summary_of_changes_3">Summary of Changes</h3>
<div class="paragraph">
<p>ODP v1.22.0.0 adds several smaller API changes mainly related to API
clarification.</p>
</div>
</div>
<div class="sect2">
<h3 id="_api_changes">API Changes</h3>
<div class="sect3">
<h4 id="_added_odp_queue_order_t_parameter_to_odp_queue_param_t">Added <code>odp_queue_order_t</code> parameter to <code>odp_queue_param_t</code></h4>
<div class="paragraph">
<p>Added a parameter to control if a destination queue does not require event
re-ordering. By default, event order is maintained for all destination queues as
before. Application may use <code>ODP_QUEUE_ORDER_IGNORE</code> for those queues that are
used under ordered queue context, but do not require re-ordering and/or do need
to avoid extra re-ordering delays.</p>
</div>
</div>
<div class="sect3">
<h4 id="_added_odp_shm_hp_flag_for_odp_shm_reserve">Added <code>ODP_SHM_HP</code> flag for <code>odp_shm_reserve()</code></h4>
<div class="paragraph">
<p>When set, this flag guarantees that the memory reserved by <code>odp_shm_reserve()</code>
is allocated from huge pages. If enough huge page memory is not available the
call will fail.</p>
</div>
</div>
<div class="sect3">
<h4 id="_improved_initialization_and_termination_specification">Improved initialization and termination specification</h4>
<div class="paragraph">
<p>Improve specification of initialization and termination steps. Explicitly list
those functions that may be used before global init (those that are needed for
setting up parameters). No changes to functionality.</p>
</div>
</div>
<div class="sect3">
<h4 id="_improved_queue_context_specification">Improved queue context specification</h4>
<div class="paragraph">
<p>Highlight that queue context default value is NULL. This was defined already in
<code>odp_queue_param_t</code> specification.</p>
</div>
</div>
<div class="sect3">
<h4 id="_new_crypto_algorithm_support">New Crypto Algorithm Support</h4>
<div class="paragraph">
<p>Support for new crypto algorithms is added by defining symbols for:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ODP_CIPHER_ALG_3DES_ECB</code></p>
</li>
<li>
<p><code>ODP_CIPHER_ALG_AES_ECB</code></p>
</li>
<li>
<p><code>ODP_CIPHER_ALG_AES_CFB128</code></p>
</li>
<li>
<p><code>ODP_CIPHER_ALG_AES_XTS</code></p>
</li>
<li>
<p><code>ODP_CIPHER_ALG_AES_EEA2</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Support for new crypto authentication algorithms is added by defining symbols
for:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ODP_AUTH_ALG_SHA224_HMAC</code></p>
</li>
<li>
<p><code>ODP_AUTH_ALG_AES_EIA2</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Added enumeration for digest (unkeyed) algorithms. They are added as auth
algorithms with empty key required.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ODP_AUTH_ALG_MD5</code></p>
</li>
<li>
<p><code>ODP_AUTH_ALG_SHA1</code></p>
</li>
<li>
<p><code>ODP_AUTH_ALG_SHA224</code></p>
</li>
<li>
<p><code>ODP_AUTH_ALG_SHA256</code></p>
</li>
<li>
<p><code>ODP_AUTH_ALG_SHA384</code></p>
</li>
<li>
<p><code>ODP_AUTH_ALG_SHA512</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_crypto_specification_improvements_fixes">Crypto specification improvements / fixes</h4>
<div class="paragraph">
<p>Correct documentation for <code>ODP_AUTH_ALG_SNOW3G_UIA2</code> to reference 128-EIA1
instead of 128-EEA1.</p>
</div>
<div class="paragraph">
<p>Clarify IV data format and point to proper documents for 3GPP algorithms.</p>
</div>
</div>
<div class="sect3">
<h4 id="_timer_specification_clarification">Timer specification clarification</h4>
<div class="paragraph">
<p>Timer API intention has always been to allow any event type to be used as
timeout events. Application should use <code>ODP_EVENT_TIMEOUT</code> type events
(<code>odp_timeout_t</code>) by default, but also other event types may be used. Also,
clarified timer set/reset functionality of <code>odp_timer_set_abs()</code> and
<code>odp_timer_set_rel()</code> functions.</p>
</div>
<div class="paragraph">
<p>API functionality not changed, just wording updated.</p>
</div>
</div>
<div class="sect3">
<h4 id="_added_timer_resolution_capability">Added timer resolution capability</h4>
<div class="paragraph">
<p>Typically, timer implementation needs to trade-off between highest resolution
and longest timeout. Add new capability information
(<code>odp_timer_res_capability_t</code>) and function to check limits between resolution
and maximum timeout length.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>odp_timer_res_capability()</code></dt>
<dd>
<p>This function fills in capability limits for timer pool resolution and min/max
timeout values, based on either resolution or maximum timeout.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_added_defines_for_minute_and_hour">Added defines for minute and hour</h4>
<div class="paragraph">
<p>Defines for a minute and an hour are useful e.g. when setting timers for a bit
longer (background, session lifetime, etc.) timeouts.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ODP_TIME_MIN_IN_NS</code></p>
</li>
<li>
<p><code>ODP_TIME_HOUR_IN_NS</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_helper_changes">Helper Changes</h3>
<div class="sect3">
<h4 id="_added_helper_library_version">Added helper library version</h4>
<div class="paragraph">
<p>Added helper library version defines, so that application can track helper
version independent of ODP API version:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ODPH_VERSION_GENERATION</code></p>
</li>
<li>
<p><code>ODPH_VERSION_MAJOR</code></p>
</li>
<li>
<p><code>ODPH_VERSION_MINOR</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Also, added a function for generating easy printout of the versions number.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>odph_version_str()</code></dt>
<dd>
<p>The version string defines the helper library version the following format:
 <code>&lt;generation&gt;.&lt;major&gt;.&lt;minor&gt;</code></p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_added_new_thread_create_and_join_functions">Added new thread create and join functions</h4>
<div class="paragraph">
<p>Defined new versions of thread create and join calls. The new calls explicitly
support thread create and join in multiple steps. Also, per thread
(<code>odph_thread_param_t</code>) and common parameters (<code>odph_thread_common_param_t</code>)
have been improved.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>odph_thread_create()</code></dt>
<dd>
<p>Create and pin threads (as Linux pthreads or processes)</p>
</dd>
<dt class="hdlist1"><code>odph_thread_join()</code></dt>
<dd>
<p>Wait previously launched threads to exit</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Old functions <code>odph_odpthreads_create()</code> and <code>odph_odpthreads_join()</code>
have been deprecated.</p>
</div>
</div>
<div class="sect3">
<h4 id="_added_helper_debug_defines">Added helper debug defines</h4>
<div class="paragraph">
<p>Added debug defines/macros into helper API and configure options to
enable/disable helper debugging. These defines may be used both in helper and
application code:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ODPH_DEBUG</code> is 1 when helper debugging is enabled (<code>--enable-helper-debug</code>)</p>
</li>
<li>
<p><code>ODPH_DEBUG_PRINT</code> is 1 when helper debug printing is enabled (<code>--enable-helper-debug-print</code>)</p>
</li>
<li>
<p><code>ODPH_ASSERT()</code> generates assertion code when helper debugging is enabled</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_validation_test_improvements">Validation Test Improvements</h3>
<div class="sect3">
<h4 id="_timer_test_improvements">Timer Test Improvements</h4>
<div class="paragraph">
<p>Enables passing tests on high core count devices.</p>
</div>
<div class="paragraph">
<p>Test min/max timeouts with the highest resolution and longest timeout
parameters.</p>
</div>
</div>
<div class="sect3">
<h4 id="_scheduler_test_fixes">Scheduler Test Fixes</h4>
<div class="paragraph">
<p>The group test would fail if <code>odp_schedule(ODP_SCHED_NO_WAIT)</code> wouldn&#8217;t return
any events on the first call.</p>
</div>
<div class="paragraph">
<p><code>scheduler_test_pause_resume()</code> would get stuck if all events were not
successfully enqueued.</p>
</div>
<div class="paragraph">
<p>Fixed a number of synchronization problems revealed by a scheduler
implementation doing pre-scheduling. Makes sure scheduling context is always
properly released.</p>
</div>
</div>
<div class="sect3">
<h4 id="_classification_test_fixes">Classification Test Fixes</h4>
<div class="paragraph">
<p>Some of the test array elements may have not been set if the number of supported
scheduling priorities was low.</p>
</div>
</div>
<div class="sect3">
<h4 id="_pktio_test_improvements">Pktio Test Improvements</h4>
<div class="paragraph">
<p>Added more debug information on magic number misses.</p>
</div>
</div>
<div class="sect3">
<h4 id="_initialization_test_improvements_fixes">Initialization Test Improvements / Fixes</h4>
<div class="paragraph">
<p>Added missing local init/term calls to all test cases.</p>
</div>
<div class="paragraph">
<p>Added test case to set num_worker and num_control parameters.</p>
</div>
<div class="paragraph">
<p>Added test case to set not used features flags in init parameters.</p>
</div>
</div>
<div class="sect3">
<h4 id="_buffer_test_fixes">Buffer Test Fixes</h4>
<div class="paragraph">
<p>Test suite missed to output the return value of <code>odp_cunit_run()</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_queue_test_improvements">Queue Test Improvements</h4>
<div class="paragraph">
<p>Check that queue context pointer value is NULL by default.</p>
</div>
</div>
<div class="sect3">
<h4 id="_ipsec_test_fixes">IPsec Test Fixes</h4>
<div class="paragraph">
<p>Check pktio level inline IPsec support before running tests.</p>
</div>
</div>
<div class="sect3">
<h4 id="_crypto_test_improvements">Crypto Test Improvements</h4>
<div class="paragraph">
<p>Added support for AES-194-GMAC and AES-256-GMAC algorithms.</p>
</div>
<div class="paragraph">
<p>Added more AES-CBC and AES-CTR test vectors.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_example_changes">Example Changes</h3>
<div class="sect3">
<h4 id="_added_new_pipeline_example_application">Added new pipeline example application</h4>
<div class="paragraph">
<p>The application receives packets from one interface and passes them through 0-N
worker stages before outputting them from a second network interface. The RX,
worker, and TX stages are connected using plain queues and each stage is run on
a separate CPU thread. Optionally, the worker stages calculate CRC-32C over
packet data.</p>
</div>
</div>
<div class="sect3">
<h4 id="_time_example_fixes">Time example fixes</h4>
<div class="paragraph">
<p>Fix single worker deadlock and run the application as part of <code>make check</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_ipsec_example_fixes">IPsec example fixes</h4>
<div class="paragraph">
<p>Fixed a number of issues in IPsec example applications and run them during
<code>make check</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_new_command_line_options">New command line options</h4>
<div class="sect4">
<h5 id="_l2fwd_5">l2fwd</h5>
<div class="ulist">
<ul>
<li>
<p>added <code>-b</code> option to control maximum packet receive burst size</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_pool_perf">pool_perf</h5>
<div class="ulist">
<ul>
<li>
<p>added <code>-n</code> option to allocate multiple event bursts before freeing those</p>
</li>
<li>
<p>added <code>-t</code> option to select between buffer or packet pool types</p>
</li>
<li>
<p>added <code>-s</code> option to select data size</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_sched_perf_5">sched_perf</h5>
<div class="ulist">
<ul>
<li>
<p>added <code>-w</code> option to simulate application work</p>
</li>
<li>
<p>added <code>-g</code> and <code>-j</code> options to test scheduling with a number of schedule groups</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_implementation_improvements_2">Implementation Improvements</h3>
<div class="sect3">
<h4 id="_pool_implementation_improvements">Pool Implementation Improvements</h4>
<div class="paragraph">
<p>Refactor local buffer caching into separate functions and optimize
implementation by caching buffer header pointers instead of indices.</p>
</div>
<div class="paragraph">
<p>New configuration options have been added for local cache
(<code>pool:local_cache_size</code>) and burst sizes (<code>pool:burst_size</code>).</p>
</div>
<div class="paragraph">
<p>Pool implementation has been modified to store buffer headers instead of
indices to reduce type conversion overhead.</p>
</div>
</div>
<div class="sect3">
<h4 id="_timer_implementation_improvements">Timer Implementation Improvements</h4>
<div class="paragraph">
<p>Added warm up period into POSIX timer pool startup to avoid the first timeout
to slip. Otherwise, timer pthread receives the first signal after about 15ms and
first timeout of the pool slips.</p>
</div>
</div>
<div class="sect3">
<h4 id="_dpdk_packet_io_improvements">DPDK Packet I/O Improvements</h4>
<div class="paragraph">
<p>The zero-copy DPDK pktio implementation has been cleaned up resulting a small
performance improvement. Linking to DPDK library has also been simplified.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_miscellaneous_2">Miscellaneous</h3>
<div class="ulist">
<ul>
<li>
<p>ODP project has been moved from Linaro to OpenFastPath Foundation. Project
documentation and domain addresses have been updated to reflect this change.</p>
</li>
<li>
<p>Added <code>--without-pcap</code> configuration option to explicitly build ODP without
PCAP pktio regardless of if the library is available on the build host.</p>
</li>
<li>
<p>Added <code>--enable-lto</code> configuration option to build ODP with link time
optimization (<code>-flto</code> flag).</p>
</li>
<li>
<p>Travis default distribution is updated to Ubuntu Xenial.</p>
</li>
<li>
<p>Added <code>-O3</code>, <code>-O0</code>, and LTO build tests to Travis</p>
</li>
<li>
<p>Supported Netmap version has been bumped to v13.0</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_bug_fixes_3">Bug Fixes</h3>
<div class="sect3">
<h4 id="_numbered_bugs_issues_2">Numbered Bugs / Issues</h4>
<div class="ulist">
<ul>
<li>
<p>Fixed: <a href="https://github.com/OpenDataPlane/odp/issues/827">Issue 827</a>
API doc links are not working</p>
</li>
<li>
<p>Fixed: <a href="https://github.com/OpenDataPlane/odp/issues/817">Issue 817</a>
ODP fails to compile with latest OpenSSL</p>
</li>
<li>
<p>Fixed: <a href="https://github.com/OpenDataPlane/odp/issues/784">Issue 784</a>
Bus error</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_unnumbered_bugs_issues_3">Unnumbered Bugs / Issues</h4>
<div class="ulist">
<ul>
<li>
<p>Fixed build problems on Debian 8</p>
</li>
<li>
<p>Fixed AES-GMAC with OpenSSL 1.1.1b and later</p>
</li>
<li>
<p>Fixed out-of-tree build</p>
</li>
<li>
<p>Fixed pcapng pipe read permissions and made possible to capture traffic from
multiple interfaces</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_opendataplane_1_21_0_0">OpenDataPlane (1.21.0.0)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_summary_of_changes_4">Summary of Changes</h3>
<div class="paragraph">
<p>ODP v1.21.0.0 adds two new API families as well as several small improvements.</p>
</div>
<div class="sect3">
<h4 id="_apis">APIs</h4>
<div class="sect4">
<h5 id="_compression_support">Compression Support</h5>
<div class="paragraph">
<p>A new family of APIs is added that provides for session-oriented support for
packet data compression and decompression. Compression sessions define the
parameters used to control compression operations and their associated
integrity hashes.  Once created, sessions are input parameters to the new
<code>odp_comp_op()</code> and <code>odp_comp_op_enq()</code> APIs that provide access to
synchronous and asynchronous compression services on packets.</p>
</div>
<div class="paragraph">
<p>Associated with the completion of asynchronous compression operations, a new
packet subtype, <code>ODP_EVENT_PACKET_COMP</code> is defined. This subtype indicates
that the packet includes additional metadata (retrievable via
<code>odp_comp_result()</code>) that provides the result of the requested operation.</p>
</div>
<div class="paragraph">
<p>A number of different compression and associated hash algorithms are defined,
which are communicated with three new capability APIs:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>odp_comp_capability()</code></dt>
<dd>
<p>Provides information about general compression related capabilities
offered by this implementation</p>
</dd>
<dt class="hdlist1"><code>odp_comp_alg_capability()</code></dt>
<dd>
<p>Provides details about the capabilities of individual compression algorithms
supported.</p>
</dd>
<dt class="hdlist1"><code>odp_comp_hash_alg_capability()</code></dt>
<dd>
<p>Provides details about the capabilities of individual hash algorithms
supported for use with compression.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_flow_aware_scheduler_support">Flow Aware Scheduler Support</h5>
<div class="paragraph">
<p>A new capability for flow aware scheduling is added. As part of this, the
scheduler now supports capabilities and configurability. As a result, the
initialization sequence for applications that make use of the ODP scheduler
has changed slightly. The new API call sequence is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-c" data-lang="c">odp_schedule_capability()
odp_schedule_config_init()
odp_schedule_config()
odp_schedule()</code></pre>
</div>
</div>
<div class="paragraph">
<p>It is a programming error to call <code>odp_schedule()</code> (or its variants) without
having first initialized the scheduler with an <code>odp_schedule_config()</code> call.
This call may only be issued once per ODP instance as scheduler configuration
is global.</p>
</div>
<div class="paragraph">
<p>By default the scheduler operates as before. When configured to operate in
flow aware mode, the scheduler will now respect event flow ids (managed by the
new <code>odp_event_flow_id()</code> and <code>odp_event_flow_id_set()</code> APIs) when making
scheduling decisions. This means that flow identification is a combination of
event flow id and queue id. For example, when operating in flow aware mode the
scheduler may dispatch events from an atomic queue to multiple threads
concurrently, as long as those events have different flow ids. For
applications that process large numbers of lightweight flows that have limited
context needs, this can lead to throughput improvements as well as reduced
implementation memory footprint.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_dpdk_v18_11_support">DPDK v18.11 Support</h4>
<div class="paragraph">
<p>The latest LTS release of DPDK (v18.11) is now supported by ODP. Support for
the previous LTS release (v17.11) is retained. Prior versions of DPDK are
no longer supported.</p>
</div>
</div>
<div class="sect3">
<h4 id="_queue_capabilities_moved_to_scheduler">Queue Capabilities Moved to Scheduler</h4>
<div class="paragraph">
<p>As part of the introduction of flow-aware scheduling, capabilities associated
with <code>SCHED</code> queues have been moved from the <code>odp_queue_capabilities_t</code> struct
returned by <code>odp_queue_capabilities()</code> to the new <code>odp_sched_capabilities_t</code>
struct returned by <code>odp_sched_capabilities()</code>.</p>
</div>
<div class="paragraph">
<p>Capabilities moved include <code>max_ordered_locks</code>, <code>max_sched_groups</code>, and
<code>sched_prios</code>. The <code>max_sched_groups</code> capability is renamed <code>max_groups</code>. In
addition, <code>max_queues</code>, <code>max_queue_size</code>, and the support capabilities for
lock free and wait free non blocking queues is now part of the scheduler
capabilities.</p>
</div>
<div class="paragraph">
<p>In support of flow aware scheduling mode, the <code>max_flows</code> scheduler capability
is renamed <code>max_flow_id</code>. A value of 0 indicates that flow aware mode
scheduling is not available in this ODP implementation.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_testvalidation_improvements">Test/Validation Improvements</h3>
<div class="sect3">
<h4 id="_travis_readability_improvement">Travis readability improvement</h4>
<div class="paragraph">
<p>The "BUILD_ONLY` environment variable has been renamed <code>CHECK</code> for improved
output readability.</p>
</div>
</div>
<div class="sect3">
<h4 id="_flow_aware_scheduler_testing">Flow aware scheduler testing</h4>
<div class="paragraph">
<p>As part of flow aware mode, scheduler validation tests will now test this mode
if <code>odp_schedule_capability()</code> indicates that flow-aware mode is supported.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_bug_fixes_4">Bug Fixes</h3>
<div class="sect3">
<h4 id="_unnumbered_bugsissues">Unnumbered Bugs/Issues</h4>
<div class="ulist">
<ul>
<li>
<p>Latest version of netmap <code>nm_ring_empty()</code> implementation has changed.
PktIO netmap support updated to support this as well as previous releases.</p>
</li>
<li>
<p>Improved compatibility of PktIO socket support with latest versions
of the clang compiler.</p>
</li>
<li>
<p>Add match pattern for missing DPDK PMD drivers for improved compatibility.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_opendataplane_1_20_0_0">OpenDataPlane (1.20.0.0)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_summary_of_changes_5">Summary of Changes</h3>
<div class="paragraph">
<p>ODP v1.20.0.0 is a refresh of ODP, incorporating significant configurability
and performance improvements as well as new APIs and API restructures.</p>
</div>
<div class="sect3">
<h4 id="_apis_2">APIs</h4>
<div class="sect4">
<h5 id="_symbol_odp_shm_null_removed">Symbol <code>ODP_SHM_NULL</code> Removed.</h5>
<div class="paragraph">
<p>An invalid <code>odp_shm_t</code> has the value <code>ODP_SHM_INVALID</code>, consistent with other
ODP types. The legacy synonym <code>ODP_SHM_NULL</code> is now removed for consistency.</p>
</div>
</div>
<div class="sect4">
<h5 id="_new_3gpp_crypto_algorithm_support">New 3GPP Crypto Algorithm Support</h5>
<div class="paragraph">
<p>New support for 3GPP crypto algorithms is added by defining symbols for</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ODP_CIPHER_ALG_KASUMI_F8</code></p>
</li>
<li>
<p><code>ODP_CIPHER_ALG_SNOW3G_UEA2</code></p>
</li>
<li>
<p><code>ODP_CIPHER_ALG_ZUC_EEA3</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In addition new authentication algorithm symbols are defined for</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ODP_AUTH_ALG_KASUMI_F9</code></p>
</li>
<li>
<p><code>ODP_AUTH_ALG_SNOW3G_UIA2</code></p>
</li>
<li>
<p><code>ODP_AUTH_ALG_ZUC_EIA3</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These values are returned as ODP capabilities as well as being accepted in
crypto session creation for implementations that indicate support for them.</p>
</div>
</div>
<div class="sect4">
<h5 id="_crypto_capability_for_bitwise_operation">Crypto Capability for Bitwise Operation</h5>
<div class="paragraph">
<p>The new <code>bit_mode</code> capability Boolean is added to the
<code>odp_crypto_cipher_capability_t</code> struct to indicate that an implementation
supports operating in bit mode. When operating in bit
mode, field offsets and lengths are expressed in terms of bits rather than
bytes. However, such lengths must always be specified in multiples of 8.</p>
</div>
</div>
<div class="sect4">
<h5 id="_improved_crypto_spec_documentation">Improved Crypto Spec Documentation</h5>
<div class="paragraph">
<p>The ODP crypto API specification is tightened to specify default values for
cipher and authentication algorithms. Also documented when key and IV
parameters need to be set.</p>
</div>
</div>
<div class="sect4">
<h5 id="_ipsec_extensions">IPsec Extensions</h5>
<div class="paragraph">
<p>IPsec requires "salt" (extra keying material) when the GMAC authentication
algorithm is used. To accommodate this the <code>auth_key_extra</code> field is added to
the <code>odp_ipsec_crypto_param_t</code> struct and documentation is added clarifying
when this field is needed and how it should be used.</p>
</div>
</div>
<div class="sect4">
<h5 id="_classifier_type_rename">Classifier Type Rename</h5>
<div class="paragraph">
<p>The <code>odp_pmr_t</code> type name for an invalid value is renamed from <code>ODP_PMR_INVAL</code>
to <code>ODP_PMR_INVALID</code> for consistency with the rest of ODP type names. The old
symbol is still available when ODP is configured with
<code>--enable-deprecated</code>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_new_api_for_packet_event_subtypes">New API for Packet Event Subtypes</h5>
<div class="paragraph">
<p>The <code>odp_packet_subtype()</code> API is added that returns the subtype of a packet
event directly.</p>
</div>
</div>
<div class="sect4">
<h5 id="_streamlined_packet_parsing_results">Streamlined Packet Parsing Results</h5>
<div class="paragraph">
<p>The <code>odp_packet_parse_result()</code> API is added that returns the result of
packet parsing as a single <code>odp_packet_parse_result_t</code> struct. This can
offer efficiency improvements for applications that need all parse results
rather than making individual parse result calls.</p>
</div>
</div>
<div class="sect4">
<h5 id="_pktio_extensions_to_support_per_queue_configuration">PktIO Extensions to Support per-Queue Configuration</h5>
<div class="paragraph">
<p>PktIO interfaces support multiple input queues to enable increased parallelism
in I/O processing. Previously, all of these input queues were required to
belong to the same scheduler group. The <code>odp_pktin_queue_param_t</code> struct is
now extended with an optional <code>odp_pktin_queue_param_ovr_t</code> struct that
permits individual pktin queues to be assigned to separate scheduler groups.
This may permit improved performance for advanced application use cases.</p>
</div>
</div>
<div class="sect4">
<h5 id="_timer_pool_capabilities">Timer Pool Capabilities</h5>
<div class="paragraph">
<p>The <code>odp_timer_capability_t</code> struct is extended to return three additional
pieces of information:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>max_pools_combined</code></dt>
<dd>
<p>The total number of timer pools that can be created combining different
clock sources</p>
</dd>
<dt class="hdlist1"><code>max_pools</code></dt>
<dd>
<p>The maximum number of timer pools for a given clock source.</p>
</dd>
<dt class="hdlist1"><code>max_timers</code></dt>
<dd>
<p>The maximum number of timers in a single pool. A zero value means number is
limited only by available memory.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_add_scheduler_mixmaxdefault_priority_functions">Add Scheduler mix/max/default Priority Functions</h5>
<div class="paragraph">
<p>Three new APIs: <code>odp_schedule_max_prio()</code>, <code>odp_schedule_min_prio()</code>, and
<code>odp_schedule_default_prio()</code> are added that return the min, max, and default
values specified for the <code>prio</code> field in the <code>odp_schedule_param_t</code> struct.</p>
</div>
<div class="paragraph">
<p>With the introduction of these scheduling priority functions the previously
defined macros (<code>ODP_SCHED_PRIO_HIGHEST</code>, <code>ODP_SCHED_PRIO_NORMAL</code>, and
<code>ODP_SCHED_PRIO_LOWEST</code>) are now deprecated and should no longer be used.</p>
</div>
</div>
<div class="sect4">
<h5 id="_specification_of_odp_schedule_prio_t_as_an_int">Specification of <code>odp_schedule_prio_t</code> as an <code>int</code></h5>
<div class="paragraph">
<p>Previously, the <code>odp_schedule_prio_t</code> type definition was left to each
implementation. With the addition of explicit schedule priority ranges, this
type is now specified to be an <code>int</code> to permit efficient implementation
(including inlining) of these functions.</p>
</div>
<div class="sect5">
<h6 id="_new_scheduler_apis">New Scheduler APIs</h6>
<div class="paragraph">
<p>The new scheduler APIs <code>odp_schedule_multi_wait()</code> and
<code>odp_schedule_multi_no_wait()</code> are added to provide more efficiently
implementable versions of these functions. The existing scheduler APIs remain
unchanged. These new APIs can simply provide a fastpath for some
applications/implementations as an alternative to specifying a parameter on
<code>odp_schedule_multi()</code>.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_memory_model_in_odp_init_global">Memory Model in <code>odp_init_global()</code></h5>
<div class="paragraph">
<p>The <code>odp_init_t</code> parameter passed to <code>odp_init_global()</code> is extended to
add the <code>mem_model</code> field. This field is defined by the new <code>odp_mem_model_t</code>
struct and is used to specify whether the application will be using a
thread (<code>ODP_MEM_MODEL_THREAD</code>) or process (<code>ODP_MEM_MODEL_PROCESS</code>)
memory model. The default is a thread model is used for compatibility with
previous levels of ODP.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_abi_changes_4">ABI Changes</h4>
<div class="paragraph">
<p>A number of changes to the ODP ABI have also been made in this release to
improve application binary portability.</p>
</div>
<div class="sect4">
<h5 id="_strong_typing_for_timer_pools">Strong Typing for Timer Pools</h5>
<div class="paragraph">
<p>The <code>odp_timer_pool_t</code> is now strongly typed.</p>
</div>
</div>
<div class="sect4">
<h5 id="_consistent_initialization">Consistent Initialization</h5>
<div class="paragraph">
<p>The values of the various <code>ODP_xxx_INVALID</code> symbols for ODP abstract types in
the <code>odp-linux</code> reference implementation are now consistently zeros. This
reduces errors and improves portability.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_implementation_improvements_3">Implementation Improvements</h3>
<div class="sect3">
<h4 id="_configuration_file">Configuration File</h4>
<div class="paragraph">
<p>A new configuration file mechanism is introduced that makes use of
<a href="https://www.hyperrealm.com/libconfig/libconfig_manual.html">libconfig</a> to
enable various runtime ODP parameters to be specified dynamically.</p>
</div>
<div class="paragraph">
<p>Default configuration values for the <code>odp-linux</code> reference implementation are
contained in the <code>config/odp-linux-generic.conf</code> file. Users may override
these default values by supplying their own configuration file. At
<code>odp_init_global()</code> time, if the <code>ODP_CONFIG_FILE</code> environment variable is set,
this is used to locate the path to the override configuration file.</p>
</div>
</div>
<div class="sect3">
<h4 id="_process_mode_support">Process Mode Support</h4>
<div class="paragraph">
<p>The <code>odp-linux</code> reference implementation now supports applications that run in
process mode (<code>mem_model</code> = <code>ODP_MEM_MODEL_PROCESS</code>) as well as the default
thread mode. This support only applies within a single ODP instance, so any
<code>fork()</code> calls must be done only <em>after</em> <code>odp_init_global()</code> has been called
to initialize ODP on a root process.</p>
</div>
</div>
<div class="sect3">
<h4 id="_removal_of_iquery_scheduler">Removal of <code>iQuery</code> Scheduler</h4>
<div class="paragraph">
<p>The <code>iQuery</code> scheduler is removed from the <code>odp-linux</code> reference
implementation, as it offers no performance advantages and has not seen
application use.</p>
</div>
</div>
<div class="sect3">
<h4 id="_number_of_cpus">Number of CPUs</h4>
<div class="paragraph">
<p>The <code>odp-linux</code> reference implementation now supports up to 256 CPUs by
default (increased from 128).</p>
</div>
</div>
<div class="sect3">
<h4 id="_support_for_large_burst_sizes">Support for Large Burst Sizes</h4>
<div class="paragraph">
<p>The <code>odp-linux</code> reference implementation now supports large burst sizes for
both I/O and non-I/O scheduled events. Large bursts (when available) are
received directly to the application without any stashing for improved
throughput. Burst sizes are configurable via the new configuration file
mechanism, as described above.</p>
</div>
</div>
<div class="sect3">
<h4 id="_without_openssl_warnings"><code>--without-openssl</code> Warnings</h4>
<div class="paragraph">
<p>When building <code>odp-linux</code> using <code>--without-openssl</code> a warning will be issued
cautioning that strong cryptography will not be available.</p>
</div>
</div>
<div class="sect3">
<h4 id="_inline_queue_enqdeq_apis">Inline Queue Enq/Deq APIs</h4>
<div class="paragraph">
<p>The various enq/deq APIs are now subject to inlining when <code>odp-linux</code> is
built with <code>--disable-abi-compat</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_configurable_timer_controls">Configurable Timer Controls</h4>
<div class="paragraph">
<p>Inline timers are now controlled via a config file option. Timer polling
frequency is similarly controlled via the config file.</p>
</div>
</div>
<div class="sect3">
<h4 id="_huge_page_configuration">Huge Page Configuration</h4>
<div class="paragraph">
<p>The config file is now used to specify the huge page usage limit.</p>
</div>
</div>
<div class="sect3">
<h4 id="_single_and_multi_consumerproducer_rings">Single and Multi-Consumer/Producer Rings</h4>
<div class="paragraph">
<p>The queue implementation in <code>odp-linux</code> now automatically makes use of
optimized single and multi-consumer/producer rings to significantly speed
up enq/deq processing.</p>
</div>
</div>
<div class="sect3">
<h4 id="_odp_shm_print_all_improvements"><code>odp_shm_print_all()</code> Improvements</h4>
<div class="paragraph">
<p>The output from <code>odp_shm_print_all()</code> is reworked to provide more useful
and comprehensive shared memory usage information in <code>odp-linux</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_ipsec_improvements">IPsec Improvements</h4>
<div class="paragraph">
<p>SA lifetime checking is now more scalable to multiple threads. This
significantly reduces overhead for multithreaded IPsec applications.</p>
</div>
</div>
<div class="sect3">
<h4 id="_native_builds">Native Builds</h4>
<div class="paragraph">
<p>When running in non-ABI compatibility mode, <code>odp-linux</code> now enables
native machine-specific optimizations for the CPU architecture of the
local machine.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_validation_test_improvements_2">Validation Test Improvements</h3>
<div class="sect3">
<h4 id="_sctp_test_packets">SCTP Test Packets</h4>
<div class="paragraph">
<p>SCTP test packets are now used in parser testing. SCTP headers are added to
ODP and ODP helpers and SCTP checksums are now inserted and verified as part
of validation testing.</p>
</div>
</div>
<div class="sect3">
<h4 id="_odp_packet_reset_test"><code>odp_packet_reset()</code> Test</h4>
<div class="paragraph">
<p>The packet validation test suite now properly tests <code>odp_packet_reset()</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_helper_changes_2">Helper Changes</h3>
<div class="paragraph">
<p>In support of process mode, ODP helper functions have been changed to
better match these new capabilities</p>
</div>
<div class="sect3">
<h4 id="_new_enum">New <code>enum</code></h4>
<div class="paragraph">
<p>The <code>odph_linux_thread_type_t enum</code> has been replaced with the new
<code>odp_mem_model_t</code> type.</p>
</div>
</div>
<div class="sect3">
<h4 id="_helper_options">Helper Options</h4>
<div class="paragraph">
<p>The new <code>odph_options()</code> getter function is added that returns
applicable options in effect via the new <code>odph_helper_options_t</code> struct.
This currently includes the memory model (thread or process) that is in use.</p>
</div>
</div>
<div class="sect3">
<h4 id="_sctp_helpers">SCTP Helpers</h4>
<div class="paragraph">
<p>The new helper APIs <code>odph_sctp_chksum_set()</code> and <code>odph_sctp_chksum_verify()</code>
are added to facilitate working with SCTP packet checksums.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_performance_test_improvements">Performance Test Improvements</h3>
<div class="sect3">
<h4 id="_pool_performance">Pool Performance</h4>
<div class="paragraph">
<p>A new <code>odp_pool_perf</code> test has been added that stress-tests ODP pool
functions in a multithreaded environment to generate performance statistics.</p>
</div>
</div>
<div class="sect3">
<h4 id="_scheduler_performance">Scheduler Performance</h4>
<div class="paragraph">
<p>A new <code>odp_sched_perf</code> test has been added that stress-tests the scheduler
in a multithreaded environment.</p>
</div>
</div>
<div class="sect3">
<h4 id="_cpu_performance">CPU Performance</h4>
<div class="paragraph">
<p>A new <code>odp_cpu_bench</code> performance test has been added that runs
compute-intensive packet operations in a multithreaded environment and prints
the observed maximum throughput for each thread.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_example_improvements">Example Improvements</h3>
<div class="sect3">
<h4 id="_classifier_example_changes">Classifier Example changes</h4>
<div class="paragraph">
<p>The <code>odp_classifier</code> example program now uses a reduced number of threads by
default to reduce elapsed run time. <code>ODP_THREAD_COUNT_MAX</code> is also now used as
the max worker count.</p>
</div>
</div>
<div class="sect3">
<h4 id="_generator_improvements">Generator Improvements</h4>
<div class="paragraph">
<p>The <code>odp_generator</code> example has numerous cleanups and performance improvements.</p>
</div>
</div>
<div class="sect3">
<h4 id="_ipsec_example">IPsec Example</h4>
<div class="paragraph">
<p>The <code>odp_ipsec</code> example now properly stops and closes pktio devices on exit.</p>
</div>
</div>
<div class="sect3">
<h4 id="_packet_dumping">Packet Dumping</h4>
<div class="paragraph">
<p>A new <code>odp_packet_dump</code> example is added that prints received packets to the
terminal. This is useful for debugging packet I/O interfaces.</p>
</div>
</div>
<div class="sect3">
<h4 id="_sysinfo_example">Sysinfo Example</h4>
<div class="paragraph">
<p>A new <code>odp_sysinfo</code> example is provided that prints system information. Useful
for checking the ODP environment during debugging. This includes providing
detailed information about the various crypto facilities supported, as well
as the feature flags used at build time (<em>e.g.,</em> if the binary was built with
ARMv8.0 or ARMv8.1 instructions).</p>
</div>
</div>
<div class="sect3">
<h4 id="_traffic_manager_example">Traffic Manager Example</h4>
<div class="paragraph">
<p>The traffic manager example now properly destroys all TM queues it creates
for improved reliability. It also now always prints a proper termination
summary message.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_bug_fixes_5">Bug Fixes</h3>
<div class="sect3">
<h4 id="_numbered_bugsissues">Numbered Bugs/Issues</h4>
<div class="sect4">
<h5 id="_bug_3983"><a href="https://bugs.linaro.org/show_bug.cgi?id=3983">Bug 3983</a></h5>
<div class="paragraph">
<p>Compile fails on OpenSuSE 42.2 Leap with error: negative width in bit field
'__error_if_negative'</p>
</div>
</div>
<div class="sect4">
<h5 id="_bug_3989"><a href="https://bugs.linaro.org/show_bug.cgi?id=3989">Bug 3989</a></h5>
<div class="paragraph">
<p>odp_system_info_init() issues</p>
</div>
</div>
<div class="sect4">
<h5 id="_bug_3999"><a href="https://bugs.linaro.org/show_bug.cgi?id=3999">Bug 3999</a></h5>
<div class="paragraph">
<p>IPsec antireplay check drops packets when sequence number jumps.</p>
</div>
</div>
<div class="sect4">
<h5 id="_bug_4002"><a href="https://bugs.linaro.org/show_bug.cgi?id=4002">Bug 4002</a></h5>
<div class="paragraph">
<p>IPsec SA creation must fail for ESN-enabled SAs</p>
</div>
</div>
<div class="sect4">
<h5 id="_bug_4013"><a href="https://bugs.linaro.org/show_bug.cgi?id=4013">Bug 4013</a></h5>
<div class="paragraph">
<p>Per-SA IPv4 ID allocation may cause duplicate IDs.</p>
</div>
</div>
<div class="sect4">
<h5 id="_bug_4017"><a href="https://bugs.linaro.org/show_bug.cgi?id=4017">Bug 4017</a></h5>
<div class="paragraph">
<p>Unexpected IP ID causes IPsec API validation to fail</p>
</div>
</div>
<div class="sect4">
<h5 id="_issue_662"><a href="https://github.com/Linaro/odp/issues/662">Issue 662</a></h5>
<div class="paragraph">
<p>rte_mempool_ops_alloc() is not dpdk api</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_unnumbered_bugsissues_2">Unnumbered Bugs/Issues</h4>
<div class="ulist">
<ul>
<li>
<p>Fixed enq/deq issues encountered on architectures with weak memory ordering.</p>
</li>
<li>
<p>Return 0 from <code>odp_sys_huge_page_size_all()</code> if hugepages are not
supported/detected. Tests modified to not treat this as an error.</p>
</li>
<li>
<p>Set <code>ODP_CACHE_LINE_SIZE</code> to 128 on ppc64le systems.</p>
</li>
<li>
<p>iplookuptable fix putting values into table</p>
</li>
<li>
<p>DPDK pktio support now works properly across multiple ODP instances.</p>
</li>
<li>
<p>Zero timer pool memory on reserve (fixes timer failures due to uninitialized
variables).</p>
</li>
<li>
<p><code>-march=native</code> disabled for <code>clang</code>. This fixes a known issue with recent
levels of clang.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_known_issues">Known Issues</h3>
<div class="sect3">
<h4 id="_bug_3998"><a href="https://bugs.linaro.org/show_bug.cgi?id=3998">Bug 3998</a></h4>
<div class="paragraph">
<p>IPsec extended sequence number support is missing</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_4014"><a href="https://bugs.linaro.org/show_bug.cgi?id=4014">Bug 4014</a></h4>
<div class="paragraph">
<p>Separate IP ID allocation for transport and tunnel mode SAs may cause
duplicate IDs</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_4018"><a href="https://bugs.linaro.org/show_bug.cgi?id=4018">Bug 4018</a></h4>
<div class="paragraph">
<p>Unexpected IV causes IPsec API validation to fail</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_4040"><a href="https://bugs.linaro.org/show_bug.cgi?id=4040">Bug 4040</a></h4>
<div class="paragraph">
<p>Clang build fails on Ubuntu 18.04</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_opendataplane_1_19_0_2">OpenDataPlane (1.19.0.2)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_summary_of_changes_6">Summary of Changes</h3>
<div class="paragraph">
<p>ODP v1.19.0.2 is the second service update for the Tiger Moth release. It
incorporates a number of corrections and enhancements that further improve the
quality and testability of ODP.</p>
</div>
<div class="sect3">
<h4 id="_apis_3">APIs</h4>
<div class="paragraph">
<p>There are no API changes in this release.</p>
</div>
</div>
<div class="sect3">
<h4 id="_dpdk_service_release_sync">DPDK Service Release Sync</h4>
<div class="paragraph">
<p>ODP is now paired with DPDK 17.11.3 for its DPDK-related support. This is the
current service level for the DPDK 17.11 LTS package used by ODP Tiger Moth.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_implementation_improvements_4">Implementation Improvements</h3>
<div class="paragraph">
<p>This release incorporates several improvements in the <code>odp-linux</code> reference
implementation of ODP.</p>
</div>
<div class="sect3">
<h4 id="_enhanced_inlining">Enhanced Inlining</h4>
<div class="paragraph">
<p>ODP supports inlining of functions in embedded environments when ABI
compatibility is not needed. ODP itself now makes use of inlined functions for
all relevant internal use of its APIs, leading to improved performance.</p>
</div>
</div>
<div class="sect3">
<h4 id="_completion_of_crc_api_implementation">Completion of CRC API Implementation</h4>
<div class="paragraph">
<p>The <code>odp_hash_crc_gen64()</code> API is now properly implemented and appropriate
validation tests added to support it.</p>
</div>
<div class="paragraph">
<p>In addition, a streamlined table-based implementation of the basic CRC
functions eliminates the previous dependency on <code>zlib</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_pktio_specific_parsing">PktIO-Specific Parsing</h4>
<div class="paragraph">
<p>To better integrate with DPDK parsing capabilities, ODP packet parsing has
been restructured to operate at the PktIO level. This permits DPDK PktIO types
to exploit the native DPDK packet parser and checksum facilities, leading
to better integration.</p>
</div>
</div>
<div class="sect3">
<h4 id="_pktio_internal_cleanup_and_restructure">PktIO Internal Cleanup and Restructure</h4>
<div class="paragraph">
<p>The PktIO functions have been streamlined and refactored in a number of ways
to provide better long-term maintainability of these functions. This includes
moving per-PktIO data into individual files rather than sharing a common file,
as well as better placement for I/O statistics.</p>
</div>
</div>
<div class="sect3">
<h4 id="_checksum_validation_support">Checksum Validation Support</h4>
<div class="paragraph">
<p>Loop PktIO interfaces now add the capability to validate packet L3 and L4
checksums as part of receive processing. The existing <code>odp_pktio_capability()</code>
API now reports that checksum validation is available for these interfaces.</p>
</div>
</div>
<div class="sect3">
<h4 id="_single_producer_single_consumer_queue_performance_optimizations">Single Producer / Single Consumer Queue Performance Optimizations</h4>
<div class="paragraph">
<p>When defining lock free queues that have only a single producer and consumer,
a streamlined implementation offers significant speedup.</p>
</div>
</div>
<div class="sect3">
<h4 id="_fast_pcapng_packet_capture">Fast PCAPng Packet Capture</h4>
<div class="paragraph">
<p>Fast pcap capture is now provided in <code>odp-linux</code> to capture packets on any
interface. This is enabled via the <code>--enable-pcapng-support</code> configuration
option. Once enabled, packets can be captured using a sequence such as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>sudo mkdir /var/run/odp/
start ODP application that reads/writes to the interface of interest
start the ODP application
sudo dd if=/var/run/odp/&lt;pid&gt;-&lt;ifname&gt;-flow-&lt;queue#&gt; of=~/test.pcap

cntrl^c to end capture
wireshark ~/test.pcap to view capture</pre>
</div>
</div>
<div class="paragraph">
<p>Interfaces of interest are identified by a string consisting of the
application process ID, the interface name, and the queue number of interest,
if the interface supports multiple queues.</p>
</div>
</div>
<div class="sect3">
<h4 id="_removal_of_gpl_m4_macros">Removal of GPL M4 Macros</h4>
<div class="paragraph">
<p>A number of autotools/autoconf M4 macros used in configuring <code>odp-linux</code> have
been rewritten to avoid potential GPL licensing concerns. These macros are
used only during ODP configuration processing and have no role in ODP
or ODP application use.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_validation_test_improvements_3">Validation Test Improvements</h3>
<div class="sect3">
<h4 id="_queue_pair_validation_tests">Queue Pair Validation Tests</h4>
<div class="paragraph">
<p>The validation test suite for queue API testing is enhanced to now test
operation on queue pairs properly. This enables the various enqueue/dequeue
modes defined by the ODP specification to be more fully exercised, leading
to improved API conformance.</p>
</div>
</div>
<div class="sect3">
<h4 id="_scheduling_test_improvements">Scheduling Test Improvements</h4>
<div class="paragraph">
<p>The scheduling validation tests now better use the various capability APIs to
ensure that implementations are only tested for advertised capabilities.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_crypto_test_improvements_2">Crypto Test Improvements</h3>
<div class="paragraph">
<p>The crypto validation tests now better use the various capability APIs to
ensure that implementations are tested across advertised crypto capabilities.</p>
</div>
</div>
<div class="sect2">
<h3 id="_performance_test_improvements_2">Performance Test Improvements</h3>
<div class="sect3">
<h4 id="_new_performance_test">New Performance Test</h4>
<div class="paragraph">
<p>A new <code>odp_queue_perf</code> test has been added to test plain (non-scheduled)
queue performance in various modes.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_helper_changes_3">Helper Changes</h3>
<div class="ulist">
<ul>
<li>
<p>The <code>getopt</code> library calls are no longer used to avoid packaging conflicts
that can arise with this use. There are no changes to helper functionality.
This change simply improves packaging.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_examples_improvements">Examples Improvements</h3>
<div class="ulist">
<ul>
<li>
<p>The <code>odp_generator</code> example adds UDP port range support.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_ci_improvements">CI Improvements</h4>
<div class="paragraph">
<p>Numerous changes to Travis integration are added to improve the quality and
reliability of Continuous Integration (CI) testing.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_bug_fixes_6">Bug Fixes</h3>
<div class="sect3">
<h4 id="_bug_3787"><a href="https://bugs.linaro.org/show_bug.cgi?id=3787">Bug 3787</a></h4>
<div class="paragraph">
<p>Timeout accuracy breaks down with odd resolution requests</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3867"><a href="https://bugs.linaro.org/show_bug.cgi?id=3867">Bug 3867</a></h4>
<div class="paragraph">
<p>timer validation test fails when using 1GB huge pages</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3879"><a href="https://bugs.linaro.org/show_bug.cgi?id=3879">Bug 3879</a></h4>
<div class="paragraph">
<p>example/l2fwd_simple fails on some systems when using 1GB huge pages</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_unnumbered_bug_fixes">Unnumbered Bug Fixes</h3>
<div class="ulist">
<ul>
<li>
<p>Corrected the handling of timeout events in the scalable scheduler.</p>
</li>
<li>
<p>Fixed IPsec link order to streamline builds.</p>
</li>
<li>
<p>Fixed scaling issues with scheduler support for large core count systems.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_known_issues_2">Known Issues</h3>
<div class="sect3">
<h4 id="_bug_3774"><a href="https://bugs.linaro.org/show_bug.cgi?id=3774">Bug 3774</a></h4>
<div class="paragraph">
<p>Shmem validation test runs indefinitely with 1GB huge pages</p>
</div>
</div>
<div class="sect3">
<h4 id="_running_odp_on_systems_with_more_than_64_cores">Running ODP on Systems with more than 64 Cores</h4>
<div class="paragraph">
<p>There are several issues that seem to arise when running ODP applications on
platforms with more than 64 cores. While the most critical of these, which
affected the scheduler, have been fixed in this release, there are others
that are still under investigation. These will be addressed in the next
release of ODP.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_opendataplane_1_19_0_1">OpenDataPlane (1.19.0.1)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_summary_of_changes_7">Summary of Changes</h3>
<div class="paragraph">
<p>ODP v1.19.0.1 is the first service update for the Tiger Moth release. It
incorporates a number of corrections and enhancements that improve the quality
and testability of ODP.</p>
</div>
<div class="sect3">
<h4 id="_apis_4">APIs</h4>
<div class="paragraph">
<p>There are no API changes in this release.</p>
</div>
</div>
<div class="sect3">
<h4 id="_dpdk_service_release_sync_2">DPDK Service Release Sync</h4>
<div class="paragraph">
<p>ODP is now paired with DPDK 17.11.2 for it&#8217;s DPDK-related support. This is the
current service level for the DPDK 17.11 LTS package used by ODP Tiger Moth
and incorporates a number of important bug fixes.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_implementation_improvements_5">Implementation Improvements</h3>
<div class="paragraph">
<p>The ODP reference implementation has been improved in a number of areas.</p>
</div>
<div class="sect3">
<h4 id="_gcc_8_support">GCC 8 Support</h4>
<div class="paragraph">
<p>The GCC 8 series of compilers provides additional warnings about possible
string truncation. A few ODP modules were changed to avoid misleading
warnings when compiling with this level of GCC.</p>
</div>
</div>
<div class="sect3">
<h4 id="_linking_with_libnuma">Linking with <code>libnuma</code></h4>
<div class="paragraph">
<p>The <code>libnuma</code> library is used for DPDK pktios to provide proper memory
allocation on NUMA-aware systems. Linking with this library is improved to
avoid extraneous error messages at build time.</p>
</div>
</div>
<div class="sect3">
<h4 id="_packet_metadata_reorganization">Packet metadata reorganization</h4>
<div class="paragraph">
<p>Packet metadata is reorganized to reduce the cache footprint used by the ODP
reference implementation, resulting in performance improvements.</p>
</div>
</div>
<div class="sect3">
<h4 id="_random_split_from_crypto_module">Random split from crypto module</h4>
<div class="paragraph">
<p>The <code>odp_random_xxx()</code> family of APIs was moved to a separate module
(<code>odp_random.c</code>) for modularity and better isolation from planned crypto
enhancements.</p>
</div>
</div>
<div class="sect3">
<h4 id="_shmem_improvements">Shmem improvements</h4>
<div class="paragraph">
<p>Unnecessary locking is removed from the <code>odp_fdserver</code> module, streamlining
operations on shared memory.</p>
</div>
</div>
<div class="sect3">
<h4 id="_timer_pools">Timer pools</h4>
<div class="paragraph">
<p>The default number of timer pools supported by the ODP reference
implementation has been reduced from 255 to 32. This lower number remains
generously adequate for most applications and meaningfully reduces memory
footprint, giving better performance.</p>
</div>
</div>
<div class="sect3">
<h4 id="_timer_resolution">Timer resolution</h4>
<div class="paragraph">
<p>During initialization ODP normally measures timer resolution to set the
reported <code>highest_res_ns</code>. When such measurement is not able to be performed,
this is not limited to 500ns to avoid bounds errors with overly precise
resolutions.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_validation_improvements">Validation Improvements</h3>
<div class="paragraph">
<p>The ODP validation test suite has been improved in a number of areas.</p>
</div>
<div class="sect3">
<h4 id="_crypto_validation_test">Crypto validation test</h4>
<div class="paragraph">
<p>The validation test now correctly handles corner cases when the implementation
under test fails to process any test packets. It also includes the
previously missing <code>ODP_CIPHER_ALG_AES_CTR</code> name.</p>
</div>
<div class="paragraph">
<p>Additionally, since individual implementations indicate which crypto/hash
algorithms are supported via the <code>odp_crypto_capability()</code> API, the crypto
validation test now properly uses this information and only tests those
algorithms that the implementation reports as supported. The list of
unsupported algorithms is also reported as part of the test results.</p>
</div>
</div>
<div class="sect3">
<h4 id="_odp_sched_pktio_test_improvements"><code>odp_sched_pktio</code> test improvements</h4>
<div class="paragraph">
<p>The number of input/output queues used by this test can now be specified,
providing additional controls for test flexibility. In addition, pktout
queues are now selected based on input queue rather than worker id, thus
ensuring packet order flow is maintained.</p>
</div>
<div class="paragraph">
<p>Finally, an inactivity timer is added that allows the test to report when
packets were handled due to timeout rather than I/O activity.</p>
</div>
</div>
<div class="sect3">
<h4 id="_timer_validation_test">Timer validation test</h4>
<div class="paragraph">
<p>The validation test for the ODP timer APIs has been reorganized to better
characterize an implementation&#8217;s conformance to the ODP Timer API
specification.  Since implementations can have widely differing timer accuracy
levels, particularly when running in virtualized environments, the test also
relaxes its bounds checking and enforcement somewhat to better avoid false
negative test results.</p>
</div>
<div class="paragraph">
<p>Additionally, a timer pool create/destroy test was added as this area was
not adequately covered previously.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_documentation_improvements">Documentation Improvements</h3>
<div class="paragraph">
<p>The <code>EXTRA_ASCIIDOC_FLAGS</code> environment variable may now be used to supply
additional build flags for Asciidoctor, which can be used to override
icons and/or fonts for distribution or other needs.</p>
</div>
</div>
<div class="sect2">
<h3 id="_bug_fixes_7">Bug Fixes</h3>
<div class="sect3">
<h4 id="_bug_3657"><a href="https://bugs.linaro.org/show_bug.cgi?id=3657">Bug 3657</a></h4>
<div class="paragraph">
<p>PktIO does not work with Mellanox Interfaces</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3685"><a href="https://bugs.linaro.org/show_bug.cgi?id=3685">Bug 3685</a></h4>
<div class="paragraph">
<p>RX UDP checksum offload drops valid UDP packets with Niantic</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3686"><a href="https://bugs.linaro.org/show_bug.cgi?id=3686">Bug 3686</a></h4>
<div class="paragraph">
<p>IP header checksum not inserted if L4 offset not set</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3690"><a href="https://bugs.linaro.org/show_bug.cgi?id=3690">Bug 3690</a></h4>
<div class="paragraph">
<p>fdserver process interferes with signal handling</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3763"><a href="https://bugs.linaro.org/show_bug.cgi?id=3763">Bug 3763</a></h4>
<div class="paragraph">
<p>tests should fail if odp_crypto_op/op_enq process 0 packets</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3764"><a href="https://bugs.linaro.org/show_bug.cgi?id=3764">Bug 3764</a></h4>
<div class="paragraph">
<p>IPsec code can occasionally damage packets</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3772"><a href="https://bugs.linaro.org/show_bug.cgi?id=3772">Bug 3772</a></h4>
<div class="paragraph">
<p>Timer segfaults when creating and destroying multiple timer pools</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3788"><a href="https://bugs.linaro.org/show_bug.cgi?id=3788">Bug 3788</a></h4>
<div class="paragraph">
<p>linux-gen: ipc test fails to reserve memory</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_known_issues_3">Known Issues</h3>
<div class="sect3">
<h4 id="_bug_3774_2"><a href="https://bugs.linaro.org/show_bug.cgi?id=3774">Bug 3774</a></h4>
<div class="paragraph">
<p>Shmem validation test runs indefinitely with 1GB huge pages</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3787_2"><a href="https://bugs.linaro.org/show_bug.cgi?id=3787">Bug 3787</a></h4>
<div class="paragraph">
<p>Timeout accuracy breaks down with odd resolution requests</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_opendataplane_1_19_0_0">OpenDataPlane (1.19.0.0)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_summary_of_changes_8">Summary of Changes</h3>
<div class="paragraph">
<p>ODP v1.19.0.0 is the official Tiger Moth final release. It incorporates final
implementation changes and bug fixes and completes the Tiger Moth ODP
development cycle.</p>
</div>
<div class="sect3">
<h4 id="_apis_5">APIs</h4>
<div class="paragraph">
<p>No functional changes for this release. The Tiger Moth API was frozen in ODP
v1.18.0.0.</p>
</div>
<div class="sect4">
<h5 id="_api_documentation_update">API Documentation Update</h5>
<div class="paragraph">
<p>The specification for the <code>odp_packet_l4_chksum_status()</code> API has been
clarified to reflect that in IPv4 UDP checksums are optional. As a result, a
zero (nonexistent) checksum will be reported as <code>ODP_PACKET_CHKSUM_OK</code>.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_c_test_improvements">C++ Test Improvements</h4>
<div class="paragraph">
<p>The C&#43;&#43; test included in the ODP validation suite now uses <code>cout</code> instead
of <code>printf()</code> to ensure that C&#43;&#43; is being used to compile it.</p>
</div>
</div>
<div class="sect3">
<h4 id="_queue_and_scheduler_configuration">Queue and Scheduler Configuration</h4>
<div class="paragraph">
<p>For the ODP Reference Implementation, The <code>config/odp-linux-generic.conf</code> file
is extended with sections to control the default and maximum sizes for basic
queues, and the priority spread used by the scheduler for scheduled queues.</p>
</div>
<div class="paragraph">
<p>The configuration file is a template named <code>platform/odp-$platform.conf</code> so
this can be easily inherited by other ODP implementations.</p>
</div>
</div>
<div class="sect3">
<h4 id="_runtime_default_config_file_read_order_improvements">Runtime Default <code>config</code> File Read Order Improvements</h4>
<div class="paragraph">
<p>For the ODP Reference Implementation, the default values of the
application-provided <code>config</code> file (if used) override the values provided by
the built-in <code>config/odp-linux-generic.conf</code> file.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_implementation_improvements_6">Implementation Improvements</h3>
<div class="paragraph">
<p>The <code>odp-linux</code> reference implementation is improved in a number of areas:</p>
</div>
<div class="sect3">
<h4 id="_netmap_ring_configuration_for_vale">Netmap Ring Configuration for VALE</h4>
<div class="paragraph">
<p>PktIO netmap support now uses the ODP config file to allow rings used for VALE
processing to be specified. The supplied defaults provide optimal performance
in typical settings.</p>
</div>
</div>
<div class="sect3">
<h4 id="_aes_xcbc_mac_and_sha384_hmac">AES-XCBC-MAC and SHA384-HMAC</h4>
<div class="paragraph">
<p>These crypto/authentication algorithms are now implemented.</p>
</div>
</div>
<div class="sect3">
<h4 id="_packet_checksum_validation_and_insertion">Packet Checksum Validation and Insertion</h4>
<div class="paragraph">
<p>Proper packet checksum validation and insertion, in conformance with the
relevant ODP APIs, is now provided.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_dependency_changes">Dependency Changes</h3>
<div class="sect3">
<h4 id="_dpdk_17_11_support">DPDK 17.11 Support</h4>
<div class="paragraph">
<p>The Tiger Moth LTS release is synchronized with the most recent DPDK LTS
release for DPDK pktio support.</p>
</div>
</div>
<div class="sect3">
<h4 id="_removal_of_dependency_on_xxd_package">Removal of dependency on <code>xxd</code> package.</h4>
<div class="paragraph">
<p>This dependency is removed. The Reference Implementation build tools now use
the standard <code>od</code> tool rather than the optional <code>xxd</code> package.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_performance_tests_10">Performance Tests</h3>
<div class="sect3">
<h4 id="_odp_sched_pktio"><code>odp_sched_pktio</code></h4>
<div class="paragraph">
<p>A new test has been added to test the performance of PktIO operations in
scheduled mode. Scheduled PktIO is inherently more scalable and simpler from
an application standpoint than direct (polled) I/O, but depending on the
efficiency of the scheduler implementation can incur additional levels of
overhead. This test can give insight into a given platform&#8217;s scheduler
efficiency. For the <code>odp-linux</code> reference implementation, this test has shown
scheduled I/O to be within 10% of rates achievable via direct I/O, meaning
that for many applications the simplicity and scalability of the event model
is preferable.</p>
</div>
</div>
<div class="sect3">
<h4 id="_odp_ipsec"><code>odp_ipsec</code></h4>
<div class="paragraph">
<p>A new test has been added that measures outbound (TX) IPsec performance with
a variety of cipher and authentication algorithms.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_example_changes_2">Example Changes</h3>
<div class="sect3">
<h4 id="_l2fwd_example"><code>l2fwd</code> Example</h4>
<div class="paragraph">
<p>The <code>README</code> file associated with this example has been clarified to explain
that this example is a throughput test and as a result does not preserve
packet order under all conditions.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_bug_fixes_8">Bug Fixes</h3>
<div class="sect3">
<h4 id="_bug_3611"><a href="https://bugs.linaro.org/show_bug.cgi?id=3611">Bug 3611</a></h4>
<div class="paragraph">
<p>ODP linux-generic fails on AArch64 in non-ABI-compat mode.</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3657_2"><a href="https://bugs.linaro.org/show_bug.cgi?id=3657">Bug 3657</a></h4>
<div class="paragraph">
<p>PktIO does not work with Mellanox Interfaces</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3685_2"><a href="https://bugs.linaro.org/show_bug.cgi?id=3685">Bug 3685</a></h4>
<div class="paragraph">
<p>RX UDP checksum offload drops valid UDP packets with Niantic</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3686_2"><a href="https://bugs.linaro.org/show_bug.cgi?id=3686">Bug 3686</a></h4>
<div class="paragraph">
<p>IP header checksum not inserted if L4 offset not set</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3690_2"><a href="https://bugs.linaro.org/show_bug.cgi?id=3690">Bug 3690</a></h4>
<div class="paragraph">
<p>fdserver process interferes with signal handling</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3736"><a href="https://bugs.linaro.org/show_bug.cgi?id=3736">Bug 3736</a></h4>
<div class="paragraph">
<p>return value not checked for some fdserver interface functions</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_known_issues_4">Known Issues</h3>
<div class="sect3">
<h4 id="_bug_2988"><a href="https://bugs.linaro.org/show_bug.cgi?id=2988">Bug 2988</a></h4>
<div class="paragraph">
<p>ODP exposes symbols outside of odp*/_odp* namespace</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_opendataplane_1_18_0_1">OpenDataPlane (1.18.0.1)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_summary_of_changes_9">Summary of Changes</h3>
<div class="paragraph">
<p>ODP v1.18.0.1 is a fix level for Tiger Moth Release Candidate 2 (RC 2).
It incorporates fixes and performance / serviceability enhancements but no
API changes.</p>
</div>
<div class="sect3">
<h4 id="_apis_6">APIs</h4>
<div class="paragraph">
<p>No changes for this release.</p>
</div>
</div>
<div class="sect3">
<h4 id="_corrected_crypto_functionality">Corrected Crypto Functionality</h4>
<div class="paragraph">
<p>This release corrects a merge issue with crypto functionality that resulted in
incorrect crypto operation for certain cipher suites.</p>
</div>
</div>
<div class="sect3">
<h4 id="_runtime_configuration">Runtime Configuration</h4>
<div class="paragraph">
<p>Introduces a runtime configuration file that can be used by applications to
set selected ODP configuration parameters dynamically at runtime rather than
at <code>configure</code> time. At present this is used to configure parameters needed
by DPDK PMDs when using PktIO interfaces in the DPDK class. The intention is
to expand the use of this file over time to allow more dynamic control
of other aspect of ODP runtime configuration.</p>
</div>
<div class="paragraph">
<p>For the ODP Reference Implementation, a template configuration file is
provided in <code>config/odp-linux.conf</code>. Introduction of this support generates
an additional dependency on the <code>libconfig</code> package, which must be present to
build ODP.</p>
</div>
</div>
<div class="sect3">
<h4 id="_ipsec_traffic_flow_confidentiality_tfc_corrections">IPsec Traffic Flow Confidentiality (TFC) Corrections</h4>
<div class="paragraph">
<p>A few missing implementation features associated with TFC packet generation
have been added in this fix level. This support is now functionally complete in
the ODP Reference Implementation.</p>
</div>
</div>
<div class="sect3">
<h4 id="_debug_print_improvements">Debug Print Improvements</h4>
<div class="paragraph">
<p>The information provided in debug builds of the Reference Implementation is
improved to print the interface name on open, start, stop, and close calls.
The driver name and number of queues are also printed to ease verification of
correct configuration.</p>
</div>
</div>
<div class="sect3">
<h4 id="_default_scheduler_performance_improvements">Default Scheduler Performance Improvements</h4>
<div class="paragraph">
<p>The performance of the default scheduler in the Reference Implementation is
significantly improved in providing scheduled access to PktIO queues. Scheduled
I/O now operates within 10% of the performance achievable using Direct I/O,
while providing incomparably better scalability in multicore environments.</p>
</div>
</div>
<div class="sect3">
<h4 id="_so_numbering_changes"><code>.so</code> Numbering Changes</h4>
<div class="paragraph">
<p>In preparation for the Tiger Moth official release, ODP has adopted a
simplified <code>.so</code> naming scheme, which is introduced here. ODP <code>.so</code> numbers
are now tied to the ODP release number since ODP does not promise backward
compatibility across release boundaries.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_opendataplane_1_18_0_0">OpenDataPlane (1.18.0.0)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_new_features">New Features</h3>
<div class="paragraph">
<p>ODP v1.18.0.0 is Tiger Moth Release Candidate 2 (RC 2). It completes the new
APIs that are part of the Tiger Moth Long Term Support (LTS) release of ODP
as well as various performance refinements and bug fixes. As of RC2 the ODP
API is now frozen for the Tiger Moth development series.</p>
</div>
<div class="sect3">
<h4 id="_apis_7">APIs</h4>
<div class="paragraph">
<p>The following new and changed APIs are included in this release:</p>
</div>
<div class="sect4">
<h5 id="_addition_of_shared_memory_shm_initialization_parameters">Addition of Shared Memory (SHM) Initialization Parameters</h5>
<div class="paragraph">
<p>The <code>odp_init_t</code> struct used as the argument to the <code>odp_init_global()</code> API
has been expanded to include a <code>max_memory</code> field that specifies the maximum
amount of shared memory (shm) that the application will use. This is to
better enable ODP implementations to optimize their use of shared memory in
support of the application. If left as (or defaulted) to 0, the implementation
may choose a default limit for the application.</p>
</div>
</div>
<div class="sect4">
<h5 id="_crypto_changes">Crypto Changes</h5>
<div class="paragraph">
<p>A number of crypto refinements are included in this release:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The single initialization vector (<code>iv</code>) in the <code>odp_crypto_session_param_t</code>
is replaced by a separate <code>cipher_iv</code> and <code>auth_iv</code> fields.</p>
</li>
<li>
<p>The single initialization vector (<code>override_iv_ptr</code>) in the
<code>odp_crypto_op_param_t</code> is replaced by a separate <code>cipher_iv_ptr</code> and
<code>auth_iv_ptr</code> fields.</p>
</li>
<li>
<p>The special nature of GCM and GMAC authenticated encryption modes is
clarified in that these ciphers always combine ciphering with authentication
and hence require both to be specified when used. This is simply a
documentation change as this requirement has always existed.</p>
</li>
<li>
<p>Enumerations for AES_CCM (<code>ODP_CIPHER_ALG_AES_CCM</code> and
<code>ODP_AUTH_ALG_AES_CCM</code>) authenticated encryption modes are added.</p>
</li>
<li>
<p>Enumeration for the AES_CMAC authenticated encryption mode
(<code>ODP_AUTH_ALG_AES_CMAC</code>) is added.</p>
</li>
<li>
<p>Enumerations for the ChaCha20-Poly1305 (<code>ODP_CIPHER_ALG_CHACHA20_POLY1305</code>
and <code>ODP_AUTH_ALG_CHACHA20_POLY1305</code>) authenticated encryption modes are
added.</p>
</li>
<li>
<p>Enumeration for the SHA-384 authentication algorithm
(<code>ODP_AUTH_ALG_SHA384_HMAC</code>) is added.</p>
</li>
<li>
<p>Enumeration for the AES-XCBC-MAC authentication algorithm
(<code>ODP_AUTH_ALG_AES_XCBC_MAC</code>) is added.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_lock_free_and_block_free_queues">Lock-free and block-free queues</h5>
<div class="paragraph">
<p>The <code>odp_nonblocking_t</code> enums introduced in ODP v1.17.0.0 are now returned
as separate <code>odp_queue_capability()</code> limits for plain and scheduled queues. The
ODP reference implementations now support <code>ODP_NONBLOCKING_LF</code> queues.</p>
</div>
</div>
<div class="sect4">
<h5 id="_user_pointer_initialized_to_null">User pointer initialized to NULL</h5>
<div class="paragraph">
<p>The specification for <code>odp_packet_user_ptr()</code> is clarified that unless
overridden by <code>odp_packet_user_ptr_set()</code> the value of NULL will be returned.</p>
</div>
</div>
<div class="sect4">
<h5 id="_removal_of_odp_pktin_wait_option">Removal of <code>ODP_PKTIN_WAIT</code> option</h5>
<div class="paragraph">
<p>The <code>ODP_PKTIN_WAIT</code> option on <code>odp_pktin_recv_tmo()</code> and
<code>odp_pktin_recv_mq_tmo()</code> is removed. Timeout options now consist of
<code>ODP_PKTIN_NO_WAIT</code> and a user-supplied timeout value. Since this timeout
value can be specified to be arbitrarily long, there is no need for an
indefinite wait capability as provision of such a capability proved
problematic for some ODP implementations.</p>
</div>
</div>
<div class="sect4">
<h5 id="_addition_of_packet_protocol_apis">Addition of packet protocol APIs</h5>
<div class="paragraph">
<p>The APIs <code>odp_packet_l2_type()</code>, <code>odp_packet_l3_type()</code>, and
<code>odp_packet_l4_type()</code> are added to return the Layer 2, 3, and 4 protocols,
respectively, associated with packets that have been parsed to the
corresponding layer. If the packet was not parsed to the associated layer
these return <code>ODP_PROTO_Ln_TYPE_NONE</code>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_packet_addressability_improvements">Packet addressability improvements</h5>
<div class="paragraph">
<p>The documentation of <code>odp_packet_data()</code> is clarified to indicated when this
shortcut may be used safely and a new API, <code>odp_packet_data_seg_len()</code>, is
added that returns both the address of the start of packet data as well
as the number of bytes addressable from that pointer.</p>
</div>
</div>
<div class="sect4">
<h5 id="_asynchronous_ordered_locks">Asynchronous ordered locks</h5>
<div class="paragraph">
<p>Two new APIs, <code>odp_schedule_order_lock_start()</code> and
<code>odp_schedule_order_lock_wait()</code> are added to allow for asynchronous
ordered lock acquisition in addition to the existing synchronous
<code>odp_schedule_order_lock()</code> API. In some implementations and applications,
there may be a performance advantage to indicating the intent to acquire an
ordered lock to allow the implementation to prepare for this while the
application continues parallel processing and then enter the critical section
protected by the ordered lock at a later time. In this case ordered lock
protection is not guaranteed until the <code>odp_schedule_order_lock_wait()</code> call
returns.</p>
</div>
</div>
<div class="sect4">
<h5 id="_ipsec_api_miscellaneous_changes_and_enhancements">IPsec API miscellaneous changes and enhancements</h5>
<div class="paragraph">
<p>IPsec support is further enhanced with the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>odp_ipsec_ipv4_param_t</code> and <code>odp_ipsec_ipv6_param_t</code> structures
are added to formalize the specification of IPv4 and IPv6 options in the
<code>odp_ipsec_tunnel_param_t</code> configuration.</p>
</li>
<li>
<p>The <code>mode</code> field of the <code>odp_ipsec_out_t</code> is renamed to <code>frag_mode</code> for
better clarity. In addition the <code>flag.frag-mode</code> option bit in the
<code>odp_ipsec_out_opt_t</code> struct is defined to hold per-operation options for
the <code>odp_ipsec_out_param_t</code> struct.</p>
</li>
<li>
<p>The <code>odp_ipsec_capability_t</code> struct returned by the <code>odp_ipsec_capability()</code>
API is expanded to include the <code>odp_proto_chksums_t</code> available on inbound
IPsec traffic. This indicates whether and how inbound packet checksums may
be validated for decrypted IPsec traffic.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_ipsec_traffic_flow_confidentiality_tfc_support">IPsec Traffic Flow Confidentiality (TFC) support</h5>
<div class="paragraph">
<p>Traffic Flow Confidentiality (TFC) allows applications to defend against
traffic analysis attacks by inserting dummy packets as well as add pad bytes
to packets traversing IPsec flows.</p>
</div>
<div class="paragraph">
<p>Dummy packets have an L3 type of <code>ODP_PROTO_L3_TYPE_NONE</code> in tunnel mode and
<code>ODP_PROTO_L4_TYPE_NO_NEXT</code> in transport mode. Padded packets have additional
data suffixed to them that extends beyond the L3 or L4 packet lengths.</p>
</div>
<div class="paragraph">
<p>For RX processing, inline dummy packets may or may not be dropped from the
inbound packet stream. For lookaside processing they are always visible. For TX
processing, the <code>odp_ipsec_out_opt_t</code> struct specifies the <code>tfc_pad</code> bit if
the packet is to be padded or the <code>tfc_dummy</code> bit if a dummy packet is to
be inserted. The dummy packet length is specified by the <code>tfc_pad_len</code> option.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_streamlined_abi_support">Streamlined ABI Support</h3>
<div class="paragraph">
<p>ABI support has been reorganized to make it more modular and to omit headers
and related ABI files when configure to disable this support.</p>
</div>
</div>
<div class="sect2">
<h3 id="_reference_implementation_fixes_and_improvements">Reference Implementation Fixes and Improvements</h3>
<div class="paragraph">
<p>The ODP Reference Implementation corporates a number of improvements that
result in better code organization as well as improved processing efficiency.</p>
</div>
<div class="sect3">
<h4 id="_pktio_null_device_support">Pktio null device support</h4>
<div class="paragraph">
<p>In the LNG Reference Implementations of ODP, the <code>odp_pktio_open()</code> API may now
specify devices of class <code>null</code> to indicate the PktIO is treated as a dummy
device. Null devices behave just like Linux <code>/dev/null</code> in that they never
receive packets and simply discard any packets sent to them.</p>
</div>
<div class="paragraph">
<p>Note that not all ODP implementations may support this device class. The
specific device classes supported by each ODP implementation may vary and are
listed in their own documentation.</p>
</div>
</div>
<div class="sect3">
<h4 id="_runtime_scheduler_selection">Runtime Scheduler Selection</h4>
<div class="paragraph">
<p>The ODP Reference Implementation offers both a default and a number of
alternate scheduler implementations. Previously these were selectable only at
<code>configure</code> time. They can now be dynamically selected at runtime by the use
of the <code>ODP_SCHEDULER</code> environment variable. If this environment variable is
not set, the default (basic) scheduler is used. It can be set to select
alternate schedulers:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ODP_SCHEDULER=basic</code> Explicitly selects the default scheduler</p>
</li>
<li>
<p><code>ODP_SCHEDULER=sp</code> Selects the strict priority scheduler</p>
</li>
<li>
<p><code>ODP_SCHEDULER=iquery</code> Selects the iQuery scheduler</p>
</li>
<li>
<p><code>ODP_SCHEDULER=scalable</code> Selects the scalable scheduler</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_streamlined_queue_implementation">Streamlined Queue Implementation</h4>
<div class="paragraph">
<p>The ODP Reference Implementation now uses a ring model for implementing
ODP queues. This results in greatly improved efficiency for queue operations.
The default maximum queue depth used is 4096 elements, and this information is
returned via the <code>odp_queue_capability()</code> API.</p>
</div>
</div>
<div class="sect3">
<h4 id="_validation_test_simplification">Validation Test Simplification</h4>
<div class="paragraph">
<p>The tests that are part of the validation test suite are reorganized and
simplified by having a single test file for each API rather than separate
CUnit driver files and test files.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_testexample_improvements">Test/Example Improvements</h3>
<div class="sect3">
<h4 id="_crypto_test_improvements_3">Crypto Test Improvements</h4>
<div class="paragraph">
<p>The <code>crypto</code> validation test suite now offers better information on which
crypto algorithms were skipped because they are not available. Testing of
full HMAC lengths is now added</p>
</div>
</div>
<div class="sect3">
<h4 id="_odp_generator_improvements">ODP Generator Improvements</h4>
<div class="paragraph">
<p>The <code>odp_generator</code> example now offers configurable RX burst size, selectable
packet handling (Direct I/O or Scheduled I/O), as well as streamlined packet
processing.</p>
</div>
</div>
<div class="sect3">
<h4 id="_l2fwd_example_improvements"><code>l2fwd</code> Example Improvements</h4>
<div class="paragraph">
<p>The <code>l2fwd</code> example offers improved efficiency via better cache usage.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_bug_fixes_9">Bug Fixes</h3>
<div class="sect3">
<h4 id="_bug_3517"><a href="https://bugs.linaro.org/show_bug.cgi?id=3517">Bug 3517</a></h4>
<div class="paragraph">
<p>timer test might fail</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3572"><a href="https://bugs.linaro.org/show_bug.cgi?id=3572">Bug 3572</a></h4>
<div class="paragraph">
<p>time_main test fails if run under heavy load</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3576"><a href="https://bugs.linaro.org/show_bug.cgi?id=3576">Bug 3576</a></h4>
<div class="paragraph">
<p>classification: CoS queues in invalid table index</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3577"><a href="https://bugs.linaro.org/show_bug.cgi?id=3577">Bug 3577</a></h4>
<div class="paragraph">
<p>classification: multiqueue CoS will always fail</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3578"><a href="https://bugs.linaro.org/show_bug.cgi?id=3578">Bug 3578</a></h4>
<div class="paragraph">
<p>classification: requested number of queues is ignored in multiqueue CoS</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3579"><a href="https://bugs.linaro.org/show_bug.cgi?id=3579">Bug 3579</a></h4>
<div class="paragraph">
<p>cls: capability to return max hash queues</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3581"><a href="https://bugs.linaro.org/show_bug.cgi?id=3581">Bug 3581</a></h4>
<div class="paragraph">
<p>classification: invalid memory access in RSS hash</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3582"><a href="https://bugs.linaro.org/show_bug.cgi?id=3582">Bug 3582</a></h4>
<div class="paragraph">
<p>classification: incorrect IPv6 RSS hash</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3594"><a href="https://bugs.linaro.org/show_bug.cgi?id=3594">Bug 3594</a></h4>
<div class="paragraph">
<p>IPsec SA may be used before fully initialized</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3595"><a href="https://bugs.linaro.org/show_bug.cgi?id=3595">Bug 3595</a></h4>
<div class="paragraph">
<p>IPsec SA lookup may leave extra SAs locked</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3597"><a href="https://bugs.linaro.org/show_bug.cgi?id=3597">Bug 3597</a></h4>
<div class="paragraph">
<p>new generator test assumes that null:0 pktio is always present</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3613"><a href="https://bugs.linaro.org/show_bug.cgi?id=3613">Bug 3613</a></h4>
<div class="paragraph">
<p>packet_main test can fail</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3618"><a href="https://bugs.linaro.org/show_bug.cgi?id=3618">Bug 3618</a></h4>
<div class="paragraph">
<p>DPDK pktio stops receiving packets if all configured RX queues are not used</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3628"><a href="https://bugs.linaro.org/show_bug.cgi?id=3628">Bug 3628</a></h4>
<div class="paragraph">
<p>Another timer_main failure</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3632"><a href="https://bugs.linaro.org/show_bug.cgi?id=3632">Bug 3632</a></h4>
<div class="paragraph">
<p>Creating a pool with total size over 4.29GB (UINT32_MAX) leads to
undefined behavior</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_known_issues_5">Known Issues</h3>
<div class="sect3">
<h4 id="_bug_2988_2"><a href="https://bugs.linaro.org/show_bug.cgi?id=2988">Bug 2988</a></h4>
<div class="paragraph">
<p>ODP exposes symbols outside of odp*/_odp* namespace</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3611_2"><a href="https://bugs.linaro.org/show_bug.cgi?id=3611">Bug 3611</a></h4>
<div class="paragraph">
<p>ODP linux-generic fails on AArch64 in non-ABI-compat mode</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_opendataplane_1_17_0_0">OpenDataPlane (1.17.0.0)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_new_features_2">New Features</h3>
<div class="paragraph">
<p>ODP v1.17.0.0 is Tiger Moth Release Candidate 1 (RC 1). It introduces
significant new API support as well as functional refinements that expand
ODP offload support to cover IPsec, as well as other improvements.</p>
</div>
<div class="sect3">
<h4 id="_apis_8">APIs</h4>
<div class="paragraph">
<p>The following new and changed APIs are included in this release:</p>
</div>
<div class="sect4">
<h5 id="_event_extensions">Event Extensions</h5>
<div class="paragraph">
<p>The ODP event model has been expanded to include new types as well as event
subtypes. Subtypes are used to qualify an event by indicating that the event
carries additional metadata relating to specific usage or operations.</p>
</div>
<div class="paragraph">
<p>New event <code>ODP_EVENT_IPSEC_STATUS</code> (to be discussed
below) is added. The initial subtypes defined are: <code>ODP_EVENT_PACKET_BASIC</code>,
<code>ODP_EVENT_PACKET_CRYPTO</code>, <code>ODP_EVENT_PACKET_IPSEC</code>, and
<code>ODP_EVENT_NO_SUBTYPE</code>, which are also discussed below.</p>
</div>
<div class="paragraph">
<p>Associated with this support, new event APIs are added:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>odp_event_subtype()</code> extracts the <code>odp_event_subtype_t</code> from an
<code>odp_event_t</code>.</p>
</li>
<li>
<p><code>odp_event_types()</code> returns the <code>odp_event_type_t</code> and <code>odp_event_subtype_t</code>
of an <code>odp_event_t</code> in a single call.</p>
</li>
<li>
<p><code>odp_event_type_multi()</code> scans a list of <code>odp_event_t</code> objects and returns
the number that share the same indicated <code>odp_event_type_t</code>. This allows
multiple events to be processed by groups of the same event type.</p>
</li>
<li>
<p><code>odp_event_filter_packet()</code> scans a list of <code>odp_event_t</code> objects and
partitions them into a returned array of <code>odp_packet_t</code> objects and a remaining
array of non-packet events.</p>
</li>
<li>
<p><code>odp_event_free_multi()</code> frees multiple events in a single call.</p>
</li>
<li>
<p><code>odp_event_free_sp()</code> frees multiple events originating from the same
pool in a single call. The caller must assure that the input events are from
the same pool.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_ipsec_support">IPsec support</h5>
<div class="paragraph">
<p>ODP Tiger Moth introduces comprehensive protocol offload support for IPsec,
allowing applications to leverage the IPsec acceleration capabilities of many
SoCs. Support includes APIs for Security Association (SA) creation and
lifecycle management, as well as IPsec packet operations for inbound (RX) and
outbound (TX) processing. Packet operations are further divided into lookaside
and inline support.</p>
</div>
<div class="sect5">
<h6 id="_lookaside_support">Lookaside Support</h6>
<div class="paragraph">
<p>Lookaside processing enables IPsec packets to be decrypted into plain packets
or plain packets to be encrypted into IPsec packets in a single operation under
explicit application control. This is useful for packets that need pre- or
post-processing, or to better fit with existing application design.</p>
</div>
<div class="paragraph">
<p>Two forms of lookaside processing are provided: the <code>odp_ipsec_in()</code> and
<code>odp_ipsec_out()</code> APIs provide synchronous decrypt and encrypt support,
respectively. The corresponding <code>odp_ipsec_in_enq()</code> and <code>odp_ipsec_out_enq()</code>
APIs provide these same services in asynchronous form where operations can be
launched and completed later.</p>
</div>
</div>
<div class="sect5">
<h6 id="_inline_support">Inline Support</h6>
<div class="paragraph">
<p>In contrast to lookaside support, IPsec inline support permits applications to
fully leverage the offload capabilities found in many SoCs by allowing inbound
IPsec packets to be recognized and decrypted automatically before they are
presented to the application for processing. This is done by configuring a
Security Association (SA) and its associated PktIO to operate in inline mode.</p>
</div>
<div class="paragraph">
<p>Similarly, following output SA and PktIO configuration, the
<code>odp_ipsec_out_inline()</code> API permits a packet to be encrypted into an IPsec
packet and automatically scheduled for TX processing in a single
operation. Such "fire and forget" processing enables applications to leverage
IPsec HW support for such processing in a portable manner.</p>
</div>
<div class="paragraph">
<p>Applications using IPsec inline support need only "touch" a packet once
compared to three times when using lookaside processing, leading to greater
processing efficiency.</p>
</div>
</div>
<div class="sect5">
<h6 id="_ipsec_events">IPsec Events</h6>
<div class="paragraph">
<p>New event types and subtypes are introduced to provide support for IPsec
processing. The <code>ODP_EVENT_PACKET</code> type has a new subtype:
<code>ODP_EVENT_PACKET_IPSEC</code> that provides extended metadata associated with
IPsec packets that have been processed. The new <code>ODP_EVENT_IPSEC_STATUS</code>
event, in turn, is used to report IPsec status events such as completion
notifications associated with <code>odp_ipsec_sa_disable()</code> calls.</p>
</div>
<div class="paragraph">
<p>The <code>odp_ipsec_result()</code> API is used to obtain IPsec result metadata from
a packet that has event subtype <code>ODP_EVENT_PACKET_IPSEC</code>, while the
<code>odp_ipsec_status()</code> API is used to obtain IPsec status metadata from an
<code>ODP_EVENT_IPSEC_STATUS</code> event.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_parser_apis">Parser APIs</h5>
<div class="paragraph">
<p>Packet parsing has been overhauled with the introduction of two new APIs:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>odp_packet_parse()</code></p>
</li>
<li>
<p><code>odp_packet_parse_multi()</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These use an <code>odp_packet_parse_param_t</code> struct to control the type and depth
of parsing to be performed. These routines are intended to be used to
process packets that have been decapsulated following IPsec decryption or other
tunneling or on IP fragments after they have been reassembled.</p>
</div>
<div class="paragraph">
<p>Associated with this improved parse support, the <code>odp_parser_layer_t</code> struct
is deprecated and replaced with a more general <code>odp_proto_layer_t</code> struct that
is used both in PktIO configuration as well as the new parser APIs.</p>
</div>
</div>
<div class="sect4">
<h5 id="_crypto_aes_ctr_and_aes_gmac_support">Crypto AES-CTR and AES-GMAC Support</h5>
<div class="paragraph">
<p>The ODP crypto APIs are extended to provide support for AES-CTR cipher and
AES-GMAC authentication modes, reflecting the growing availability of
accelerated support for these.</p>
</div>
</div>
<div class="sect4">
<h5 id="_crypto_removal_of_des_cbc">Crypto removal of DES-CBC</h5>
<div class="paragraph">
<p>DES-CBC is no longer considered secure and support for it is removed in ODP.</p>
</div>
</div>
<div class="sect4">
<h5 id="_crypto_move_aad_length_to_sessions">Crypto move AAD length to sessions</h5>
<div class="paragraph">
<p>The Additional Authentication Data (AAD) length is now part of the
<code>odp_crypto_session_t</code> rather than individual crypto operations. This provides
better compatibility with DPDK, which made a similar API adjustment in it&#8217;s
17.08 release.</p>
</div>
</div>
<div class="sect4">
<h5 id="_crypto_packet_apis">Crypto Packet APIs</h5>
<div class="paragraph">
<p>While the <code>odp_crypto_operation()</code> API is retained for compatibility,
new packet-oriented variants are introduced that provide additional
capabilities and flexibility. These APIs are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>odp_crypto_op()</code> Performs synchronous crypto operations on one or more
input packets under the control of an associated <code>odp_crypto_packet_op_param_t</code>
struct.</p>
</li>
<li>
<p><code>odp_crypto_op_enq()</code> Performs asynchronous crypto operations on or or more
input packets under the control of an associated <code>odp_crypto_packet_op_param_t</code>
struct.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>While <code>odp_crypto_operation()</code> calls result in <code>ODP_EVENT_CRYPTO_COMPL</code> events
for compatibility, the new packet-oriented APIs result in <code>ODP_EVENT_PACKET</code>
events that carry the new event subtype <code>ODP_EVENT_PACKET_CRYPTO</code>. These
packets contain additional metadata associated with the crypto operation.
New APIs added for manipulating this metadata include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>odp_crypto_packet_from_event()</code> converts an <code>odp_event_t</code> of type
<code>ODP_EVENT_PACKET</code> and subtype <code>ODP_EVENT_PACKET_CRYPTO</code> to an <code>odp_packet_t</code>.</p>
</li>
<li>
<p><code>odp_crypto_packet_to_event()</code> converts an <code>odp_packet_t</code> crypto packet
back into an <code>odp_event_t</code>.</p>
</li>
<li>
<p><code>odp_crypto_result()</code> extracts the <code>odp_crypto_packet_result_t</code> struct that
contains the crypto metadata associated with an <code>odp_packet_t</code> of event
subtype <code>ODP_EVENT_PACKET_CRYPTO</code>. This struct provides a summary bit that
says whether the operation completed successfully as well as
<code>odp_crypto_op_status_t</code> fields for the <code>cipher_status</code> and <code>auth_status</code> if a
problem was detected.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_classification_random_early_detection_red_support">Classification Random Early Detection (RED) Support</h5>
<div class="paragraph">
<p>Random Early Detection (RED) provides a means for input HW to ensure that
traffic is treated fairly under conditions of temporary resource overload due
to excessive inbound traffic. ODP RED support provides the ability to measure
and respond to resource pressure on either pools or queues, and only provides
flexibility in how such conditions are to be processed. They can result in
input packet drops or backpressure being indicated by transmitting pause
frames, depending on the underlying platform capabilities.</p>
</div>
<div class="paragraph">
<p>The <code>odp_cls_capability_t</code> struct returned by the <code>odp_cls_capability()</code> API
has been expanded to cover this support.</p>
</div>
</div>
<div class="sect4">
<h5 id="_time_difference_in_nanoseconds">Time difference in nanoseconds</h5>
<div class="paragraph">
<p>The new <code>odp_time_diff_ns()</code> API permits the delta between two <code>odp_time_t</code>
values to be computed in a single call.</p>
</div>
</div>
<div class="sect4">
<h5 id="_pktio_api_changes">PktIO API Changes</h5>
<div class="sect5">
<h6 id="_pktio_maximum_frame_lengths">PktIO Maximum Frame Lengths</h6>
<div class="paragraph">
<p>The <code>odp_pktio_mtu()</code> API is deprecated and replaced by two new APIs:
<code>odp_pktin_maxlen()</code> and <code>odp_pktout_maxlen()</code>. These return the maximum
sized packets that are supported for RX and TX processing,
respectively, on a given <code>odp_pktio_t</code>.</p>
</div>
</div>
<div class="sect5">
<h6 id="_pktio_settable_mac_address">PktIO settable MAC address</h6>
<div class="paragraph">
<p>The <code>odp_pktio_mac_addr_set()</code> API is added to allow setting of the MAC
address associated with an <code>odp_pktio_t</code>. The <code>odp_pktio_set_op_t</code> field of
the <code>odp_pktio_capability_t</code> returned by the <code>odp_pktio_capability()</code> API now
includes the <code>mac_addr`</code> field to indicate that this <code>odp_ptkio_t</code> supports
setting its MAC address.</p>
</div>
</div>
<div class="sect5">
<h6 id="_multiple_loop_devices">Multiple loop devices</h6>
<div class="paragraph">
<p>The reserved device name <code>loop</code> is now extended to <code>loopX</code> where X == integer
(<em>e.g.,</em> <code>loop1</code>, <code>loop2</code>, etc.). For compatibility, <code>loop</code> is a synonym for
<code>loop0</code>.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_pool_api_changes">Pool API Changes</h5>
<div class="sect5">
<h6 id="_pool_extent_info">Pool extent info</h6>
<div class="paragraph">
<p>The <code>odp_pool_info()</code> API is extended to return the <code>min_data_addr</code> and
<code>max_data_addr</code> fields. These provide information about the minimum and maximum
application-visible addresses that may be seen in objects allocated from a
particular <code>odp_pool_t</code>. Some applications use this information to enable them
to store buffer addresses in compressed format. For example, if the
"span" of valid addresses is less than 4GB this allows a 64-bit buffer address
to be stored as a 32-bit offset.</p>
</div>
<div class="paragraph">
<p>Since this is purely informational, ODP implementations are under no constraint
as to what addresses may be returned for these fields. 0 and <code>UNINTPTR_MAX</code>
may be used if there are no limits on pool extents.</p>
</div>
</div>
<div class="sect5">
<h6 id="_pool_subparameter_support">Pool subparameter support</h6>
<div class="paragraph">
<p>The <code>odp_pool_param_t</code> structure has been expanded to provide more flexibility
to support platforms that are able to offer multiple segment sizes within a
single pool. This can lead to greater storage efficiency. These are called
subparameters and implementations supporting up to 7 of these are accommodated
with these extensions.</p>
</div>
<div class="paragraph">
<p>The <code>odp_pool_capability_t</code> structure is expanded to return the number of
subparameters supported by this implementation. The application, in turn,
specifies its expected packet size and number distribution in the
<code>odp_pool_pkt_subparam_t</code> structure that is part of the <code>odp_pool_param_t</code>
used to define the characteristics of <code>ODP_POOL_PACKET</code> pools.</p>
</div>
<div class="paragraph">
<p>This is fully compatible with previous packet pool support since ODP
implementations are under no obligation to support pool subparameters and
these, when present, are advisory in nature. They simply serve to allow the
application to better communicate its expected packet distribution within a
pool so that the ODP implementation may better optimize storage use in the
pool.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_checksum_support">Checksum support</h5>
<div class="paragraph">
<p>Checksum processing support has been formalized with the addition of APIs for
determining packet checksum status, controlling packet checksum processing,
retrieving partially computed checksums on packets, and computing checksum
partial sums for memory areas.</p>
</div>
<div class="sect5">
<h6 id="_checksum_status">Checksum status</h6>
<div class="paragraph">
<p>The APIs <code>odp_packet_l3_chksum_status()</code> and <code>odp_packet_l4_status()</code> are
added to allow the results of packet input checksum processing to be
queried. These APIs return an <code>odp_packet_chksum_status_t</code> enum that indicates
whether checksum validation processing was performed and if so whether the
layer 3 or 4 checksum was found to be valid. This is applicable to both
normal packet input as well as those processed via IPsec.</p>
</div>
</div>
<div class="sect5">
<h6 id="_checksum_insertion">Checksum insertion</h6>
<div class="paragraph">
<p>PktIOs output checksum processing is configured as part of the
<code>odp_pktout_config_opt_t</code> struct used as input to <code>odp_pktio_config()</code> API.
These control whether L3 and/or L4 checksums are to be inserted by default
as part of packet TX processing.</p>
</div>
<div class="paragraph">
<p>Individual packets may override these defaults via the new
<code>odp_packet_l3_chksum_insert()</code> and <code>odp_packet_l4_chksum_insert()</code> APIs. These
take precedence over the PktIO default, allowing checksums to be inserted
when the PktIO default is to not insert checksums or to suppress checksum
insertion if when the PktIO default is to insert checksums.</p>
</div>
</div>
<div class="sect5">
<h6 id="_ones_complement_sums">One&#8217;s complement sums</h6>
<div class="paragraph">
<p>Two new APIs: <code>odp_packet_ones_comp()</code> and <code>odp_chksum_ones_comp16()</code> are
added to assist in application-managed checksum processing. If an
implementation has computed a partial checksum as part of the receive
processing for an IP fragment, for example, then <code>odp_packet_ones_comp()</code> can
be used to retrieve this computed value, as well as the byte range over which
it was computed. The <code>odp_chksum_ones_comp16()</code> API, by contrast, allows the
application to perform a 16-bit ones-complement sum over a range of in-memory
bytes. Together these can be used to calculate IPv4, TCP, and UDP checksums.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_packet_multi_event_conversion_and_single_pool_support">Packet multi-event conversion and single pool support</h5>
<div class="paragraph">
<p>New packet APIs have been added to streamline packet processing:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>odp_packet_free_sp()</code> is the same as <code>odp_packet_free_multi()</code> except that
the application guarantees that all packets come from the same pool.</p>
</li>
<li>
<p><code>odp_packet_from_event_multi()</code> allows multiple events to be converted
from <code>odp_event_t</code> to <code>odp_packet_t</code> objects in a single call. The caller
guarantees that all input <code>odp_event_t</code> objects are of type <code>ODP_EVENT_PACKET</code>.</p>
</li>
<li>
<p><code>odp_packet_to_event_multi()</code> converts multiple <code>odp_packet_t</code> objects to
corresponding <code>odp_event_t</code> objects in a single call.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_shared_memory_api_changes">Shared Memory API changes</h5>
<div class="paragraph">
<p>Several changes have been made to the ODP shared memory APIs:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>name</code> field used as input to <code>odp_shm_reserve()</code> is now optional.
If specified as <code>NULL</code> the shared memory area is anonymous and cannot be
looked up with <code>odp_shm_lookup()</code>. There is also no requirement that names be
unique. Duplicate names result in indeterminate output from <code>odp_shm_lookup()</code>.</p>
</li>
<li>
<p>The <code>odp_shm_info_t</code> now includes the <code>page_size</code> of the shared memory block
and it&#8217;s (optional) name.</p>
</li>
<li>
<p><code>odp_shm_print()</code> API is added to print implementation-defined information
associated with the <code>odp_shm_t</code> to the ODP log for diagnostic purposes.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_add_support_for_non_blocking_queues">Add support for non-blocking Queues</h5>
<div class="paragraph">
<p>New queue attributes are introduced to characterize queue behavior as
blocking or non-blocking. A blocking queue may stall other threads if a thread
is interrupted or suspending during an enqueue or dequeue operation.
Nonblocking queues may be either lock free or wait free and provide
progress and fairness guarantees to all threads regardless of
interruptions or stalls on the part of threads performing queue operations.</p>
</div>
<div class="paragraph">
<p>The various <code>odp_nonblocking_t</code> attributes available are returned by the
<code>odp_queue_capability()</code> API for both plain and scheduled queues and are in
turn requested as part of the <code>odp_queue_param_t</code> struct passed to the
<code>odp_queue_create()</code> API. The intent is to allow applications that have
realtime response requirements to better express these needs and utilize
platform-specific capabilities in this area.</p>
</div>
</div>
<div class="sect4">
<h5 id="_scheduler_ordered_lock_api_changes">Scheduler ordered lock API changes</h5>
<div class="paragraph">
<p>The following changes have been made to the scheduler APIs:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Documentation clarifies that an ordered context may only hold one ordered
lock at a time. Results are undefined if a second ordered lock is attempted to
be acquired while already holding one.</p>
</li>
<li>
<p>The <code>odp_schedule_order_unlock_lock()</code> API is added to permit an ordered
context to switch from one ordered lock to another in a single operation.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_timer_capabilities">Timer Capabilities</h5>
<div class="paragraph">
<p>The <code>odp_timer_capability()</code> API is added to return an <code>odp_timer_capability_t</code>
struct that details platform-specific timer capabilities for application use.
The only capability currently defined is <code>highest_res_ns</code>, which indicates the
highest supported resolution supported by a timer. This is the minimum valid
value for the <code>res_ns</code> timer pool parameter.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_scalable_scheduler">Scalable Scheduler</h3>
<div class="paragraph">
<p>The <code>odp-linux</code> reference implementation adds a new <em>scalable scheduler</em> to
the existing default, strict priority, and iquery schedulers. This is enabled
by:</p>
</div>
<div class="paragraph">
<p><code>./configure --enable-schedule-scalable</code></p>
</div>
<div class="paragraph">
<p>The scalable scheduler is designed to offer superior scalability in many core
environments, especially on AArch64 platforms.</p>
</div>
</div>
<div class="sect2">
<h3 id="_miscellaneous_fixes_and_improvements">Miscellaneous Fixes and Improvements</h3>
<div class="paragraph">
<p>The following miscellaneous improvements have been made to the <code>linux-generic</code>
reference implementation of ODP.</p>
</div>
<div class="sect3">
<h4 id="_additional_packet_inline_functions">Additional packet inline functions</h4>
<div class="paragraph">
<p>When compiling with <code>--enable-abi-compat=no</code> the following additional packet
functions are inlined:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>odp_packet_l2_offset()</code></p>
</li>
<li>
<p><code>odp_packet_l2_ptr()</code></p>
</li>
<li>
<p><code>odp_packet_l3_offset()</code></p>
</li>
<li>
<p><code>odp_packet_l3_ptr()</code></p>
</li>
<li>
<p><code>odp_packet_l4_offset()</code></p>
</li>
<li>
<p><code>odp_packet_l4_ptr()</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_dependencies">Dependencies</h4>
<div class="paragraph">
<p>The ODP test suite now automatically skips C tests if no C compiler
is available.</p>
</div>
<div class="paragraph">
<p>The odp_pktio_ordered tests are only performed if PCAP is available.</p>
</div>
<div class="paragraph">
<p>The DEPENDENCIES file has been updated to reflect build/test requirements for
running under Red Hat Linux distributions.</p>
</div>
</div>
<div class="sect3">
<h4 id="_dpdk_17_08_support">DPDK 17.08 Support</h4>
<div class="paragraph">
<p>PktIO DPDK support has been upgraded to DPDK 17.08.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_testexample_improvements_2">Test/Example improvements</h3>

</div>
<div class="sect2">
<h3 id="_l2fwd_example_2">l2fwd Example</h3>
<div class="paragraph">
<p>A verbose option is added to provide more detail on test runs.</p>
</div>
</div>
<div class="sect2">
<h3 id="_odp_generator">ODP generator</h3>
<div class="paragraph">
<p>Numerous performance improvements have been made that results in significantly
better I/O rates. This includes a configuration option to control checksum
usage.</p>
</div>
</div>
<div class="sect2">
<h3 id="_bug_fixes_10">Bug Fixes</h3>
<div class="sect3">
<h4 id="_bug_3465"><a href="https://bugs.linaro.org/show_bug.cgi?id=3465">Bug 3465</a></h4>
<div class="paragraph">
<p>CID 1461688: odp_pool_create: Dereference before null check</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3466"><a href="https://bugs.linaro.org/show_bug.cgi?id=3466">Bug 3466</a></h4>
<div class="paragraph">
<p>CID 1396968: buggy check</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3491"><a href="https://bugs.linaro.org/show_bug.cgi?id=3491">Bug 3491</a></h4>
<div class="paragraph">
<p>l2fwd segfaults on api-next with dpdk checksum insertion override</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_known_issues_6">Known Issues</h3>
<div class="sect3">
<h4 id="_bug_3210"><a href="https://bugs.linaro.org/show_bug.cgi?id=3210">Bug 3210</a></h4>
<div class="paragraph">
<p>packet header parsing routines should verify header checksums</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3517_2"><a href="https://bugs.linaro.org/show_bug.cgi?id=3517">Bug 3517</a></h4>
<div class="paragraph">
<p>timer test might fail</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_opendataplane_1_16_0_0">OpenDataPlane (1.16.0.0)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_new_features_3">New Features</h3>
<div class="paragraph">
<p>ODP v1.16.0.0 is the final preview release before the official release of
Tiger Moth. It introduces new APIs and extensions, as well as bug fixes and
functional improvements.</p>
</div>
<div class="sect3">
<h4 id="_apis_9">APIs</h4>
<div class="paragraph">
<p>The following new and changed APIs are included in this release:</p>
</div>
<div class="sect4">
<h5 id="_initialization_changes">Initialization Changes</h5>
<div class="paragraph">
<p>The new <code>odp_feature_t</code> type is introduced that defines various feature bits
for ODP components. This is used in an expanded <code>odp_init_t</code> argument to
<code>odp_init_global()</code> to specify which ODP features are unused by the
application. For example, if the application knows it will not be making use
of crypto features or the classifier, this may permit the ODP implementation
to configure itself more efficiently. Results are undefined if an application
asserts that it will not be using a feature and it attempts to do so
afterwards.</p>
</div>
<div class="paragraph">
<p>Associated with this new support the <code>odp_init_param_init()</code> API is added
to initialize the <code>odp_init_t</code> struct to default values.</p>
</div>
</div>
<div class="sect4">
<h5 id="_packet_api_changes">Packet API Changes</h5>
<div class="ulist">
<ul>
<li>
<p>The <code>odp_packet_unshared_len()</code> API is removed. Testing showed that this
API was non-essential and conflicted with the goal of implementation
efficiency.</p>
</li>
<li>
<p>The <code>odp_print_packet_data()</code> API is added. This permits packet data to
be logged along with platform-defined metadata for debugging or diagnostic
purposes.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_pktio_api_changes_2">PktIO API Changes</h5>
<div class="ulist">
<ul>
<li>
<p>The <code>loop_supported</code> attribute of the <code>odp_pktio_capability_t</code> struct is
deprecated since this is redundant. The <code>enable_loop</code> field of the
<code>odp_pktio_config_t</code> struct (which is returned as part of the
<code>odp_packet_capability_t</code> struct) is the proper way to determine whether a
PktIO supports loopback mode.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_system_info_api_changes">System Info API Changes</h5>
<div class="ulist">
<ul>
<li>
<p>The documentation for the <code>odp_sys_huge_page_size()</code> API is updated to
clarify that a 0 return code indicates that huge pages are not supported by
this platform.</p>
</li>
<li>
<p>The <code>odp_sys_huge_page_size_all()</code> API is added to return all
huge page sizes supported by this platform.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_timer_api_changes">Timer API Changes</h5>
<div class="ulist">
<ul>
<li>
<p>The documentation for the various parameters contained in the
<code>odp_timer_pool_param_t</code> struct are expanded and clarified.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_miscellaneous_fixes_and_improvements_2">Miscellaneous Fixes and Improvements</h3>
<div class="sect3">
<h4 id="_default_packet_headroom">Default Packet Headroom</h4>
<div class="paragraph">
<p>The default packet headroom in <code>odp-linux</code> has been increased from 66 to
128 bytes for better compatibility with <code>odp-dpdk</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_zero_copy_packet_references">Zero-copy Packet References</h4>
<div class="paragraph">
<p>The <code>odp-linux</code> reference implementation now fully supports zero-copy
packet references. Previously these APIs were implemented via packet copies,
which while functionally correct, were not how these APIs are intended to
operate.</p>
</div>
</div>
<div class="sect3">
<h4 id="_dpdk_zero_copy_io_support">DPDK Zero-copy I/O support</h4>
<div class="paragraph">
<p>The <code>--enable-dpdk-zero-copy</code> <code>configure</code> option is added to allow DPDK PktIO
devices to avoid data copies, leading to improved performance.</p>
</div>
</div>
<div class="sect3">
<h4 id="_dpdk_checksum_offload_support">DPDK Checksum offload support</h4>
<div class="paragraph">
<p>DPDK PktIO now makes use of RX and TX IP/UDP/TCP checksum offload.</p>
</div>
</div>
<div class="sect3">
<h4 id="_shared_memory_stored_in_devshm">Shared memory stored in /dev/shm</h4>
<div class="paragraph">
<p>In the <code>odp-linux</code> reference implementation, shared memory is now backed to
<code>/dev/shm</code> rather than <code>/tmp</code> for better reliability and robustness. This may
be overridden as part of ODP build-time customization if desired.</p>
</div>
</div>
<div class="sect3">
<h4 id="_ipc_improvements">IPC Improvements</h4>
<div class="paragraph">
<p>PktIO IPC support has received improvements in both performance and
reliability and is now suitable for development use.</p>
</div>
</div>
<div class="sect3">
<h4 id="_netmap_improvements">Netmap Improvements</h4>
<div class="paragraph">
<p>The thread ID is now used to create unique vdev MAC addresses to avoid
conflicts with multiple ODP processes running on the same host system.</p>
</div>
</div>
<div class="sect3">
<h4 id="_drv_directory_removed"><code>drv</code> directory removed</h4>
<div class="paragraph">
<p>The <code>include/odp/drv</code> directory and related files have been removed. Driver
support is moved to a follow-on ODP release, so removing these files avoids
confusion as they are still incomplete.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_dependency_changes_2">Dependency Changes</h3>
<div class="sect3">
<h4 id="_dependency_on_autoconf_archive_removed">Dependency on autoconf-archive removed</h4>
<div class="paragraph">
<p>Since some build environments do not supply autoconf-archive, this dependency
is removed.</p>
</div>
</div>
<div class="sect3">
<h4 id="_dpdk_support_upgraded_to_17_08_release">DPDK support upgraded to 17.08 release</h4>
<div class="paragraph">
<p>The ODP DPDK Packet I/O support has been upgraded to work with the DPDK 17.08
release.</p>
</div>
</div>
<div class="sect3">
<h4 id="_added_support_for_openssl_1_1_x_releases">Added support for OpenSSL 1.1.x releases</h4>
<div class="paragraph">
<p>ODP use of OpenSSL for crypto processing has been upgraded to allow use of
OpenSSL 1.1.x.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_build_system_restructure">Build System Restructure</h3>
<div class="paragraph">
<p>The ODP build system has been overhauled to support more comprehensive and
efficient automated testing under Travis CI. Greater use of Autoconf is now
made to control ODP configuration and build options, permitting greater
environmental flexibility. This includes an expanded range of test coverage,
including cross-compilation support for ARMv8, MIPS,and Power architectures,
as well as testing under the latest levels of GCC and clang.</p>
</div>
</div>
<div class="sect2">
<h3 id="_arm_architecture_support_improvements">Arm Architecture Support Improvements</h3>
<div class="ulist">
<ul>
<li>
<p>ARMv8 generic timer support is now included</p>
</li>
<li>
<p>Improved time efficiency and accuracy by using native ARMv8 time/clock
instructions.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_test_improvements">Test Improvements</h4>
<div class="paragraph">
<p>The <code>test</code> directory has been reorganized and streamlined. Platform-specific
tests are moved from <code>test/linux-generic</code> to
<code>platform/linux-generic/test/</code>.  As a result, the <code>test/common_plat</code>
directory is deleted so that <code>test/validation</code>, <code>test/performance</code>, etc. are
now used for all platform-independent tests.</p>
</div>
</div>
<div class="sect3">
<h4 id="_examples_improvements_2">Examples Improvements</h4>
<div class="sect4">
<h5 id="_ipv4_fragmentation_reassembly_example">IPv4 Fragmentation Reassembly Example</h5>
<div class="paragraph">
<p>The <code>ipfragreass</code> example program has been added to demonstrate IPv4 fragment
reassembly.</p>
</div>
</div>
<div class="sect4">
<h5 id="_odp_generator_improvements_2">ODP Generator Improvements</h5>
<div class="paragraph">
<p>The <code>odp_generator</code> example program now uses packet references for improved
performance in UDP and ICMP traffic. The program also now makes use of HW
checksum offload support, when available.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_documentation_improvements_2">Documentation Improvements</h3>
<div class="ulist">
<ul>
<li>
<p>The ODP Users Guide has clarified usage information about the ODP time
APIs for better portability.</p>
</li>
<li>
<p>A section has been added to the ODP Users Guide on API specification
principles. This clarifies expected behavior of ODP applications and
implementations and makes explicit what the specification means by "undefined
behavior".</p>
</li>
<li>
<p>All Doxygen used in ODP is upgraded to conform to the stricter documentation
requirements introduced by Doxygen 1.8.13.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_bug_fixes_11">Bug Fixes</h3>
<div class="sect3">
<h4 id="_bug_2254"><a href="https://bugs.linaro.org/show_bug.cgi?id=2254">Bug 2254</a></h4>
<div class="paragraph">
<p>check-odp: valgrind generates "No rule to make target"</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_2407"><a href="https://bugs.linaro.org/show_bug.cgi?id=2407">Bug 2407</a></h4>
<div class="paragraph">
<p>test odp_l2fwd_run.sh contains todo items</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_2812"><a href="https://bugs.linaro.org/show_bug.cgi?id=2812">Bug 2812</a></h4>
<div class="paragraph">
<p>Helper/test/process fails on a single core system</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_2861"><a href="https://bugs.linaro.org/show_bug.cgi?id=2861">Bug 2861</a></h4>
<div class="paragraph">
<p>Remove redundant loop_support parameter in pktio capability</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_2938"><a href="https://bugs.linaro.org/show_bug.cgi?id=2938">Bug 2938</a></h4>
<div class="paragraph">
<p>Make file deps failure</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_2976"><a href="https://bugs.linaro.org/show_bug.cgi?id=2976">Bug 2976</a></h4>
<div class="paragraph">
<p>IP headers checksum functions are incorrect</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3024"><a href="https://bugs.linaro.org/show_bug.cgi?id=3024">Bug 3024</a></h4>
<div class="paragraph">
<p>odp_traffic_mngr example is broken</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3026"><a href="https://bugs.linaro.org/show_bug.cgi?id=3026">Bug 3026</a></h4>
<div class="paragraph">
<p>pktio_ipc_run test can fail due to segfault</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3043"><a href="https://bugs.linaro.org/show_bug.cgi?id=3043">Bug 3043</a></h4>
<div class="paragraph">
<p>User guide error (packet diagram fix)</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3052"><a href="https://bugs.linaro.org/show_bug.cgi?id=3052">Bug 3052</a></h4>
<div class="paragraph">
<p>api-next out of tree build broken</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3066"><a href="https://bugs.linaro.org/show_bug.cgi?id=3066">Bug 3066</a></h4>
<div class="paragraph">
<p>Cross compile broken for ARMv8</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3126"><a href="https://bugs.linaro.org/show_bug.cgi?id=3126">Bug 3126</a></h4>
<div class="paragraph">
<p>IPC pktio test fails with taskset -c 1-2</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3177"><a href="https://bugs.linaro.org/show_bug.cgi?id=3177">Bug 3177</a></h4>
<div class="paragraph">
<p>Test case for classification enable</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3182"><a href="https://bugs.linaro.org/show_bug.cgi?id=3182">Bug 3182</a></h4>
<div class="paragraph">
<p>Memory allocation checks (in traffic manager)</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3216"><a href="https://bugs.linaro.org/show_bug.cgi?id=3216">Bug 3216</a></h4>
<div class="paragraph">
<p>Adding --enable-helper-linux configure flag breaks build</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3238"><a href="https://bugs.linaro.org/show_bug.cgi?id=3238">Bug 3238</a></h4>
<div class="paragraph">
<p>Doxygen warnings on helper header files</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3241"><a href="https://bugs.linaro.org/show_bug.cgi?id=3241">Bug 3241</a></h4>
<div class="paragraph">
<p>codecov: _odp_packet_cmp_data is not covered</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3242"><a href="https://bugs.linaro.org/show_bug.cgi?id=3242">Bug 3242</a></h4>
<div class="paragraph">
<p>setup_pktio_entry missing unlock</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3249"><a href="https://bugs.linaro.org/show_bug.cgi?id=3249">Bug 3249</a></h4>
<div class="paragraph">
<p>odp_cpu_hz() does not work on all Linux distros</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3262"><a href="https://bugs.linaro.org/show_bug.cgi?id=3262">Bug 3262</a></h4>
<div class="paragraph">
<p>Missing doxygen detected by Travis</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3289"><a href="https://bugs.linaro.org/show_bug.cgi?id=3289">Bug 3289</a></h4>
<div class="paragraph">
<p>'num_queues' isn&#8217;t ignored when "classifier_enable" is enabled</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3300"><a href="https://bugs.linaro.org/show_bug.cgi?id=3300">Bug 3300</a></h4>
<div class="paragraph">
<p>Validation tests cannot be disabled after commit b4d17b1</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3411"><a href="https://bugs.linaro.org/show_bug.cgi?id=3411">Bug 3411</a></h4>
<div class="paragraph">
<p>wrong openssl_lock pointer type</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_known_issues_7">Known Issues</h3>
<div class="sect3">
<h4 id="_bug_3245"><a href="https://bugs.linaro.org/show_bug.cgi?id=3245">Bug 3245</a></h4>
<div class="paragraph">
<p>Cannot run l2fwd application on Cavium ThunderX platform</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_opendataplane_1_15_0_0">OpenDataPlane (1.15.0.0)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_new_features_4">New Features</h3>
<div class="paragraph">
<p>ODP v1.15.0.0 continues the preview of Tiger Moth, introducing new APIs and
extensions, as well as numerous bug fixes and functional improvements.</p>
</div>
<div class="sect3">
<h4 id="_deprecation_framework_2">Deprecation Framework</h4>
<div class="paragraph">
<p>To permit smoother evolution of the ODP API specification, a deprecation
framework is introduced to permit controlled deprecation.</p>
</div>
<div class="paragraph">
<p>When an ODP API or defined struct parameter is deprecated, ODP validation
tests will be updated to no longer use that API and instead use the
replacement API. By default, attempts to compile with the older API/feature
will fail and applications wishing to move to the new ODP release should be
updated to use the replacement API. To permit evaluation of new ODP
releases in advance of such updating, however, ODP supports the <code>configure</code>
option <code>--enable-deprecated</code>, which makes the obsolete APIs visible again.</p>
</div>
<div class="paragraph">
<p>This feature will be used on a case-by-case basis and documented in the
release notes for each release that introduces replacement API(s). In general
the deprecated forms will not be maintained for more than a single release
cycle. After that they will no longer be present in the API specification and
the replacement forms must be used to compile with that level of the API
specification.</p>
</div>
</div>
<div class="sect3">
<h4 id="_apis_10">APIs</h4>
<div class="paragraph">
<p>A number of new and refined APIs are introduced in crypto, packet parsing,
and queue configuration:</p>
</div>
<div class="sect4">
<h5 id="_crypto_enhancements">Crypto Enhancements</h5>
<div class="paragraph">
<p>The ODP crypto APIs receive several enhancements in this release:</p>
</div>
<div class="sect5">
<h6 id="_new_authentication_algorithms">New Authentication Algorithms</h6>
<div class="paragraph">
<p>Additional enumerations added for HMAC-SHA-1 and HMAC-SHA-512 authentication.</p>
</div>
</div>
<div class="sect5">
<h6 id="_deprecated_cipherauthentication_algorithms">Deprecated Cipher/Authentication Algorithms</h6>
<div class="paragraph">
<p>The following cipher/authentication algorithms have been deprecated in favor
of newer replacement algorithms:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ODP_CIPHER_ALG_AES128_CBC</code> is replaced by <code>ODP_CIPHER_ALG_AES_CBC</code></p>
</li>
<li>
<p><code>ODP_CIPHER_ALG_AES128_GCM</code> is replaced by <code>ODP_CIPHER_ALG_AES_GCM</code></p>
</li>
<li>
<p><code>ODP_AUTH_ALG_MD5_96</code> is replaced by <code>ODP_AUTH_ALG_MD5_HMAC</code></p>
</li>
<li>
<p><code>ODP_AUTH_ALG_SHA256_128</code> is replaced by <code>ODP_AUTH_ALG_SHA256_HMAC</code></p>
</li>
<li>
<p><code>ODP_AUTH_ALG_AES128_GCM1 is replaced by `ODP_AUTH_ALG_AES_GCM</code></p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_deprecated_name_for_crypto_parameter_struct">Deprecated Name for Crypto Parameter struct</h6>
<div class="paragraph">
<p><code>odp_crypto_op_params_t</code> is deprecated in favor of <code>odp_crypto_op_param_t</code>
for consistency with other ODP <code>param</code> structs.</p>
</div>
</div>
<div class="sect5">
<h6 id="_digest_length_session_parameter">Digest Length Session Parameter</h6>
<div class="paragraph">
<p><code>odp_crypto_session_param_t</code> adds the field <code>auth_digest_len</code> to permit
specification of the authentication digest length to be used for this
session. The <code>odp_crypto_auth_capability()</code> API returns the list of
supported digest lengths.</p>
</div>
</div>
<div class="sect5">
<h6 id="_additional_authentication_data_aad">Additional Authentication Data (AAD)</h6>
<div class="paragraph">
<p>The <code>odp_crypto_op_param_t</code> struct adds an optional pointer and length for
AAD information. This allows applications to specify AAD information from
the list of supported lengths provided by <code>odp_crypto_auth_capability()</code>.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_packet_range_data">Packet Range Data</h5>
<div class="paragraph">
<p>The former <code>odp_crypto_data_range_t</code> type is deprecated and renamed to
<code>odp_packet_data_range_t</code> since it can be used to specify ranges for other
than crypto purposes.</p>
</div>
</div>
<div class="sect4">
<h5 id="_parser_configuration">Parser Configuration</h5>
<div class="paragraph">
<p>Applications may now specify the maximum packet layer of interest. For
example, a router may not care about anything beyond ISO Layer 3 in packets.
This can be used by ODP implementations to control the depth of packet
parsing needed by the application and may allow greater efficiency,
especially in software implementations.</p>
</div>
<div class="paragraph">
<p>This is controlled by a new <code>odp_pktio_parser_layer_t</code> enum that is
part of the new <code>odp_pktio_parser_config_t</code> struct that is added to the
<code>odp_pktio_config_t</code> struct used by the <code>odp_pktio_config()</code> API. The
supported parser layers are also returned in this struct as part of the
<code>odp_pktio_capability_t</code> struct returned by the <code>odp_pktio_capability()</code> API.</p>
</div>
</div>
<div class="sect4">
<h5 id="_queue_size_parameter">Queue Size Parameter</h5>
<div class="paragraph">
<p>The <code>odp_queue_capability_t</code> struct returned by the <code>odp_queue_capability()</code>
API is enhanced as follows:
* The <code>max_queues</code> field is now defined to return the maximum number of event
queues of any type.
* New sub-structs (<code>plain</code> and <code>sched</code>) are added that detail the <code>max_num</code> of
queues of that type supported as well as the new field <code>max_size</code> that
specifies the maximum number of elements that each queue of this type can
store. A value of zero for <code>max_num</code> indicates no fixed limit.</p>
</div>
<div class="paragraph">
<p>In addition, the <code>odp_queue_param_t</code> passed to <code>odp_queue_create()</code> now adds
a <code>size</code> field to allow applications to specify the minimum number of events
that this queue should be able to store. A value of zero specified requests that
the implementation default limits be used.</p>
</div>
<div class="paragraph">
<p>The ODP examples have been updated to show this configuration, for example,
the <code>l2fwd_simple</code> example does Layer 2 forwarding and hence doesn&#8217;t need
packets to be parsed beyond Layer 2. So prior to opening an interface via
<code>odp_pktio_open()</code> the configuration processing now includes code of the form:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-c" data-lang="c">odp_pktio_config_init(&amp;config);
config.parser.layer = ODP_PKTIO_PARSER_LAYER_L2;
odp_pktio_config(pktio, &amp;config);</code></pre>
</div>
</div>
<div class="paragraph">
<p>This serves as a hint to the ODP implementation that parsing beyond Layer 2
is not required on this interface.</p>
</div>
</div>
<div class="sect4">
<h5 id="_removal_of_odp_time_to_u64_api">Removal of <code>odp_time_to_u64()</code> API</h5>
<div class="paragraph">
<p>The <code>odp_time_to_u64()</code> API is removed without deprecation in this release.
This is redundant since the <code>odp_time_to_ns()</code> API already returns a <code>uint64_t</code>
value for <code>odp_time_t</code> and can be used for the same purpose.</p>
</div>
</div>
<div class="sect4">
<h5 id="_new_odp_sys_info_print_api">New <code>odp_sys_info_print()</code> API</h5>
<div class="paragraph">
<p>For debugging / diagnostic use, the <code>odp_sys_info_print()</code> API is added.
This prints implementation defined information about the system and ODP
environment and may contain information about CPUs, memory, and other
hardware configuration.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_helpers">Helpers</h3>
<div class="sect3">
<h4 id="_linux_helpers">Linux Helpers</h4>
<div class="paragraph">
<p>ODP helper functions fall into two categories: system-independent, and those
that rely on Linux. For backwards compatibility, these have been
reorganized into a new <code>helper/linux</code> directory that is installed only when
the <code>--enable-helper-linux</code> <code>configure</code> option is specified.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_odp_linux_performance"><code>odp-linux</code> Performance</h3>
<div class="sect3">
<h4 id="_scheduler_improvements">Scheduler Improvements</h4>
<div class="paragraph">
<p>The default scheduler is streamlined by using precomputed weight tables and
separated priority queues for different scheduling groups. This improves
both latency and scalability.</p>
</div>
<div class="paragraph">
<p>Also included in this change, the default number of scheduling groups is
lowered from 256 to 32, which experience has shown is sufficient for most
applications.</p>
</div>
<div class="paragraph">
<p>The scheduler fairness checks are also enhanced to avoid low priority event
starvation if <code>CONFIG_BURST_SIZE</code> is set to 1.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_odp_linux_crypto_improvements"><code>odp_linux</code> Crypto Improvements</h3>
<div class="ulist">
<ul>
<li>
<p>Errors in implicit packet copy operations performed during crypto operation
are now handled properly.</p>
</li>
<li>
<p>If <code>odp_crypto_session_create()</code> fails, proper cleanup is now performed to
avoid memory leaks.</p>
</li>
<li>
<p>The auth digest len is now used when calculating HMACs, and full-length
digests are now added to supported SHA capabilities.</p>
</li>
<li>
<p>Numerous crypto functions have been rewritten to use the OpenSSL <code>EVP_</code>
functions for improved efficiency and accuracy.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_odp_linux_packet_improvements"><code>odp-linux</code> Packet Improvements</h3>
<div class="ulist">
<ul>
<li>
<p>The packet parser now recognizes ICMPv6 packets in addition to ICMPv4.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_odp_linux_pktio_improvements"><code>odp-linux</code> PktIO Improvements</h3>
<div class="ulist">
<ul>
<li>
<p>The <code>ethtool</code> and <code>socket</code> drivers add additional initializations to avoid
valgrind warnings.</p>
</li>
<li>
<p>The <code>dpdk</code> driver is upgraded to DPDK 17.02 and is now also built with the
<code>--whole-archive</code> option, which means that PMDs no longer need to be linked
individually but are automatically included in builds that make use of DPDK
pktio support.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_odp_linux_time_improvements"><code>odp-linux</code> Time Improvements</h3>
<div class="ulist">
<ul>
<li>
<p>The ODP Time APIs are now more efficiently handled by replacing the previous
Linux timespec with simple nanoseconds (ns) and using native hardware time
counters in x86 and ARM environments, when available.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_odp_linux_traffic_manager_improvements"><code>odp-linux</code> Traffic Manager Improvements</h3>
<div class="ulist">
<ul>
<li>
<p>Weighting is now handled properly when weight=1 is specified. Previously
this caused an overflow that distorted packet priorities.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_miscellaneous_fixes_and_improvements_3">Miscellaneous Fixes and Improvements</h3>
<div class="sect3">
<h4 id="_native_clang_build_on_armv8">Native Clang build on ARMv8</h4>
<div class="paragraph">
<p>ARMv8 compilation now works properly when using the clang compiler.</p>
</div>
</div>
<div class="sect3">
<h4 id="_test_improvements_2">Test Improvements</h4>
<div class="ulist">
<ul>
<li>
<p>The <code>odp_scheduling</code> performance test now handles dequeueing from
potentially concurrent queues properly.</p>
</li>
<li>
<p>The traffic manager and time tests are now invoked via scripts to better
account for load-sensitivity when running regressions in CI environments.</p>
</li>
<li>
<p>The l2fwd test now supports an additional parameter to specify the number
of scheduling groups to use in the test.</p>
</li>
<li>
<p>The <code>odp_sched_latency</code> performance test now handles queue draining in
a robust manner.</p>
</li>
<li>
<p>The crypto validation tests now properly check and validate message digests,
and include negative tests to verify that incorrect digests are properly
flagged. Note that this may expose omissions in other ODP implementations that
had previously passed this validation test.</p>
</li>
<li>
<p>The crypto validation test now adds an explicit test for the NULL cipher,
as well as HMAC-SHA-1 and HMAC-SHA-512.</p>
</li>
<li>
<p>The pktio_ipc test now properly cleans up only its own temp files.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_examples_improvements_3">Examples Improvements</h4>
<div class="ulist">
<ul>
<li>
<p>The <code>odp_generator</code> example now properly honors stop criteria based on
number of packets sent.</p>
</li>
<li>
<p>The <code>odp_generator</code> example now properly flushes output messages</p>
</li>
<li>
<p>The <code>odp_generator</code> example now supports port configuration.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_bug_fixes_12">Bug Fixes</h3>
<div class="sect3">
<h4 id="_bug_2416"><a href="https://bugs.linaro.org/show_bug.cgi?id=2416">Bug 2416</a></h4>
<div class="paragraph">
<p>example/generator/odp_generator.c contains todo items</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_2779"><a href="https://bugs.linaro.org/show_bug.cgi?id=2779">Bug 2779</a></h4>
<div class="paragraph">
<p>Error handling issues (CHECKED_RETURN)</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_2826"><a href="https://bugs.linaro.org/show_bug.cgi?id=2826">Bug 2826</a></h4>
<div class="paragraph">
<p>Unchecked return in pool.c</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_2831"><a href="https://bugs.linaro.org/show_bug.cgi?id=2831">Bug 2831</a></h4>
<div class="paragraph">
<p>Unchecked return in mmap_unmap_sock()</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_2852"><a href="https://bugs.linaro.org/show_bug.cgi?id=2852">Bug 2852</a></h4>
<div class="paragraph">
<p>ODP_STATIC_ASSERT() fails when used by C++</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_2872"><a href="https://bugs.linaro.org/show_bug.cgi?id=2872">Bug 2872</a></h4>
<div class="paragraph">
<p>odp_pktio_ordered_run.sh: line 34: integer expression expected</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_2881"><a href="https://bugs.linaro.org/show_bug.cgi?id=2881">Bug 2881</a></h4>
<div class="paragraph">
<p>load sensitive tests fail on CI</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_2895"><a href="https://bugs.linaro.org/show_bug.cgi?id=2895">Bug 2895</a></h4>
<div class="paragraph">
<p>The <code>odp_crypto_operation()</code> routine does not work with multi-segment packets.</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_2908"><a href="https://bugs.linaro.org/show_bug.cgi?id=2908">Bug 2908</a></h4>
<div class="paragraph">
<p>Packet validation test fails if implementation does not limit packet length</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_2910"><a href="https://bugs.linaro.org/show_bug.cgi?id=2910">Bug 2910</a></h4>
<div class="paragraph">
<p>odph_iplookup_table_put_value() uses overlapping pointer addresses</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_2933"><a href="https://bugs.linaro.org/show_bug.cgi?id=2933">Bug 2933</a></h4>
<div class="paragraph">
<p>Miss to call unlock if there are some errors happen in loopback_send() function</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_2940"><a href="https://bugs.linaro.org/show_bug.cgi?id=2940">Bug 2940</a></h4>
<div class="paragraph">
<p><code>odp_packet_seg_t</code> fails ABI compatibility between odp-linux and odp-dpdk</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_2942"><a href="https://bugs.linaro.org/show_bug.cgi?id=2942">Bug 2942</a></h4>
<div class="paragraph">
<p>Compilation fails using clang 4.0.0</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_2952"><a href="https://bugs.linaro.org/show_bug.cgi?id=2952">Bug 2952</a></h4>
<div class="paragraph">
<p>doxygen errors and travis does not catch them</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_2969"><a href="https://bugs.linaro.org/show_bug.cgi?id=2969">Bug 2969</a></h4>
<div class="paragraph">
<p>TM validation test does find traffic_mngr_main</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_2974"><a href="https://bugs.linaro.org/show_bug.cgi?id=2974">Bug 2974</a></h4>
<div class="paragraph">
<p><code>odp_rwlock_read_trylock()</code> fails if lock is already held for read access</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3002"><a href="https://bugs.linaro.org/show_bug.cgi?id=3002">Bug 3002</a></h4>
<div class="paragraph">
<p>Packet order lost when enqueuing to pktout queue</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3003"><a href="https://bugs.linaro.org/show_bug.cgi?id=3003">Bug 3003</a></h4>
<div class="paragraph">
<p>AES-GCM returns 'valid' tag when checking invalid tag</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3013"><a href="https://bugs.linaro.org/show_bug.cgi?id=3013">Bug 3013</a></h4>
<div class="paragraph">
<p>Various failures if CONFIG_PACKET_MAX_SEGS is set to 1</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3017"><a href="https://bugs.linaro.org/show_bug.cgi?id=3017">Bug 3017</a></h4>
<div class="paragraph">
<p>Travis: time main test out of boundaries</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3027"><a href="https://bugs.linaro.org/show_bug.cgi?id=3027">Bug 3027</a></h4>
<div class="paragraph">
<p>Compilation failures using GCC 7 series</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3039"><a href="https://bugs.linaro.org/show_bug.cgi?id=3039">Bug 3039</a></h4>
<div class="paragraph">
<p>Socket pktio recv fails on large number of packet</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_known_issues_8">Known Issues</h3>
<div class="sect3">
<h4 id="_bug_3024_2"><a href="https://bugs.linaro.org/show_bug.cgi?id=3024">Bug 3024</a></h4>
<div class="paragraph">
<p>odp_traffic_mngr example is broken</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_3026_2"><a href="https://bugs.linaro.org/show_bug.cgi?id=3026">Bug 3026</a></h4>
<div class="paragraph">
<p>pktio_ips_run test can fail due to segfault</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_opendataplane_1_14_0_0">OpenDataPlane (1.14.0.0)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_new_features_5">New Features</h3>
<div class="sect3">
<h4 id="_apis_11">APIs</h4>
<div class="paragraph">
<p>ODP v1.14.0.0 represents another preview of the Tiger Moth release series and
introduces new APIs and extensions.</p>
</div>
<div class="sect4">
<h5 id="_packet_references">Packet References</h5>
<div class="paragraph">
<p>Packet references are a lightweight mechanism to allow applications to create
and manipulate different "views" of packets. These views consist of shared
bytes common to all references created on the same <code>odp_packet_t</code>, possibly
prefixed with unique headers that are private to each reference. Five new APIs
are introduced to enable this feature:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>odp_packet_ref_static()</code></dt>
<dd>
<p>Static references allow a single packet to have multiple "aliases", all of
which must be treated as read only. This is useful, for example, to retain
a reference to a packet being transmitted to support retransmit processing,
since the actual storage represented by a packet is not released until all
references to it have been freed via <code>odp_packet_free()</code> calls.</p>
</dd>
<dt class="hdlist1"><code>odp_packet_ref()</code></dt>
<dd>
<p>Dynamic references differ from static references is that they permit the
individual <code>odp_packet_t</code> handles to have unique prefixes created via
<code>odp_packet_push_head()</code> or <code>odp_packet_extend_head()</code> calls. This can be
used, for example, to support multicasting packets to different destinations
by creating packets that consist of unique headers followed by a common shared
payload.</p>
</dd>
<dt class="hdlist1"><code>odp_packet_ref_pkt()</code></dt>
<dd>
<p>Similar to <code>odp_packet_ref()</code>, but creates a dynamic reference by prepending a
preexisting header onto another packet.</p>
</dd>
<dt class="hdlist1"><code>odp_packet_has_ref()</code></dt>
<dd>
<p>Returns a boolean indicator of whether a given <code>odp_packet_t</code> has other
references that share bytes with this packet.</p>
</dd>
<dt class="hdlist1"><code>odp_packet_unshared_len()</code></dt>
<dd>
<p>Returns the number of unshared bytes accessible through a given <code>odp_packet_t</code>
handle. These are the only bytes that should be changed. All other bytes
in the packet should be treated as read only as they are shared with other
<code>odp_packet_t</code> handles.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Note that while the packet reference APIs and associated validation tests are
present in this release, the <code>odp-linux</code> reference implementation currently
implements references via packet copying. A zero-copy implementation of packet
references is planned to be part of the ODP v1.15.0.0 release.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_abi_specification">ABI Specification</h4>
<div class="paragraph">
<p>ODP has supported an Application Binary Interface (ABI) that permits
applications to be generated that are binary portable between select ODP
implementations. This is now formalized with the addition of structures that
permit ABI specifications to be defined that are shared between ODP
implementations. ODP provides a default ABI specification that is the same as
was provided before. This change means that additional ABIs may be defined
that are optimized to collections of platforms that share an Instruction Set
Architecture (ISA) and subscribe to them.</p>
</div>
<div class="paragraph">
<p>ABI specifications live in the <code>include/odp/arch/&#8230;&#8203;</code> directory.</p>
</div>
</div>
<div class="sect3">
<h4 id="_instance_query_iquery_scheduler">Instance Query (iQuery) Scheduler</h4>
<div class="paragraph">
<p>Adding to the range of scheduler implementations supported by <code>odp-linux</code>, a
new scheduler, the instance query scheduler, is available by specifying
<code>--enable-schedule-iquery</code> at <code>configure</code> time.</p>
</div>
<div class="paragraph">
<p>This scheduler uses sparse bitmaps and offers scalability advantages when
dealing with large numbers of schedule queues. It otherwise offers performance
comparable to the default ODP scheduler implementation.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_helpers_2">Helpers</h3>
<div class="paragraph">
<p>Helpers have been reorganized to provide better independence from odp-linux
and to make them more useful with other ODP implementations. These
reorganizations are functionally transparent to ODP users but should
simplifying packaging and porting to other ODP implementations. This includes
adding the "umbrella" include file <code>odph_api.h</code> which can be used to include
all helper API definitions in an application.</p>
</div>
</div>
<div class="sect2">
<h3 id="_classifier_improvements">Classifier Improvements</h3>
<div class="paragraph">
<p>The <code>odp-linux</code> reference implementation now supports Pattern Matching Rules
(PMRs) for IPv6 addresses, inner and outer VLAN IDs, and inner and outer
Ethernet types.</p>
</div>
</div>
<div class="sect2">
<h3 id="_performance">Performance</h3>
<div class="sect3">
<h4 id="_improved_inlining_for_embedded_applications">Improved inlining for embedded applications</h4>
<div class="paragraph">
<p>The <code>odp-linux</code> reference implementation now offers improved inlining support
for ODP APIs for applications compiled against ODP configured with the
<code>--enable-abi-compat=no</code> option, meaning they wish to forego binary
compatibility in exchange for improved performance. These applications remain
source portable to other ODP implementations.</p>
</div>
</div>
<div class="sect3">
<h4 id="_native_odp_cpu_pause_for_arm_processors">Native <code>odp_cpu_pause()</code> for ARM processors</h4>
<div class="paragraph">
<p>A native implementation of the <code>odp_cpu_pause()</code> API has been added for ARMv7
and ARMv8 processors.</p>
</div>
</div>
<div class="sect3">
<h4 id="_new_microbenchmark">New Microbenchmark</h4>
<div class="paragraph">
<p>The <code>odp_packet_bench</code> microbenchmark application has been added to the
test performance directory to allow implementations to measure and calibrate
the performance of individual ODP packet APIs.</p>
</div>
</div>
<div class="sect3">
<h4 id="_ordered_pktio_test">Ordered PktIO Test</h4>
<div class="paragraph">
<p>The <code>odp_pktio_ordered</code> application has been added to the test performance
directory to provide stress-testing of packet ordering features of ODP.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="paragraph">
<p>In addition to expanded documentation related to the new packet reference APIs,
a section on application portability has been added that discusses the types
of portability offered by ODP and the tradeoffs that application writers should
consider when using ODP.</p>
</div>
</div>
<div class="sect2">
<h3 id="_bug_fixes_13">Bug Fixes</h3>
<div class="sect3">
<h4 id="_bug_2806"><a href="https://bugs.linaro.org/show_bug.cgi?id=2806">Bug 2806</a></h4>
<div class="paragraph">
<p>The <code>hello.c</code> application can now run properly if Core 0 is not
available (any available core will be used).</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_2827"><a href="https://bugs.linaro.org/show_bug.cgi?id=2827">Bug 2827</a></h4>
<div class="paragraph">
<p>Provide proper return code checking within _ishm.c</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_2829"><a href="https://bugs.linaro.org/show_bug.cgi?id=2829">Bug 2829</a></h4>
<div class="paragraph">
<p>Remove unused variables in iplookuptable helper routine.</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_2830"><a href="https://bugs.linaro.org/show_bug.cgi?id=2830">Bug 2830</a></h4>
<div class="paragraph">
<p>Avoid memory leaks on error paths in the cuckoo table helper functions.</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_2834"><a href="https://bugs.linaro.org/show_bug.cgi?id=2834">Bug 2834</a></h4>
<div class="paragraph">
<p>Fixes a race condition in shared memory allocation.</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_2842"><a href="https://bugs.linaro.org/show_bug.cgi?id=2842">Bug 2842</a></h4>
<div class="paragraph">
<p>Provide proper fallback for shared memory when hugepages are not available.</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_2862"><a href="https://bugs.linaro.org/show_bug.cgi?id=2862">Bug 2862</a></h4>
<div class="paragraph">
<p>Avoid null pointer dereference in the iplookuptable helper routine.</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_2865"><a href="https://bugs.linaro.org/show_bug.cgi?id=2865">Bug 2865</a></h4>
<div class="paragraph">
<p>Missing doxygen documentation for helper table functions are added.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_known_issues_9">Known Issues</h3>
<div class="sect3">
<h4 id="_bug_2852_2"><a href="https://bugs.linaro.org/show_bug.cgi?id=2852">Bug 2852</a></h4>
<div class="paragraph">
<p>C++ programs fail to compile if they attempt to include the ODP helper APIs.</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_2895_2"><a href="https://bugs.linaro.org/show_bug.cgi?id=2895">Bug 2895</a></h4>
<div class="paragraph">
<p>The <code>odp_crypto_operation()</code> routine does not work with multi-segment packets.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_opendataplane_1_13_0_0">OpenDataPlane (1.13.0.0)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_new_features_6">New Features</h3>
<div class="sect3">
<h4 id="_apis_12">APIs</h4>
<div class="paragraph">
<p>ODP v1.13.0.0 represents the initial preview of the Tiger Moth release series
and as such introduces new APIs and extensions that will be built on as this
release matures.</p>
</div>
<div class="sect4">
<h5 id="_crypto_parameter_normalization">Crypto Parameter Normalization</h5>
<div class="paragraph">
<p>Many ODP APIs take parameter structs of type <code>odp_xxx_param_t</code>. The crypto APIs,
for historical reasons, failed to follow this convention, using instead structs
of type <code>odp_crypto_params_t</code>, etc. These pluralized names are now deprecated
and their singular forms are introduced as the preferred names for these
structs. The old names are retained (for now) to ease migration, however
applications should convert to the new forms at their convenience as these
deprecated forms will be removed in the final Tiger Moth release.</p>
</div>
<div class="paragraph">
<p>The changes introduced for this include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>odp_crypto_op_params_t</code> &#8658; <code>odp_crypto_op_param_t</code></p>
</li>
<li>
<p><code>odp_crypto_session_params_t</code> &#8658; <code>odp_crypto_session_param_t</code></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_crypto_decouple_key_length_from_algorithm_specification">Crypto Decouple Key Length from Algorithm Specification</h5>
<div class="paragraph">
<p>To provide a more flexible programming for handling all possible
key/digest/iv length combinations, the enums used for crypto specification
are split to decouple lengths from algorithm names. The only exception
is the SHA-2 family of hash routines, which have well-established naming
conventions that incorporate digest lengths (SHA-224, SHA-256, etc.)</p>
</div>
<div class="paragraph">
<p>Changes included with this restructure include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>odp_crypto_capability_t</code> structure returned by the
<code>odp_crypto_capability()</code> API contains streamlined <code>odp_crypto_cipher_algos_t</code>
and <code>odp_crypto_auth_algos_t</code> substructures.</p>
</li>
<li>
<p>A new <code>odp_crypto_cipher_capability()</code> API is added to return detailed
information about available cipher capabilities.</p>
</li>
<li>
<p>A new <code>odp_crypto_auth_capability()</code> API is added to return detailed
information about available authentication capabilities.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_odp_crypto_session_param_init_api"><code>odp_crypto_session_param_init()</code> API</h5>
<div class="paragraph">
<p>For completeness the <code>odp_crypto_session_param_init()</code> API is provided to
enable platform-independent initialization of the <code>odp_crypto_session_param_t</code>
structure used as input to <code>odp_crypto_session_create()</code>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_bitfield_and_byteorder_cleanup">Bitfield and Byteorder Cleanup</h5>
<div class="paragraph">
<p>The <code>ODP_BITFIELD_ORDER</code> define is added to the ODP specification to parallel
the existing <code>ODP_BYTEFIELD_ORDER</code> define. This will be set to the value
<code>ODP_BIG_ENDIAN_BITFIELD</code> or <code>ODP_LITTLE_ENDIAN_BITFIELD</code>. This also addresses
<a href="https://bugs.linaro.org/show_bug.cgi?id=2402">Bug 2402</a>, however since fixing
this required a small API change this was deferred until an API release
boundary.</p>
</div>
</div>
<div class="sect4">
<h5 id="_improved_name_argument_definitions_in_odp_xxx_create_functions">Improved Name Argument Definitions in <code>odp_xxx_create()</code> Functions</h5>
<div class="paragraph">
<p>The use of name arguments to the various resource creation APIs has
been standardized and documentation improved to clarify that unique
names are not required and that these may be specified as NULL for
anonymous resource creation. When non-unique resource names are used, it is
unspecified which of these are returned by a corresponding lookup API.</p>
</div>
</div>
<div class="sect4">
<h5 id="_pool_parameters_for_packet_pools">Pool Parameters for Packet Pools</h5>
<div class="paragraph">
<p>The <code>odp_pool_param_t</code> structure adds the new field <code>max_len</code> to be used in
packet pools to advise the implementation of the maximum sized packet that
the application will allocate with a single <code>odp_packet_alloc()</code> call. This
may enable storage pool optimization.</p>
</div>
</div>
<div class="sect4">
<h5 id="_packet_clarifications">Packet Clarifications</h5>
<div class="paragraph">
<p>API documentation for <code>odp_packet_concat()</code> and <code>odp_packet_copy_from_pkt()</code>
is clarified to specify that the source and destination packets supplied to
these APIs should not refer to the same packet.</p>
</div>
</div>
<div class="sect4">
<h5 id="_packet_allocation_length_clarification">Packet Allocation Length Clarification</h5>
<div class="paragraph">
<p>API documentation for <code>odp_packet_alloc()</code> is clarified to specify that
the supplied length for requested packet allocation should be greater
than zero.</p>
</div>
</div>
<div class="sect4">
<h5 id="_random_api_changes">Random API Changes</h5>
<div class="paragraph">
<p>The APIs provided for working with random data have been revised. The third
parameter to <code>odp_random_data()</code> is now of type <code>odp_random_kind_t</code>, which is
an <code>enum</code> that is used to specify the quality of random data required. The
kinds of random data defined are:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>ODP_RANDOM_BASIC</code></dt>
<dd>
<p>No specific quality guarantees. This is assumed to be pseudo-random data
generated by software where speed of generation is more important than the
quality of the results.This is the lowest kind of random.</p>
</dd>
<dt class="hdlist1"><code>ODP_RANDOM_CRYPTO</code></dt>
<dd>
<p>Random data suitable for use in cryptographic operations.</p>
</dd>
<dt class="hdlist1"><code>ODP_RANDOM_TRUE</code></dt>
<dd>
<p>True random data generated from a hardware entropy source. This is the
highest kind of random.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The <code>odp_random_max_kind()</code> API is provided that returns the highest kind of
data available on this implementation. Requests for higher kinds than can be
supplied will fail.</p>
</div>
<div class="paragraph">
<p>For testing purposes it is often desirable to generate "random" sequences that
are repeatable. To support this use case, the <code>odp_random_test_data()</code> API is
introduced. This always returns BASIC random data but uses a user-supplied
64-byte seed parameter that is update for each call and can be used to
repeat the same sequence as needed.</p>
</div>
</div>
<div class="sect4">
<h5 id="_shared_memory_improvements">Shared Memory Improvements</h5>
<div class="paragraph">
<p>The <code>odp_shm_reserve()</code> API adds two new additional flags to support external
memory.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ODP_SHM_SINGLE_VA</code> guarantees that all ODP threads sharing this memory
will see the block at the same virtual address regardless of whether threads
are implemented as pthreads or processes and when <code>fork()</code> calls are made to
create them.</p>
</li>
<li>
<p><code>ODP_SHM_EXPORT</code> allows the memory block to be visible to other ODP
instances. Other ODP instances can retrieve this block via the new
<code>odp_shm_import()</code> API.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_classification_clarifications">Classification Clarifications</h5>
<div class="paragraph">
<p>The relationship between classification and queue configuration in the
<code>odp_pktin_queue_param_t</code> structure is clarified to emphasize that
classification subsumes queue-based I/O processing. This is an API
documentation change only.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_helpers_3">Helpers</h3>
<div class="paragraph">
<p>New helper APIs are introduced for IP table lookup support for longest prefix
matching as well as cuckoo hash tables. These are designed to provide analogs
to functions available in DPDK to assist applications being ported to ODP.</p>
</div>
</div>
<div class="sect2">
<h3 id="_performance_improvements">Performance Improvements</h3>
<div class="paragraph">
<p>The odp-linux reference implementation includes a number of improvements to
make it more suitable for production use on platforms that rely on software
implementations of key ODP APIs.</p>
</div>
<div class="sect3">
<h4 id="_ring_based_pool_implementation">Ring-based Pool Implementation</h4>
<div class="paragraph">
<p>Storage pools used for buffers and packets are now implemented via lockless
ring structures that support burst mode read/writes to local caches for
significantly improved multi-core scalability</p>
</div>
</div>
<div class="sect3">
<h4 id="_bufferpacket_header_optimizations">Buffer/Packet Header Optimizations</h4>
<div class="paragraph">
<p>The layout of the structs used to support buffers and packets has been
optimized to reduce cache footprint and minimize path lengths in packet
manipulation.</p>
</div>
</div>
<div class="sect3">
<h4 id="_ordered_queue_improvements">Ordered Queue Improvements</h4>
<div class="paragraph">
<p>The implementation of ordered queues has been streamlined and made more
scalable in multi-core systems.</p>
</div>
</div>
<div class="sect3">
<h4 id="_packet_segmentation_improvements">Packet Segmentation Improvements</h4>
<div class="paragraph">
<p>The more advance segmentation capabilities present in the new ODP packet
implementation are used to streamline the implementation of APIs like
<code>odp_packet_concat()</code> and the head/tail extend/trunc APIs.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_bug_fixes_14">Bug Fixes</h3>
<div class="sect3">
<h4 id="_bug_2405"><a href="https://bugs.linaro.org/show_bug.cgi?id=2405">Bug 2405</a></h4>
<div class="paragraph">
<p>A number of "todos" were removed from the packet validation test suite.</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_2472"><a href="https://bugs.linaro.org/show_bug.cgi?id=2472">Bug 2472</a></h4>
<div class="paragraph">
<p>The CPU affinity is now correctly read from the cpuset.</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_2496"><a href="https://bugs.linaro.org/show_bug.cgi?id=2496">Bug 2496</a></h4>
<div class="paragraph">
<p>The PktIO validation test no longer uses invalid MAC addresses.</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_2512"><a href="https://bugs.linaro.org/show_bug.cgi?id=2512">Bug 2512</a></h4>
<div class="paragraph">
<p>The TCP checksum is now properly calculated for generated packets.</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_2798"><a href="https://bugs.linaro.org/show_bug.cgi?id=2798">Bug 2798</a></h4>
<div class="paragraph">
<p>The odp-linux reference implementation makes use of the OpenSSL library to
support the <code>odp_random_xxx()</code> APIs and some crypto operations. To support
OpenSSL versions prior to 1.1.0, which are not thread safe, support is added
for OpenSSL locking callbacks that use ODP ticketlocks to provide OpenSSL thread
safety.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_known_issues_10">Known Issues</h3>
<div class="sect3">
<h4 id="_bug_2812_2"><a href="https://bugs.linaro.org/show_bug.cgi?id=2812">Bug 2812</a></h4>
<div class="paragraph">
<p>Make check fails on a single core VM in the process mode helper test.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_opendataplane_1_12_0_0">OpenDataPlane (1.12.0.0)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_new_features_7">New Features</h3>
<div class="sect3">
<h4 id="_apis_13">APIs</h4>
<div class="paragraph">
<p>ODP v1.12.0.0 has no API changes from previous v1.11.0 Monarch LTS. Version
is increased in current development release to make room for Monarch updates
numbers.</p>
</div>
</div>
<div class="sect3">
<h4 id="_application_binary_interface_abi_support">Application Binary Interface (ABI) Support</h4>
<div class="paragraph">
<p>Support is added to enable ODP applications to be binary compatible across
different implementations of ODP sharing the same Instruction Set Architecture
(ISA). This support introduces a new <code>configure</code> option:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>no abi disable option</code></dt>
<dd>
<p>This is the default and specifies that the ODP library is to be built to
support ABI compatibility mode. In this mode ODP APIs are never inlined. ABI
compatibility ensures maximum application portability in cloud environments.</p>
</dd>
<dt class="hdlist1"><code>--disable-abi-compat</code></dt>
<dd>
<p>Specify this option to enable the inlining of ODP APIs. This may result in
improved performance at the cost of ABI compatibility and is suitable for
applications running in embedded environments.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Note that ODP applications retain source code portability between ODP
implementations regardless of the ABI mode chosen. To move to a different ODP
application running on a different ISA, code need simply be recompiled against
that target ODP implementation.</p>
</div>
</div>
<div class="sect3">
<h4 id="_sctp_parsing_support">SCTP Parsing Support</h4>
<div class="paragraph">
<p>The ODP classifier adds support for recognizing Stream Control Transmission
Protocol (SCTP) packets. The APIs for this were previously not implemented.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_packaging_and_implementation_refinements">Packaging and Implementation Refinements</h3>
<div class="sect3">
<h4 id="_remove_dependency_on_linux_headers">Remove dependency on Linux headers</h4>
<div class="paragraph">
<p>ODP no longer has a dependency on Linux headers. This will help make the
odp-linux reference implementation more easily portable to non-Linux
environments.</p>
</div>
</div>
<div class="sect3">
<h4 id="_remove_dependency_on_helpers">Remove dependency on helpers</h4>
<div class="paragraph">
<p>The odp-linux implementation has been made independent of the helper library
to avoid circular dependency issues with packaging. Helper functions may use
ODP APIs, however ODP implementations should not use helper functions.</p>
</div>
</div>
<div class="sect3">
<h4 id="_reorganization_of_test_directory">Reorganization of <code>test</code> directory</h4>
<div class="paragraph">
<p>The <code>test</code> directory has been reorganized to better support a unified approach
to ODP component testing. API tests now live in
<code>test/common_plat/validation/api</code> instead of the former
<code>test/validation</code>. With this change performance and validation tests, as well
as common and platform-specific tests can all be part of a unified test
hierarchy.</p>
</div>
<div class="paragraph">
<p>The resulting test tree now looks like:</p>
</div>
<div class="listingblock">
<div class="title">New <code>test</code> directory hierarchy</div>
<div class="content">
<pre>test
├── common_plat
│   ├── common
│   ├── m4
│   ├── miscellaneous
│   ├── performance
│   └── validation
│       └── api
│           ├── atomic
│           ├── barrier
│           ├── buffer
│           ├── classification
│           ├── cpumask
│           ├── crypto
│           ├── errno
│           ├── hash
│           ├── init
│           ├── lock
│           ├── packet
│           ├── pktio
│           ├── pool
│           ├── queue
│           ├── random
│           ├── scheduler
│           ├── shmem
│           ├── std_clib
│           ├── system
│           ├── thread
│           ├── time
│           ├── timer
│           └── traffic_mngr
├── linux-generic
│   ├── m4
│   ├── mmap_vlan_ins
│   ├── performance
│   ├── pktio_ipc
│   ├── ring
│   └── validation
│       └── api
│           ├── pktio
│           └── shmem
└── m4</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_pools">Pools</h4>
<div class="paragraph">
<p>The maximum number of pools that may be created in the odp-linux reference
implementation has been raised from 16 to 64.</p>
</div>
</div>
<div class="sect3">
<h4 id="_upgrade_to_dpdk_16_07">Upgrade to DPDK 16.07</h4>
<div class="paragraph">
<p>The DPDK pktio support in odp-linux has been upgraded to work with DPDK 16.07.
A number of miscellaneous fixes and performance improvements in this support
are also present.</p>
</div>
</div>
<div class="sect3">
<h4 id="_pktio_tap_interface_classifier_support">PktIO TAP Interface Classifier Support</h4>
<div class="paragraph">
<p>Packet I/O interfaces operating in TAP mode now can feed packets to the ODP
classifier the same as other pktio modes can do.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_performance_improvements_2">Performance Improvements</h3>
<div class="sect3">
<h4 id="_burst_mode_buffer_allocation">Burst-mode buffer allocation</h4>
<div class="paragraph">
<p>The scheduler and pktio components have been reworked to use burst-mode
buffer allocation/deallocation, yielding a measurable performance gain in
almost all cases.</p>
</div>
</div>
<div class="sect3">
<h4 id="_burst_mode_queue_operations">Burst-mode queue operations</h4>
<div class="paragraph">
<p>ODP queues internally now attempt to use burst-mode enq/deq operations to
accelerate performance where applicable.</p>
</div>
</div>
<div class="sect3">
<h4 id="_ring_based_scheduler_priority_queues">Ring-based Scheduler Priority Queues</h4>
<div class="paragraph">
<p>The ODP scheduler has been enhanced to use ring-based priority queues, resulting
in significantly better scalability in many core environments.</p>
</div>
</div>
<div class="sect3">
<h4 id="_github_automation_support">GitHub Automation Support</h4>
<div class="paragraph">
<p>ODP now supports the Travis framework needed to trigger CI automation in
conjunction with GitHub. This support is considered experimental for now.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_examples">Examples</h3>
<div class="sect3">
<h4 id="_new_l3fwd_example">New <code>l3fwd</code> Example</h4>
<div class="paragraph">
<p>A new example application is provided that illustrates use
of ODP for simple Layer 3 forwarding across multiple interfaces.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_documentation_2">Documentation</h3>
<div class="sect3">
<h4 id="_pure_api_documentation">Pure API Documentation</h4>
<div class="paragraph">
<p>ODP now generates "pure" (implementation independent) doxygen documentation in
addition to the specific documentation for the odp-linux implementation. The
pure version is applicable to any ODP implementation as it simply describes
the ODP API specification. Implementation-specific versions of this
documentation describe both the APIs as well as specifics concerning typedefs,
enums, etc. This should help clarify what aspects of ODP are platform
independent.</p>
</div>
</div>
<div class="sect3">
<h4 id="_clarify_odp_thread_definition">Clarify ODP Thread Definition</h4>
<div class="paragraph">
<p>The definition of an ODP thread in odp-linux has been clarified to specify that
for this implementation ODP threads are Linux pthreads or Linux processes.
Currently threads as processes is considered experimental in odp-linux.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_bug_fixes_15">Bug Fixes</h3>
<div class="paragraph">
<p>Numerous refinements have been incorporated to make
validation tests more robust in API coverage as well as correcting corner
cases in the implementation of many ODP APIs. Notable fixes include:</p>
</div>
<div class="sect3">
<h4 id="_bug_2316"><a href="https://bugs.linaro.org/show_bug.cgi?id=2316">Bug 2316</a></h4>
<div class="paragraph">
<p><code>ODP_TIMEOUT_INVALID</code> is now defined consistently with other pool elements so
the restriction on using Pool 0 as a timer pool is removed.</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_2310"><a href="https://bugs.linaro.org/show_bug.cgi?id=2310">Bug 2310</a></h4>
<div class="paragraph">
<p>The <code>odp_packet_copy()</code> API now correctly handles user areas between pools that
are configured with different sized per-packet user area definitions.</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_2571"><a href="https://bugs.linaro.org/show_bug.cgi?id=2571">Bug 2571</a></h4>
<div class="paragraph">
<p>Corrects the implementation of AES GCM decryption in the ODP crypto API.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_known_issues_11">Known Issues</h3>
<div class="sect3">
<h4 id="_bug_2309"><a href="https://bugs.linaro.org/show_bug.cgi?id=2309">Bug 2309</a></h4>
<div class="paragraph">
<p>The Timer validation test fails sporadically in environments with high core
counts.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_opendataplane_1_11_0_0">OpenDataPlane (1.11.0.0)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>ODP v1.11.0 is the base tag and branch for the Monarch LTS (Long Term Support)
release of ODP.</p>
</div>
<div class="sect2">
<h3 id="_new_features_8">New Features</h3>
<div class="sect3">
<h4 id="_apis_14">APIs</h4>
<div class="paragraph">
<p>As part of the final Monarch LTS API set, a minor change to the
<code>odp_tm_egress_t</code> struct was made to better reflect the capabilities of
SoC platforms targeting Monarch support. This change adds the boolean
<code>egress_fcn_supported</code> that indicates whether TM  systems support an egress
function. In addition, each TM system is now associated with a PktIO rather
than a PktOUT queue. This struct is input to the <code>odp_tm_create()</code> API and
output from the <code>odp_tm_find()</code> API.</p>
</div>
</div>
<div class="sect3">
<h4 id="_strict_priority_sp_scheduler">Strict Priority (SP) Scheduler</h4>
<div class="paragraph">
<p>Building on the modular scheduler framework introduced in v1.10.1.0, An
alternate Strict Priority (SP) scheduler is now available. The SP scheduler
is selected when ODP is configured with the <code>--enable_schedule_sp</code> option.</p>
</div>
<div class="paragraph">
<p>The SP scheduler is designed to favor low-latency processing of high priority
work at the expense of throughput. This is considered experimental code at
this point and should be treated as such by those wishing to use it.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_bug_fixes_16">Bug Fixes</h3>
<div class="sect3">
<h4 id="_scheduler_pktio_cleanup">Scheduler PktIO Cleanup</h4>
<div class="paragraph">
<p>The scheduler now properly cleans up PktIOs operating in SCHEDULE mode following
<code>odp_pktio_close()</code> calls. This resolves
<a href="https://bugs.linaro.org/show_bug.cgi?id=2301">Bug 2301</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_chksum_routine_c_conformance">Chksum Routine C++ conformance</h4>
<div class="paragraph">
<p>The odph_chksum() helper routine is now C++ conformant. This resolves
<a href="https://bugs.linaro.org/show_bug.cgi?id=2302">Bug 2302</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_user_area_copying">User Area Copying</h4>
<div class="paragraph">
<p>The <code>odp_packet_copy()</code> API now copies the packet user area as part of its
processing and the packet validation test has been enhanced to verify that this
is done properly. This resolves
<a href="https://bugs.linaro.org/show_bug.cgi?id=2310">Bug 2310</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_use_of_pool_0_as_a_timeout_pool">Use of Pool 0 as a Timeout Pool</h4>
<div class="paragraph">
<p>The internal definition of <code>ODP_TIMEOUT_INVALID</code> was changed in <code>odp-linux</code> to
enable the use of Pool 0 as a timeout pool. This resolves
<a href="https://bugs.linaro.org/show_bug.cgi?id=2316">Bug 2316</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_packaging">Packaging</h3>
<div class="sect3">
<h4 id="_libodphelper">libodphelper</h4>
<div class="paragraph">
<p>To facilitate API tracking, <code>libodphelper.so</code> has been split out from
<code>libodp.so</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_helper_dependencies">Helper dependencies</h4>
<div class="paragraph">
<p>To avoid circular dependencies that cause issues when packaging ODP as a
shared library, the <code>odp-linux</code> implementation no longer makes and use of
the ODP helper library.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_performance_2">Performance</h3>
<div class="paragraph">
<p>Performance enhancements in the <code>odp-linux</code> reference implementation have been
made in PktIO routines and the packet classifier.</p>
</div>
</div>
<div class="sect2">
<h3 id="_general_cleanup">General Cleanup</h3>
<div class="paragraph">
<p>General cleanup throughout has resulted in adding proper termination calls to
ODP examples as well as miscellaneous Doxygen corrections.  Additionally, the
<code>odp-linux</code> code base has been cleaned up by removing "To Dos" as well as
extraneous <code>#includes</code> for extra C headers and dependencies on linux headers
for improved portability.</p>
</div>
</div>
<div class="sect2">
<h3 id="_validation">Validation</h3>
<div class="sect3">
<h4 id="_queue_capability_test">Queue Capability Test</h4>
<div class="paragraph">
<p>The Queue validation test now properly exercises the <code>odp_queue_capability()</code>
API and attempts to create the maximum reported number of supported queues.</p>
</div>
</div>
<div class="sect3">
<h4 id="_platform_tests">Platform Tests</h4>
<div class="paragraph">
<p>The platform-specific tests have been moved from <code>platform/linux-generic/test</code>
to <code>test/platform/linux-generc</code> so that all tests are now found under a
single <code>test</code> directory.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_examples_2">Examples</h3>
<div class="paragraph">
<p>The ODP <code>examples</code> directory has been cleaned up and numerous corrections to
existing examples have been made to add proper termination paths, etc. In
addition, a new "hello world" example (<code>odp_hello.c</code>) has been added that
illustrates the basic startup and shutdown steps needed for all ODP
applications. As a simple stand-alone application is is also a good initial
build tests for new ODP implementations.</p>
</div>
</div>
<div class="sect2">
<h3 id="_documentation_3">Documentation</h3>
<div class="sect3">
<h4 id="_pure_api_guide">Pure API Guide</h4>
<div class="paragraph">
<p>The Doxygen API guide has been split so that both a "pure" version that is
platform-independent and retains unresolved ODP abstract types as well as
an implementation-specific version (for <code>odp-linux</code>) that shows
platform-specific <code>typedef</code> and <code>enum</code> values.</p>
</div>
</div>
<div class="sect3">
<h4 id="_implementation_guide_improvements">Implementation Guide Improvements</h4>
<div class="paragraph">
<p>The <em>ODP Implementer&#8217;s Guide</em> has been enhanced with a section on
implementation considerations, including issues surrounding the definition of
Application Binary Interfaces (ABIs).</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_known_issues_12">Known Issues</h3>
<div class="sect3">
<h4 id="_bug_2309_2"><a href="https://bugs.linaro.org/show_bug.cgi?id=2309">Bug 2309</a></h4>
<div class="paragraph">
<p>The timer validation tests have seen occasional failures when run on systems
containing a larger number of CPUs (typically 24 or more).</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_2386"><a href="https://bugs.linaro.org/show_bug.cgi?id=2386">Bug 2386</a></h4>
<div class="paragraph">
<p>ODP cannot be compiled using the -m32 option to generate 32-bit code on a
64-bit platform when using GCC 4.9 (the default GCC found in Ubuntu 15.04).
This is due to a known bug in GCC 4.9 and is closed as a permanent restriction.</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_2402"><a href="https://bugs.linaro.org/show_bug.cgi?id=2402">Bug 2402</a></h4>
<div class="paragraph">
<p>Doxygen generates a warning for <code>ODP_BIG_ENDIAN_BITFIELD</code> when compiling on
little endian systems. A similar warning for <code>ODP_LITTLE_ENDIAN_BITFIELD</code> is
issued when compiling on big endian systems.</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_2444"><a href="https://bugs.linaro.org/show_bug.cgi?id=2444">Bug 2444</a></h4>
<div class="paragraph">
<p>The traffic manager cannot be used with two PktIOs simultaneously. That is,
<code>odp-linux</code> does not properly support applications that create more than one
TM system. This is a bug in the <code>odp-linux</code> implementation that will be
corrected. It is not a limit of the architecture or other ODP implementations.</p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_2449"><a href="https://bugs.linaro.org/show_bug.cgi?id=2449">Bug 2449</a></h4>
<div class="paragraph">
<p>Packet queue pool causes out-of-bounds accesses. This is closely related
to <a href="https://bugs.linaro.org/show_bug.cgi?id=2444">Bug 2444</a> and reflects that
<code>odp-linux</code> does not properly support multiple TM systems. This is scheduled
for correction in the first maintenance update for this ODP implementation.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_opendataplane_1_10_1_0">OpenDataPlane (1.10.1.0)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_new_features_9">New Features</h3>
<div class="sect3">
<h4 id="_apis_15">APIs</h4>
<div class="paragraph">
<p>ODP v1.10.1.0 is a maintenance release and as such introduces no new APIs or
other changes that might result in application source incompatibility with
v1.10.0.0.</p>
</div>
</div>
<div class="sect3">
<h4 id="_modular_scheduler">Modular Scheduler</h4>
<div class="paragraph">
<p>The ODP scheduler included as part of the <code>odp-linux</code> reference implementation
has been modularized to support a "pluggable" architecture that will permit
the easy introduction of alternate scheduler implementations that permit
both easy experimentation as well as alternate scheduling models that are
tuned to specific application workloads (<em>i.e.,</em> a strict priority scheduler
for latency-sensitive workloads). Included in this release is the just the
foundation and alternate schedulers are expected to be added in future ODP
releases.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_packaging_2">Packaging</h3>
<div class="sect3">
<h4 id="_rename_of_linux_generic_to_odp_linux">Rename of <code>linux-generic</code> to <code>odp-linux</code></h4>
<div class="paragraph">
<p>While the platform name within the ODP git repository remains
<code>linux-generic</code>, the package name of this reference implementation has been
changed to <code>odp-linux</code> to better reflect that this is an implementation of
ODP that is dependent only on the Linux kernel and is intended to be runnable
on any Linux distribution. All ODP documentation has been changed to reflect
this name change.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_helpers_4">Helpers</h3>
<div class="sect3">
<h4 id="_introduction_of_agnostic_threading_support">Introduction of "agnostic" threading support</h4>
<div class="paragraph">
<p>The current helper APIs for linux pthreads (<code>odph_linux_pthread_create()</code>, etc.)
and processes (<code>odph_linux_process_fork()</code>, etc.) have been augmented with a
new "agnostic" set of helper routines for general ODP thread management.</p>
</div>
<div class="paragraph">
<p><code>odph_odpthreads_create()</code> and <code>odph_odpthreads_join()</code> are now the preferred
helpers to use for creating and joining threads that may be implemented as
<em>either</em> pthreads or Linux processes. Although currently ODP threads in
Monarch are assumed to share the same (single) address space, this change is
to permit evolution towards multi-address space (<em>i.e.,</em> process oriented)
threading models without requiring application and/or validation test changes.</p>
</div>
<div class="paragraph">
<p>The various ODP examples and validation tests that make use of threading have
all been changed to new these new helper APIs.</p>
</div>
</div>
<div class="sect3">
<h4 id="_thread_affinity_apis">Thread affinity APIs</h4>
<div class="paragraph">
<p>As part of the new "agnostic" threading support, two additional helper APIs
(<code>odph_odpthread_getaffinity()</code> and <code>odph_odpthread_setaffinity()</code>) have been
added to permit easy management of thread affinity.</p>
</div>
<div class="paragraph">
<p>The CUnit framework used by the ODP validation suite has been changed to set
the affinity of the initial thread to the first available control CPU. This
avoids inconsistencies in a number of timing tests.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_bug_fixes_17">Bug Fixes</h3>
<div class="paragraph">
<p>As a maintenance release, numerous bugs have been fixed in the <code>odp-linux</code>
reference implementation in areas such as platform support (particularly on
32-bit systems), compiler support (clang), C++ compatibility, and other
cleanup items. Highlights include:</p>
</div>
<div class="sect3">
<h4 id="_32_bit_platform_support">32-bit platform support</h4>
<div class="paragraph">
<p>The <code>configure</code> utility now correctly identifies and sets variables needed for
proper compilation on 32-bit x86 systems. In addition the Traffic Manager
now executes properly on 32-bit systems.</p>
</div>
</div>
<div class="sect3">
<h4 id="_timer_improvements">Timer improvements</h4>
<div class="paragraph">
<p>The <code>odp_timer_t</code> abstract type is now strongly typed for consistency with
other ODP types, and the <code>odp_timer_to_u64()</code> and <code>odp_timer_pool_to_u64()</code>
APIs are now properly implemented. In addition, an issue with compiling the
timer routines on 32-bit systems using clang was resolved.</p>
</div>
</div>
<div class="sect3">
<h4 id="_scheduler_fairness">Scheduler fairness</h4>
<div class="paragraph">
<p>The default scheduler has been improved to avoid starvation and increase
fairness when running with a limited number of threads or CPUs.</p>
</div>
</div>
<div class="sect3">
<h4 id="_128_bit_atomics">128-bit atomics</h4>
<div class="paragraph">
<p>The <code>-mcx16</code> compiler option is now properly identified and used to support
128-bit atomics on systems that support these operations. This leads to
increased efficiency in the implementation of both timers as well as other
atomic operations.</p>
</div>
</div>
<div class="sect3">
<h4 id="_use_of_hugepages">Use of hugepages</h4>
<div class="paragraph">
<p>In systems that support multiple hugepage sizes, the default hugepage size is
now reported properly by the <code>odp_sys_huge_page_size()</code> API.</p>
</div>
</div>
<div class="sect3">
<h4 id="_coverity_and_valgrind_issue_cleanup">Coverity and Valgrind issue cleanup</h4>
<div class="paragraph">
<p>Numerous issues identified by the Coverity scan tool have been cleaned up
and resolved, leading to improved robustness in the <code>odp-linux</code> reference
implementation. In addition, several memory leaks identified by the valgrind
tool have been fixed.</p>
</div>
</div>
<div class="sect3">
<h4 id="_validation_test_resource_checks">Validation test resource checks</h4>
<div class="paragraph">
<p>The Traffic Manager validation test has certain sub-tests that require a
minimum of 2 CPUs to operate properly. These tests are now skipped with a
warning when run on uniprocessor systems.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_performance_3">Performance</h3>
<div class="paragraph">
<p>Performance enhancements in the <code>odp-linux</code> reference implementation have been
made in packet processing, classification, and pktio, leading to increased
observed throughput and packet handling rates.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_3">Examples</h3>
<div class="paragraph">
<p>A new <code>l2fwd_simple</code> example has been added that does simple Layer 2 forwarding.</p>
</div>
</div>
<div class="sect2">
<h3 id="_documentation_4">Documentation</h3>
<div class="sect3">
<h4 id="_switch_from_asciidoc_to_asciidoctor">Switch from AsciiDoc to AsciiDoctor</h4>
<div class="paragraph">
<p>To get better formatting capabilities and future extensibility the ODP user
documentation system has been switched from <a href="http://asciidoc.org">AsciiDoc</a> to
<a href="http://asciidoctor.org">AsciiDoctor</a>. There are a handful of notable changes as
a result of this. Those submitting documentation patches should be aware of
the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>monospace font</code> is now indicated by demarking the text with backticks (`)
rather than plus signs (+).</p>
</li>
<li>
<p>Callouts are now indicated by C++-style double slash comments (// &lt;1&gt;)
instead of C-style comments (/* &lt;1&gt; */). So, for example writing</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>[source,c]
----
...some great code deserving a callout // &lt;1&gt;
----
&lt;1&gt; This is an example of a callout</pre>
</div>
</div>
<div class="paragraph">
<p>yields:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>...some great code deserving a callout <i class="conum" data-value="1"></i><b>(1)</b></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This is an example of a callout</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Note that this change only affects user documentation. Code documentation
still uses <a href="http://doxygen.org">Doxygen</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_image_cleanup">Image Cleanup</h4>
<div class="paragraph">
<p>The images in the user guide have been trimmed to fit the page better. In
addition, many new images have been added to better illustrate ODP API usage.</p>
</div>
</div>
<div class="sect3">
<h4 id="_additional_user_documentation_for_monarch_apis">Additional User Documentation for Monarch APIs</h4>
<div class="paragraph">
<p>The <strong>ODP User&#8217;s Guide</strong> has been updated to include new sections documenting
the use of the full Monarch packet APIs as well as the Timer APIs. In
addition, the crypto, classification, and traffic manager API documentation
has been improved to cover all of the latest Monarch features, and an
introductory section on overall ODP packet flow architecture has been added.</p>
</div>
</div>
<div class="sect3">
<h4 id="_helper_documentation">Helper Documentation</h4>
<div class="paragraph">
<p>The ODP Helper library now has its own document that describes these additional
functions of use to ODP applications and validation tests.</p>
</div>
</div>
<div class="sect3">
<h4 id="_other_documentation">Other documentation</h4>
<div class="paragraph">
<p>The Process Guide, FAQ, CONTRIBUTING, and CHANGELOG files have been reworked
for the new AsciiDoctor structure, leading to a more uniform method of
presenting ODP support documentation. In addition, an option for generating
both a "pure" ODP API document that defines the APIs in their
implementation-independent forms as well as their implementation-dependent
forms for the <code>odp-linux</code> reference implementation is now available.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_known_issues_13">Known Issues</h3>
<div class="sect3">
<h4 id="_bug_2301"><a href="https://bugs.linaro.org/show_bug.cgi?id=2301">Bug 2301</a></h4>
<div class="paragraph">
<p>The scheduler does not remove PKTIN queues following <code>odp_pktio_close()</code></p>
</div>
</div>
<div class="sect3">
<h4 id="_bug_2309_3"><a href="https://bugs.linaro.org/show_bug.cgi?id=2309">Bug 2309</a></h4>
<div class="paragraph">
<p>The timer validation tests have seen occasional failures when run on systems
containing a larger number of CPUs (typically 24 or more).</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_opendataplane_1_10_0_0">OpenDataPlane (1.10.0.0)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_new_features_10">New Features</h3>
<div class="sect3">
<h4 id="_general_2">General</h4>
<div class="ulist">
<ul>
<li>
<p>Move to capabilite structures: The classification, crypto, pktio, pool,
queue, shared memory, and traffic manager areas all add new APIs to query
implementation-specific capability limits for enhanced program portability.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_classification_2">Classification</h4>
<div class="ulist">
<ul>
<li>
<p>Addition of a structure that defines system level classification capability</p>
</li>
<li>
<p>Addition of range PMRs to complement the existing value PMRs to permit
application to specify classification rules over a range of values.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_cryptography">Cryptography</h4>
<div class="ulist">
<ul>
<li>
<p>Provides a way to get the available cipher and authentication algorithms.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_debug_3">Debug</h4>
<div class="ulist">
<ul>
<li>
<p>Adds the  ODP_STATIC_ASSERT() API to permit compile-time assertions.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_packet_20">Packet</h4>
<div class="ulist">
<ul>
<li>
<p>Rename and add new packet copy and move functionality.</p>
</li>
<li>
<p>Add packet prefetch API for performance optimization.</p>
</li>
<li>
<p>New APIs to permit packet headroom and tailroom to be extended to additional
segments or truncated as needed.</p>
</li>
<li>
<p>Align an area of packet data (e.g. IP/UDP headers) so that it is contiguous in
memory and starts in a specified minimum alignment.</p>
</li>
<li>
<p>Add packet time stamp metadata support.</p>
</li>
<li>
<p>Add packet input index metadata support to allow application context to
be anchored from the associated interface that received the packet.</p>
</li>
<li>
<p>Deprecation and removal of segment-level buffer APIs that are now
superseded by additional packet-level manipulation APIs discussed above.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_packet_io_24">Packet io</h4>
<div class="ulist">
<ul>
<li>
<p>Replaced config definition for maximum pktio entries with maximum packet IO
index call</p>
</li>
<li>
<p>Added the classify_enable bit to the odp_pktin_queue_param_t that allows
applications to explicitly control which pktin queues are subject to full
classifier support.</p>
</li>
<li>
<p>Addition of pktin configuration options to control packet timestamping
and checksum validation processing.</p>
</li>
<li>
<p>Addition of pktout configuration options to control packet checksum
offload processing.</p>
</li>
<li>
<p>Add the ability to query (via capabilities) whether a pktio interface
supports operating in loopback mode and if so to enable/disable this
mode of operation.</p>
</li>
<li>
<p>Round out the polling APIs be adding the ability to receive packets in
poll mode from one or more pktin queues with timeout.</p>
</li>
<li>
<p>Add the ability to set the pktio interface index for ease of setting up
application context areas associated with each pktio.</p>
</li>
<li>
<p>Add the ability to inqure the timestamp resolution associated with
pktio interfaces that support packet timestamping.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_queue_7">Queue</h4>
<div class="ulist">
<ul>
<li>
<p>Add a queue capability API to query system-wide queue capabilities and limits.</p>
</li>
<li>
<p>Extend queue context with an explicit data length parameter that serves
as a performance hint for the amount of context to prefetch when the
scheduler selects an event from a scheduled queue.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_scheduler_12">Scheduler</h4>
<div class="ulist">
<ul>
<li>
<p>Add the ability to query information about a defined scheduler group</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_shared_memory_8">Shared Memory</h4>
<div class="ulist">
<ul>
<li>
<p>Add a capability inquiry API to obtain implementation shared memory limits.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_traffic_manager_16">Traffic Manager</h4>
<div class="ulist">
<ul>
<li>
<p>Add a capability inquiry API to obtain implementation traffic mngr limits.</p>
</li>
<li>
<p>Split TOS marking into two separate calls.</p>
</li>
<li>
<p>Add new APIs to support VLAN, ECN, and drop precedence marking.</p>
</li>
<li>
<p>Add destroy APIs for shapers, scheduler profiles, thresholds, WRED profiles,
TM queues, and TM nodes for symmetry and completeness to allow applications
to terminate gracefully without resource leakage.</p>
</li>
<li>
<p>Add the ability to disconnect TM queues from their fanouts.</p>
</li>
<li>
<p>Add TM node contexts to permit applications to anchor user context areas
to TM nodes.</p>
</li>
<li>
<p>Add the ability to query info about TM node fanins and TM queues.</p>
</li>
<li>
<p>Deprecate and remove the odp_tm_periodic_update() API</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_utilitieshelpers">Utilities/Helpers</h4>
<div class="ulist">
<ul>
<li>
<p>More complete and correct checksum implementation</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_known_issues_14">Known Issues</h3>

</div>
</div>
</div>
<div class="sect1">
<h2 id="_opendataplane_1_9_0_0">OpenDataPlane (1.9.0.0)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_new_features_11">New Features</h3>
<div class="ulist">
<ul>
<li>
<p>A focus has been made on improving the packaging support of ODP for
distributions such as Debian.</p>
</li>
<li>
<p>Improved creation of source tar ball and packaging scenarios moved to
<a href="https://git.linaro.org/lng/odp-packaging.git" class="bare">https://git.linaro.org/lng/odp-packaging.git</a></p>
</li>
<li>
<p>Renamed libodp to libodp-linux</p>
</li>
<li>
<p>Removed all internal functions from leaking through the libodp-linux</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_known_issues_15">Known Issues</h3>
<div class="paragraph">
<p>Time and Traffic Manager validation tests sometimes fail on heavy loaded
systems. This behaviour depends on time accuracy measurements, which depends
on system load.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2025-10-15 12:30:46 UTC
</div>
</div>
</body>
</html>